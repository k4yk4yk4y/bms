<div class="row">
  <div class="col-md-6">
    <div class="card">
      <div class="card-header">
        <h6 class="card-title mb-0">Event Configuration</h6>
      </div>
      <div class="card-body">
        <dl class="row">
          <dt class="col-sm-5">Event Type:</dt>
          <dd class="col-sm-7">
            <span class="badge bg-info"><%= bonus.event&.humanize %></span>
          </dd>
          
          <dt class="col-sm-5">Rewards Count:</dt>
          <dd class="col-sm-7"><%= bonus.all_rewards.count %></dd>
          
          <dt class="col-sm-5">Reward Types:</dt>
          <dd class="col-sm-7">
            <% if bonus.reward_types.any? %>
              <% bonus.reward_types.each do |type| %>
                <span class="badge bg-success me-1"><%= type.humanize %></span>
              <% end %>
            <% else %>
              <span class="text-muted">No rewards configured</span>
            <% end %>
          </dd>
        </dl>
      </div>
    </div>
  </div>
  
  <div class="col-md-6">
    <div class="card">
      <div class="card-header">
        <h6 class="card-title mb-0">Reward Details</h6>
      </div>
      <div class="card-body">
        <% if bonus.all_rewards.any? %>
          <% if bonus.bonus_rewards.any? %>
            <h6>Cash Bonuses:</h6>
            <% bonus.bonus_rewards.each_with_index do |reward, index| %>
              <div class="mb-2">
                <span class="badge bg-secondary me-1">#<%= index + 1 %></span>
                <%= reward.reward_type.humanize %>: 
                <% if reward.has_currency_amounts? %>
                  <%= reward.formatted_currency_amounts %>
                <% else %>
                  <%= reward.formatted_amount %>
                <% end %>
              </div>
            <% end %>
          <% end %>
          
          <% if bonus.freespin_rewards.any? %>
            <h6>Free Spins:</h6>
            <% bonus.freespin_rewards.each_with_index do |reward, index| %>
              <div class="mb-3">
                <div class="mb-2">
                  <span class="badge bg-secondary me-1">#<%= index + 1 %></span>
                  <strong>Количество фриспинов: <%= reward.spins_count %></strong>
                </div>
                
                <% if reward.has_game_restrictions? %>
                  <div class="mb-2">
                    <strong>Игры:</strong><br>
                    <% reward.games.each do |game| %>
                      <span class="badge bg-primary me-1 mb-1"><%= game %></span>
                    <% end %>
                  </div>
                <% end %>
                
                <% if reward.has_currency_freespin_bet_levels? %>
                  <div class="ms-2">
                    <small class="text-muted">Размер ставки по валютам:</small><br>
                    <% reward.currency_freespin_bet_levels.each do |currency, amount| %>
                      <span class="badge bg-light text-dark me-1"><%= currency %>: <%= amount %></span>
                    <% end %>
                  </div>
                <% else %>
                  <div class="ms-2">
                    <small class="text-muted">Размер ставки не указан</small>
                  </div>
                <% end %>
              </div>
            <% end %>
          <% end %>
          
          <% if bonus.bonus_buy_rewards.any? %>
            <h6>Bonus Buy:</h6>
            <% bonus.bonus_buy_rewards.each_with_index do |reward, index| %>
              <div class="mb-2">
                <span class="badge bg-secondary me-1">#<%= index + 1 %></span>
                Покупка бонуса: <%= reward.formatted_buy_amount %>
                <% if reward.multiplier.present? %>
                  (x<%= reward.multiplier %>)
                <% end %>
              </div>
            <% end %>
          <% end %>
          
          <% if bonus.freechip_rewards.any? %>
            <h6>Free Chips:</h6>
            <% bonus.freechip_rewards.each_with_index do |reward, index| %>
              <div class="mb-2">
                <span class="badge bg-secondary me-1">#<%= index + 1 %></span>
                Фричипы: <%= reward.chips_count %> x <%= reward.formatted_chip_value %>
                <span class="text-muted">(Итого: <%= reward.formatted_total_value %>)</span>
              </div>
            <% end %>
          <% end %>
          
          <% if bonus.material_prize_rewards.any? %>
            <h6>Material Prizes:</h6>
            <% bonus.material_prize_rewards.each_with_index do |reward, index| %>
              <div class="mb-2">
                <span class="badge bg-secondary me-1">#<%= index + 1 %></span>
                <strong><%= reward.prize_name %></strong>
                <% if reward.has_monetary_value? %>
                  <span class="text-muted">(<%= reward.formatted_prize_value %>)</span>
                <% end %>
              </div>
            <% end %>
          <% end %>
          
          <% if bonus.comp_point_rewards.any? %>
            <h6>Comp Points:</h6>
            <% bonus.comp_point_rewards.each_with_index do |reward, index| %>
              <div class="mb-2">
                <span class="badge bg-secondary me-1">#<%= index + 1 %></span>
                <%= reward.formatted_points_amount %>
                <% if reward.multiplier.present? %>
                  (x<%= reward.multiplier %>)
                <% end %>
              </div>
            <% end %>
          <% end %>
          
          <% if bonus.bonus_code_rewards.any? %>
            <h6>Bonus Codes:</h6>
            <% bonus.bonus_code_rewards.each_with_index do |reward, index| %>
              <div class="mb-2">
                <span class="badge bg-secondary me-1">#<%= index + 1 %></span>
                <strong><%= reward.title %></strong>
                <% if reward.set_bonus_code.present? %>
                  <code><%= reward.set_bonus_code %></code>
                <% end %>
              </div>
            <% end %>
          <% end %>
        <% else %>
          <p class="text-muted">No rewards configured yet.</p>
          <% if bonus.persisted? %>
            <a href="#" class="btn btn-primary btn-sm">Add Rewards</a>
          <% end %>
        <% end %>
      </div>
    </div>
  </div>
</div>