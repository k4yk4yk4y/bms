<% content_for :title, "Bonus Template Details" %>

<div class="container-fluid">
  <div class="row">
    <div class="col-12">
      <div class="d-flex justify-content-between align-items-center mb-4">
        <h1 class="h3 mb-0">
          <i class="fas fa-layer-group"></i> Bonus Template Details
        </h1>
        <div class="btn-group" role="group">
          <%= link_to edit_settings_template_path(@bonus_template), class: "btn btn-warning" do %>
            <i class="fas fa-edit"></i> Edit
          <% end %>
          <%= link_to settings_templates_path, class: "btn btn-outline-secondary" do %>
            <i class="fas fa-arrow-left"></i> Back to Templates
          <% end %>
        </div>
      </div>

      <div class="row">
        <div class="col-md-8">
          <div class="card">
            <div class="card-header">
              <h5 class="card-title mb-0">Template Information</h5>
            </div>
            <div class="card-body">
              <div class="row">
                <div class="col-md-6">
                  <dl class="row">
                    <dt class="col-sm-4">Name:</dt>
                    <dd class="col-sm-8"><strong><%= @bonus_template.name %></strong></dd>

                    <dt class="col-sm-4">DSL Tag:</dt>
                    <dd class="col-sm-8"><span class="badge bg-info"><%= @bonus_template.dsl_tag %></span></dd>

                    <dt class="col-sm-4">Project:</dt>
                    <dd class="col-sm-8"><span class="badge bg-secondary"><%= @bonus_template.project %></span></dd>

                    <dt class="col-sm-4">Event:</dt>
                    <dd class="col-sm-8"><span class="badge bg-primary"><%= @bonus_template.event.humanize %></span></dd>
                  </dl>
                </div>
                <div class="col-md-6">
                  <dl class="row">
                    <dt class="col-sm-4">Currencies:</dt>
                    <dd class="col-sm-8"><%= @bonus_template.formatted_currencies || "All currencies" %></dd>

                    <dt class="col-sm-4">Groups:</dt>
                    <dd class="col-sm-8"><%= @bonus_template.formatted_groups || "N/A" %></dd>
                  </dl>
                </div>
              </div>

              <% if @bonus_template.description.present? %>
                <div class="mt-3">
                  <dt>Description:</dt>
                  <dd><%= @bonus_template.description %></dd>
                </div>
              <% end %>
            </div>
          </div>

          <div class="card mt-4">
            <div class="card-header">
              <h5 class="card-title mb-0">Financial Parameters</h5>
            </div>
            <div class="card-body">
              <div class="row">
                <div class="col-md-6">
                  <dl class="row">
                    <dt class="col-sm-6">Minimum Deposit:</dt>
                    <dd class="col-sm-6"><%= @bonus_template.minimum_deposit || "N/A" %></dd>

                    <dt class="col-sm-6">Wager:</dt>
                    <dd class="col-sm-6"><%= @bonus_template.wager || "N/A" %></dd>

                    <dt class="col-sm-6">Max Winnings:</dt>
                    <dd class="col-sm-6"><%= @bonus_template.maximum_winnings || "N/A" %></dd>
                  </dl>
                </div>
                <div class="col-md-6">
                  <dl class="row">
                    <dt class="col-sm-6">No More:</dt>
                    <dd class="col-sm-6"><%= @bonus_template.formatted_no_more %></dd>

                    <dt class="col-sm-6">Totally No More:</dt>
                    <dd class="col-sm-6"><%= @bonus_template.formatted_totally_no_more %></dd>
                  </dl>
                </div>
              </div>

              <% if @bonus_template.has_minimum_deposit_requirements? %>
                <div class="mt-3">
                  <dt>Currency Minimum Deposits:</dt>
                  <dd><%= @bonus_template.formatted_currency_minimum_deposits %></dd>
                </div>
              <% end %>
            </div>
          </div>
        </div>

        <div class="col-md-4">
          <div class="card">
            <div class="card-header">
              <h5 class="card-title mb-0">Actions</h5>
            </div>
            <div class="card-body">
              <div class="d-grid gap-2">
                <%= link_to new_bonus_path(template_id: @bonus_template.id), class: "btn btn-success" do %>
                  <i class="fas fa-plus"></i> Create Bonus from Template
                <% end %>
                
                <%= link_to edit_settings_template_path(@bonus_template), class: "btn btn-warning" do %>
                  <i class="fas fa-edit"></i> Edit Template
                <% end %>
                
                <%= button_to settings_template_path(@bonus_template), 
                    method: :delete, 
                    data: { confirm: "Are you sure you want to delete this template?" },
                    class: "btn btn-danger w-100",
                    form: { style: "display: inline; width: 100%;" } do %>
                  <i class="fas fa-trash"></i> Delete Template
                <% end %>
              </div>
            </div>
          </div>

          <div class="card mt-3">
            <div class="card-header">
              <h5 class="card-title mb-0">Template Statistics</h5>
            </div>
            <div class="card-body">
              <dl class="row">
                <dt class="col-sm-6">Created:</dt>
                <dd class="col-sm-6"><%= @bonus_template.created_at.strftime("%B %d, %Y") %></dd>

                <dt class="col-sm-6">Updated:</dt>
                <dd class="col-sm-6"><%= @bonus_template.updated_at.strftime("%B %d, %Y") %></dd>
              </dl>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
