  [1m[35m (3.7ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY) /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL) /*application='MbsPromoRetention'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='MbsPromoRetention'*/[0m
Started GET "/" for ::1 at 2025-07-19 19:50:17 +0300
  [1m[36mActiveRecord::SchemaMigration Load (1.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='MbsPromoRetention'*/[0m
Processing by Rails::WelcomeController#index as HTML
  Rendering /home/pasha/.rbenv/versions/3.4.2/lib/ruby/gems/3.4.0/gems/railties-8.0.2/lib/rails/templates/rails/welcome/index.html.erb
  Rendered /home/pasha/.rbenv/versions/3.4.2/lib/ruby/gems/3.4.0/gems/railties-8.0.2/lib/rails/templates/rails/welcome/index.html.erb (Duration: 0.4ms | GC: 0.0ms)
Completed 200 OK in 37ms (Views: 8.4ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


Started GET "/" for ::1 at 2025-07-19 19:51:46 +0300
Processing by Rails::WelcomeController#index as HTML
  Rendering /home/pasha/.rbenv/versions/3.4.2/lib/ruby/gems/3.4.0/gems/railties-8.0.2/lib/rails/templates/rails/welcome/index.html.erb
  Rendered /home/pasha/.rbenv/versions/3.4.2/lib/ruby/gems/3.4.0/gems/railties-8.0.2/lib/rails/templates/rails/welcome/index.html.erb (Duration: 1.1ms | GC: 0.0ms)
Completed 200 OK in 14ms (Views: 1.9ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


Started GET "/" for ::1 at 2025-07-19 19:51:55 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='MbsPromoRetention'*/[0m
Processing by Rails::WelcomeController#index as HTML
  Rendering /home/pasha/.rbenv/versions/3.4.2/lib/ruby/gems/3.4.0/gems/railties-8.0.2/lib/rails/templates/rails/welcome/index.html.erb
  Rendered /home/pasha/.rbenv/versions/3.4.2/lib/ruby/gems/3.4.0/gems/railties-8.0.2/lib/rails/templates/rails/welcome/index.html.erb (Duration: 1.0ms | GC: 0.0ms)
Completed 200 OK in 30ms (Views: 3.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.3ms)


Started GET "/.well-known/appspecific/com.chrome.devtools.json" for ::1 at 2025-07-19 19:51:59 +0300
  
ActionController::RoutingError (No route matches [GET] "/.well-known/appspecific/com.chrome.devtools.json"):
  
Started GET "/" for ::1 at 2025-07-19 19:52:01 +0300
Processing by Rails::WelcomeController#index as HTML
  Rendering /home/pasha/.rbenv/versions/3.4.2/lib/ruby/gems/3.4.0/gems/railties-8.0.2/lib/rails/templates/rails/welcome/index.html.erb
  Rendered /home/pasha/.rbenv/versions/3.4.2/lib/ruby/gems/3.4.0/gems/railties-8.0.2/lib/rails/templates/rails/welcome/index.html.erb (Duration: 0.5ms | GC: 0.0ms)
Completed 200 OK in 13ms (Views: 1.8ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


Started GET "/.well-known/appspecific/com.chrome.devtools.json" for ::1 at 2025-07-19 19:52:01 +0300
  
ActionController::RoutingError (No route matches [GET] "/.well-known/appspecific/com.chrome.devtools.json"):
  
Started GET "/" for ::1 at 2025-07-19 20:05:23 +0300
Processing by Rails::WelcomeController#index as HTML
  Rendering /home/pasha/.rbenv/versions/3.4.2/lib/ruby/gems/3.4.0/gems/railties-8.0.2/lib/rails/templates/rails/welcome/index.html.erb
  Rendered /home/pasha/.rbenv/versions/3.4.2/lib/ruby/gems/3.4.0/gems/railties-8.0.2/lib/rails/templates/rails/welcome/index.html.erb (Duration: 1.0ms | GC: 0.0ms)
Completed 200 OK in 13ms (Views: 1.9ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.2ms)


Started GET "/.well-known/appspecific/com.chrome.devtools.json" for ::1 at 2025-07-19 20:05:23 +0300
  
ActionController::RoutingError (No route matches [GET] "/.well-known/appspecific/com.chrome.devtools.json"):
  
Started GET "/" for ::1 at 2025-07-19 20:05:35 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='MbsPromoRetention'*/[0m
Processing by Rails::WelcomeController#index as HTML
  Rendering /home/pasha/.rbenv/versions/3.4.2/lib/ruby/gems/3.4.0/gems/railties-8.0.2/lib/rails/templates/rails/welcome/index.html.erb
  Rendered /home/pasha/.rbenv/versions/3.4.2/lib/ruby/gems/3.4.0/gems/railties-8.0.2/lib/rails/templates/rails/welcome/index.html.erb (Duration: 0.4ms | GC: 0.0ms)
Completed 200 OK in 29ms (Views: 3.4ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.4ms)


Started GET "/.well-known/appspecific/com.chrome.devtools.json" for ::1 at 2025-07-19 20:05:35 +0300
  
ActionController::RoutingError (No route matches [GET] "/.well-known/appspecific/com.chrome.devtools.json"):
  
Started GET "/index" for ::1 at 2025-07-19 20:05:39 +0300
  
ActionController::RoutingError (No route matches [GET] "/index"):
  
Started GET "/.well-known/appspecific/com.chrome.devtools.json" for ::1 at 2025-07-19 20:05:39 +0300
  
ActionController::RoutingError (No route matches [GET] "/.well-known/appspecific/com.chrome.devtools.json"):
  
Started GET "/.well-known/appspecific/com.chrome.devtools.json" for ::1 at 2025-07-19 20:05:41 +0300
  
ActionController::RoutingError (No route matches [GET] "/.well-known/appspecific/com.chrome.devtools.json"):
  
Started GET "/.well-known/appspecific/com.chrome.devtools.json" for ::1 at 2025-07-19 20:05:41 +0300
  
ActionController::RoutingError (No route matches [GET] "/.well-known/appspecific/com.chrome.devtools.json"):
  
Started GET "/" for ::1 at 2025-07-19 20:07:57 +0300
Processing by Rails::WelcomeController#index as HTML
  Rendering /home/pasha/.rbenv/versions/3.4.2/lib/ruby/gems/3.4.0/gems/railties-8.0.2/lib/rails/templates/rails/welcome/index.html.erb
  Rendered /home/pasha/.rbenv/versions/3.4.2/lib/ruby/gems/3.4.0/gems/railties-8.0.2/lib/rails/templates/rails/welcome/index.html.erb (Duration: 1.2ms | GC: 0.0ms)
Completed 200 OK in 14ms (Views: 2.0ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


Started GET "/.well-known/appspecific/com.chrome.devtools.json" for ::1 at 2025-07-19 20:07:57 +0300
  
ActionController::RoutingError (No route matches [GET] "/.well-known/appspecific/com.chrome.devtools.json"):
  
Started GET "/" for ::1 at 2025-07-19 20:07:58 +0300
Processing by Rails::WelcomeController#index as HTML
  Rendering /home/pasha/.rbenv/versions/3.4.2/lib/ruby/gems/3.4.0/gems/railties-8.0.2/lib/rails/templates/rails/welcome/index.html.erb
  Rendered /home/pasha/.rbenv/versions/3.4.2/lib/ruby/gems/3.4.0/gems/railties-8.0.2/lib/rails/templates/rails/welcome/index.html.erb (Duration: 3.7ms | GC: 0.0ms)
Completed 200 OK in 15ms (Views: 4.0ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


Started GET "/.well-known/appspecific/com.chrome.devtools.json" for ::1 at 2025-07-19 20:07:58 +0300
  
ActionController::RoutingError (No route matches [GET] "/.well-known/appspecific/com.chrome.devtools.json"):
  
Started GET "/" for ::1 at 2025-07-19 20:08:13 +0300
Processing by Rails::WelcomeController#index as HTML
  Rendering /home/pasha/.rbenv/versions/3.4.2/lib/ruby/gems/3.4.0/gems/railties-8.0.2/lib/rails/templates/rails/welcome/index.html.erb
  Rendered /home/pasha/.rbenv/versions/3.4.2/lib/ruby/gems/3.4.0/gems/railties-8.0.2/lib/rails/templates/rails/welcome/index.html.erb (Duration: 0.1ms | GC: 0.0ms)
Completed 200 OK in 8ms (Views: 0.3ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


Started GET "/.well-known/appspecific/com.chrome.devtools.json" for ::1 at 2025-07-19 20:08:13 +0300
  
ActionController::RoutingError (No route matches [GET] "/.well-known/appspecific/com.chrome.devtools.json"):
  
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='MbsPromoRetention'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='MbsPromoRetention'*/[0m
  [1m[36mActiveRecord::InternalMetadata Create (9.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'development', '2025-08-11 20:50:18.019136', '2025-08-11 20:50:18.019140') RETURNING "key" /*application='MbsPromoRetention'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='MbsPromoRetention'*/[0m
Migrating to CreateBonuses (20250811204823)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE TABLE "bonuses" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar NOT NULL, "code" varchar NOT NULL, "bonus_type" varchar NOT NULL, "status" varchar DEFAULT 'active', "minimum_deposit" decimal(10,2), "wager" decimal(10,2), "maximum_winnings" decimal(15,2), "wagering_strategy" varchar, "availability_start_date" datetime(6) NOT NULL, "availability_end_date" datetime(6) NOT NULL, "user_group" varchar, "tags" text, "country" varchar, "currency" varchar NOT NULL, "created_by" integer, "updated_by" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL) /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_bonuses_on_code" ON "bonuses" ("code") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE INDEX "index_bonuses_on_bonus_type" ON "bonuses" ("bonus_type") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_bonuses_on_status" ON "bonuses" ("status") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_bonuses_on_availability_start_date" ON "bonuses" ("availability_start_date") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_bonuses_on_availability_end_date" ON "bonuses" ("availability_end_date") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_bonuses_on_user_group" ON "bonuses" ("user_group") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_bonuses_on_country" ON "bonuses" ("country") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE INDEX "index_bonuses_on_currency" ON "bonuses" ("currency") /*application='MbsPromoRetention'*/[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20250811204823') RETURNING "version" /*application='MbsPromoRetention'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
Migrating to CreateDepositBonuses (20250811204831)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "deposit_bonuses" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "bonus_id" integer NOT NULL, "deposit_amount_required" decimal(10,2), "bonus_percentage" decimal(5,2), "max_bonus_amount" decimal(15,2), "first_deposit_only" boolean DEFAULT 0, "recurring_eligible" boolean DEFAULT 0, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_2448ff73ca"
FOREIGN KEY ("bonus_id")
  REFERENCES "bonus" ("id")
) /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_deposit_bonuses_on_bonus_id" ON "deposit_bonuses" ("bonus_id") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_deposit_bonuses_on_bonus_id" ON "deposit_bonuses" ("bonus_id") /*application='MbsPromoRetention'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TRANSACTION /*application='MbsPromoRetention'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='MbsPromoRetention'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='MbsPromoRetention'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='MbsPromoRetention'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='MbsPromoRetention'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='MbsPromoRetention'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='MbsPromoRetention'*/[0m
  [1m[35m (4.3ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY) /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL) /*application='MbsPromoRetention'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='MbsPromoRetention'*/[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.6ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'development', '2025-08-11 20:50:37.542362', '2025-08-11 20:50:37.542365') RETURNING "key" /*application='MbsPromoRetention'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='MbsPromoRetention'*/[0m
Migrating to CreateBonuses (20250811204823)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE TABLE "bonuses" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar NOT NULL, "code" varchar NOT NULL, "bonus_type" varchar NOT NULL, "status" varchar DEFAULT 'active', "minimum_deposit" decimal(10,2), "wager" decimal(10,2), "maximum_winnings" decimal(15,2), "wagering_strategy" varchar, "availability_start_date" datetime(6) NOT NULL, "availability_end_date" datetime(6) NOT NULL, "user_group" varchar, "tags" text, "country" varchar, "currency" varchar NOT NULL, "created_by" integer, "updated_by" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL) /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_bonuses_on_code" ON "bonuses" ("code") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_bonuses_on_bonus_type" ON "bonuses" ("bonus_type") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_bonuses_on_status" ON "bonuses" ("status") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_bonuses_on_availability_start_date" ON "bonuses" ("availability_start_date") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_bonuses_on_availability_end_date" ON "bonuses" ("availability_end_date") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_bonuses_on_user_group" ON "bonuses" ("user_group") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_bonuses_on_country" ON "bonuses" ("country") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE INDEX "index_bonuses_on_currency" ON "bonuses" ("currency") /*application='MbsPromoRetention'*/[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20250811204823') RETURNING "version" /*application='MbsPromoRetention'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
Migrating to CreateDepositBonuses (20250811204831)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  [1m[35m (3.9ms)[0m  [1m[35mCREATE TABLE "deposit_bonuses" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "bonus_id" integer NOT NULL, "deposit_amount_required" decimal(10,2), "bonus_percentage" decimal(5,2), "max_bonus_amount" decimal(15,2), "first_deposit_only" boolean DEFAULT 0, "recurring_eligible" boolean DEFAULT 0, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_2448ff73ca"
FOREIGN KEY ("bonus_id")
  REFERENCES "bonus" ("id")
) /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_deposit_bonuses_on_bonus_id" ON "deposit_bonuses" ("bonus_id") /*application='MbsPromoRetention'*/[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20250811204831') RETURNING "version" /*application='MbsPromoRetention'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
Migrating to CreateInputCouponBonuses (20250811204839)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE TABLE "input_coupon_bonuses" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "bonus_id" integer NOT NULL, "coupon_code" varchar NOT NULL, "usage_limit" integer DEFAULT 1, "usage_count" integer DEFAULT 0, "expires_at" datetime(6), "single_use" boolean DEFAULT 1, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_196a679410"
FOREIGN KEY ("bonus_id")
  REFERENCES "bonus" ("id")
) /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_input_coupon_bonuses_on_bonus_id" ON "input_coupon_bonuses" ("bonus_id") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_input_coupon_bonuses_on_coupon_code" ON "input_coupon_bonuses" ("coupon_code") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_input_coupon_bonuses_on_expires_at" ON "input_coupon_bonuses" ("expires_at") /*application='MbsPromoRetention'*/[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20250811204839') RETURNING "version" /*application='MbsPromoRetention'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
Migrating to CreateManualBonuses (20250811204844)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  [1m[35m (5.3ms)[0m  [1m[35mCREATE TABLE "manual_bonuses" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "bonus_id" integer NOT NULL, "admin_notes" text, "approval_required" boolean DEFAULT 1, "auto_apply" boolean DEFAULT 0, "conditions" text, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_342825fcc9"
FOREIGN KEY ("bonus_id")
  REFERENCES "bonus" ("id")
) /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_manual_bonuses_on_bonus_id" ON "manual_bonuses" ("bonus_id") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_manual_bonuses_on_approval_required" ON "manual_bonuses" ("approval_required") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_manual_bonuses_on_auto_apply" ON "manual_bonuses" ("auto_apply") /*application='MbsPromoRetention'*/[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20250811204844') RETURNING "version" /*application='MbsPromoRetention'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
Migrating to CreateCollectBonuses (20250811204849)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "collect_bonuses" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "bonus_id" integer NOT NULL, "collection_type" varchar NOT NULL, "collection_amount" decimal(15,2), "collection_frequency" varchar DEFAULT 'daily', "collection_limit" integer DEFAULT 1, "collected_count" integer DEFAULT 0, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_39036008a7"
FOREIGN KEY ("bonus_id")
  REFERENCES "bonus" ("id")
) /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE INDEX "index_collect_bonuses_on_bonus_id" ON "collect_bonuses" ("bonus_id") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_collect_bonuses_on_collection_type" ON "collect_bonuses" ("collection_type") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_collect_bonuses_on_collection_frequency" ON "collect_bonuses" ("collection_frequency") /*application='MbsPromoRetention'*/[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20250811204849') RETURNING "version" /*application='MbsPromoRetention'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
Migrating to CreateGroupsUpdateBonuses (20250811204906)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "groups_update_bonuses" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "bonus_id" integer NOT NULL, "target_groups" text NOT NULL, "update_type" varchar NOT NULL, "update_parameters" text, "batch_size" integer DEFAULT 100, "processing_status" varchar DEFAULT 'pending', "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_ed7bb087a7"
FOREIGN KEY ("bonus_id")
  REFERENCES "bonus" ("id")
) /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_groups_update_bonuses_on_bonus_id" ON "groups_update_bonuses" ("bonus_id") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE INDEX "index_groups_update_bonuses_on_update_type" ON "groups_update_bonuses" ("update_type") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_groups_update_bonuses_on_processing_status" ON "groups_update_bonuses" ("processing_status") /*application='MbsPromoRetention'*/[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20250811204906') RETURNING "version" /*application='MbsPromoRetention'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
Migrating to CreateSchedulerBonuses (20250811204912)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE TABLE "scheduler_bonuses" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "bonus_id" integer NOT NULL, "schedule_type" varchar NOT NULL, "cron_expression" varchar, "next_run_at" datetime(6), "last_run_at" datetime(6), "execution_count" integer DEFAULT 0, "max_executions" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_f9f29eae23"
FOREIGN KEY ("bonus_id")
  REFERENCES "bonus" ("id")
) /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE INDEX "index_scheduler_bonuses_on_bonus_id" ON "scheduler_bonuses" ("bonus_id") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_scheduler_bonuses_on_schedule_type" ON "scheduler_bonuses" ("schedule_type") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_scheduler_bonuses_on_next_run_at" ON "scheduler_bonuses" ("next_run_at") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_scheduler_bonuses_on_last_run_at" ON "scheduler_bonuses" ("last_run_at") /*application='MbsPromoRetention'*/[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20250811204912') RETURNING "version" /*application='MbsPromoRetention'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='MbsPromoRetention'*/[0m
Started HEAD "/" for 127.0.0.1 at 2025-08-11 23:58:29 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='MbsPromoRetention'*/[0m
Processing by BonusesController#index as */*
Completed 500 Internal Server Error in 47ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.2ms)


  
NameError (undefined local variable or method 'promo_bonuses_path' for an instance of BonusesController):
  
app/controllers/application_controller.rb:10:in 'ApplicationController#set_nav_links'
Started GET "/" for 127.0.0.1 at 2025-08-11 23:58:51 +0300
Processing by BonusesController#index as */*
Completed 500 Internal Server Error in 27ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 2.2ms)


  
ArgumentError (wrong number of arguments (given 0, expected 1..2)):
  
app/models/bonus.rb:36:in '<class:Bonus>'
app/models/bonus.rb:1:in '<main>'
app/controllers/bonuses_controller.rb:6:in 'BonusesController#index'
Started GET "/" for 127.0.0.1 at 2025-08-11 23:59:11 +0300
Processing by BonusesController#index as */*
Completed 500 Internal Server Error in 22ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 3.1ms)


  
ArgumentError (You tried to define an enum named "bonus_type" on the model "Bonus", but this will generate a class method "collect", which is already defined by ActiveRecord::Relation.):
  
app/models/bonus.rb:43:in '<class:Bonus>'
app/models/bonus.rb:1:in '<main>'
app/controllers/bonuses_controller.rb:6:in 'BonusesController#index'
Started GET "/" for 127.0.0.1 at 2025-08-11 23:59:28 +0300
Processing by BonusesController#index as */*
Completed 500 Internal Server Error in 33ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


  
ArgumentError (You tried to define an enum named "status" on the model "Bonus", but this will generate a instance method "draft?", which is already defined by another enum.):
  
app/models/bonus.rb:36:in '<class:Bonus>'
app/models/bonus.rb:1:in '<main>'
app/controllers/bonuses_controller.rb:6:in 'BonusesController#index'
Started GET "/" for 127.0.0.1 at 2025-08-12 00:05:27 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='MbsPromoRetention'*/[0m
Processing by BonusesController#index as */*
Completed 500 Internal Server Error in 28ms (ActiveRecord: 2.2ms (0 queries, 0 cached) | GC: 1.7ms)


  
ActiveRecord::StatementInvalid (Could not find table 'bonus'):
  
app/controllers/bonuses_controller.rb:36:in 'BonusesController#index'
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='MbsPromoRetention'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='MbsPromoRetention'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='MbsPromoRetention'*/[0m
Migrating to FixForeignKeyReferences (20250811210559)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[35mPRAGMA foreign_keys /*application='MbsPromoRetention'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TEMPORARY TABLE "acollect_bonuses" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "bonus_id" integer NOT NULL, "collection_type" varchar NOT NULL, "collection_amount" decimal(15,2), "collection_frequency" varchar DEFAULT 'daily', "collection_limit" integer DEFAULT 1, "collected_count" integer DEFAULT 0, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL) /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "tindex_acollect_bonuses_on_collection_frequency" ON "acollect_bonuses" ("collection_frequency") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "tindex_acollect_bonuses_on_collection_type" ON "acollect_bonuses" ("collection_type") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "tindex_acollect_bonuses_on_bonus_id" ON "acollect_bonuses" ("bonus_id") /*application='MbsPromoRetention'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "acollect_bonuses" ("id","bonus_id","collection_type","collection_amount","collection_frequency","collection_limit","collected_count","created_at","updated_at")
                     SELECT "id","bonus_id","collection_type","collection_amount","collection_frequency","collection_limit","collected_count","created_at","updated_at" FROM "collect_bonuses" /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE "collect_bonuses" /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "collect_bonuses" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "bonus_id" integer NOT NULL, "collection_type" varchar NOT NULL, "collection_amount" decimal(15,2), "collection_frequency" varchar DEFAULT 'daily', "collection_limit" integer DEFAULT 1, "collected_count" integer DEFAULT 0, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL) /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_collect_bonuses_on_bonus_id" ON "collect_bonuses" ("bonus_id") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE INDEX "index_collect_bonuses_on_collection_type" ON "collect_bonuses" ("collection_type") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_collect_bonuses_on_collection_frequency" ON "collect_bonuses" ("collection_frequency") /*application='MbsPromoRetention'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[32mINSERT INTO "collect_bonuses" ("id","bonus_id","collection_type","collection_amount","collection_frequency","collection_limit","collected_count","created_at","updated_at")
                     SELECT "id","bonus_id","collection_type","collection_amount","collection_frequency","collection_limit","collected_count","created_at","updated_at" FROM "acollect_bonuses" /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE "acollect_bonuses" /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0 /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1 /*application='MbsPromoRetention'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[35mPRAGMA foreign_keys /*application='MbsPromoRetention'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TEMPORARY TABLE "adeposit_bonuses" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "bonus_id" integer NOT NULL, "deposit_amount_required" decimal(10,2), "bonus_percentage" decimal(5,2), "max_bonus_amount" decimal(15,2), "first_deposit_only" boolean DEFAULT 0, "recurring_eligible" boolean DEFAULT 0, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL) /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "tindex_adeposit_bonuses_on_bonus_id" ON "adeposit_bonuses" ("bonus_id") /*application='MbsPromoRetention'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[32mINSERT INTO "adeposit_bonuses" ("id","bonus_id","deposit_amount_required","bonus_percentage","max_bonus_amount","first_deposit_only","recurring_eligible","created_at","updated_at")
                     SELECT "id","bonus_id","deposit_amount_required","bonus_percentage","max_bonus_amount","first_deposit_only","recurring_eligible","created_at","updated_at" FROM "deposit_bonuses" /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE "deposit_bonuses" /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "deposit_bonuses" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "bonus_id" integer NOT NULL, "deposit_amount_required" decimal(10,2), "bonus_percentage" decimal(5,2), "max_bonus_amount" decimal(15,2), "first_deposit_only" boolean DEFAULT 0, "recurring_eligible" boolean DEFAULT 0, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL) /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_deposit_bonuses_on_bonus_id" ON "deposit_bonuses" ("bonus_id") /*application='MbsPromoRetention'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[32mINSERT INTO "deposit_bonuses" ("id","bonus_id","deposit_amount_required","bonus_percentage","max_bonus_amount","first_deposit_only","recurring_eligible","created_at","updated_at")
                     SELECT "id","bonus_id","deposit_amount_required","bonus_percentage","max_bonus_amount","first_deposit_only","recurring_eligible","created_at","updated_at" FROM "adeposit_bonuses" /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE "adeposit_bonuses" /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0 /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1 /*application='MbsPromoRetention'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[35mPRAGMA foreign_keys /*application='MbsPromoRetention'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TEMPORARY TABLE "agroups_update_bonuses" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "bonus_id" integer NOT NULL, "target_groups" text NOT NULL, "update_type" varchar NOT NULL, "update_parameters" text, "batch_size" integer DEFAULT 100, "processing_status" varchar DEFAULT 'pending', "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL) /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "tindex_agroups_update_bonuses_on_processing_status" ON "agroups_update_bonuses" ("processing_status") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "tindex_agroups_update_bonuses_on_update_type" ON "agroups_update_bonuses" ("update_type") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "tindex_agroups_update_bonuses_on_bonus_id" ON "agroups_update_bonuses" ("bonus_id") /*application='MbsPromoRetention'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[32mINSERT INTO "agroups_update_bonuses" ("id","bonus_id","target_groups","update_type","update_parameters","batch_size","processing_status","created_at","updated_at")
                     SELECT "id","bonus_id","target_groups","update_type","update_parameters","batch_size","processing_status","created_at","updated_at" FROM "groups_update_bonuses" /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE "groups_update_bonuses" /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "groups_update_bonuses" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "bonus_id" integer NOT NULL, "target_groups" text NOT NULL, "update_type" varchar NOT NULL, "update_parameters" text, "batch_size" integer DEFAULT 100, "processing_status" varchar DEFAULT 'pending', "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL) /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_groups_update_bonuses_on_bonus_id" ON "groups_update_bonuses" ("bonus_id") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_groups_update_bonuses_on_update_type" ON "groups_update_bonuses" ("update_type") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_groups_update_bonuses_on_processing_status" ON "groups_update_bonuses" ("processing_status") /*application='MbsPromoRetention'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[32mINSERT INTO "groups_update_bonuses" ("id","bonus_id","target_groups","update_type","update_parameters","batch_size","processing_status","created_at","updated_at")
                     SELECT "id","bonus_id","target_groups","update_type","update_parameters","batch_size","processing_status","created_at","updated_at" FROM "agroups_update_bonuses" /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE "agroups_update_bonuses" /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0 /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1 /*application='MbsPromoRetention'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[35mPRAGMA foreign_keys /*application='MbsPromoRetention'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TEMPORARY TABLE "ainput_coupon_bonuses" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "bonus_id" integer NOT NULL, "coupon_code" varchar NOT NULL, "usage_limit" integer DEFAULT 1, "usage_count" integer DEFAULT 0, "expires_at" datetime(6), "single_use" boolean DEFAULT 1, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL) /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "tindex_ainput_coupon_bonuses_on_expires_at" ON "ainput_coupon_bonuses" ("expires_at") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "tindex_ainput_coupon_bonuses_on_coupon_code" ON "ainput_coupon_bonuses" ("coupon_code") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "tindex_ainput_coupon_bonuses_on_bonus_id" ON "ainput_coupon_bonuses" ("bonus_id") /*application='MbsPromoRetention'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "ainput_coupon_bonuses" ("id","bonus_id","coupon_code","usage_limit","usage_count","expires_at","single_use","created_at","updated_at")
                     SELECT "id","bonus_id","coupon_code","usage_limit","usage_count","expires_at","single_use","created_at","updated_at" FROM "input_coupon_bonuses" /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE "input_coupon_bonuses" /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "input_coupon_bonuses" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "bonus_id" integer NOT NULL, "coupon_code" varchar NOT NULL, "usage_limit" integer DEFAULT 1, "usage_count" integer DEFAULT 0, "expires_at" datetime(6), "single_use" boolean DEFAULT 1, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL) /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_input_coupon_bonuses_on_bonus_id" ON "input_coupon_bonuses" ("bonus_id") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_input_coupon_bonuses_on_coupon_code" ON "input_coupon_bonuses" ("coupon_code") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_input_coupon_bonuses_on_expires_at" ON "input_coupon_bonuses" ("expires_at") /*application='MbsPromoRetention'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "input_coupon_bonuses" ("id","bonus_id","coupon_code","usage_limit","usage_count","expires_at","single_use","created_at","updated_at")
                     SELECT "id","bonus_id","coupon_code","usage_limit","usage_count","expires_at","single_use","created_at","updated_at" FROM "ainput_coupon_bonuses" /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE "ainput_coupon_bonuses" /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0 /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1 /*application='MbsPromoRetention'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[35mPRAGMA foreign_keys /*application='MbsPromoRetention'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TEMPORARY TABLE "amanual_bonuses" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "bonus_id" integer NOT NULL, "admin_notes" text, "approval_required" boolean DEFAULT 1, "auto_apply" boolean DEFAULT 0, "conditions" text, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL) /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "tindex_amanual_bonuses_on_auto_apply" ON "amanual_bonuses" ("auto_apply") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "tindex_amanual_bonuses_on_approval_required" ON "amanual_bonuses" ("approval_required") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "tindex_amanual_bonuses_on_bonus_id" ON "amanual_bonuses" ("bonus_id") /*application='MbsPromoRetention'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[32mINSERT INTO "amanual_bonuses" ("id","bonus_id","admin_notes","approval_required","auto_apply","conditions","created_at","updated_at")
                     SELECT "id","bonus_id","admin_notes","approval_required","auto_apply","conditions","created_at","updated_at" FROM "manual_bonuses" /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE "manual_bonuses" /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "manual_bonuses" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "bonus_id" integer NOT NULL, "admin_notes" text, "approval_required" boolean DEFAULT 1, "auto_apply" boolean DEFAULT 0, "conditions" text, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL) /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_manual_bonuses_on_bonus_id" ON "manual_bonuses" ("bonus_id") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_manual_bonuses_on_approval_required" ON "manual_bonuses" ("approval_required") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_manual_bonuses_on_auto_apply" ON "manual_bonuses" ("auto_apply") /*application='MbsPromoRetention'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[32mINSERT INTO "manual_bonuses" ("id","bonus_id","admin_notes","approval_required","auto_apply","conditions","created_at","updated_at")
                     SELECT "id","bonus_id","admin_notes","approval_required","auto_apply","conditions","created_at","updated_at" FROM "amanual_bonuses" /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE "amanual_bonuses" /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0 /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1 /*application='MbsPromoRetention'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[35mPRAGMA foreign_keys /*application='MbsPromoRetention'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TEMPORARY TABLE "ascheduler_bonuses" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "bonus_id" integer NOT NULL, "schedule_type" varchar NOT NULL, "cron_expression" varchar, "next_run_at" datetime(6), "last_run_at" datetime(6), "execution_count" integer DEFAULT 0, "max_executions" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL) /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "tindex_ascheduler_bonuses_on_last_run_at" ON "ascheduler_bonuses" ("last_run_at") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "tindex_ascheduler_bonuses_on_next_run_at" ON "ascheduler_bonuses" ("next_run_at") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "tindex_ascheduler_bonuses_on_schedule_type" ON "ascheduler_bonuses" ("schedule_type") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "tindex_ascheduler_bonuses_on_bonus_id" ON "ascheduler_bonuses" ("bonus_id") /*application='MbsPromoRetention'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[32mINSERT INTO "ascheduler_bonuses" ("id","bonus_id","schedule_type","cron_expression","next_run_at","last_run_at","execution_count","max_executions","created_at","updated_at")
                     SELECT "id","bonus_id","schedule_type","cron_expression","next_run_at","last_run_at","execution_count","max_executions","created_at","updated_at" FROM "scheduler_bonuses" /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE "scheduler_bonuses" /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "scheduler_bonuses" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "bonus_id" integer NOT NULL, "schedule_type" varchar NOT NULL, "cron_expression" varchar, "next_run_at" datetime(6), "last_run_at" datetime(6), "execution_count" integer DEFAULT 0, "max_executions" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL) /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_scheduler_bonuses_on_bonus_id" ON "scheduler_bonuses" ("bonus_id") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_scheduler_bonuses_on_schedule_type" ON "scheduler_bonuses" ("schedule_type") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_scheduler_bonuses_on_next_run_at" ON "scheduler_bonuses" ("next_run_at") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_scheduler_bonuses_on_last_run_at" ON "scheduler_bonuses" ("last_run_at") /*application='MbsPromoRetention'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[32mINSERT INTO "scheduler_bonuses" ("id","bonus_id","schedule_type","cron_expression","next_run_at","last_run_at","execution_count","max_executions","created_at","updated_at")
                     SELECT "id","bonus_id","schedule_type","cron_expression","next_run_at","last_run_at","execution_count","max_executions","created_at","updated_at" FROM "ascheduler_bonuses" /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE "ascheduler_bonuses" /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0 /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1 /*application='MbsPromoRetention'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[35mPRAGMA foreign_keys /*application='MbsPromoRetention'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TEMPORARY TABLE "acollect_bonuses" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "bonus_id" integer NOT NULL, "collection_type" varchar NOT NULL, "collection_amount" decimal(15,2), "collection_frequency" varchar DEFAULT 'daily', "collection_limit" integer DEFAULT 1, "collected_count" integer DEFAULT 0, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL) /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "tindex_acollect_bonuses_on_collection_frequency" ON "acollect_bonuses" ("collection_frequency") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "tindex_acollect_bonuses_on_collection_type" ON "acollect_bonuses" ("collection_type") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "tindex_acollect_bonuses_on_bonus_id" ON "acollect_bonuses" ("bonus_id") /*application='MbsPromoRetention'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "acollect_bonuses" ("id","bonus_id","collection_type","collection_amount","collection_frequency","collection_limit","collected_count","created_at","updated_at")
                     SELECT "id","bonus_id","collection_type","collection_amount","collection_frequency","collection_limit","collected_count","created_at","updated_at" FROM "collect_bonuses" /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE "collect_bonuses" /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "collect_bonuses" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "bonus_id" integer NOT NULL, "collection_type" varchar NOT NULL, "collection_amount" decimal(15,2), "collection_frequency" varchar DEFAULT 'daily', "collection_limit" integer DEFAULT 1, "collected_count" integer DEFAULT 0, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_39036008a7"
FOREIGN KEY ("bonus_id")
  REFERENCES "bonuses" ("id")
) /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_collect_bonuses_on_bonus_id" ON "collect_bonuses" ("bonus_id") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_collect_bonuses_on_collection_type" ON "collect_bonuses" ("collection_type") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_collect_bonuses_on_collection_frequency" ON "collect_bonuses" ("collection_frequency") /*application='MbsPromoRetention'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "collect_bonuses" ("id","bonus_id","collection_type","collection_amount","collection_frequency","collection_limit","collected_count","created_at","updated_at")
                     SELECT "id","bonus_id","collection_type","collection_amount","collection_frequency","collection_limit","collected_count","created_at","updated_at" FROM "acollect_bonuses" /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE "acollect_bonuses" /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0 /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1 /*application='MbsPromoRetention'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[35mPRAGMA foreign_keys /*application='MbsPromoRetention'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TEMPORARY TABLE "adeposit_bonuses" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "bonus_id" integer NOT NULL, "deposit_amount_required" decimal(10,2), "bonus_percentage" decimal(5,2), "max_bonus_amount" decimal(15,2), "first_deposit_only" boolean DEFAULT 0, "recurring_eligible" boolean DEFAULT 0, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL) /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "tindex_adeposit_bonuses_on_bonus_id" ON "adeposit_bonuses" ("bonus_id") /*application='MbsPromoRetention'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "adeposit_bonuses" ("id","bonus_id","deposit_amount_required","bonus_percentage","max_bonus_amount","first_deposit_only","recurring_eligible","created_at","updated_at")
                     SELECT "id","bonus_id","deposit_amount_required","bonus_percentage","max_bonus_amount","first_deposit_only","recurring_eligible","created_at","updated_at" FROM "deposit_bonuses" /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE "deposit_bonuses" /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "deposit_bonuses" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "bonus_id" integer NOT NULL, "deposit_amount_required" decimal(10,2), "bonus_percentage" decimal(5,2), "max_bonus_amount" decimal(15,2), "first_deposit_only" boolean DEFAULT 0, "recurring_eligible" boolean DEFAULT 0, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_2448ff73ca"
FOREIGN KEY ("bonus_id")
  REFERENCES "bonuses" ("id")
) /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_deposit_bonuses_on_bonus_id" ON "deposit_bonuses" ("bonus_id") /*application='MbsPromoRetention'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "deposit_bonuses" ("id","bonus_id","deposit_amount_required","bonus_percentage","max_bonus_amount","first_deposit_only","recurring_eligible","created_at","updated_at")
                     SELECT "id","bonus_id","deposit_amount_required","bonus_percentage","max_bonus_amount","first_deposit_only","recurring_eligible","created_at","updated_at" FROM "adeposit_bonuses" /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE "adeposit_bonuses" /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0 /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1 /*application='MbsPromoRetention'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[35mPRAGMA foreign_keys /*application='MbsPromoRetention'*/[0m
  [1m[35mSQL (0.2ms)[0m  [1m[35mPRAGMA defer_foreign_keys /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TEMPORARY TABLE "agroups_update_bonuses" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "bonus_id" integer NOT NULL, "target_groups" text NOT NULL, "update_type" varchar NOT NULL, "update_parameters" text, "batch_size" integer DEFAULT 100, "processing_status" varchar DEFAULT 'pending', "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL) /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "tindex_agroups_update_bonuses_on_processing_status" ON "agroups_update_bonuses" ("processing_status") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "tindex_agroups_update_bonuses_on_update_type" ON "agroups_update_bonuses" ("update_type") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "tindex_agroups_update_bonuses_on_bonus_id" ON "agroups_update_bonuses" ("bonus_id") /*application='MbsPromoRetention'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "agroups_update_bonuses" ("id","bonus_id","target_groups","update_type","update_parameters","batch_size","processing_status","created_at","updated_at")
                     SELECT "id","bonus_id","target_groups","update_type","update_parameters","batch_size","processing_status","created_at","updated_at" FROM "groups_update_bonuses" /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE "groups_update_bonuses" /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "groups_update_bonuses" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "bonus_id" integer NOT NULL, "target_groups" text NOT NULL, "update_type" varchar NOT NULL, "update_parameters" text, "batch_size" integer DEFAULT 100, "processing_status" varchar DEFAULT 'pending', "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_ed7bb087a7"
FOREIGN KEY ("bonus_id")
  REFERENCES "bonuses" ("id")
) /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE INDEX "index_groups_update_bonuses_on_bonus_id" ON "groups_update_bonuses" ("bonus_id") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_groups_update_bonuses_on_update_type" ON "groups_update_bonuses" ("update_type") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_groups_update_bonuses_on_processing_status" ON "groups_update_bonuses" ("processing_status") /*application='MbsPromoRetention'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "groups_update_bonuses" ("id","bonus_id","target_groups","update_type","update_parameters","batch_size","processing_status","created_at","updated_at")
                     SELECT "id","bonus_id","target_groups","update_type","update_parameters","batch_size","processing_status","created_at","updated_at" FROM "agroups_update_bonuses" /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE "agroups_update_bonuses" /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0 /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1 /*application='MbsPromoRetention'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[35mPRAGMA foreign_keys /*application='MbsPromoRetention'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TEMPORARY TABLE "ainput_coupon_bonuses" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "bonus_id" integer NOT NULL, "coupon_code" varchar NOT NULL, "usage_limit" integer DEFAULT 1, "usage_count" integer DEFAULT 0, "expires_at" datetime(6), "single_use" boolean DEFAULT 1, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL) /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "tindex_ainput_coupon_bonuses_on_expires_at" ON "ainput_coupon_bonuses" ("expires_at") /*application='MbsPromoRetention'*/[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "tindex_ainput_coupon_bonuses_on_coupon_code" ON "ainput_coupon_bonuses" ("coupon_code") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "tindex_ainput_coupon_bonuses_on_bonus_id" ON "ainput_coupon_bonuses" ("bonus_id") /*application='MbsPromoRetention'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "ainput_coupon_bonuses" ("id","bonus_id","coupon_code","usage_limit","usage_count","expires_at","single_use","created_at","updated_at")
                     SELECT "id","bonus_id","coupon_code","usage_limit","usage_count","expires_at","single_use","created_at","updated_at" FROM "input_coupon_bonuses" /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE "input_coupon_bonuses" /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "input_coupon_bonuses" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "bonus_id" integer NOT NULL, "coupon_code" varchar NOT NULL, "usage_limit" integer DEFAULT 1, "usage_count" integer DEFAULT 0, "expires_at" datetime(6), "single_use" boolean DEFAULT 1, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_196a679410"
FOREIGN KEY ("bonus_id")
  REFERENCES "bonuses" ("id")
) /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_input_coupon_bonuses_on_bonus_id" ON "input_coupon_bonuses" ("bonus_id") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_input_coupon_bonuses_on_coupon_code" ON "input_coupon_bonuses" ("coupon_code") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_input_coupon_bonuses_on_expires_at" ON "input_coupon_bonuses" ("expires_at") /*application='MbsPromoRetention'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "input_coupon_bonuses" ("id","bonus_id","coupon_code","usage_limit","usage_count","expires_at","single_use","created_at","updated_at")
                     SELECT "id","bonus_id","coupon_code","usage_limit","usage_count","expires_at","single_use","created_at","updated_at" FROM "ainput_coupon_bonuses" /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE "ainput_coupon_bonuses" /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0 /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1 /*application='MbsPromoRetention'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[35mPRAGMA foreign_keys /*application='MbsPromoRetention'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TEMPORARY TABLE "amanual_bonuses" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "bonus_id" integer NOT NULL, "admin_notes" text, "approval_required" boolean DEFAULT 1, "auto_apply" boolean DEFAULT 0, "conditions" text, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL) /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "tindex_amanual_bonuses_on_auto_apply" ON "amanual_bonuses" ("auto_apply") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "tindex_amanual_bonuses_on_approval_required" ON "amanual_bonuses" ("approval_required") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "tindex_amanual_bonuses_on_bonus_id" ON "amanual_bonuses" ("bonus_id") /*application='MbsPromoRetention'*/[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "amanual_bonuses" ("id","bonus_id","admin_notes","approval_required","auto_apply","conditions","created_at","updated_at")
                     SELECT "id","bonus_id","admin_notes","approval_required","auto_apply","conditions","created_at","updated_at" FROM "manual_bonuses" /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE "manual_bonuses" /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "manual_bonuses" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "bonus_id" integer NOT NULL, "admin_notes" text, "approval_required" boolean DEFAULT 1, "auto_apply" boolean DEFAULT 0, "conditions" text, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_342825fcc9"
FOREIGN KEY ("bonus_id")
  REFERENCES "bonuses" ("id")
) /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_manual_bonuses_on_bonus_id" ON "manual_bonuses" ("bonus_id") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_manual_bonuses_on_approval_required" ON "manual_bonuses" ("approval_required") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_manual_bonuses_on_auto_apply" ON "manual_bonuses" ("auto_apply") /*application='MbsPromoRetention'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[32mINSERT INTO "manual_bonuses" ("id","bonus_id","admin_notes","approval_required","auto_apply","conditions","created_at","updated_at")
                     SELECT "id","bonus_id","admin_notes","approval_required","auto_apply","conditions","created_at","updated_at" FROM "amanual_bonuses" /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE "amanual_bonuses" /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0 /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1 /*application='MbsPromoRetention'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[35mPRAGMA foreign_keys /*application='MbsPromoRetention'*/[0m
  [1m[35mSQL (0.3ms)[0m  [1m[35mPRAGMA defer_foreign_keys /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TEMPORARY TABLE "ascheduler_bonuses" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "bonus_id" integer NOT NULL, "schedule_type" varchar NOT NULL, "cron_expression" varchar, "next_run_at" datetime(6), "last_run_at" datetime(6), "execution_count" integer DEFAULT 0, "max_executions" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL) /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "tindex_ascheduler_bonuses_on_last_run_at" ON "ascheduler_bonuses" ("last_run_at") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "tindex_ascheduler_bonuses_on_next_run_at" ON "ascheduler_bonuses" ("next_run_at") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "tindex_ascheduler_bonuses_on_schedule_type" ON "ascheduler_bonuses" ("schedule_type") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "tindex_ascheduler_bonuses_on_bonus_id" ON "ascheduler_bonuses" ("bonus_id") /*application='MbsPromoRetention'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[32mINSERT INTO "ascheduler_bonuses" ("id","bonus_id","schedule_type","cron_expression","next_run_at","last_run_at","execution_count","max_executions","created_at","updated_at")
                     SELECT "id","bonus_id","schedule_type","cron_expression","next_run_at","last_run_at","execution_count","max_executions","created_at","updated_at" FROM "scheduler_bonuses" /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE "scheduler_bonuses" /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "scheduler_bonuses" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "bonus_id" integer NOT NULL, "schedule_type" varchar NOT NULL, "cron_expression" varchar, "next_run_at" datetime(6), "last_run_at" datetime(6), "execution_count" integer DEFAULT 0, "max_executions" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_f9f29eae23"
FOREIGN KEY ("bonus_id")
  REFERENCES "bonuses" ("id")
) /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_scheduler_bonuses_on_bonus_id" ON "scheduler_bonuses" ("bonus_id") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_scheduler_bonuses_on_schedule_type" ON "scheduler_bonuses" ("schedule_type") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_scheduler_bonuses_on_next_run_at" ON "scheduler_bonuses" ("next_run_at") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_scheduler_bonuses_on_last_run_at" ON "scheduler_bonuses" ("last_run_at") /*application='MbsPromoRetention'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[32mINSERT INTO "scheduler_bonuses" ("id","bonus_id","schedule_type","cron_expression","next_run_at","last_run_at","execution_count","max_executions","created_at","updated_at")
                     SELECT "id","bonus_id","schedule_type","cron_expression","next_run_at","last_run_at","execution_count","max_executions","created_at","updated_at" FROM "ascheduler_bonuses" /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE "ascheduler_bonuses" /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0 /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1 /*application='MbsPromoRetention'*/[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20250811210559') RETURNING "version" /*application='MbsPromoRetention'*/[0m
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='MbsPromoRetention'*/[0m
Started GET "/" for 127.0.0.1 at 2025-08-12 00:07:00 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='MbsPromoRetention'*/[0m
Processing by BonusesController#index as */*
Completed 500 Internal Server Error in 16ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


  
NameError (uninitialized constant Bonus::BONUS_TYPES):
  
app/models/bonus.rb:13:in '<class:Bonus>'
app/models/bonus.rb:1:in '<main>'
app/controllers/bonuses_controller.rb:6:in 'BonusesController#index'
Started GET "/" for 127.0.0.1 at 2025-08-12 00:07:24 +0300
Processing by BonusesController#index as */*
Completed 500 Internal Server Error in 15ms (ActiveRecord: 0.8ms (0 queries, 0 cached) | GC: 0.6ms)


  
ActiveRecord::StatementInvalid (Could not find table 'bonus'):
  
app/controllers/bonuses_controller.rb:36:in 'BonusesController#index'
Started GET "/" for 127.0.0.1 at 2025-08-12 00:07:49 +0300
Processing by BonusesController#index as */*
Completed 500 Internal Server Error in 9ms (ActiveRecord: 0.1ms (0 queries, 0 cached) | GC: 0.0ms)


  
ActiveRecord::StatementInvalid (Could not find table 'bonus'):
  
app/controllers/bonuses_controller.rb:36:in 'BonusesController#index'
Started GET "/" for 127.0.0.1 at 2025-08-12 00:13:27 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='MbsPromoRetention'*/[0m
Processing by BonusesController#index as HTML
Completed 500 Internal Server Error in 15ms (ActiveRecord: 1.0ms (0 queries, 0 cached) | GC: 0.4ms)


  
ActiveRecord::StatementInvalid (Could not find table 'bonus'):
  
app/controllers/bonuses_controller.rb:36:in 'BonusesController#index'
Started GET "/favicon.ico" for 127.0.0.1 at 2025-08-12 00:13:28 +0300
  
ActionController::RoutingError (No route matches [GET] "/favicon.ico"):
  
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='MbsPromoRetention'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  [1m[36mBonus Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'TEST123' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  [1m[36mBonus Create (0.3ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Bonus', 'TEST123', 'deposit', 'active', NULL, NULL, NULL, NULL, '2025-08-11 21:14:28.900525', '2025-09-11 21:14:28.900567', NULL, NULL, NULL, 'USD', NULL, NULL, '2025-08-11 21:14:28.924398', '2025-08-11 21:14:28.924398') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION /*application='MbsPromoRetention'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  [1m[36mBonus Exists? (2.7ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'TEST123' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  [1m[36mBonus Create (0.2ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Bonus', 'TEST123', 'deposit', 'active', NULL, NULL, NULL, NULL, '2025-08-11 21:15:13.123746', '2025-09-11 21:15:13.123804', NULL, NULL, NULL, 'USD', NULL, NULL, '2025-08-11 21:15:13.157922', '2025-08-11 21:15:13.157922') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  [1m[36mDepositBonus Load (1.2ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 1 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:136:in 'Bonus#create_type_specific_record'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TRANSACTION /*application='MbsPromoRetention'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  [1m[36mBonus Create (2.2ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Bonus', 'TEST123', 'deposit', 'active', NULL, NULL, NULL, NULL, '2025-08-11 21:15:23.860610', '2025-09-11 21:15:23.860649', NULL, NULL, NULL, 'USD', NULL, NULL, '2025-08-11 21:15:23.876988', '2025-08-11 21:15:23.876988') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 1 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:136:in 'Bonus#create_type_specific_record'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TRANSACTION /*application='MbsPromoRetention'*/[0m
Started GET "/" for 127.0.0.1 at 2025-08-12 00:15:29 +0300
Processing by BonusesController#index as */*
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  Rendered bonuses/index.html.erb within layouts/application (Duration: 1.3ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.6ms | GC: 0.0ms)
Completed 500 Internal Server Error in 23ms (ActiveRecord: 1.6ms (0 queries, 0 cached) | GC: 0.4ms)


  
ActionView::Template::Error (undefined method 'new_bonus_path' for an instance of #<Class:0x0000715704a60140>)
Caused by: NoMethodError (undefined method 'new_bonus_path' for an instance of #<Class:0x0000715704a60140>)

Information for: ActionView::Template::Error (undefined method 'new_bonus_path' for an instance of #<Class:0x0000715704a60140>):
     6:       <div class="d-flex justify-content-between align-items-center mb-4">
     7:         <h1 class="h2">Bonus Management</h1>
     8:         <div class="btn-group" role="group">
     9:           <%= link_to "New Deposit Bonus", new_bonus_path(type: 'deposit'), class: "btn btn-primary" %>
    10:           <%= link_to "New Coupon Bonus", new_bonus_path(type: 'input_coupon'), class: "btn btn-outline-primary" %>
    11:           <%= link_to "New Manual Bonus", new_bonus_path(type: 'manual'), class: "btn btn-outline-primary" %>
    12:         </div>
  
app/views/bonuses/index.html.erb:9

Information for cause: NoMethodError (undefined method 'new_bonus_path' for an instance of #<Class:0x0000715704a60140>):
  
app/views/bonuses/index.html.erb:9
Started GET "/" for 127.0.0.1 at 2025-08-12 00:15:56 +0300
Processing by BonusesController#index as */*
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  Rendered bonuses/index.html.erb within layouts/application (Duration: 0.5ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 0.8ms | GC: 0.0ms)
Completed 500 Internal Server Error in 14ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


  
ActionView::Template::Error (undefined method 'new_bonus_path' for an instance of #<Class:0x0000715704a60140>)
Caused by: NoMethodError (undefined method 'new_bonus_path' for an instance of #<Class:0x0000715704a60140>)

Information for: ActionView::Template::Error (undefined method 'new_bonus_path' for an instance of #<Class:0x0000715704a60140>):
     6:       <div class="d-flex justify-content-between align-items-center mb-4">
     7:         <h1 class="h2">Bonus Management</h1>
     8:         <div class="btn-group" role="group">
     9:           <%= link_to "New Deposit Bonus", new_bonus_path(type: 'deposit'), class: "btn btn-primary" %>
    10:           <%= link_to "New Coupon Bonus", new_bonus_path(type: 'input_coupon'), class: "btn btn-outline-primary" %>
    11:           <%= link_to "New Manual Bonus", new_bonus_path(type: 'manual'), class: "btn btn-outline-primary" %>
    12:         </div>
  
app/views/bonuses/index.html.erb:9

Information for cause: NoMethodError (undefined method 'new_bonus_path' for an instance of #<Class:0x0000715704a60140>):
  
app/views/bonuses/index.html.erb:9
Started GET "/" for 127.0.0.1 at 2025-08-12 00:16:06 +0300
Processing by BonusesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  Rendered bonuses/index.html.erb within layouts/application (Duration: 0.6ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.4ms | GC: 0.0ms)
Completed 500 Internal Server Error in 14ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


  
ActionView::Template::Error (undefined method 'new_bonus_path' for an instance of #<Class:0x0000715704a60140>)
Caused by: NoMethodError (undefined method 'new_bonus_path' for an instance of #<Class:0x0000715704a60140>)

Information for: ActionView::Template::Error (undefined method 'new_bonus_path' for an instance of #<Class:0x0000715704a60140>):
     6:       <div class="d-flex justify-content-between align-items-center mb-4">
     7:         <h1 class="h2">Bonus Management</h1>
     8:         <div class="btn-group" role="group">
     9:           <%= link_to "New Deposit Bonus", new_bonus_path(type: 'deposit'), class: "btn btn-primary" %>
    10:           <%= link_to "New Coupon Bonus", new_bonus_path(type: 'input_coupon'), class: "btn btn-outline-primary" %>
    11:           <%= link_to "New Manual Bonus", new_bonus_path(type: 'manual'), class: "btn btn-outline-primary" %>
    12:         </div>
  
app/views/bonuses/index.html.erb:9

Information for cause: NoMethodError (undefined method 'new_bonus_path' for an instance of #<Class:0x0000715704a60140>):
  
app/views/bonuses/index.html.erb:9
Started GET "/" for 127.0.0.1 at 2025-08-12 00:17:15 +0300
Processing by BonusesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  Rendered bonuses/index.html.erb within layouts/application (Duration: 0.5ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 3.0ms | GC: 0.0ms)
Completed 500 Internal Server Error in 24ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


  
ActionView::Template::Error (undefined method 'new_bonus_path' for an instance of #<Class:0x0000715704a60140>)
Caused by: NoMethodError (undefined method 'new_bonus_path' for an instance of #<Class:0x0000715704a60140>)

Information for: ActionView::Template::Error (undefined method 'new_bonus_path' for an instance of #<Class:0x0000715704a60140>):
     6:       <div class="d-flex justify-content-between align-items-center mb-4">
     7:         <h1 class="h2">Bonus Management</h1>
     8:         <div class="btn-group" role="group">
     9:           <%= link_to "New Deposit Bonus", new_bonus_path(type: 'deposit'), class: "btn btn-primary" %>
    10:           <%= link_to "New Coupon Bonus", new_bonus_path(type: 'input_coupon'), class: "btn btn-outline-primary" %>
    11:           <%= link_to "New Manual Bonus", new_bonus_path(type: 'manual'), class: "btn btn-outline-primary" %>
    12:         </div>
  
app/views/bonuses/index.html.erb:9

Information for cause: NoMethodError (undefined method 'new_bonus_path' for an instance of #<Class:0x0000715704a60140>):
  
app/views/bonuses/index.html.erb:9
Started GET "/" for 127.0.0.1 at 2025-08-12 00:19:41 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='MbsPromoRetention'*/[0m
Processing by BonusesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:61
  Rendered bonuses/index.html.erb within layouts/application (Duration: 15.7ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 27.3ms | GC: 0.0ms)
Completed 200 OK in 115ms (Views: 30.7ms | ActiveRecord: 2.8ms (1 query, 0 cached) | GC: 0.6ms)


Started GET "/assets/app-018e72dd.css" for 127.0.0.1 at 2025-08-12 00:19:42 +0300
Started GET "/bonuses/new" for 127.0.0.1 at 2025-08-12 00:19:57 +0300
Processing by BonusesController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering bonuses/new.html.erb within layouts/application
  Rendered bonuses/_type_specific_form.html.erb (Duration: 9.1ms | GC: 0.0ms)
  Rendered bonuses/new.html.erb within layouts/application (Duration: 38.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 39.8ms | GC: 0.0ms)
Completed 200 OK in 79ms (Views: 41.9ms | ActiveRecord: 0.7ms (0 queries, 0 cached) | GC: 0.0ms)


Started GET "/bonuses" for 127.0.0.1 at 2025-08-12 00:20:20 +0300
Processing by BonusesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:61
  Rendered bonuses/index.html.erb within layouts/application (Duration: 5.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 7.1ms | GC: 0.0ms)
Completed 200 OK in 28ms (Views: 9.7ms | ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 0.0ms)


Started POST "/bonuses" for 127.0.0.1 at 2025-08-12 00:21:23 +0300
Processing by BonusesController#create as TURBO_STREAM
  Parameters: {"authenticity_token" => "[FILTERED]", "bonus" => {"name" => "Welcome Bonus", "code" => "WELCOME", "bonus_type" => "deposit", "status" => "active", "currency" => "USD", "country" => "", "user_group" => "", "tags" => "", "minimum_deposit" => "1000", "wager" => "45", "maximum_winnings" => "30000", "wagering_strategy" => "standard", "availability_start_date" => "2025-08-11T21:19", "availability_end_date" => "2025-09-11T21:19"}, "deposit_bonus" => {"deposit_amount_required" => "1000", "bonus_percentage" => "100", "max_bonus_amount" => "", "first_deposit_only" => "1", "recurring_eligible" => "0"}, "commit" => "Create Bonus"}
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:75:in 'block in BonusesController#create'
  [1m[36mBonus Exists? (3.8ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'WELCOME' LIMIT 1 /*action='create',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:75:in 'block in BonusesController#create'
  [1m[36mBonus Create (1.0ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Welcome Bonus', 'WELCOME', 'deposit', 'active', 1000.0, 45.0, 30000.0, 'standard', '2025-08-11 21:19:00', '2025-09-11 21:19:00', '', '', '', 'USD', NULL, NULL, '2025-08-11 21:21:23.509105', '2025-08-11 21:21:23.509105') RETURNING "id" /*action='create',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:75:in 'block in BonusesController#create'
  [1m[36mDepositBonus Load (0.2ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 1 LIMIT 1 /*action='create',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/models/bonus.rb:136:in 'Bonus#create_type_specific_record'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TRANSACTION /*action='create',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:75:in 'block in BonusesController#create'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/new.html.erb within layouts/application
  Rendered bonuses/_type_specific_form.html.erb (Duration: 1.6ms | GC: 0.0ms)
  Rendered bonuses/new.html.erb within layouts/application (Duration: 5.7ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 13.3ms | GC: 1.4ms)
Completed 200 OK in 47ms (Views: 13.9ms | ActiveRecord: 6.4ms (3 queries, 0 cached) | GC: 1.4ms)


Started GET "/bonuses" for 127.0.0.1 at 2025-08-12 00:21:25 +0300
Processing by BonusesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:61
  Rendered bonuses/index.html.erb within layouts/application (Duration: 20.8ms | GC: 7.9ms)
  Rendered layout layouts/application.html.erb (Duration: 25.6ms | GC: 10.1ms)
Completed 200 OK in 47ms (Views: 26.0ms | ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 12.4ms)


Started POST "/bonuses" for 127.0.0.1 at 2025-08-12 00:21:26 +0300
Processing by BonusesController#create as TURBO_STREAM
  Parameters: {"authenticity_token" => "[FILTERED]", "bonus" => {"name" => "Welcome Bonus", "code" => "WELCOME", "bonus_type" => "deposit", "status" => "active", "currency" => "USD", "country" => "", "user_group" => "", "tags" => "", "minimum_deposit" => "1000", "wager" => "45", "maximum_winnings" => "30000", "wagering_strategy" => "standard", "availability_start_date" => "2025-08-11T21:19", "availability_end_date" => "2025-09-11T21:19"}, "deposit_bonus" => {"deposit_amount_required" => "1000", "bonus_percentage" => "100", "max_bonus_amount" => "", "first_deposit_only" => "1", "recurring_eligible" => "0"}, "commit" => "Create Bonus"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:75:in 'block in BonusesController#create'
  [1m[36mBonus Exists? (9.2ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'WELCOME' LIMIT 1 /*action='create',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:75:in 'block in BonusesController#create'
  [1m[36mBonus Create (0.2ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Welcome Bonus', 'WELCOME', 'deposit', 'active', 1000.0, 45.0, 30000.0, 'standard', '2025-08-11 21:19:00', '2025-09-11 21:19:00', '', '', '', 'USD', NULL, NULL, '2025-08-11 21:21:26.686941', '2025-08-11 21:21:26.686941') RETURNING "id" /*action='create',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:75:in 'block in BonusesController#create'
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 1 LIMIT 1 /*action='create',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/models/bonus.rb:136:in 'Bonus#create_type_specific_record'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TRANSACTION /*action='create',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:75:in 'block in BonusesController#create'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/new.html.erb within layouts/application
  Rendered bonuses/_type_specific_form.html.erb (Duration: 2.8ms | GC: 0.4ms)
  Rendered bonuses/new.html.erb within layouts/application (Duration: 6.6ms | GC: 0.4ms)
  Rendered layout layouts/application.html.erb (Duration: 7.8ms | GC: 0.4ms)
Completed 200 OK in 49ms (Views: 9.4ms | ActiveRecord: 10.3ms (3 queries, 0 cached) | GC: 11.8ms)


Started GET "/" for 127.0.0.1 at 2025-08-12 00:21:39 +0300
Processing by BonusesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:61
  Rendered bonuses/index.html.erb within layouts/application (Duration: 4.4ms | GC: 0.3ms)
  Rendered layout layouts/application.html.erb (Duration: 8.2ms | GC: 0.3ms)
Completed 200 OK in 23ms (Views: 10.1ms | ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 0.3ms)


Started GET "/bonuses" for 127.0.0.1 at 2025-08-12 00:21:41 +0300
Processing by BonusesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:61
  Rendered bonuses/index.html.erb within layouts/application (Duration: 3.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 6.9ms | GC: 0.5ms)
Completed 200 OK in 24ms (Views: 8.9ms | ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 0.5ms)


Started GET "/bonuses/new?type=manual" for 127.0.0.1 at 2025-08-12 00:21:41 +0300
Processing by BonusesController#new as HTML
  Parameters: {"type" => "manual"}
  Rendering layout layouts/application.html.erb
  Rendering bonuses/new.html.erb within layouts/application
  Rendered bonuses/_type_specific_form.html.erb (Duration: 1.6ms | GC: 0.0ms)
  Rendered bonuses/new.html.erb within layouts/application (Duration: 11.4ms | GC: 0.3ms)
  Rendered layout layouts/application.html.erb (Duration: 15.2ms | GC: 0.3ms)
Completed 200 OK in 49ms (Views: 15.9ms | ActiveRecord: 1.4ms (0 queries, 0 cached) | GC: 1.6ms)


Started GET "/bonuses/new" for 127.0.0.1 at 2025-08-12 00:21:43 +0300
Processing by BonusesController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering bonuses/new.html.erb within layouts/application
  Rendered bonuses/_type_specific_form.html.erb (Duration: 1.5ms | GC: 0.0ms)
  Rendered bonuses/new.html.erb within layouts/application (Duration: 14.9ms | GC: 0.4ms)
  Rendered layout layouts/application.html.erb (Duration: 17.5ms | GC: 0.6ms)
Completed 200 OK in 29ms (Views: 17.9ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.6ms)


Started GET "/bonuses/new" for 127.0.0.1 at 2025-08-12 00:21:45 +0300
Processing by BonusesController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering bonuses/new.html.erb within layouts/application
  Rendered bonuses/_type_specific_form.html.erb (Duration: 2.7ms | GC: 0.0ms)
  Rendered bonuses/new.html.erb within layouts/application (Duration: 11.7ms | GC: 0.3ms)
  Rendered layout layouts/application.html.erb (Duration: 16.5ms | GC: 0.3ms)
Completed 200 OK in 31ms (Views: 19.6ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.3ms)


Started GET "/bonuses/new?type=deposit" for 127.0.0.1 at 2025-08-12 00:22:04 +0300
Processing by BonusesController#new as HTML
  Parameters: {"type" => "deposit"}
  Rendering layout layouts/application.html.erb
  Rendering bonuses/new.html.erb within layouts/application
  Rendered bonuses/_type_specific_form.html.erb (Duration: 1.3ms | GC: 0.0ms)
  Rendered bonuses/new.html.erb within layouts/application (Duration: 10.1ms | GC: 0.2ms)
  Rendered layout layouts/application.html.erb (Duration: 14.4ms | GC: 0.2ms)
Completed 200 OK in 30ms (Views: 14.9ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.2ms)


Started POST "/bonuses" for 127.0.0.1 at 2025-08-12 00:22:19 +0300
Processing by BonusesController#create as TURBO_STREAM
  Parameters: {"authenticity_token" => "[FILTERED]", "bonus" => {"name" => "Welcome Bonus", "code" => "", "bonus_type" => "deposit", "status" => "draft", "currency" => "USD", "country" => "", "user_group" => "", "tags" => "", "minimum_deposit" => "", "wager" => "", "maximum_winnings" => "", "wagering_strategy" => "", "availability_start_date" => "2025-08-11T21:22", "availability_end_date" => "2025-09-11T21:22"}, "deposit_bonus" => {"deposit_amount_required" => "1999", "bonus_percentage" => "100", "max_bonus_amount" => "", "first_deposit_only" => "0", "recurring_eligible" => "0"}, "commit" => "Create Bonus"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_CB952825' LIMIT 1 /*action='create',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mCACHE Bonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_CB952825' LIMIT 1[0m
  ↳ app/controllers/bonuses_controller.rb:75:in 'block in BonusesController#create'
  [1m[36mBonus Create (1.8ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Welcome Bonus', 'BONUS_CB952825', 'deposit', 'draft', NULL, NULL, NULL, '', '2025-08-11 21:22:00', '2025-09-11 21:22:00', '', '', '', 'USD', NULL, NULL, '2025-08-11 21:22:19.305928', '2025-08-11 21:22:19.305928') RETURNING "id" /*action='create',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:75:in 'block in BonusesController#create'
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 1 LIMIT 1 /*action='create',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/models/bonus.rb:136:in 'Bonus#create_type_specific_record'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TRANSACTION /*action='create',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:75:in 'block in BonusesController#create'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/new.html.erb within layouts/application
  Rendered bonuses/_type_specific_form.html.erb (Duration: 3.1ms | GC: 0.0ms)
  Rendered bonuses/new.html.erb within layouts/application (Duration: 9.6ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 12.4ms | GC: 0.0ms)
Completed 200 OK in 49ms (Views: 14.7ms | ActiveRecord: 2.8ms (4 queries, 1 cached) | GC: 1.0ms)


Started GET "/bonuses/new?type=deposit" for ::1 at 2025-08-12 00:23:13 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='MbsPromoRetention'*/[0m
Processing by BonusesController#new as HTML
  Parameters: {"type" => "deposit"}
  Rendering layout layouts/application.html.erb
  Rendering bonuses/new.html.erb within layouts/application
  Rendered bonuses/_type_specific_form.html.erb (Duration: 6.1ms | GC: 0.0ms)
  Rendered bonuses/new.html.erb within layouts/application (Duration: 34.0ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 47.9ms | GC: 0.0ms)
Completed 200 OK in 156ms (Views: 54.1ms | ActiveRecord: 6.4ms (0 queries, 0 cached) | GC: 0.5ms)


Started HEAD "/" for 127.0.0.1 at 2025-08-12 00:26:11 +0300
Processing by BonusesController#index as */*
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:61
  Rendered bonuses/index.html.erb within layouts/application (Duration: 5.0ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 7.7ms | GC: 0.0ms)
Completed 200 OK in 31ms (Views: 8.5ms | ActiveRecord: 2.9ms (1 query, 0 cached) | GC: 0.0ms)


Started GET "/bonuses/new?type=deposit" for 127.0.0.1 at 2025-08-12 00:26:31 +0300
Processing by BonusesController#new as HTML
  Parameters: {"type" => "deposit"}
  Rendering layout layouts/application.html.erb
  Rendering bonuses/new.html.erb within layouts/application
  Rendered bonuses/_type_specific_form.html.erb (Duration: 3.7ms | GC: 0.0ms)
  Rendered bonuses/new.html.erb within layouts/application (Duration: 13.4ms | GC: 0.6ms)
  Rendered layout layouts/application.html.erb (Duration: 14.8ms | GC: 0.6ms)
Completed 200 OK in 83ms (Views: 15.5ms | ActiveRecord: 1.4ms (0 queries, 0 cached) | GC: 21.8ms)


Started POST "/bonuses" for 127.0.0.1 at 2025-08-12 00:26:46 +0300
Processing by BonusesController#create as HTML
  Parameters: {"authenticity_token" => "[FILTERED]", "bonus" => {"name" => "Test Bonus", "code" => "", "bonus_type" => "deposit", "status" => "draft", "currency" => "USD", "country" => "", "user_group" => "", "tags" => "", "minimum_deposit" => "", "wager" => "", "maximum_winnings" => "", "wagering_strategy" => "", "availability_start_date" => "2025-08-11T21:22", "availability_end_date" => "2025-09-11T21:22"}, "deposit_bonus" => {"deposit_amount_required" => "100", "bonus_percentage" => "50", "max_bonus_amount" => "", "first_deposit_only" => "0", "recurring_eligible" => "0"}, "commit" => "Create Bonus"}
Can't verify CSRF token authenticity.
Completed 422 Unprocessable Content in 2ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


  
ActionController::InvalidAuthenticityToken (Can't verify CSRF token authenticity.):
  
actionpack (8.0.2) lib/action_controller/metal/request_forgery_protection.rb:314:in 'ActionController::RequestForgeryProtection::ProtectionMethods::Exception#handle_unverified_request'
actionpack (8.0.2) lib/action_controller/metal/request_forgery_protection.rb:408:in 'ActionController::RequestForgeryProtection#handle_unverified_request'
actionpack (8.0.2) lib/action_controller/metal/request_forgery_protection.rb:397:in 'ActionController::RequestForgeryProtection#verify_authenticity_token'
activesupport (8.0.2) lib/active_support/callbacks.rb:361:in 'block in ActiveSupport::Callbacks::CallTemplate::MethodCall#make_lambda'
activesupport (8.0.2) lib/active_support/callbacks.rb:178:in 'block in ActiveSupport::Callbacks::Filters::Before#call'
actionpack (8.0.2) lib/abstract_controller/callbacks.rb:34:in 'block (2 levels) in <module:Callbacks>'
activesupport (8.0.2) lib/active_support/callbacks.rb:179:in 'ActiveSupport::Callbacks::Filters::Before#call'
activesupport (8.0.2) lib/active_support/callbacks.rb:559:in 'block in ActiveSupport::Callbacks::CallbackSequence#invoke_before'
activesupport (8.0.2) lib/active_support/callbacks.rb:559:in 'Array#each'
activesupport (8.0.2) lib/active_support/callbacks.rb:559:in 'ActiveSupport::Callbacks::CallbackSequence#invoke_before'
activesupport (8.0.2) lib/active_support/callbacks.rb:118:in 'block in ActiveSupport::Callbacks#run_callbacks'
activesupport (8.0.2) lib/active_support/callbacks.rb:140:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (8.0.2) lib/abstract_controller/callbacks.rb:260:in 'AbstractController::Callbacks#process_action'
actionpack (8.0.2) lib/action_controller/metal/rescue.rb:27:in 'ActionController::Rescue#process_action'
actionpack (8.0.2) lib/action_controller/metal/instrumentation.rb:76:in 'block in ActionController::Instrumentation#process_action'
activesupport (8.0.2) lib/active_support/notifications.rb:210:in 'block in ActiveSupport::Notifications.instrument'
activesupport (8.0.2) lib/active_support/notifications/instrumenter.rb:58:in 'ActiveSupport::Notifications::Instrumenter#instrument'
activesupport (8.0.2) lib/active_support/notifications.rb:210:in 'ActiveSupport::Notifications.instrument'
actionpack (8.0.2) lib/action_controller/metal/instrumentation.rb:75:in 'ActionController::Instrumentation#process_action'
actionpack (8.0.2) lib/action_controller/metal/params_wrapper.rb:259:in 'ActionController::ParamsWrapper#process_action'
activerecord (8.0.2) lib/active_record/railties/controller_runtime.rb:39:in 'ActiveRecord::Railties::ControllerRuntime#process_action'
actionpack (8.0.2) lib/abstract_controller/base.rb:163:in 'AbstractController::Base#process'
actionview (8.0.2) lib/action_view/rendering.rb:40:in 'ActionView::Rendering#process'
actionpack (8.0.2) lib/action_controller/metal.rb:252:in 'ActionController::Metal#dispatch'
actionpack (8.0.2) lib/action_controller/metal.rb:335:in 'ActionController::Metal.dispatch'
actionpack (8.0.2) lib/action_dispatch/routing/route_set.rb:67:in 'ActionDispatch::Routing::RouteSet::Dispatcher#dispatch'
actionpack (8.0.2) lib/action_dispatch/routing/route_set.rb:50:in 'ActionDispatch::Routing::RouteSet::Dispatcher#serve'
actionpack (8.0.2) lib/action_dispatch/journey/router.rb:53:in 'block in ActionDispatch::Journey::Router#serve'
actionpack (8.0.2) lib/action_dispatch/journey/router.rb:133:in 'block in ActionDispatch::Journey::Router#find_routes'
actionpack (8.0.2) lib/action_dispatch/journey/router.rb:126:in 'Array#each'
actionpack (8.0.2) lib/action_dispatch/journey/router.rb:126:in 'ActionDispatch::Journey::Router#find_routes'
actionpack (8.0.2) lib/action_dispatch/journey/router.rb:34:in 'ActionDispatch::Journey::Router#serve'
actionpack (8.0.2) lib/action_dispatch/routing/route_set.rb:908:in 'ActionDispatch::Routing::RouteSet#call'
railties (8.0.2) lib/rails/engine/lazy_route_set.rb:68:in 'Rails::Engine::LazyRouteSet#call'
rack (3.1.16) lib/rack/tempfile_reaper.rb:20:in 'Rack::TempfileReaper#call'
rack (3.1.16) lib/rack/etag.rb:29:in 'Rack::ETag#call'
rack (3.1.16) lib/rack/conditional_get.rb:43:in 'Rack::ConditionalGet#call'
rack (3.1.16) lib/rack/head.rb:15:in 'Rack::Head#call'
actionpack (8.0.2) lib/action_dispatch/http/permissions_policy.rb:38:in 'ActionDispatch::PermissionsPolicy::Middleware#call'
actionpack (8.0.2) lib/action_dispatch/http/content_security_policy.rb:38:in 'ActionDispatch::ContentSecurityPolicy::Middleware#call'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:274:in 'Rack::Session::Abstract::Persisted#context'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:268:in 'Rack::Session::Abstract::Persisted#call'
actionpack (8.0.2) lib/action_dispatch/middleware/cookies.rb:706:in 'ActionDispatch::Cookies#call'
activerecord (8.0.2) lib/active_record/migration.rb:671:in 'ActiveRecord::Migration::CheckPending#call'
actionpack (8.0.2) lib/action_dispatch/middleware/callbacks.rb:31:in 'block in ActionDispatch::Callbacks#call'
activesupport (8.0.2) lib/active_support/callbacks.rb:100:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (8.0.2) lib/action_dispatch/middleware/callbacks.rb:30:in 'ActionDispatch::Callbacks#call'
actionpack (8.0.2) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (8.0.2) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in 'ActionDispatch::ActionableExceptions#call'
actionpack (8.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:31:in 'ActionDispatch::DebugExceptions#call'
web-console (4.2.1) lib/web_console/middleware.rb:132:in 'WebConsole::Middleware#call_app'
web-console (4.2.1) lib/web_console/middleware.rb:28:in 'block in WebConsole::Middleware#call'
web-console (4.2.1) lib/web_console/middleware.rb:17:in 'Kernel#catch'
web-console (4.2.1) lib/web_console/middleware.rb:17:in 'WebConsole::Middleware#call'
actionpack (8.0.2) lib/action_dispatch/middleware/show_exceptions.rb:32:in 'ActionDispatch::ShowExceptions#call'
railties (8.0.2) lib/rails/rack/logger.rb:41:in 'Rails::Rack::Logger#call_app'
railties (8.0.2) lib/rails/rack/logger.rb:29:in 'Rails::Rack::Logger#call'
actionpack (8.0.2) lib/action_dispatch/middleware/remote_ip.rb:96:in 'ActionDispatch::RemoteIp#call'
actionpack (8.0.2) lib/action_dispatch/middleware/request_id.rb:34:in 'ActionDispatch::RequestId#call'
rack (3.1.16) lib/rack/method_override.rb:28:in 'Rack::MethodOverride#call'
rack (3.1.16) lib/rack/runtime.rb:24:in 'Rack::Runtime#call'
actionpack (8.0.2) lib/action_dispatch/middleware/server_timing.rb:61:in 'block in ActionDispatch::ServerTiming#call'
actionpack (8.0.2) lib/action_dispatch/middleware/server_timing.rb:26:in 'ActionDispatch::ServerTiming::Subscriber#collect_events'
actionpack (8.0.2) lib/action_dispatch/middleware/server_timing.rb:60:in 'ActionDispatch::ServerTiming#call'
actionpack (8.0.2) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (8.0.2) lib/action_dispatch/middleware/static.rb:27:in 'ActionDispatch::Static#call'
rack (3.1.16) lib/rack/sendfile.rb:114:in 'Rack::Sendfile#call'
actionpack (8.0.2) lib/action_dispatch/middleware/host_authorization.rb:143:in 'ActionDispatch::HostAuthorization#call'
railties (8.0.2) lib/rails/engine.rb:535:in 'Rails::Engine#call'
puma (6.6.0) lib/puma/configuration.rb:279:in 'Puma::Configuration::ConfigMiddleware#call'
puma (6.6.0) lib/puma/request.rb:99:in 'block in Puma::Request#handle_request'
puma (6.6.0) lib/puma/thread_pool.rb:390:in 'Puma::ThreadPool#with_force_shutdown'
puma (6.6.0) lib/puma/request.rb:98:in 'Puma::Request#handle_request'
puma (6.6.0) lib/puma/server.rb:472:in 'Puma::Server#process_client'
puma (6.6.0) lib/puma/server.rb:254:in 'block in Puma::Server#run'
puma (6.6.0) lib/puma/thread_pool.rb:167:in 'block in Puma::ThreadPool#spawn_thread'
Started POST "/bonuses" for 127.0.0.1 at 2025-08-12 00:27:21 +0300
Processing by BonusesController#create as HTML
  Parameters: {"bonus" => {"name" => "Test Bonus", "code" => "", "bonus_type" => "deposit", "status" => "draft", "currency" => "USD", "country" => "", "user_group" => "", "tags" => "", "minimum_deposit" => "", "wager" => "", "maximum_winnings" => "", "wagering_strategy" => "", "availability_start_date" => "2025-08-11T21:22", "availability_end_date" => "2025-09-11T21:22"}, "deposit_bonus" => {"deposit_amount_required" => "100", "bonus_percentage" => "50", "max_bonus_amount" => "", "first_deposit_only" => "0", "recurring_eligible" => "0"}, "commit" => "Create Bonus"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/models/bonus.rb:128:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_221860F4' LIMIT 1 /*action='create',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/models/bonus.rb:128:in 'block in Bonus#generate_code'
  [1m[36mCACHE Bonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_221860F4' LIMIT 1[0m
  ↳ app/controllers/bonuses_controller.rb:75:in 'block in BonusesController#create'
  [1m[36mBonus Create (0.3ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Bonus', 'BONUS_221860F4', 'deposit', 'draft', NULL, NULL, NULL, '', '2025-08-11 21:22:00', '2025-09-11 21:22:00', '', '', '', 'USD', NULL, NULL, '2025-08-11 21:27:21.776256', '2025-08-11 21:27:21.776256') RETURNING "id" /*action='create',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:75:in 'block in BonusesController#create'
  [1m[36mTRANSACTION (3.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:75:in 'block in BonusesController#create'
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 1 LIMIT 1 /*action='create',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:237:in 'BonusesController#update_type_specific_attributes'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:240:in 'BonusesController#update_type_specific_attributes'
  [1m[36mDepositBonus Create (0.9ms)[0m  [1m[32mINSERT INTO "deposit_bonuses" ("bonus_id", "deposit_amount_required", "bonus_percentage", "max_bonus_amount", "first_deposit_only", "recurring_eligible", "created_at", "updated_at") VALUES (1, 100.0, 50.0, NULL, 0, 0, '2025-08-11 21:27:21.796318', '2025-08-11 21:27:21.796318') RETURNING "id" /*action='create',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:240:in 'BonusesController#update_type_specific_attributes'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:240:in 'BonusesController#update_type_specific_attributes'
Redirected to http://localhost:3000/bonuses/1
Completed 302 Found in 58ms (ActiveRecord: 7.1ms (5 queries, 1 cached) | GC: 2.2ms)


Started GET "/bonuses/1" for 127.0.0.1 at 2025-08-12 00:27:27 +0300
Processing by BonusesController#show as JSON
  Parameters: {"id" => "1"}
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."id" = 1 LIMIT 1 /*action='show',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:171:in 'BonusesController#set_bonus'
  [1m[36mDepositBonus Load (0.2ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 1 LIMIT 1 /*action='show',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:54:in 'block (2 levels) in BonusesController#show'
Completed 200 OK in 15ms (Views: 0.1ms | ActiveRecord: 0.4ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/bonuses/new?type=deposit" for 127.0.0.1 at 2025-08-12 00:28:13 +0300
Processing by BonusesController#new as */*
  Parameters: {"type" => "deposit"}
  Rendering layout layouts/application.html.erb
  Rendering bonuses/new.html.erb within layouts/application
  Rendered bonuses/_type_specific_form.html.erb (Duration: 1.8ms | GC: 0.0ms)
  Rendered bonuses/new.html.erb within layouts/application (Duration: 9.7ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 16.0ms | GC: 0.0ms)
Completed 200 OK in 34ms (Views: 18.0ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


Started POST "/bonuses" for 127.0.0.1 at 2025-08-12 00:28:21 +0300
Processing by BonusesController#create as HTML
  Parameters: {"authenticity_token" => "[FILTERED]", "bonus" => {"name" => "Test Bonus 2", "code" => "", "bonus_type" => "deposit", "status" => "draft", "currency" => "USD", "country" => "", "user_group" => "", "tags" => "", "minimum_deposit" => "", "wager" => "", "maximum_winnings" => "", "wagering_strategy" => "", "availability_start_date" => "2025-08-11T21:22", "availability_end_date" => "2025-09-11T21:22"}, "deposit_bonus" => {"deposit_amount_required" => "200", "bonus_percentage" => "100", "max_bonus_amount" => "500", "first_deposit_only" => "1", "recurring_eligible" => "0"}, "commit" => "Create Bonus"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/models/bonus.rb:128:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (1.5ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_2A219FD9' LIMIT 1 /*action='create',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/models/bonus.rb:128:in 'block in Bonus#generate_code'
  [1m[36mCACHE Bonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_2A219FD9' LIMIT 1[0m
  ↳ app/controllers/bonuses_controller.rb:75:in 'block in BonusesController#create'
  [1m[36mBonus Create (1.5ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Bonus 2', 'BONUS_2A219FD9', 'deposit', 'draft', NULL, NULL, NULL, '', '2025-08-11 21:22:00', '2025-09-11 21:22:00', '', '', '', 'USD', NULL, NULL, '2025-08-11 21:28:21.708786', '2025-08-11 21:28:21.708786') RETURNING "id" /*action='create',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:75:in 'block in BonusesController#create'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:75:in 'block in BonusesController#create'
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 2 LIMIT 1 /*action='create',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:237:in 'BonusesController#update_type_specific_attributes'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:240:in 'BonusesController#update_type_specific_attributes'
  [1m[36mDepositBonus Create (2.5ms)[0m  [1m[32mINSERT INTO "deposit_bonuses" ("bonus_id", "deposit_amount_required", "bonus_percentage", "max_bonus_amount", "first_deposit_only", "recurring_eligible", "created_at", "updated_at") VALUES (2, 200.0, 100.0, 500.0, 1, 0, '2025-08-11 21:28:21.715016', '2025-08-11 21:28:21.715016') RETURNING "id" /*action='create',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:240:in 'BonusesController#update_type_specific_attributes'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:240:in 'BonusesController#update_type_specific_attributes'
Redirected to http://localhost:3000/bonuses/2
Completed 302 Found in 33ms (ActiveRecord: 6.1ms (5 queries, 1 cached) | GC: 0.0ms)


Started GET "/bonuses/2" for 127.0.0.1 at 2025-08-12 00:28:26 +0300
Processing by BonusesController#show as JSON
  Parameters: {"id" => "2"}
  [1m[36mBonus Load (0.3ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."id" = 2 LIMIT 1 /*action='show',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:171:in 'BonusesController#set_bonus'
  [1m[36mDepositBonus Load (0.2ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 2 LIMIT 1 /*action='show',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:54:in 'block (2 levels) in BonusesController#show'
Completed 200 OK in 30ms (Views: 0.2ms | ActiveRecord: 0.5ms (2 queries, 0 cached) | GC: 6.3ms)


Started GET "/bonuses" for 127.0.0.1 at 2025-08-12 00:28:35 +0300
Processing by BonusesController#index as JSON
  [1m[36mBonus Load (0.4ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."created_at" DESC LIMIT 20 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:46:in 'block (2 levels) in BonusesController#index'
  [1m[36mDepositBonus Load (1.0ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:46:in 'block (2 levels) in BonusesController#index'
  [1m[36mInputCouponBonus Load (0.2ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:46:in 'block (2 levels) in BonusesController#index'
  [1m[36mManualBonus Load (1.9ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:46:in 'block (2 levels) in BonusesController#index'
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:46:in 'block (2 levels) in BonusesController#index'
  [1m[36mGroupsUpdateBonus Load (0.2ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:46:in 'block (2 levels) in BonusesController#index'
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:46:in 'block (2 levels) in BonusesController#index'
Completed 200 OK in 120ms (Views: 104.9ms | ActiveRecord: 5.8ms (7 queries, 0 cached) | GC: 4.6ms)


Started GET "/bonuses/new?type=deposit" for ::1 at 2025-08-12 00:29:12 +0300
Processing by BonusesController#new as HTML
  Parameters: {"type" => "deposit"}
  Rendering layout layouts/application.html.erb
  Rendering bonuses/new.html.erb within layouts/application
  Rendered bonuses/_type_specific_form.html.erb (Duration: 4.1ms | GC: 0.0ms)
  Rendered bonuses/new.html.erb within layouts/application (Duration: 10.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 12.9ms | GC: 0.0ms)
Completed 200 OK in 46ms (Views: 13.8ms | ActiveRecord: 1.4ms (0 queries, 0 cached) | GC: 0.0ms)


Started POST "/bonuses" for ::1 at 2025-08-12 00:29:34 +0300
Processing by BonusesController#create as TURBO_STREAM
  Parameters: {"authenticity_token" => "[FILTERED]", "bonus" => {"name" => "Welcome Bonus", "code" => "WELCOME", "bonus_type" => "deposit", "status" => "draft", "currency" => "USD", "country" => "", "user_group" => "", "tags" => "", "minimum_deposit" => "1999", "wager" => "45", "maximum_winnings" => "30000", "wagering_strategy" => "", "availability_start_date" => "2025-08-11T21:29", "availability_end_date" => "2025-09-11T21:29"}, "deposit_bonus" => {"deposit_amount_required" => "1999", "bonus_percentage" => "100", "max_bonus_amount" => "", "first_deposit_only" => "0", "recurring_eligible" => "0"}, "commit" => "Create Bonus"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:75:in 'block in BonusesController#create'
  [1m[36mBonus Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'WELCOME' LIMIT 1 /*action='create',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:75:in 'block in BonusesController#create'
  [1m[36mBonus Create (0.2ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Welcome Bonus', 'WELCOME', 'deposit', 'draft', 1999.0, 45.0, 30000.0, '', '2025-08-11 21:29:00', '2025-09-11 21:29:00', '', '', '', 'USD', NULL, NULL, '2025-08-11 21:29:34.888395', '2025-08-11 21:29:34.888395') RETURNING "id" /*action='create',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:75:in 'block in BonusesController#create'
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:75:in 'block in BonusesController#create'
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 3 LIMIT 1 /*action='create',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:237:in 'BonusesController#update_type_specific_attributes'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:240:in 'BonusesController#update_type_specific_attributes'
  [1m[36mDepositBonus Create (8.0ms)[0m  [1m[32mINSERT INTO "deposit_bonuses" ("bonus_id", "deposit_amount_required", "bonus_percentage", "max_bonus_amount", "first_deposit_only", "recurring_eligible", "created_at", "updated_at") VALUES (3, 1999.0, 100.0, NULL, 0, 0, '2025-08-11 21:29:34.896501', '2025-08-11 21:29:34.896501') RETURNING "id" /*action='create',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:240:in 'BonusesController#update_type_specific_attributes'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:240:in 'BonusesController#update_type_specific_attributes'
Redirected to http://localhost:3000/bonuses/3
Completed 302 Found in 39ms (ActiveRecord: 11.9ms (4 queries, 0 cached) | GC: 5.0ms)


Started GET "/bonuses/3" for ::1 at 2025-08-12 00:29:34 +0300
Processing by BonusesController#show as TURBO_STREAM
  Parameters: {"id" => "3"}
  [1m[36mBonus Load (1.4ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."id" = 3 LIMIT 1 /*action='show',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:171:in 'BonusesController#set_bonus'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/show.html.erb within layouts/application
  [1m[36mDepositBonus Load (0.2ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 3 LIMIT 1 /*action='show',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/_type_specific_details.html.erb:3
  Rendered bonuses/_type_specific_details.html.erb (Duration: 6.9ms | GC: 1.4ms)
  Rendered bonuses/show.html.erb within layouts/application (Duration: 19.2ms | GC: 1.4ms)
  Rendered layout layouts/application.html.erb (Duration: 20.8ms | GC: 1.4ms)
Completed 200 OK in 37ms (Views: 21.5ms | ActiveRecord: 1.6ms (2 queries, 0 cached) | GC: 2.5ms)


Started GET "/bonuses" for ::1 at 2025-08-12 00:29:36 +0300
Processing by BonusesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:61
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."created_at" DESC LIMIT 20 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mManualBonus Load (0.2ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mCollectBonus Load (0.2ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mGroupsUpdateBonus Load (0.2ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mSchedulerBonus Load (0.4ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  Rendered bonuses/index.html.erb within layouts/application (Duration: 49.4ms | GC: 1.7ms)
  Rendered layout layouts/application.html.erb (Duration: 49.9ms | GC: 1.7ms)
Completed 500 Internal Server Error in 63ms (ActiveRecord: 5.0ms (8 queries, 0 cached) | GC: 3.1ms)


  
ActionView::Template::Error (unable to convert unpermitted parameters to hash)
Caused by: ActionController::UnfilteredParameters (unable to convert unpermitted parameters to hash)

Information for: ActionView::Template::Error (unable to convert unpermitted parameters to hash):
    159:                       class: "btn btn-outline-secondary me-2" %>
    160:                 <% end %>
    161:                 <span class="me-2">Page <%= current_page %></span>
    162:                 <%= link_to "Next", bonuses_path(params.merge(page: current_page + 1)), 
    163:                     class: "btn btn-outline-secondary" %>
    164:               </div>
    165:             </div>
  
app/views/bonuses/index.html.erb:162

Information for cause: ActionController::UnfilteredParameters (unable to convert unpermitted parameters to hash):
  
app/views/bonuses/index.html.erb:162
Started GET "/" for ::1 at 2025-08-12 00:29:36 +0300
Processing by BonusesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:61
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."created_at" DESC LIMIT 20 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mDepositBonus Load (0.2ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mInputCouponBonus Load (0.5ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mGroupsUpdateBonus Load (0.3ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  Rendered bonuses/index.html.erb within layouts/application (Duration: 43.4ms | GC: 5.4ms)
  Rendered layout layouts/application.html.erb (Duration: 46.8ms | GC: 6.4ms)
Completed 500 Internal Server Error in 103ms (ActiveRecord: 1.6ms (8 queries, 0 cached) | GC: 12.9ms)


  
ActionView::Template::Error (unable to convert unpermitted parameters to hash)
Caused by: ActionController::UnfilteredParameters (unable to convert unpermitted parameters to hash)

Information for: ActionView::Template::Error (unable to convert unpermitted parameters to hash):
    159:                       class: "btn btn-outline-secondary me-2" %>
    160:                 <% end %>
    161:                 <span class="me-2">Page <%= current_page %></span>
    162:                 <%= link_to "Next", bonuses_path(params.merge(page: current_page + 1)), 
    163:                     class: "btn btn-outline-secondary" %>
    164:               </div>
    165:             </div>
  
app/views/bonuses/index.html.erb:162

Information for cause: ActionController::UnfilteredParameters (unable to convert unpermitted parameters to hash):
  
app/views/bonuses/index.html.erb:162
Started GET "/bonuses" for ::1 at 2025-08-12 00:29:37 +0300
Processing by BonusesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:61
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."created_at" DESC LIMIT 20 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mDepositBonus Load (0.3ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mInputCouponBonus Load (0.2ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  Rendered bonuses/index.html.erb within layouts/application (Duration: 23.6ms | GC: 2.3ms)
  Rendered layout layouts/application.html.erb (Duration: 24.0ms | GC: 2.3ms)
Completed 500 Internal Server Error in 41ms (ActiveRecord: 1.3ms (8 queries, 0 cached) | GC: 2.3ms)


  
ActionView::Template::Error (unable to convert unpermitted parameters to hash)
Caused by: ActionController::UnfilteredParameters (unable to convert unpermitted parameters to hash)

Information for: ActionView::Template::Error (unable to convert unpermitted parameters to hash):
    159:                       class: "btn btn-outline-secondary me-2" %>
    160:                 <% end %>
    161:                 <span class="me-2">Page <%= current_page %></span>
    162:                 <%= link_to "Next", bonuses_path(params.merge(page: current_page + 1)), 
    163:                     class: "btn btn-outline-secondary" %>
    164:               </div>
    165:             </div>
  
app/views/bonuses/index.html.erb:162

Information for cause: ActionController::UnfilteredParameters (unable to convert unpermitted parameters to hash):
  
app/views/bonuses/index.html.erb:162
Started GET "/bonuses" for 127.0.0.1 at 2025-08-12 00:30:32 +0300
Processing by BonusesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:61
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."created_at" DESC LIMIT 20 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  Rendered bonuses/index.html.erb within layouts/application (Duration: 77.6ms | GC: 12.2ms)
  Rendered layout layouts/application.html.erb (Duration: 85.3ms | GC: 14.0ms)
Completed 200 OK in 109ms (Views: 82.9ms | ActiveRecord: 4.2ms (8 queries, 0 cached) | GC: 15.0ms)


Started GET "/bonuses?page=2" for 127.0.0.1 at 2025-08-12 00:30:38 +0300
Processing by BonusesController#index as HTML
  Parameters: {"page" => "2"}
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 20 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:61
  Rendered bonuses/index.html.erb within layouts/application (Duration: 13.0ms | GC: 1.3ms)
  Rendered layout layouts/application.html.erb (Duration: 17.8ms | GC: 2.0ms)
Completed 200 OK in 54ms (Views: 18.9ms | ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 3.1ms)


Started GET "/bonuses?page=2" for 127.0.0.1 at 2025-08-12 00:30:43 +0300
Processing by BonusesController#index as HTML
  Parameters: {"page" => "2"}
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 20 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:61
  Rendered bonuses/index.html.erb within layouts/application (Duration: 4.9ms | GC: 1.9ms)
  Rendered layout layouts/application.html.erb (Duration: 9.5ms | GC: 2.7ms)
Completed 200 OK in 29ms (Views: 11.8ms | ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 3.2ms)


Started GET "/bonuses?type=deposit&page=2" for 127.0.0.1 at 2025-08-12 00:30:53 +0300
Processing by BonusesController#index as HTML
  Parameters: {"type" => "deposit", "page" => "2"}
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."bonus_type" = 'deposit' LIMIT 1 OFFSET 20 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:61
  Rendered bonuses/index.html.erb within layouts/application (Duration: 11.0ms | GC: 2.2ms)
  Rendered layout layouts/application.html.erb (Duration: 14.2ms | GC: 3.4ms)
Completed 200 OK in 35ms (Views: 16.3ms | ActiveRecord: 0.2ms (1 query, 0 cached) | GC: 3.7ms)


Started GET "/bonuses?type=deposit&page=2" for 127.0.0.1 at 2025-08-12 00:30:59 +0300
Processing by BonusesController#index as */*
  Parameters: {"type" => "deposit", "page" => "2"}
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."bonus_type" = 'deposit' LIMIT 1 OFFSET 20 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:61
  Rendered bonuses/index.html.erb within layouts/application (Duration: 7.9ms | GC: 1.8ms)
  Rendered layout layouts/application.html.erb (Duration: 13.5ms | GC: 2.7ms)
Completed 200 OK in 30ms (Views: 15.3ms | ActiveRecord: 0.2ms (1 query, 0 cached) | GC: 3.0ms)


Started GET "/bonuses?type=deposit&page=2" for 127.0.0.1 at 2025-08-12 00:31:02 +0300
Processing by BonusesController#index as */*
  Parameters: {"type" => "deposit", "page" => "2"}
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."bonus_type" = 'deposit' LIMIT 1 OFFSET 20 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:61
  Rendered bonuses/index.html.erb within layouts/application (Duration: 12.1ms | GC: 3.2ms)
  Rendered layout layouts/application.html.erb (Duration: 16.3ms | GC: 3.7ms)
Completed 200 OK in 32ms (Views: 16.7ms | ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 4.1ms)


Started GET "/bonuses?search=Test&page=1" for 127.0.0.1 at 2025-08-12 00:31:13 +0300
Processing by BonusesController#index as */*
  Parameters: {"search" => "Test", "page" => "1"}
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE (name LIKE '%Test%' OR code LIKE '%Test%') LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:61
  [1m[36mBonus Load (0.1ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE (name LIKE '%Test%' OR code LIKE '%Test%') ORDER BY "bonuses"."created_at" DESC LIMIT 20 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mCollectBonus Load (0.2ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mSchedulerBonus Load (0.3ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
[31mUnpermitted parameter: :page. Context: { controller: BonusesController, action: index, request: #<ActionDispatch::Request:0x000076582d8b4060>, params: {"search" => "Test", "page" => "1", "controller" => "bonuses", "action" => "index"} }[0m
  Rendered bonuses/index.html.erb within layouts/application (Duration: 19.2ms | GC: 6.1ms)
  Rendered layout layouts/application.html.erb (Duration: 20.1ms | GC: 6.1ms)
Completed 200 OK in 29ms (Views: 19.0ms | ActiveRecord: 1.4ms (8 queries, 0 cached) | GC: 6.6ms)


Started GET "/bonuses" for ::1 at 2025-08-12 00:31:36 +0300
Processing by BonusesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:61
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."created_at" DESC LIMIT 20 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  Rendered bonuses/index.html.erb within layouts/application (Duration: 22.2ms | GC: 1.2ms)
  Rendered layout layouts/application.html.erb (Duration: 23.9ms | GC: 1.2ms)
Completed 200 OK in 41ms (Views: 23.5ms | ActiveRecord: 1.1ms (8 queries, 0 cached) | GC: 2.1ms)


Started GET "/bonuses/2/activate" for ::1 at 2025-08-12 00:31:42 +0300
  
ActionController::RoutingError (No route matches [GET] "/bonuses/2/activate"):
  
Started GET "/bonuses" for 127.0.0.1 at 2025-08-12 00:32:51 +0300
Processing by BonusesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:61
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."created_at" DESC LIMIT 20 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mInputCouponBonus Load (0.7ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  Rendered bonuses/index.html.erb within layouts/application (Duration: 51.8ms | GC: 4.1ms)
  Rendered layout layouts/application.html.erb (Duration: 56.7ms | GC: 4.6ms)
Completed 200 OK in 73ms (Views: 54.3ms | ActiveRecord: 5.0ms (8 queries, 0 cached) | GC: 5.6ms)


Started PATCH "/bonuses/2/activate" for 127.0.0.1 at 2025-08-12 00:32:58 +0300
Processing by BonusesController#activate as HTML
  Parameters: {"id" => "2"}
Can't verify CSRF token authenticity.
Completed 422 Unprocessable Content in 1ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.2ms)


  
ActionController::InvalidAuthenticityToken (Can't verify CSRF token authenticity.):
  
actionpack (8.0.2) lib/action_controller/metal/request_forgery_protection.rb:314:in 'ActionController::RequestForgeryProtection::ProtectionMethods::Exception#handle_unverified_request'
actionpack (8.0.2) lib/action_controller/metal/request_forgery_protection.rb:408:in 'ActionController::RequestForgeryProtection#handle_unverified_request'
actionpack (8.0.2) lib/action_controller/metal/request_forgery_protection.rb:397:in 'ActionController::RequestForgeryProtection#verify_authenticity_token'
activesupport (8.0.2) lib/active_support/callbacks.rb:361:in 'block in ActiveSupport::Callbacks::CallTemplate::MethodCall#make_lambda'
activesupport (8.0.2) lib/active_support/callbacks.rb:178:in 'block in ActiveSupport::Callbacks::Filters::Before#call'
actionpack (8.0.2) lib/abstract_controller/callbacks.rb:34:in 'block (2 levels) in <module:Callbacks>'
activesupport (8.0.2) lib/active_support/callbacks.rb:179:in 'ActiveSupport::Callbacks::Filters::Before#call'
activesupport (8.0.2) lib/active_support/callbacks.rb:559:in 'block in ActiveSupport::Callbacks::CallbackSequence#invoke_before'
activesupport (8.0.2) lib/active_support/callbacks.rb:559:in 'Array#each'
activesupport (8.0.2) lib/active_support/callbacks.rb:559:in 'ActiveSupport::Callbacks::CallbackSequence#invoke_before'
activesupport (8.0.2) lib/active_support/callbacks.rb:118:in 'block in ActiveSupport::Callbacks#run_callbacks'
activesupport (8.0.2) lib/active_support/callbacks.rb:140:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (8.0.2) lib/abstract_controller/callbacks.rb:260:in 'AbstractController::Callbacks#process_action'
actionpack (8.0.2) lib/action_controller/metal/rescue.rb:27:in 'ActionController::Rescue#process_action'
actionpack (8.0.2) lib/action_controller/metal/instrumentation.rb:76:in 'block in ActionController::Instrumentation#process_action'
activesupport (8.0.2) lib/active_support/notifications.rb:210:in 'block in ActiveSupport::Notifications.instrument'
activesupport (8.0.2) lib/active_support/notifications/instrumenter.rb:58:in 'ActiveSupport::Notifications::Instrumenter#instrument'
activesupport (8.0.2) lib/active_support/notifications.rb:210:in 'ActiveSupport::Notifications.instrument'
actionpack (8.0.2) lib/action_controller/metal/instrumentation.rb:75:in 'ActionController::Instrumentation#process_action'
actionpack (8.0.2) lib/action_controller/metal/params_wrapper.rb:259:in 'ActionController::ParamsWrapper#process_action'
activerecord (8.0.2) lib/active_record/railties/controller_runtime.rb:39:in 'ActiveRecord::Railties::ControllerRuntime#process_action'
actionpack (8.0.2) lib/abstract_controller/base.rb:163:in 'AbstractController::Base#process'
actionview (8.0.2) lib/action_view/rendering.rb:40:in 'ActionView::Rendering#process'
actionpack (8.0.2) lib/action_controller/metal.rb:252:in 'ActionController::Metal#dispatch'
actionpack (8.0.2) lib/action_controller/metal.rb:335:in 'ActionController::Metal.dispatch'
actionpack (8.0.2) lib/action_dispatch/routing/route_set.rb:67:in 'ActionDispatch::Routing::RouteSet::Dispatcher#dispatch'
actionpack (8.0.2) lib/action_dispatch/routing/route_set.rb:50:in 'ActionDispatch::Routing::RouteSet::Dispatcher#serve'
actionpack (8.0.2) lib/action_dispatch/journey/router.rb:53:in 'block in ActionDispatch::Journey::Router#serve'
actionpack (8.0.2) lib/action_dispatch/journey/router.rb:133:in 'block in ActionDispatch::Journey::Router#find_routes'
actionpack (8.0.2) lib/action_dispatch/journey/router.rb:126:in 'Array#each'
actionpack (8.0.2) lib/action_dispatch/journey/router.rb:126:in 'ActionDispatch::Journey::Router#find_routes'
actionpack (8.0.2) lib/action_dispatch/journey/router.rb:34:in 'ActionDispatch::Journey::Router#serve'
actionpack (8.0.2) lib/action_dispatch/routing/route_set.rb:908:in 'ActionDispatch::Routing::RouteSet#call'
railties (8.0.2) lib/rails/engine/lazy_route_set.rb:68:in 'Rails::Engine::LazyRouteSet#call'
rack (3.1.16) lib/rack/tempfile_reaper.rb:20:in 'Rack::TempfileReaper#call'
rack (3.1.16) lib/rack/etag.rb:29:in 'Rack::ETag#call'
rack (3.1.16) lib/rack/conditional_get.rb:43:in 'Rack::ConditionalGet#call'
rack (3.1.16) lib/rack/head.rb:15:in 'Rack::Head#call'
actionpack (8.0.2) lib/action_dispatch/http/permissions_policy.rb:38:in 'ActionDispatch::PermissionsPolicy::Middleware#call'
actionpack (8.0.2) lib/action_dispatch/http/content_security_policy.rb:38:in 'ActionDispatch::ContentSecurityPolicy::Middleware#call'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:274:in 'Rack::Session::Abstract::Persisted#context'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:268:in 'Rack::Session::Abstract::Persisted#call'
actionpack (8.0.2) lib/action_dispatch/middleware/cookies.rb:706:in 'ActionDispatch::Cookies#call'
activerecord (8.0.2) lib/active_record/migration.rb:671:in 'ActiveRecord::Migration::CheckPending#call'
actionpack (8.0.2) lib/action_dispatch/middleware/callbacks.rb:31:in 'block in ActionDispatch::Callbacks#call'
activesupport (8.0.2) lib/active_support/callbacks.rb:100:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (8.0.2) lib/action_dispatch/middleware/callbacks.rb:30:in 'ActionDispatch::Callbacks#call'
actionpack (8.0.2) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (8.0.2) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in 'ActionDispatch::ActionableExceptions#call'
actionpack (8.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:31:in 'ActionDispatch::DebugExceptions#call'
web-console (4.2.1) lib/web_console/middleware.rb:132:in 'WebConsole::Middleware#call_app'
web-console (4.2.1) lib/web_console/middleware.rb:28:in 'block in WebConsole::Middleware#call'
web-console (4.2.1) lib/web_console/middleware.rb:17:in 'Kernel#catch'
web-console (4.2.1) lib/web_console/middleware.rb:17:in 'WebConsole::Middleware#call'
actionpack (8.0.2) lib/action_dispatch/middleware/show_exceptions.rb:32:in 'ActionDispatch::ShowExceptions#call'
railties (8.0.2) lib/rails/rack/logger.rb:41:in 'Rails::Rack::Logger#call_app'
railties (8.0.2) lib/rails/rack/logger.rb:29:in 'Rails::Rack::Logger#call'
actionpack (8.0.2) lib/action_dispatch/middleware/remote_ip.rb:96:in 'ActionDispatch::RemoteIp#call'
actionpack (8.0.2) lib/action_dispatch/middleware/request_id.rb:34:in 'ActionDispatch::RequestId#call'
rack (3.1.16) lib/rack/method_override.rb:28:in 'Rack::MethodOverride#call'
rack (3.1.16) lib/rack/runtime.rb:24:in 'Rack::Runtime#call'
actionpack (8.0.2) lib/action_dispatch/middleware/server_timing.rb:61:in 'block in ActionDispatch::ServerTiming#call'
actionpack (8.0.2) lib/action_dispatch/middleware/server_timing.rb:26:in 'ActionDispatch::ServerTiming::Subscriber#collect_events'
actionpack (8.0.2) lib/action_dispatch/middleware/server_timing.rb:60:in 'ActionDispatch::ServerTiming#call'
actionpack (8.0.2) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (8.0.2) lib/action_dispatch/middleware/static.rb:27:in 'ActionDispatch::Static#call'
rack (3.1.16) lib/rack/sendfile.rb:114:in 'Rack::Sendfile#call'
actionpack (8.0.2) lib/action_dispatch/middleware/host_authorization.rb:143:in 'ActionDispatch::HostAuthorization#call'
railties (8.0.2) lib/rails/engine.rb:535:in 'Rails::Engine#call'
puma (6.6.0) lib/puma/configuration.rb:279:in 'Puma::Configuration::ConfigMiddleware#call'
puma (6.6.0) lib/puma/request.rb:99:in 'block in Puma::Request#handle_request'
puma (6.6.0) lib/puma/thread_pool.rb:390:in 'Puma::ThreadPool#with_force_shutdown'
puma (6.6.0) lib/puma/request.rb:98:in 'Puma::Request#handle_request'
puma (6.6.0) lib/puma/server.rb:472:in 'Puma::Server#process_client'
puma (6.6.0) lib/puma/server.rb:254:in 'block in Puma::Server#run'
puma (6.6.0) lib/puma/thread_pool.rb:167:in 'block in Puma::ThreadPool#spawn_thread'
Started GET "/bonuses" for 127.0.0.1 at 2025-08-12 00:33:28 +0300
Processing by BonusesController#index as */*
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:61
  [1m[36mBonus Load (0.1ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."created_at" DESC LIMIT 20 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mSchedulerBonus Load (0.8ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  Rendered bonuses/index.html.erb within layouts/application (Duration: 22.5ms | GC: 1.8ms)
  Rendered layout layouts/application.html.erb (Duration: 25.2ms | GC: 1.8ms)
Completed 200 OK in 42ms (Views: 24.1ms | ActiveRecord: 1.5ms (8 queries, 0 cached) | GC: 1.8ms)


Started PATCH "/bonuses/2/activate" for 127.0.0.1 at 2025-08-12 00:33:35 +0300
Processing by BonusesController#activate as HTML
  Parameters: {"authenticity_token" => "[FILTERED]", "id" => "2"}
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."id" = 2 LIMIT 1 /*action='activate',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:171:in 'BonusesController#set_bonus'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='activate',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/models/bonus.rb:89:in 'Bonus#activate!'
  [1m[36mBonus Update (6.0ms)[0m  [1m[33mUPDATE "bonuses" SET "status" = 'active', "updated_at" = '2025-08-11 21:33:35.658003' WHERE "bonuses"."id" = 2 /*action='activate',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/models/bonus.rb:89:in 'Bonus#activate!'
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='activate',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/models/bonus.rb:89:in 'Bonus#activate!'
Redirected to http://localhost:3000/bonuses/2
Completed 302 Found in 39ms (ActiveRecord: 11.8ms (2 queries, 0 cached) | GC: 0.9ms)


Started GET "/bonuses/2" for 127.0.0.1 at 2025-08-12 00:33:41 +0300
Processing by BonusesController#show as JSON
  Parameters: {"id" => "2"}
  [1m[36mBonus Load (1.3ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."id" = 2 LIMIT 1 /*action='show',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:171:in 'BonusesController#set_bonus'
  [1m[36mDepositBonus Load (0.2ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 2 LIMIT 1 /*action='show',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:54:in 'block (2 levels) in BonusesController#show'
Completed 200 OK in 26ms (Views: 0.2ms | ActiveRecord: 1.4ms (2 queries, 0 cached) | GC: 1.0ms)


Started GET "/bonuses/2/activate" for ::1 at 2025-08-12 00:33:53 +0300
  
ActionController::RoutingError (No route matches [GET] "/bonuses/2/activate"):
  
Started GET "/bonuses/2/activate" for ::1 at 2025-08-12 00:33:57 +0300
  
ActionController::RoutingError (No route matches [GET] "/bonuses/2/activate"):
  
Started GET "/bonuses" for ::1 at 2025-08-12 00:33:59 +0300
Processing by BonusesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:61
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."created_at" DESC LIMIT 20 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  Rendered bonuses/index.html.erb within layouts/application (Duration: 22.7ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 25.9ms | GC: 0.0ms)
Completed 200 OK in 49ms (Views: 27.9ms | ActiveRecord: 0.9ms (8 queries, 0 cached) | GC: 0.0ms)


Started GET "/bonuses/2" for ::1 at 2025-08-12 00:34:00 +0300
Processing by BonusesController#show as HTML
  Parameters: {"id" => "2"}
  [1m[36mBonus Load (0.3ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."id" = 2 LIMIT 1 /*action='show',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:171:in 'BonusesController#set_bonus'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/show.html.erb within layouts/application
  [1m[36mDepositBonus Load (0.2ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 2 LIMIT 1 /*action='show',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/_type_specific_details.html.erb:3
  Rendered bonuses/_type_specific_details.html.erb (Duration: 8.1ms | GC: 2.8ms)
  Rendered bonuses/show.html.erb within layouts/application (Duration: 11.3ms | GC: 2.8ms)
  Rendered layout layouts/application.html.erb (Duration: 14.2ms | GC: 2.8ms)
Completed 200 OK in 27ms (Views: 14.8ms | ActiveRecord: 0.4ms (2 queries, 0 cached) | GC: 2.8ms)


Started DELETE "/bonuses/2?_method=delete" for ::1 at 2025-08-12 00:34:08 +0300
Processing by BonusesController#destroy as TURBO_STREAM
  Parameters: {"id" => "2"}
  [1m[36mBonus Load (1.1ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."id" = 2 LIMIT 1 /*action='destroy',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:171:in 'BonusesController#set_bonus'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='destroy',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:103:in 'BonusesController#destroy'
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 2 LIMIT 1 /*action='destroy',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:103:in 'BonusesController#destroy'
  [1m[36mDepositBonus Destroy (0.1ms)[0m  [1m[31mDELETE FROM "deposit_bonuses" WHERE "deposit_bonuses"."id" = 2 /*action='destroy',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:103:in 'BonusesController#destroy'
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" = 2 LIMIT 1 /*action='destroy',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:103:in 'BonusesController#destroy'
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" = 2 LIMIT 1 /*action='destroy',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:103:in 'BonusesController#destroy'
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" = 2 LIMIT 1 /*action='destroy',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:103:in 'BonusesController#destroy'
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" = 2 LIMIT 1 /*action='destroy',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:103:in 'BonusesController#destroy'
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" = 2 LIMIT 1 /*action='destroy',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:103:in 'BonusesController#destroy'
  [1m[36mBonus Destroy (0.1ms)[0m  [1m[31mDELETE FROM "bonuses" WHERE "bonuses"."id" = 2 /*action='destroy',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:103:in 'BonusesController#destroy'
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='destroy',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:103:in 'BonusesController#destroy'
Redirected to http://localhost:3000/bonuses
Completed 302 Found in 76ms (ActiveRecord: 6.9ms (9 queries, 0 cached) | GC: 8.1ms)


Started GET "/bonuses" for ::1 at 2025-08-12 00:34:08 +0300
Processing by BonusesController#index as TURBO_STREAM
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:61
  [1m[36mBonus Load (0.3ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."created_at" DESC LIMIT 20 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mManualBonus Load (0.3ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mGroupsUpdateBonus Load (0.2ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  Rendered bonuses/index.html.erb within layouts/application (Duration: 14.9ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 18.5ms | GC: 0.0ms)
Completed 200 OK in 29ms (Views: 18.4ms | ActiveRecord: 1.2ms (8 queries, 0 cached) | GC: 0.0ms)


Started GET "/bonuses/3" for ::1 at 2025-08-12 00:34:12 +0300
Processing by BonusesController#show as HTML
  Parameters: {"id" => "3"}
  [1m[36mBonus Load (0.1ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."id" = 3 LIMIT 1 /*action='show',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:171:in 'BonusesController#set_bonus'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/show.html.erb within layouts/application
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 3 LIMIT 1 /*action='show',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/_type_specific_details.html.erb:3
  Rendered bonuses/_type_specific_details.html.erb (Duration: 2.7ms | GC: 0.0ms)
  Rendered bonuses/show.html.erb within layouts/application (Duration: 5.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 6.4ms | GC: 0.0ms)
Completed 200 OK in 16ms (Views: 7.3ms | ActiveRecord: 0.2ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/bonuses/3/edit" for ::1 at 2025-08-12 00:34:15 +0300
Processing by BonusesController#edit as HTML
  Parameters: {"id" => "3"}
  [1m[36mBonus Load (0.1ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."id" = 3 LIMIT 1 /*action='edit',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:171:in 'BonusesController#set_bonus'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/edit.html.erb within layouts/application
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 3 LIMIT 1 /*action='edit',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/_type_specific_form.html.erb:10
  Rendered bonuses/_type_specific_form.html.erb (Duration: 4.6ms | GC: 0.0ms)
  Rendered bonuses/edit.html.erb within layouts/application (Duration: 13.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 14.7ms | GC: 0.0ms)
Completed 200 OK in 24ms (Views: 15.0ms | ActiveRecord: 0.3ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/bonuses/3" for ::1 at 2025-08-12 00:34:19 +0300
Processing by BonusesController#show as HTML
  Parameters: {"id" => "3"}
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."id" = 3 LIMIT 1 /*action='show',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:171:in 'BonusesController#set_bonus'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/show.html.erb within layouts/application
  [1m[36mDepositBonus Load (0.2ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 3 LIMIT 1 /*action='show',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/_type_specific_details.html.erb:3
  Rendered bonuses/_type_specific_details.html.erb (Duration: 2.5ms | GC: 0.0ms)
  Rendered bonuses/show.html.erb within layouts/application (Duration: 4.5ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 7.4ms | GC: 0.7ms)
Completed 200 OK in 18ms (Views: 7.8ms | ActiveRecord: 0.4ms (2 queries, 0 cached) | GC: 0.7ms)


Started GET "/bonuses/3" for ::1 at 2025-08-12 00:34:19 +0300
Processing by BonusesController#show as HTML
  Parameters: {"id" => "3"}
  [1m[36mBonus Load (0.3ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."id" = 3 LIMIT 1 /*action='show',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:171:in 'BonusesController#set_bonus'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/show.html.erb within layouts/application
  [1m[36mDepositBonus Load (0.2ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 3 LIMIT 1 /*action='show',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/_type_specific_details.html.erb:3
  Rendered bonuses/_type_specific_details.html.erb (Duration: 3.1ms | GC: 0.0ms)
  Rendered bonuses/show.html.erb within layouts/application (Duration: 6.9ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 8.7ms | GC: 0.5ms)
Completed 200 OK in 18ms (Views: 9.0ms | ActiveRecord: 0.3ms (2 queries, 0 cached) | GC: 0.5ms)


Started PATCH "/bonuses/3" for ::1 at 2025-08-12 00:34:20 +0300
Processing by BonusesController#update as TURBO_STREAM
  Parameters: {"authenticity_token" => "[FILTERED]", "bonus" => {"name" => "Welcome Bonus", "code" => "WELCOME", "status" => "active", "currency" => "USD", "country" => "", "user_group" => "", "tags" => "", "minimum_deposit" => "1999.0", "wager" => "45.0", "maximum_winnings" => "30000.0", "wagering_strategy" => "", "availability_start_date" => "2025-08-11T21:29", "availability_end_date" => "2025-09-11T21:29"}, "deposit_bonus" => {"deposit_amount_required" => "1999.0", "bonus_percentage" => "100.0", "max_bonus_amount" => "", "first_deposit_only" => "0", "recurring_eligible" => "0"}, "commit" => "Update Bonus", "id" => "3"}
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."id" = 3 LIMIT 1 /*action='update',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:171:in 'BonusesController#set_bonus'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='update',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:90:in 'block in BonusesController#update'
  [1m[36mBonus Update (0.1ms)[0m  [1m[33mUPDATE "bonuses" SET "status" = 'active', "updated_at" = '2025-08-11 21:34:20.149403' WHERE "bonuses"."id" = 3 /*action='update',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:90:in 'block in BonusesController#update'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='update',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:90:in 'block in BonusesController#update'
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 3 LIMIT 1 /*action='update',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:237:in 'BonusesController#update_type_specific_attributes'
Redirected to http://localhost:3000/bonuses/3
Completed 302 Found in 27ms (ActiveRecord: 4.7ms (3 queries, 0 cached) | GC: 0.8ms)


Started GET "/bonuses/3" for ::1 at 2025-08-12 00:34:20 +0300
Processing by BonusesController#show as TURBO_STREAM
  Parameters: {"id" => "3"}
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."id" = 3 LIMIT 1 /*action='show',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:171:in 'BonusesController#set_bonus'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/show.html.erb within layouts/application
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 3 LIMIT 1 /*action='show',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/_type_specific_details.html.erb:3
  Rendered bonuses/_type_specific_details.html.erb (Duration: 2.7ms | GC: 0.0ms)
  Rendered bonuses/show.html.erb within layouts/application (Duration: 4.5ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 5.9ms | GC: 0.0ms)
Completed 200 OK in 22ms (Views: 6.4ms | ActiveRecord: 0.3ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/bonuses" for ::1 at 2025-08-12 00:34:22 +0300
Processing by BonusesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:61
  [1m[36mBonus Load (1.1ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."created_at" DESC LIMIT 20 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mDepositBonus Load (0.2ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mGroupsUpdateBonus Load (0.2ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mSchedulerBonus Load (1.6ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  Rendered bonuses/index.html.erb within layouts/application (Duration: 21.8ms | GC: 1.0ms)
  Rendered layout layouts/application.html.erb (Duration: 24.5ms | GC: 1.0ms)
Completed 200 OK in 35ms (Views: 21.6ms | ActiveRecord: 3.5ms (8 queries, 0 cached) | GC: 1.0ms)


Started GET "/bonuses" for ::1 at 2025-08-12 00:34:25 +0300
Processing by BonusesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:61
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."created_at" DESC LIMIT 20 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mInputCouponBonus Load (1.3ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  Rendered bonuses/index.html.erb within layouts/application (Duration: 21.6ms | GC: 0.4ms)
  Rendered layout layouts/application.html.erb (Duration: 24.3ms | GC: 0.4ms)
Completed 200 OK in 38ms (Views: 23.0ms | ActiveRecord: 2.1ms (8 queries, 0 cached) | GC: 0.9ms)


Started GET "/bonuses/3" for ::1 at 2025-08-12 00:35:29 +0300
Processing by BonusesController#show as HTML
  Parameters: {"id" => "3"}
  [1m[36mBonus Load (0.4ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."id" = 3 LIMIT 1 /*action='show',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:171:in 'BonusesController#set_bonus'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/show.html.erb within layouts/application
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 3 LIMIT 1 /*action='show',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/_type_specific_details.html.erb:3
  Rendered bonuses/_type_specific_details.html.erb (Duration: 10.7ms | GC: 1.4ms)
  Rendered bonuses/show.html.erb within layouts/application (Duration: 18.5ms | GC: 4.9ms)
  Rendered layout layouts/application.html.erb (Duration: 22.3ms | GC: 5.4ms)
Completed 200 OK in 76ms (Views: 25.1ms | ActiveRecord: 4.1ms (2 queries, 0 cached) | GC: 32.6ms)


Started GET "/bonuses/3/edit" for ::1 at 2025-08-12 00:35:29 +0300
Processing by BonusesController#edit as HTML
  Parameters: {"id" => "3"}
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."id" = 3 LIMIT 1 /*action='edit',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:171:in 'BonusesController#set_bonus'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/edit.html.erb within layouts/application
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 3 LIMIT 1 /*action='edit',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/_type_specific_form.html.erb:10
  Rendered bonuses/_type_specific_form.html.erb (Duration: 3.1ms | GC: 0.0ms)
  Rendered bonuses/edit.html.erb within layouts/application (Duration: 12.3ms | GC: 1.7ms)
  Rendered layout layouts/application.html.erb (Duration: 13.1ms | GC: 1.7ms)
Completed 200 OK in 30ms (Views: 13.4ms | ActiveRecord: 0.3ms (2 queries, 0 cached) | GC: 1.7ms)


Started PATCH "/bonuses/3" for ::1 at 2025-08-12 00:35:44 +0300
Processing by BonusesController#update as TURBO_STREAM
  Parameters: {"authenticity_token" => "[FILTERED]", "bonus" => {"name" => "Welcome Bonus", "code" => "WELCOME", "status" => "active", "currency" => "USD", "country" => "", "user_group" => "", "tags" => "no_bonus,gambling_addict", "minimum_deposit" => "1999.0", "wager" => "45.0", "maximum_winnings" => "30000.0", "wagering_strategy" => "", "availability_start_date" => "2025-08-11T21:29", "availability_end_date" => "2025-09-11T21:29"}, "deposit_bonus" => {"deposit_amount_required" => "1999.0", "bonus_percentage" => "100.0", "max_bonus_amount" => "", "first_deposit_only" => "0", "recurring_eligible" => "0"}, "commit" => "Update Bonus", "id" => "3"}
  [1m[36mBonus Load (0.4ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."id" = 3 LIMIT 1 /*action='update',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:171:in 'BonusesController#set_bonus'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='update',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:90:in 'block in BonusesController#update'
  [1m[36mBonus Update (0.1ms)[0m  [1m[33mUPDATE "bonuses" SET "tags" = 'no_bonus,gambling_addict', "updated_at" = '2025-08-11 21:35:44.217142' WHERE "bonuses"."id" = 3 /*action='update',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:90:in 'block in BonusesController#update'
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='update',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:90:in 'block in BonusesController#update'
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 3 LIMIT 1 /*action='update',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:237:in 'BonusesController#update_type_specific_attributes'
Redirected to http://localhost:3000/bonuses/3
Completed 302 Found in 27ms (ActiveRecord: 4.7ms (3 queries, 0 cached) | GC: 1.1ms)


Started GET "/bonuses/3" for ::1 at 2025-08-12 00:35:44 +0300
Processing by BonusesController#show as TURBO_STREAM
  Parameters: {"id" => "3"}
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."id" = 3 LIMIT 1 /*action='show',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:171:in 'BonusesController#set_bonus'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/show.html.erb within layouts/application
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 3 LIMIT 1 /*action='show',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/_type_specific_details.html.erb:3
  Rendered bonuses/_type_specific_details.html.erb (Duration: 1.9ms | GC: 0.0ms)
  Rendered bonuses/show.html.erb within layouts/application (Duration: 3.3ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 5.3ms | GC: 0.0ms)
Completed 200 OK in 16ms (Views: 5.7ms | ActiveRecord: 0.3ms (2 queries, 0 cached) | GC: 0.7ms)


Started GET "/bonuses/3/edit" for ::1 at 2025-08-12 00:35:46 +0300
Processing by BonusesController#edit as HTML
  Parameters: {"id" => "3"}
  [1m[36mBonus Load (0.3ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."id" = 3 LIMIT 1 /*action='edit',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:171:in 'BonusesController#set_bonus'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/edit.html.erb within layouts/application
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 3 LIMIT 1 /*action='edit',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/_type_specific_form.html.erb:10
  Rendered bonuses/_type_specific_form.html.erb (Duration: 3.0ms | GC: 0.0ms)
  Rendered bonuses/edit.html.erb within layouts/application (Duration: 10.7ms | GC: 0.6ms)
  Rendered layout layouts/application.html.erb (Duration: 11.7ms | GC: 0.6ms)
Completed 200 OK in 22ms (Views: 12.3ms | ActiveRecord: 0.4ms (2 queries, 0 cached) | GC: 0.6ms)


Started GET "/bonuses/3/edit" for ::1 at 2025-08-12 00:35:50 +0300
Processing by BonusesController#edit as HTML
  Parameters: {"id" => "3"}
  [1m[36mBonus Load (0.3ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."id" = 3 LIMIT 1 /*action='edit',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:171:in 'BonusesController#set_bonus'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/edit.html.erb within layouts/application
  [1m[36mDepositBonus Load (0.2ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 3 LIMIT 1 /*action='edit',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/_type_specific_form.html.erb:10
  Rendered bonuses/_type_specific_form.html.erb (Duration: 3.3ms | GC: 0.0ms)
  Rendered bonuses/edit.html.erb within layouts/application (Duration: 10.0ms | GC: 0.6ms)
  Rendered layout layouts/application.html.erb (Duration: 12.0ms | GC: 0.6ms)
Completed 200 OK in 24ms (Views: 13.3ms | ActiveRecord: 0.4ms (2 queries, 0 cached) | GC: 1.2ms)


Started GET "/bonuses" for ::1 at 2025-08-12 00:37:41 +0300
Processing by BonusesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:61
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."created_at" DESC LIMIT 20 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mManualBonus Load (0.2ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mSchedulerBonus Load (0.2ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  Rendered bonuses/index.html.erb within layouts/application (Duration: 97.3ms | GC: 0.9ms)
  Rendered layout layouts/application.html.erb (Duration: 98.3ms | GC: 0.9ms)
Completed 200 OK in 111ms (Views: 95.1ms | ActiveRecord: 4.2ms (8 queries, 0 cached) | GC: 0.9ms)


Started GET "/bonuses" for ::1 at 2025-08-12 00:37:41 +0300
Processing by BonusesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:61
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."created_at" DESC LIMIT 20 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mDepositBonus Load (0.2ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mInputCouponBonus Load (0.2ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mManualBonus Load (2.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mCollectBonus Load (0.2ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mGroupsUpdateBonus Load (0.2ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mSchedulerBonus Load (0.3ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  Rendered bonuses/index.html.erb within layouts/application (Duration: 21.7ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 24.2ms | GC: 0.0ms)
Completed 200 OK in 37ms (Views: 21.2ms | ActiveRecord: 3.4ms (8 queries, 0 cached) | GC: 0.0ms)


Started GET "/bonuses/1" for ::1 at 2025-08-12 00:39:37 +0300
Processing by BonusesController#show as HTML
  Parameters: {"id" => "1"}
  [1m[36mBonus Load (0.1ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."id" = 1 LIMIT 1 /*action='show',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:172:in 'BonusesController#set_bonus'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/show.html.erb within layouts/application
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 1 LIMIT 1 /*action='show',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/_type_specific_details.html.erb:3
  Rendered bonuses/_type_specific_details.html.erb (Duration: 9.3ms | GC: 0.0ms)
  Rendered bonuses/show.html.erb within layouts/application (Duration: 12.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 15.2ms | GC: 0.0ms)
Completed 200 OK in 47ms (Views: 16.7ms | ActiveRecord: 1.4ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/bonuses?type=&status=active&search=&commit=Filter" for ::1 at 2025-08-12 00:40:37 +0300
Processing by BonusesController#index as HTML
  Parameters: {"type" => "", "status" => "active", "search" => "", "commit" => "Filter"}
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (2.2ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."status" = 'active' LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:61
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."status" = 'active' ORDER BY "bonuses"."created_at" DESC LIMIT 20 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 3 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" = 3 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" = 3 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" = 3 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" = 3 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" = 3 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
[31mUnpermitted parameter: :commit. Context: { controller: BonusesController, action: index, request: #<ActionDispatch::Request:0x000076582e240520>, params: {"type" => "", "status" => "active", "search" => "", "commit" => "Filter", "controller" => "bonuses", "action" => "index"} }[0m
  Rendered bonuses/index.html.erb within layouts/application (Duration: 65.6ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 69.8ms | GC: 0.0ms)
Completed 200 OK in 91ms (Views: 65.3ms | ActiveRecord: 7.4ms (8 queries, 0 cached) | GC: 0.0ms)


Started GET "/bonuses" for ::1 at 2025-08-12 00:40:44 +0300
Processing by BonusesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:61
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."created_at" DESC LIMIT 20 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mCollectBonus Load (0.2ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mSchedulerBonus Load (0.2ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  Rendered bonuses/index.html.erb within layouts/application (Duration: 40.4ms | GC: 7.8ms)
  Rendered layout layouts/application.html.erb (Duration: 41.6ms | GC: 7.8ms)
Completed 200 OK in 58ms (Views: 43.4ms | ActiveRecord: 1.1ms (8 queries, 0 cached) | GC: 7.8ms)


Started GET "/assets/app-018e72dd.css" for ::1 at 2025-08-12 00:40:44 +0300
Started GET "/assets/stimulus-loading-1fc53fe7.js" for ::1 at 2025-08-12 00:40:44 +0300
Started GET "/assets/stimulus.min-4b1e420e.js" for ::1 at 2025-08-12 00:40:44 +0300
Started GET "/assets/controllers/hello_controller-708796bd.js" for ::1 at 2025-08-12 00:40:44 +0300
Started GET "/assets/controllers/index-ee64e1f1.js" for ::1 at 2025-08-12 00:40:44 +0300
Started GET "/assets/turbo.min-3a2e143f.js" for ::1 at 2025-08-12 00:40:44 +0300
Started GET "/assets/application-bfcdf840.js" for ::1 at 2025-08-12 00:40:44 +0300
Started GET "/assets/controllers/application-3affb389.js" for ::1 at 2025-08-12 00:40:45 +0300
Started GET "/bonuses/new?type=input_coupon" for ::1 at 2025-08-12 00:40:49 +0300
Processing by BonusesController#new as HTML
  Parameters: {"type" => "input_coupon"}
  Rendering layout layouts/application.html.erb
  Rendering bonuses/new.html.erb within layouts/application
  Rendered bonuses/_type_specific_form.html.erb (Duration: 4.1ms | GC: 0.0ms)
  Rendered bonuses/new.html.erb within layouts/application (Duration: 13.9ms | GC: 0.8ms)
  Rendered layout layouts/application.html.erb (Duration: 15.5ms | GC: 1.5ms)
Completed 200 OK in 35ms (Views: 16.8ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 2.2ms)


Started GET "/bonuses/new?type=deposit" for ::1 at 2025-08-12 00:40:54 +0300
Processing by BonusesController#new as HTML
  Parameters: {"type" => "deposit"}
  Rendering layout layouts/application.html.erb
  Rendering bonuses/new.html.erb within layouts/application
  Rendered bonuses/_type_specific_form.html.erb (Duration: 3.1ms | GC: 0.0ms)
  Rendered bonuses/new.html.erb within layouts/application (Duration: 9.9ms | GC: 1.1ms)
  Rendered layout layouts/application.html.erb (Duration: 11.9ms | GC: 1.1ms)
Completed 200 OK in 26ms (Views: 12.5ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 1.1ms)


Started GET "/bonuses/new?type=input_coupon" for ::1 at 2025-08-12 00:40:59 +0300
Processing by BonusesController#new as HTML
  Parameters: {"type" => "input_coupon"}
  Rendering layout layouts/application.html.erb
  Rendering bonuses/new.html.erb within layouts/application
  Rendered bonuses/_type_specific_form.html.erb (Duration: 1.1ms | GC: 0.0ms)
  Rendered bonuses/new.html.erb within layouts/application (Duration: 8.2ms | GC: 0.8ms)
  Rendered layout layouts/application.html.erb (Duration: 11.8ms | GC: 0.8ms)
Completed 200 OK in 35ms (Views: 12.4ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.8ms)


Started POST "/bonuses" for ::1 at 2025-08-12 00:41:06 +0300
Processing by BonusesController#create as TURBO_STREAM
  Parameters: {"authenticity_token" => "[FILTERED]", "bonus" => {"name" => "Тестовый купонный бонус", "code" => "", "bonus_type" => "input_coupon", "status" => "draft", "currency" => "USD", "country" => "", "user_group" => "", "tags" => "", "minimum_deposit" => "", "wager" => "", "maximum_winnings" => "", "wagering_strategy" => "", "availability_start_date" => "2025-08-11T21:40", "availability_end_date" => "2025-09-11T21:40"}, "input_coupon_bonus" => {"coupon_code" => "TEST_COUPON_123", "usage_limit" => "1", "expires_at" => "2025-09-10T21:40", "single_use" => "1"}, "commit" => "Create Bonus"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (3.9ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_4568B29B' LIMIT 1 /*action='create',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mCACHE Bonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_4568B29B' LIMIT 1[0m
  ↳ app/controllers/bonuses_controller.rb:76:in 'block in BonusesController#create'
  [1m[36mBonus Create (1.0ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Тестовый купонный бонус', 'BONUS_4568B29B', 'input_coupon', 'draft', NULL, NULL, NULL, '', '2025-08-11 21:40:00', '2025-09-11 21:40:00', '', '', '', 'USD', NULL, NULL, '2025-08-11 21:41:06.759072', '2025-08-11 21:41:06.759072') RETURNING "id" /*action='create',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:76:in 'block in BonusesController#create'
  [1m[36mTRANSACTION (2.8ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:76:in 'block in BonusesController#create'
  [1m[36mInputCouponBonus Load (0.2ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" = 4 LIMIT 1 /*action='create',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:247:in 'BonusesController#update_type_specific_attributes'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:250:in 'BonusesController#update_type_specific_attributes'
  [1m[36mInputCouponBonus Exists? (3.7ms)[0m  [1m[34mSELECT 1 AS one FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."coupon_code" = 'TEST_COUPON_123' LIMIT 1 /*action='create',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:250:in 'BonusesController#update_type_specific_attributes'
  [1m[36mInputCouponBonus Create (0.2ms)[0m  [1m[32mINSERT INTO "input_coupon_bonuses" ("bonus_id", "coupon_code", "usage_limit", "usage_count", "expires_at", "single_use", "created_at", "updated_at") VALUES (4, 'TEST_COUPON_123', 1, 0, '2025-09-10 21:40:00', 1, '2025-08-11 21:41:06.781766', '2025-08-11 21:41:06.781766') RETURNING "id" /*action='create',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:250:in 'BonusesController#update_type_specific_attributes'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:250:in 'BonusesController#update_type_specific_attributes'
Redirected to http://localhost:3000/bonuses/4
Completed 302 Found in 58ms (ActiveRecord: 12.0ms (6 queries, 1 cached) | GC: 1.2ms)


Started GET "/bonuses/4" for ::1 at 2025-08-12 00:41:06 +0300
Processing by BonusesController#show as TURBO_STREAM
  Parameters: {"id" => "4"}
  [1m[36mBonus Load (0.3ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."id" = 4 LIMIT 1 /*action='show',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:175:in 'BonusesController#set_bonus'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/show.html.erb within layouts/application
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" = 4 LIMIT 1 /*action='show',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/_type_specific_details.html.erb:48
  Rendered bonuses/_type_specific_details.html.erb (Duration: 4.3ms | GC: 0.0ms)
  Rendered bonuses/show.html.erb within layouts/application (Duration: 7.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 10.2ms | GC: 0.7ms)
Completed 200 OK in 27ms (Views: 11.2ms | ActiveRecord: 0.4ms (2 queries, 0 cached) | GC: 1.5ms)


Started GET "/bonuses?type=&status=active&search=&commit=Filter" for ::1 at 2025-08-12 00:41:57 +0300
Processing by BonusesController#index as HTML
  Parameters: {"type" => "", "status" => "active", "search" => "", "commit" => "Filter"}
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."status" = 'active' LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:61
  [1m[36mBonus Load (0.1ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."status" = 'active' ORDER BY "bonuses"."created_at" DESC LIMIT 20 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 3 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" = 3 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" = 3 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" = 3 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" = 3 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" = 3 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
[31mUnpermitted parameter: :commit. Context: { controller: BonusesController, action: index, request: #<ActionDispatch::Request:0x000076582d9cdc08>, params: {"type" => "", "status" => "active", "search" => "", "commit" => "Filter", "controller" => "bonuses", "action" => "index"} }[0m
  Rendered bonuses/index.html.erb within layouts/application (Duration: 17.4ms | GC: 0.9ms)
  Rendered layout layouts/application.html.erb (Duration: 18.5ms | GC: 0.9ms)
Completed 200 OK in 28ms (Views: 18.2ms | ActiveRecord: 0.7ms (8 queries, 0 cached) | GC: 0.9ms)


Started GET "/bonuses/3/edit" for ::1 at 2025-08-12 00:42:00 +0300
Processing by BonusesController#edit as HTML
  Parameters: {"id" => "3"}
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."id" = 3 LIMIT 1 /*action='edit',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:175:in 'BonusesController#set_bonus'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/edit.html.erb within layouts/application
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 3 LIMIT 1 /*action='edit',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/_type_specific_form.html.erb:10
  Rendered bonuses/_type_specific_form.html.erb (Duration: 2.3ms | GC: 0.0ms)
  Rendered bonuses/edit.html.erb within layouts/application (Duration: 9.3ms | GC: 0.4ms)
  Rendered layout layouts/application.html.erb (Duration: 10.5ms | GC: 0.4ms)
Completed 200 OK in 22ms (Views: 10.8ms | ActiveRecord: 0.3ms (2 queries, 0 cached) | GC: 0.4ms)


Started GET "/bonuses/3" for ::1 at 2025-08-12 00:42:00 +0300
Processing by BonusesController#show as HTML
  Parameters: {"id" => "3"}
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."id" = 3 LIMIT 1 /*action='show',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:175:in 'BonusesController#set_bonus'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/show.html.erb within layouts/application
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 3 LIMIT 1 /*action='show',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/_type_specific_details.html.erb:3
  Rendered bonuses/_type_specific_details.html.erb (Duration: 1.9ms | GC: 0.0ms)
  Rendered bonuses/show.html.erb within layouts/application (Duration: 3.5ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 4.8ms | GC: 0.0ms)
Completed 200 OK in 17ms (Views: 5.1ms | ActiveRecord: 0.3ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/bonuses/new?type=input_coupon" for ::1 at 2025-08-12 00:42:04 +0300
Processing by BonusesController#new as HTML
  Parameters: {"type" => "input_coupon"}
  Rendering layout layouts/application.html.erb
  Rendering bonuses/new.html.erb within layouts/application
  Rendered bonuses/_type_specific_form.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered bonuses/new.html.erb within layouts/application (Duration: 4.5ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 6.6ms | GC: 0.0ms)
Completed 200 OK in 20ms (Views: 7.6ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.4ms)


Started GET "/bonuses" for ::1 at 2025-08-12 00:42:11 +0300
Processing by BonusesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:61
  [1m[36mBonus Load (0.1ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."created_at" DESC LIMIT 20 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (4, 3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (4, 3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (4, 3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (4, 3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (4, 3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (4, 3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:78
  Rendered bonuses/index.html.erb within layouts/application (Duration: 13.7ms | GC: 0.2ms)
  Rendered layout layouts/application.html.erb (Duration: 15.5ms | GC: 0.2ms)
Completed 200 OK in 27ms (Views: 15.5ms | ActiveRecord: 0.7ms (8 queries, 0 cached) | GC: 0.4ms)


Started GET "/bonuses/new?type=input_coupon" for ::1 at 2025-08-12 00:42:14 +0300
Processing by BonusesController#new as HTML
  Parameters: {"type" => "input_coupon"}
  Rendering layout layouts/application.html.erb
  Rendering bonuses/new.html.erb within layouts/application
  Rendered bonuses/_type_specific_form.html.erb (Duration: 0.9ms | GC: 0.0ms)
  Rendered bonuses/new.html.erb within layouts/application (Duration: 9.0ms | GC: 0.3ms)
  Rendered layout layouts/application.html.erb (Duration: 11.0ms | GC: 0.3ms)
Completed 200 OK in 22ms (Views: 12.7ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.3ms)


Started GET "/bonuses/new?type=manual" for ::1 at 2025-08-12 00:42:15 +0300
Processing by BonusesController#new as HTML
  Parameters: {"type" => "manual"}
  Rendering layout layouts/application.html.erb
  Rendering bonuses/new.html.erb within layouts/application
  Rendered bonuses/_type_specific_form.html.erb (Duration: 14.3ms | GC: 1.0ms)
  Rendered bonuses/new.html.erb within layouts/application (Duration: 19.7ms | GC: 1.0ms)
  Rendered layout layouts/application.html.erb (Duration: 21.5ms | GC: 1.0ms)
Completed 200 OK in 37ms (Views: 22.4ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 1.2ms)


Started GET "/bonuses/new?type=manual" for ::1 at 2025-08-12 00:42:15 +0300
Processing by BonusesController#new as HTML
  Parameters: {"type" => "manual"}
  Rendering layout layouts/application.html.erb
  Rendering bonuses/new.html.erb within layouts/application
  Rendered bonuses/_type_specific_form.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered bonuses/new.html.erb within layouts/application (Duration: 6.3ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 8.6ms | GC: 0.2ms)
Completed 200 OK in 18ms (Views: 9.3ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.3ms)


Started GET "/bonuses" for ::1 at 2025-08-12 00:45:09 +0300
Processing by BonusesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (2.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:59
  [1m[36mBonus Load (0.7ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."created_at" DESC LIMIT 20 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mDepositBonus Load (0.2ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (4, 3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (4, 3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mManualBonus Load (0.2ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (4, 3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (4, 3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (4, 3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (4, 3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  Rendered bonuses/index.html.erb within layouts/application (Duration: 66.5ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 68.9ms | GC: 0.0ms)
Completed 200 OK in 99ms (Views: 65.1ms | ActiveRecord: 7.9ms (8 queries, 0 cached) | GC: 0.0ms)


Started GET "/bonuses/new?type=input_coupon" for ::1 at 2025-08-12 00:45:18 +0300
Processing by BonusesController#new as HTML
  Parameters: {"type" => "input_coupon"}
  Rendering layout layouts/application.html.erb
  Rendering bonuses/new.html.erb within layouts/application
  Rendered bonuses/_type_specific_form.html.erb (Duration: 4.8ms | GC: 0.0ms)
  Rendered bonuses/new.html.erb within layouts/application (Duration: 13.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 17.3ms | GC: 0.0ms)
Completed 200 OK in 33ms (Views: 17.7ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


Started GET "/bonuses" for ::1 at 2025-08-12 00:45:25 +0300
Processing by BonusesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:59
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."created_at" DESC LIMIT 20 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mDepositBonus Load (0.2ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (4, 3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (4, 3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (4, 3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (4, 3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (4, 3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mSchedulerBonus Load (1.3ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (4, 3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  Rendered bonuses/index.html.erb within layouts/application (Duration: 42.3ms | GC: 9.8ms)
  Rendered layout layouts/application.html.erb (Duration: 46.0ms | GC: 9.8ms)
Completed 200 OK in 62ms (Views: 46.8ms | ActiveRecord: 2.2ms (8 queries, 0 cached) | GC: 9.8ms)


Started GET "/bonuses/new?type=deposit" for ::1 at 2025-08-12 00:45:28 +0300
Processing by BonusesController#new as HTML
  Parameters: {"type" => "deposit"}
  Rendering layout layouts/application.html.erb
  Rendering bonuses/new.html.erb within layouts/application
  Rendered bonuses/_type_specific_form.html.erb (Duration: 0.7ms | GC: 0.0ms)
  Rendered bonuses/new.html.erb within layouts/application (Duration: 12.7ms | GC: 0.9ms)
  Rendered layout layouts/application.html.erb (Duration: 14.9ms | GC: 0.9ms)
Completed 200 OK in 33ms (Views: 16.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 1.5ms)


Started GET "/bonuses" for ::1 at 2025-08-12 00:47:11 +0300
Processing by BonusesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:59
  [1m[36mBonus Load (0.1ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."created_at" DESC LIMIT 20 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mDepositBonus Load (0.2ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (4, 3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (4, 3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (4, 3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (4, 3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (4, 3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mSchedulerBonus Load (5.3ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (4, 3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  Rendered bonuses/index.html.erb within layouts/application (Duration: 94.0ms | GC: 3.8ms)
  Rendered layout layouts/application.html.erb (Duration: 98.8ms | GC: 3.8ms)
Completed 200 OK in 125ms (Views: 91.5ms | ActiveRecord: 12.6ms (8 queries, 0 cached) | GC: 4.5ms)


Started GET "/bonuses/new?type=input_coupon" for ::1 at 2025-08-12 00:47:23 +0300
Processing by BonusesController#new as HTML
  Parameters: {"type" => "input_coupon"}
  Rendering layout layouts/application.html.erb
  Rendering bonuses/new.html.erb within layouts/application
  Rendered bonuses/_type_specific_form.html.erb (Duration: 5.5ms | GC: 0.0ms)
  Rendered bonuses/new.html.erb within layouts/application (Duration: 21.2ms | GC: 0.2ms)
  Rendered layout layouts/application.html.erb (Duration: 25.3ms | GC: 0.2ms)
Completed 200 OK in 37ms (Views: 26.0ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.2ms)


Started GET "/bonuses" for ::1 at 2025-08-12 00:50:42 +0300
Processing by BonusesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:59
  [1m[36mBonus Load (1.9ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."created_at" DESC LIMIT 20 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (4, 3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (4, 3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mManualBonus Load (0.2ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (4, 3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (4, 3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (4, 3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (4, 3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  Rendered bonuses/index.html.erb within layouts/application (Duration: 61.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 64.0ms | GC: 0.0ms)
Completed 200 OK in 84ms (Views: 60.1ms | ActiveRecord: 6.5ms (8 queries, 0 cached) | GC: 0.0ms)


Started GET "/heatmap" for ::1 at 2025-08-12 00:52:15 +0300
Processing by HeatmapController#index as HTML
  [1m[36mBonus Count (0.6ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", DATE(availability_start_date) AS "date_availability_start_date" FROM "bonuses" WHERE "bonuses"."availability_start_date" BETWEEN '2025-08-01 00:00:00' AND '2025-08-31 23:59:59.999999' GROUP BY DATE(availability_start_date) /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:39:in 'HeatmapController#generate_heatmap_data'
  [1m[36mBonus Pluck (0.7ms)[0m  [1m[34mSELECT DISTINCT "bonuses"."bonus_type" FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:16:in 'HeatmapController#index'
  Rendering layout layouts/application.html.erb
  Rendering heatmap/index.html.erb within layouts/application
  Rendered heatmap/index.html.erb within layouts/application (Duration: 5.1ms | GC: 0.8ms)
  Rendered layout layouts/application.html.erb (Duration: 7.7ms | GC: 0.8ms)
Completed 200 OK in 31ms (Views: 9.1ms | ActiveRecord: 2.7ms (2 queries, 0 cached) | GC: 2.0ms)


Started GET "/heatmap?bonus_type=input_coupon&month=8&year=2025&commit=Apply+Filter" for ::1 at 2025-08-12 00:52:30 +0300
Processing by HeatmapController#index as HTML
  Parameters: {"bonus_type" => "input_coupon", "month" => "8", "year" => "2025", "commit" => "Apply Filter"}
  [1m[36mBonus Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", DATE(availability_start_date) AS "date_availability_start_date" FROM "bonuses" WHERE "bonuses"."availability_start_date" BETWEEN '2025-08-01 00:00:00' AND '2025-08-31 23:59:59.999999' AND "bonuses"."bonus_type" = 'input_coupon' GROUP BY DATE(availability_start_date) /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:39:in 'HeatmapController#generate_heatmap_data'
  [1m[36mBonus Pluck (0.1ms)[0m  [1m[34mSELECT DISTINCT "bonuses"."bonus_type" FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:16:in 'HeatmapController#index'
  Rendering layout layouts/application.html.erb
  Rendering heatmap/index.html.erb within layouts/application
  Rendered heatmap/index.html.erb within layouts/application (Duration: 4.6ms | GC: 0.7ms)
  Rendered layout layouts/application.html.erb (Duration: 7.9ms | GC: 0.7ms)
Completed 200 OK in 28ms (Views: 9.6ms | ActiveRecord: 0.3ms (2 queries, 0 cached) | GC: 0.7ms)


Started GET "/heatmap?bonus_type=input_coupon&month=7&year=2025" for ::1 at 2025-08-12 00:52:35 +0300
Processing by HeatmapController#index as HTML
  Parameters: {"bonus_type" => "input_coupon", "month" => "7", "year" => "2025"}
  [1m[36mBonus Count (2.1ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", DATE(availability_start_date) AS "date_availability_start_date" FROM "bonuses" WHERE "bonuses"."availability_start_date" BETWEEN '2025-07-01 00:00:00' AND '2025-07-31 23:59:59.999999' AND "bonuses"."bonus_type" = 'input_coupon' GROUP BY DATE(availability_start_date) /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:39:in 'HeatmapController#generate_heatmap_data'
  [1m[36mBonus Pluck (0.1ms)[0m  [1m[34mSELECT DISTINCT "bonuses"."bonus_type" FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:16:in 'HeatmapController#index'
  Rendering layout layouts/application.html.erb
  Rendering heatmap/index.html.erb within layouts/application
  Rendered heatmap/index.html.erb within layouts/application (Duration: 8.4ms | GC: 0.9ms)
  Rendered layout layouts/application.html.erb (Duration: 11.1ms | GC: 0.9ms)
Completed 200 OK in 42ms (Views: 13.6ms | ActiveRecord: 2.2ms (2 queries, 0 cached) | GC: 2.0ms)


Started GET "/heatmap?bonus_type=input_coupon&month=6&year=2025" for ::1 at 2025-08-12 00:52:35 +0300
Processing by HeatmapController#index as HTML
  Parameters: {"bonus_type" => "input_coupon", "month" => "6", "year" => "2025"}
  [1m[36mBonus Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", DATE(availability_start_date) AS "date_availability_start_date" FROM "bonuses" WHERE "bonuses"."availability_start_date" BETWEEN '2025-06-01 00:00:00' AND '2025-06-30 23:59:59.999999' AND "bonuses"."bonus_type" = 'input_coupon' GROUP BY DATE(availability_start_date) /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:39:in 'HeatmapController#generate_heatmap_data'
  [1m[36mBonus Pluck (0.1ms)[0m  [1m[34mSELECT DISTINCT "bonuses"."bonus_type" FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:16:in 'HeatmapController#index'
  Rendering layout layouts/application.html.erb
  Rendering heatmap/index.html.erb within layouts/application
  Rendered heatmap/index.html.erb within layouts/application (Duration: 5.5ms | GC: 0.7ms)
  Rendered layout layouts/application.html.erb (Duration: 10.3ms | GC: 0.7ms)
Completed 200 OK in 34ms (Views: 15.6ms | ActiveRecord: 0.3ms (2 queries, 0 cached) | GC: 1.3ms)


Started GET "/" for ::1 at 2025-08-12 00:52:45 +0300
Processing by BonusesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:59
  [1m[36mBonus Load (0.3ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."created_at" DESC LIMIT 20 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (4, 3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (4, 3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mManualBonus Load (0.2ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (4, 3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mCollectBonus Load (0.2ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (4, 3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (4, 3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (4, 3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  Rendered bonuses/index.html.erb within layouts/application (Duration: 78.8ms | GC: 2.4ms)
  Rendered layout layouts/application.html.erb (Duration: 80.7ms | GC: 2.4ms)
Completed 200 OK in 98ms (Views: 75.0ms | ActiveRecord: 6.7ms (8 queries, 0 cached) | GC: 2.8ms)


Started GET "/bonuses" for ::1 at 2025-08-12 00:52:45 +0300
Processing by BonusesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:59
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."created_at" DESC LIMIT 20 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mDepositBonus Load (0.3ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (4, 3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mInputCouponBonus Load (0.3ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (4, 3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mManualBonus Load (0.2ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (4, 3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mCollectBonus Load (0.3ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (4, 3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mGroupsUpdateBonus Load (0.3ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (4, 3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mSchedulerBonus Load (0.2ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (4, 3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  Rendered bonuses/index.html.erb within layouts/application (Duration: 22.9ms | GC: 0.5ms)
  Rendered layout layouts/application.html.erb (Duration: 23.8ms | GC: 0.5ms)
Completed 200 OK in 38ms (Views: 22.5ms | ActiveRecord: 1.8ms (8 queries, 0 cached) | GC: 0.7ms)


Started GET "/" for ::1 at 2025-08-12 00:52:46 +0300
Processing by BonusesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:59
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."created_at" DESC LIMIT 20 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (4, 3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mInputCouponBonus Load (0.5ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (4, 3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mManualBonus Load (2.4ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (4, 3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mCollectBonus Load (1.0ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (4, 3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mGroupsUpdateBonus Load (0.2ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (4, 3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (4, 3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  Rendered bonuses/index.html.erb within layouts/application (Duration: 29.9ms | GC: 0.3ms)
  Rendered layout layouts/application.html.erb (Duration: 32.4ms | GC: 0.3ms)
Completed 200 OK in 46ms (Views: 28.6ms | ActiveRecord: 4.8ms (8 queries, 0 cached) | GC: 0.3ms)


Started GET "/heatmap" for ::1 at 2025-08-12 00:52:46 +0300
Processing by HeatmapController#index as HTML
  [1m[36mBonus Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", DATE(availability_start_date) AS "date_availability_start_date" FROM "bonuses" WHERE "bonuses"."availability_start_date" BETWEEN '2025-08-01 00:00:00' AND '2025-08-31 23:59:59.999999' GROUP BY DATE(availability_start_date) /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:39:in 'HeatmapController#generate_heatmap_data'
  [1m[36mBonus Pluck (0.1ms)[0m  [1m[34mSELECT DISTINCT "bonuses"."bonus_type" FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:16:in 'HeatmapController#index'
  Rendering layout layouts/application.html.erb
  Rendering heatmap/index.html.erb within layouts/application
  Rendered heatmap/index.html.erb within layouts/application (Duration: 1.7ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 8.1ms | GC: 0.0ms)
Completed 200 OK in 31ms (Views: 8.9ms | ActiveRecord: 0.3ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/heatmap" for ::1 at 2025-08-12 00:54:27 +0300
Processing by HeatmapController#index as HTML
  [1m[36mBonus Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", DATE(availability_start_date) AS "date_availability_start_date" FROM "bonuses" WHERE "bonuses"."availability_start_date" BETWEEN '2025-08-01 00:00:00' AND '2025-08-31 23:59:59.999999' GROUP BY DATE(availability_start_date) /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:39:in 'HeatmapController#generate_heatmap_data'
  [1m[36mBonus Pluck (0.2ms)[0m  [1m[34mSELECT DISTINCT "bonuses"."bonus_type" FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:16:in 'HeatmapController#index'
  Rendering layout layouts/application.html.erb
  Rendering heatmap/index.html.erb within layouts/application
  Rendered heatmap/index.html.erb within layouts/application (Duration: 5.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 9.8ms | GC: 0.0ms)
Completed 200 OK in 38ms (Views: 11.7ms | ActiveRecord: 2.6ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/heatmap" for ::1 at 2025-08-12 00:54:36 +0300
Processing by HeatmapController#index as HTML
  [1m[36mBonus Count (1.3ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", DATE(availability_start_date) AS "date_availability_start_date" FROM "bonuses" WHERE "bonuses"."availability_start_date" BETWEEN '2025-08-01 00:00:00' AND '2025-08-31 23:59:59.999999' GROUP BY DATE(availability_start_date) /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:39:in 'HeatmapController#generate_heatmap_data'
  [1m[36mBonus Pluck (0.1ms)[0m  [1m[34mSELECT DISTINCT "bonuses"."bonus_type" FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:16:in 'HeatmapController#index'
  Rendering layout layouts/application.html.erb
  Rendering heatmap/index.html.erb within layouts/application
  Rendered heatmap/index.html.erb within layouts/application (Duration: 5.3ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 7.2ms | GC: 0.0ms)
Completed 200 OK in 31ms (Views: 10.4ms | ActiveRecord: 1.4ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/heatmap" for ::1 at 2025-08-12 00:55:00 +0300
Processing by HeatmapController#index as HTML
  [1m[36mBonus Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", DATE(availability_start_date) AS "date_availability_start_date" FROM "bonuses" WHERE "bonuses"."availability_start_date" BETWEEN '2025-08-01 00:00:00' AND '2025-08-31 23:59:59.999999' GROUP BY DATE(availability_start_date) /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:39:in 'HeatmapController#generate_heatmap_data'
  [1m[36mBonus Pluck (0.1ms)[0m  [1m[34mSELECT DISTINCT "bonuses"."bonus_type" FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:16:in 'HeatmapController#index'
  Rendering layout layouts/application.html.erb
  Rendering heatmap/index.html.erb within layouts/application
  Rendered heatmap/index.html.erb within layouts/application (Duration: 4.3ms | GC: 0.6ms)
  Rendered layout layouts/application.html.erb (Duration: 6.8ms | GC: 0.6ms)
Completed 200 OK in 22ms (Views: 7.2ms | ActiveRecord: 0.2ms (2 queries, 0 cached) | GC: 0.6ms)


Started GET "/bonuses" for ::1 at 2025-08-12 00:55:01 +0300
Processing by BonusesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:59
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."created_at" DESC LIMIT 20 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (4, 3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (4, 3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (4, 3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mCollectBonus Load (1.4ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (4, 3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (4, 3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (4, 3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  Rendered bonuses/index.html.erb within layouts/application (Duration: 69.8ms | GC: 6.0ms)
  Rendered layout layouts/application.html.erb (Duration: 71.2ms | GC: 6.0ms)
Completed 200 OK in 87ms (Views: 65.0ms | ActiveRecord: 6.6ms (8 queries, 0 cached) | GC: 6.0ms)


Started GET "/.well-known/appspecific/com.chrome.devtools.json" for ::1 at 2025-08-12 00:58:44 +0300
  
ActionController::RoutingError (No route matches [GET] "/.well-known/appspecific/com.chrome.devtools.json"):
  
Started GET "/bonuses" for ::1 at 2025-08-12 00:58:55 +0300
Processing by BonusesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:59
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."created_at" DESC LIMIT 20 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (4, 3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mInputCouponBonus Load (0.3ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (4, 3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (4, 3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (4, 3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mGroupsUpdateBonus Load (0.3ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (4, 3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (4, 3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  Rendered bonuses/index.html.erb within layouts/application (Duration: 64.7ms | GC: 5.1ms)
  Rendered layout layouts/application.html.erb (Duration: 68.0ms | GC: 5.6ms)
Completed 200 OK in 87ms (Views: 66.6ms | ActiveRecord: 5.5ms (8 queries, 0 cached) | GC: 7.4ms)


Started GET "/bonuses?type=deposit&status=active&search=&commit=Filter" for ::1 at 2025-08-12 00:59:33 +0300
Processing by BonusesController#index as HTML
  Parameters: {"type" => "deposit", "status" => "active", "search" => "", "commit" => "Filter"}
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."bonus_type" = 'deposit' AND "bonuses"."status" = 'active' LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:59
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."bonus_type" = 'deposit' AND "bonuses"."status" = 'active' ORDER BY "bonuses"."created_at" DESC LIMIT 20 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 3 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mInputCouponBonus Load (0.2ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" = 3 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" = 3 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" = 3 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mGroupsUpdateBonus Load (0.3ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" = 3 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" = 3 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
[31mUnpermitted parameter: :commit. Context: { controller: BonusesController, action: index, request: #<ActionDispatch::Request:0x000076582d4a1cc0>, params: {"type" => "deposit", "status" => "active", "search" => "", "commit" => "Filter", "controller" => "bonuses", "action" => "index"} }[0m
  Rendered bonuses/index.html.erb within layouts/application (Duration: 64.9ms | GC: 1.4ms)
  Rendered layout layouts/application.html.erb (Duration: 67.7ms | GC: 1.4ms)
Completed 200 OK in 94ms (Views: 64.8ms | ActiveRecord: 7.9ms (8 queries, 0 cached) | GC: 2.8ms)


Started GET "/.well-known/appspecific/com.chrome.devtools.json" for ::1 at 2025-08-12 00:59:45 +0300
  
ActionController::RoutingError (No route matches [GET] "/.well-known/appspecific/com.chrome.devtools.json"):
  
  [1m[36mBonus Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" WHERE "bonuses"."availability_start_date" BETWEEN '2024-07-01 00:00:00' AND '2024-07-31 23:59:59.999999' /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:10:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_CD06BD93' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_CD06BD93' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Deposit Bonus 0701-1', 'BONUS_CD06BD93', 'deposit', 'active', NULL, NULL, NULL, NULL, '2024-07-01 00:00:00', '2024-07-01 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 21:59:45.934264', '2025-08-11 21:59:45.934264') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (3.7ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mDepositBonus Create (0.9ms)[0m  [1m[32mINSERT INTO "deposit_bonuses" ("bonus_id", "deposit_amount_required", "bonus_percentage", "max_bonus_amount", "first_deposit_only", "recurring_eligible", "created_at", "updated_at") VALUES (5, 50.0, 100.0, 500.0, 0, 1, '2025-08-11 21:59:45.958007', '2025-08-11 21:59:45.958007') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_19335550' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_19335550' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Deposit Bonus 0703-1', 'BONUS_19335550', 'deposit', 'active', NULL, NULL, NULL, NULL, '2024-07-03 00:00:00', '2024-07-03 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 21:59:45.964292', '2025-08-11 21:59:45.964292') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mDepositBonus Create (0.6ms)[0m  [1m[32mINSERT INTO "deposit_bonuses" ("bonus_id", "deposit_amount_required", "bonus_percentage", "max_bonus_amount", "first_deposit_only", "recurring_eligible", "created_at", "updated_at") VALUES (6, 50.0, 100.0, 500.0, 0, 1, '2025-08-11 21:59:45.967705', '2025-08-11 21:59:45.967705') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_D5CE3D65' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_D5CE3D65' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.2ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Manual Bonus 0703-2', 'BONUS_D5CE3D65', 'manual', 'active', NULL, NULL, NULL, NULL, '2024-07-03 00:01:00', '2024-07-03 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 21:59:45.973984', '2025-08-11 21:59:45.973984') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mManualBonus Create (0.8ms)[0m  [1m[32mINSERT INTO "manual_bonuses" ("bonus_id", "admin_notes", "approval_required", "auto_apply", "conditions", "created_at", "updated_at") VALUES (7, 'Test manual bonus for heatmap testing', 0, 1, 'Test conditions for heatmap', '2025-08-11 21:59:45.983280', '2025-08-11 21:59:45.983280') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_17CD7C23' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_17CD7C23' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Input coupon Bonus 0708-1', 'BONUS_17CD7C23', 'input_coupon', 'active', NULL, NULL, NULL, NULL, '2024-07-08 00:00:00', '2024-07-08 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 21:59:45.989565', '2025-08-11 21:59:45.989565') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mInputCouponBonus Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."coupon_code" = 'TEST07081' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
Started GET "/bonuses" for ::1 at 2025-08-12 00:59:50 +0300
Processing by BonusesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:59
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."created_at" DESC LIMIT 20 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mDepositBonus Load (0.2ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (8, 7, 6, 5, 4, 3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mInputCouponBonus Load (0.2ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (8, 7, 6, 5, 4, 3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mManualBonus Load (0.2ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (8, 7, 6, 5, 4, 3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mCollectBonus Load (0.2ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (8, 7, 6, 5, 4, 3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (8, 7, 6, 5, 4, 3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mSchedulerBonus Load (0.2ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (8, 7, 6, 5, 4, 3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  Rendered bonuses/index.html.erb within layouts/application (Duration: 32.3ms | GC: 2.6ms)
  Rendered layout layouts/application.html.erb (Duration: 35.3ms | GC: 2.6ms)
Completed 200 OK in 48ms (Views: 34.6ms | ActiveRecord: 1.2ms (8 queries, 0 cached) | GC: 2.6ms)


Started GET "/bonuses?type=input_coupon&status=active&search=&commit=Filter" for ::1 at 2025-08-12 00:59:50 +0300
Processing by BonusesController#index as HTML
  Parameters: {"type" => "input_coupon", "status" => "active", "search" => "", "commit" => "Filter"}
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."bonus_type" = 'input_coupon' AND "bonuses"."status" = 'active' LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:59
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."bonus_type" = 'input_coupon' AND "bonuses"."status" = 'active' ORDER BY "bonuses"."created_at" DESC LIMIT 20 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 8 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" = 8 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" = 8 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" = 8 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" = 8 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" = 8 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
[31mUnpermitted parameter: :commit. Context: { controller: BonusesController, action: index, request: #<ActionDispatch::Request:0x000076582d8394c8>, params: {"type" => "input_coupon", "status" => "active", "search" => "", "commit" => "Filter", "controller" => "bonuses", "action" => "index"} }[0m
  Rendered bonuses/index.html.erb within layouts/application (Duration: 17.7ms | GC: 1.7ms)
  Rendered layout layouts/application.html.erb (Duration: 18.7ms | GC: 1.7ms)
Completed 200 OK in 37ms (Views: 20.1ms | ActiveRecord: 1.0ms (8 queries, 0 cached) | GC: 1.7ms)


  [1m[36mBonus Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" WHERE "bonuses"."availability_start_date" BETWEEN '2024-07-01 00:00:00' AND '2024-07-31 23:59:59.999999' /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:10:in 'block (2 levels) in <main>'
  [1m[36mBonus Load (0.1ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."availability_start_date" BETWEEN '2024-07-01 00:00:00' AND '2024-07-31 23:59:59.999999' /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 5 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mDepositBonus Destroy (0.3ms)[0m  [1m[31mDELETE FROM "deposit_bonuses" WHERE "deposit_bonuses"."id" = 4 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" = 5 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" = 5 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" = 5 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" = 5 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" = 5 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mBonus Destroy (0.1ms)[0m  [1m[31mDELETE FROM "bonuses" WHERE "bonuses"."id" = 5 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mDepositBonus Load (0.6ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 6 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mDepositBonus Destroy (0.0ms)[0m  [1m[31mDELETE FROM "deposit_bonuses" WHERE "deposit_bonuses"."id" = 5 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" = 6 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" = 6 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" = 6 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" = 6 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" = 6 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mBonus Destroy (0.1ms)[0m  [1m[31mDELETE FROM "bonuses" WHERE "bonuses"."id" = 6 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mDepositBonus Load (0.7ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 7 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" = 7 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" = 7 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mManualBonus Destroy (0.1ms)[0m  [1m[31mDELETE FROM "manual_bonuses" WHERE "manual_bonuses"."id" = 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" = 7 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" = 7 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" = 7 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mBonus Destroy (0.1ms)[0m  [1m[31mDELETE FROM "bonuses" WHERE "bonuses"."id" = 7 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mDepositBonus Load (0.6ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 8 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" = 8 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" = 8 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" = 8 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" = 8 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" = 8 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mBonus Destroy (0.1ms)[0m  [1m[31mDELETE FROM "bonuses" WHERE "bonuses"."id" = 8 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_E8EF5848' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_E8EF5848' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.2ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Deposit Bonus 0701-1', 'BONUS_E8EF5848', 'deposit', 'active', NULL, NULL, NULL, NULL, '2024-07-01 00:00:00', '2024-07-01 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 21:59:55.525793', '2025-08-11 21:59:55.525793') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mDepositBonus Create (0.7ms)[0m  [1m[32mINSERT INTO "deposit_bonuses" ("bonus_id", "deposit_amount_required", "bonus_percentage", "max_bonus_amount", "first_deposit_only", "recurring_eligible", "created_at", "updated_at") VALUES (9, 50.0, 100.0, 500.0, 0, 1, '2025-08-11 21:59:55.528378', '2025-08-11 21:59:55.528378') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_BB75D7B6' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_BB75D7B6' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Deposit Bonus 0703-1', 'BONUS_BB75D7B6', 'deposit', 'active', NULL, NULL, NULL, NULL, '2024-07-03 00:00:00', '2024-07-03 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 21:59:55.532994', '2025-08-11 21:59:55.532994') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mDepositBonus Create (0.7ms)[0m  [1m[32mINSERT INTO "deposit_bonuses" ("bonus_id", "deposit_amount_required", "bonus_percentage", "max_bonus_amount", "first_deposit_only", "recurring_eligible", "created_at", "updated_at") VALUES (10, 50.0, 100.0, 500.0, 0, 1, '2025-08-11 21:59:55.534738', '2025-08-11 21:59:55.534738') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_4C0AE9D8' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_4C0AE9D8' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Manual Bonus 0703-2', 'BONUS_4C0AE9D8', 'manual', 'active', NULL, NULL, NULL, NULL, '2024-07-03 00:01:00', '2024-07-03 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 21:59:55.539984', '2025-08-11 21:59:55.539984') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mManualBonus Create (0.7ms)[0m  [1m[32mINSERT INTO "manual_bonuses" ("bonus_id", "admin_notes", "approval_required", "auto_apply", "conditions", "created_at", "updated_at") VALUES (11, 'Test manual bonus for heatmap testing', 0, 1, 'Test conditions for heatmap', '2025-08-11 21:59:55.542014', '2025-08-11 21:59:55.542014') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (1.5ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_4D266D8B' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_4D266D8B' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Input coupon Bonus 0708-1', 'BONUS_4D266D8B', 'input_coupon', 'active', NULL, NULL, NULL, NULL, '2024-07-08 00:00:00', '2024-07-08 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 21:59:55.548241', '2025-08-11 21:59:55.548241') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mInputCouponBonus Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."coupon_code" = 'TEST07081' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mInputCouponBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "input_coupon_bonuses" ("bonus_id", "coupon_code", "usage_limit", "usage_count", "expires_at", "single_use", "created_at", "updated_at") VALUES (12, 'TEST07081', 100, 0, '2025-08-18 23:59:59.999999', 0, '2025-08-11 21:59:55.557872', '2025-08-11 21:59:55.557872') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_65BCC748' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_65BCC748' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Collection Bonus 0712-1', 'BONUS_65BCC748', 'collection', 'active', NULL, NULL, NULL, NULL, '2024-07-12 00:00:00', '2024-07-12 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 21:59:55.562853', '2025-08-11 21:59:55.562853') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
Started GET "/" for ::1 at 2025-08-12 01:00:03 +0300
Processing by BonusesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:59
  [1m[36mBonus Load (0.3ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."created_at" DESC LIMIT 20 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (13, 12, 11, 10, 9, 4, 3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (13, 12, 11, 10, 9, 4, 3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (13, 12, 11, 10, 9, 4, 3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mCollectBonus Load (1.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (13, 12, 11, 10, 9, 4, 3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (13, 12, 11, 10, 9, 4, 3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mSchedulerBonus Load (0.4ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (13, 12, 11, 10, 9, 4, 3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  Rendered bonuses/index.html.erb within layouts/application (Duration: 22.3ms | GC: 0.7ms)
  Rendered layout layouts/application.html.erb (Duration: 24.1ms | GC: 0.7ms)
Completed 200 OK in 39ms (Views: 22.8ms | ActiveRecord: 2.4ms (8 queries, 0 cached) | GC: 0.7ms)


Started GET "/bonuses" for ::1 at 2025-08-12 01:00:04 +0300
Processing by BonusesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:59
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."created_at" DESC LIMIT 20 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (13, 12, 11, 10, 9, 4, 3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (13, 12, 11, 10, 9, 4, 3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mManualBonus Load (0.6ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (13, 12, 11, 10, 9, 4, 3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (13, 12, 11, 10, 9, 4, 3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (13, 12, 11, 10, 9, 4, 3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (13, 12, 11, 10, 9, 4, 3, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  Rendered bonuses/index.html.erb within layouts/application (Duration: 18.8ms | GC: 0.6ms)
  Rendered layout layouts/application.html.erb (Duration: 20.1ms | GC: 0.6ms)
Completed 200 OK in 38ms (Views: 19.1ms | ActiveRecord: 1.6ms (8 queries, 0 cached) | GC: 0.6ms)


  [1m[36mBonus Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" WHERE "bonuses"."availability_start_date" BETWEEN '2024-07-01 00:00:00' AND '2024-07-31 23:59:59.999999' /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:10:in 'block (2 levels) in <main>'
  [1m[36mBonus Load (0.1ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."availability_start_date" BETWEEN '2024-07-01 00:00:00' AND '2024-07-31 23:59:59.999999' /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mDepositBonus Load (2.2ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 9 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mDepositBonus Destroy (0.1ms)[0m  [1m[31mDELETE FROM "deposit_bonuses" WHERE "deposit_bonuses"."id" = 6 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" = 9 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" = 9 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" = 9 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" = 9 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" = 9 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mBonus Destroy (0.1ms)[0m  [1m[31mDELETE FROM "bonuses" WHERE "bonuses"."id" = 9 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mDepositBonus Load (1.5ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 10 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mDepositBonus Destroy (0.1ms)[0m  [1m[31mDELETE FROM "deposit_bonuses" WHERE "deposit_bonuses"."id" = 7 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" = 10 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" = 10 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" = 10 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mGroupsUpdateBonus Load (1.3ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" = 10 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mSchedulerBonus Load (0.5ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" = 10 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mBonus Destroy (0.1ms)[0m  [1m[31mDELETE FROM "bonuses" WHERE "bonuses"."id" = 10 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mDepositBonus Load (1.8ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 11 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mInputCouponBonus Load (0.5ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" = 11 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" = 11 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mManualBonus Destroy (0.1ms)[0m  [1m[31mDELETE FROM "manual_bonuses" WHERE "manual_bonuses"."id" = 2 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" = 11 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mGroupsUpdateBonus Load (0.3ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" = 11 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" = 11 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mBonus Destroy (0.1ms)[0m  [1m[31mDELETE FROM "bonuses" WHERE "bonuses"."id" = 11 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mDepositBonus Load (0.7ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 12 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" = 12 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mInputCouponBonus Destroy (0.1ms)[0m  [1m[31mDELETE FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."id" = 2 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" = 12 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" = 12 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" = 12 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" = 12 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mBonus Destroy (0.1ms)[0m  [1m[31mDELETE FROM "bonuses" WHERE "bonuses"."id" = 12 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mDepositBonus Load (0.9ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 13 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" = 13 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mManualBonus Load (0.3ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" = 13 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" = 13 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" = 13 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" = 13 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mBonus Destroy (0.1ms)[0m  [1m[31mDELETE FROM "bonuses" WHERE "bonuses"."id" = 13 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_CDB7F949' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_CDB7F949' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Deposit Bonus 0701-1', 'BONUS_CDB7F949', 'deposit', 'active', NULL, NULL, NULL, NULL, '2024-07-01 00:00:00', '2024-07-01 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:07.926849', '2025-08-11 22:00:07.926849') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mDepositBonus Create (1.4ms)[0m  [1m[32mINSERT INTO "deposit_bonuses" ("bonus_id", "deposit_amount_required", "bonus_percentage", "max_bonus_amount", "first_deposit_only", "recurring_eligible", "created_at", "updated_at") VALUES (14, 50.0, 100.0, 500.0, 0, 1, '2025-08-11 22:00:07.930107', '2025-08-11 22:00:07.930107') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_E996F43D' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_E996F43D' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Deposit Bonus 0703-1', 'BONUS_E996F43D', 'deposit', 'active', NULL, NULL, NULL, NULL, '2024-07-03 00:00:00', '2024-07-03 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:07.937656', '2025-08-11 22:00:07.937656') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mDepositBonus Create (1.1ms)[0m  [1m[32mINSERT INTO "deposit_bonuses" ("bonus_id", "deposit_amount_required", "bonus_percentage", "max_bonus_amount", "first_deposit_only", "recurring_eligible", "created_at", "updated_at") VALUES (15, 50.0, 100.0, 500.0, 0, 1, '2025-08-11 22:00:07.940994', '2025-08-11 22:00:07.940994') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_3C94F7DA' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_3C94F7DA' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.2ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Manual Bonus 0703-2', 'BONUS_3C94F7DA', 'manual', 'active', NULL, NULL, NULL, NULL, '2024-07-03 00:01:00', '2024-07-03 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:07.946417', '2025-08-11 22:00:07.946417') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mManualBonus Create (0.8ms)[0m  [1m[32mINSERT INTO "manual_bonuses" ("bonus_id", "admin_notes", "approval_required", "auto_apply", "conditions", "created_at", "updated_at") VALUES (16, 'Test manual bonus for heatmap testing', 0, 1, 'Test conditions for heatmap', '2025-08-11 22:00:07.949061', '2025-08-11 22:00:07.949061') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_7BB398AB' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_7BB398AB' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Input coupon Bonus 0708-1', 'BONUS_7BB398AB', 'input_coupon', 'active', NULL, NULL, NULL, NULL, '2024-07-08 00:00:00', '2024-07-08 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:07.954716', '2025-08-11 22:00:07.954716') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mInputCouponBonus Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."coupon_code" = 'TEST07081' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mInputCouponBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "input_coupon_bonuses" ("bonus_id", "coupon_code", "usage_limit", "usage_count", "expires_at", "single_use", "created_at", "updated_at") VALUES (17, 'TEST07081', 100, 0, '2025-08-18 23:59:59.999999', 0, '2025-08-11 22:00:07.959169', '2025-08-11 22:00:07.959169') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_DC76F96E' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_DC76F96E' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.2ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Collection Bonus 0712-1', 'BONUS_DC76F96E', 'collection', 'active', NULL, NULL, NULL, NULL, '2024-07-12 00:00:00', '2024-07-12 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:07.963352', '2025-08-11 22:00:07.963352') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:101:in 'block (4 levels) in <main>'
  [1m[36mCollectBonus Create (1.3ms)[0m  [1m[32mINSERT INTO "collect_bonuses" ("bonus_id", "collection_type", "collection_amount", "collection_frequency", "collection_limit", "collected_count", "created_at", "updated_at") VALUES (18, 'daily', 25.0, 'daily', 1, 0, '2025-08-11 22:00:07.969363', '2025-08-11 22:00:07.969363') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:101:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:101:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_0D8F2381' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_0D8F2381' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.2ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Scheduler Bonus 0712-2', 'BONUS_0D8F2381', 'scheduler', 'active', NULL, NULL, NULL, NULL, '2024-07-12 00:01:00', '2024-07-12 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:07.975828', '2025-08-11 22:00:07.975828') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
Started GET "/heatmap" for ::1 at 2025-08-12 01:00:14 +0300
Processing by HeatmapController#index as HTML
  [1m[36mBonus Count (0.6ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", DATE(availability_start_date) AS "date_availability_start_date" FROM "bonuses" WHERE "bonuses"."availability_start_date" BETWEEN '2025-08-01 00:00:00' AND '2025-08-31 23:59:59.999999' GROUP BY DATE(availability_start_date) /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:39:in 'HeatmapController#generate_heatmap_data'
  [1m[36mBonus Pluck (0.1ms)[0m  [1m[34mSELECT DISTINCT "bonuses"."bonus_type" FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:16:in 'HeatmapController#index'
  Rendering layout layouts/application.html.erb
  Rendering heatmap/index.html.erb within layouts/application
  Rendered heatmap/index.html.erb within layouts/application (Duration: 10.6ms | GC: 0.2ms)
  Rendered layout layouts/application.html.erb (Duration: 12.3ms | GC: 0.2ms)
Completed 200 OK in 33ms (Views: 12.9ms | ActiveRecord: 0.7ms (2 queries, 0 cached) | GC: 0.2ms)


  [1m[36mBonus Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" WHERE "bonuses"."availability_start_date" BETWEEN '2024-07-01 00:00:00' AND '2024-07-31 23:59:59.999999' /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:10:in 'block (2 levels) in <main>'
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."availability_start_date" BETWEEN '2024-07-01 00:00:00' AND '2024-07-31 23:59:59.999999' /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 14 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mDepositBonus Destroy (0.1ms)[0m  [1m[31mDELETE FROM "deposit_bonuses" WHERE "deposit_bonuses"."id" = 8 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" = 14 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" = 14 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" = 14 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" = 14 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" = 14 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mBonus Destroy (0.1ms)[0m  [1m[31mDELETE FROM "bonuses" WHERE "bonuses"."id" = 14 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mDepositBonus Load (0.6ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 15 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mDepositBonus Destroy (0.0ms)[0m  [1m[31mDELETE FROM "deposit_bonuses" WHERE "deposit_bonuses"."id" = 9 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" = 15 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" = 15 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" = 15 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" = 15 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" = 15 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mBonus Destroy (0.2ms)[0m  [1m[31mDELETE FROM "bonuses" WHERE "bonuses"."id" = 15 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mDepositBonus Load (1.5ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 16 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" = 16 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" = 16 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mManualBonus Destroy (0.1ms)[0m  [1m[31mDELETE FROM "manual_bonuses" WHERE "manual_bonuses"."id" = 3 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" = 16 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" = 16 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" = 16 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mBonus Destroy (0.1ms)[0m  [1m[31mDELETE FROM "bonuses" WHERE "bonuses"."id" = 16 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mDepositBonus Load (0.6ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 17 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" = 17 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mInputCouponBonus Destroy (0.1ms)[0m  [1m[31mDELETE FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."id" = 3 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" = 17 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" = 17 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" = 17 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" = 17 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mBonus Destroy (0.1ms)[0m  [1m[31mDELETE FROM "bonuses" WHERE "bonuses"."id" = 17 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mDepositBonus Load (0.8ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 18 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" = 18 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" = 18 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" = 18 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mCollectBonus Destroy (0.1ms)[0m  [1m[31mDELETE FROM "collect_bonuses" WHERE "collect_bonuses"."id" = 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" = 18 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" = 18 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mBonus Destroy (0.1ms)[0m  [1m[31mDELETE FROM "bonuses" WHERE "bonuses"."id" = 18 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mDepositBonus Load (0.7ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 19 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" = 19 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" = 19 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" = 19 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" = 19 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" = 19 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mBonus Destroy (0.1ms)[0m  [1m[31mDELETE FROM "bonuses" WHERE "bonuses"."id" = 19 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_301620EF' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_301620EF' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.2ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Deposit Bonus 0701-1', 'BONUS_301620EF', 'deposit', 'active', NULL, NULL, NULL, NULL, '2024-07-01 00:00:00', '2024-07-01 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:19.857555', '2025-08-11 22:00:19.857555') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mDepositBonus Create (0.8ms)[0m  [1m[32mINSERT INTO "deposit_bonuses" ("bonus_id", "deposit_amount_required", "bonus_percentage", "max_bonus_amount", "first_deposit_only", "recurring_eligible", "created_at", "updated_at") VALUES (20, 50.0, 100.0, 500.0, 0, 1, '2025-08-11 22:00:19.861160', '2025-08-11 22:00:19.861160') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_75556254' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_75556254' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.2ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Deposit Bonus 0703-1', 'BONUS_75556254', 'deposit', 'active', NULL, NULL, NULL, NULL, '2024-07-03 00:00:00', '2024-07-03 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:19.866394', '2025-08-11 22:00:19.866394') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mDepositBonus Create (0.8ms)[0m  [1m[32mINSERT INTO "deposit_bonuses" ("bonus_id", "deposit_amount_required", "bonus_percentage", "max_bonus_amount", "first_deposit_only", "recurring_eligible", "created_at", "updated_at") VALUES (21, 50.0, 100.0, 500.0, 0, 1, '2025-08-11 22:00:19.868873', '2025-08-11 22:00:19.868873') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_56D64C44' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_56D64C44' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Manual Bonus 0703-2', 'BONUS_56D64C44', 'manual', 'active', NULL, NULL, NULL, NULL, '2024-07-03 00:01:00', '2024-07-03 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:19.873369', '2025-08-11 22:00:19.873369') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mManualBonus Create (0.8ms)[0m  [1m[32mINSERT INTO "manual_bonuses" ("bonus_id", "admin_notes", "approval_required", "auto_apply", "conditions", "created_at", "updated_at") VALUES (22, 'Test manual bonus for heatmap testing', 0, 1, 'Test conditions for heatmap', '2025-08-11 22:00:19.875395', '2025-08-11 22:00:19.875395') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_5FA0BA07' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_5FA0BA07' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.2ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Input coupon Bonus 0708-1', 'BONUS_5FA0BA07', 'input_coupon', 'active', NULL, NULL, NULL, NULL, '2024-07-08 00:00:00', '2024-07-08 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:19.880201', '2025-08-11 22:00:19.880201') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mInputCouponBonus Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."coupon_code" = 'TEST07081' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mInputCouponBonus Create (0.4ms)[0m  [1m[32mINSERT INTO "input_coupon_bonuses" ("bonus_id", "coupon_code", "usage_limit", "usage_count", "expires_at", "single_use", "created_at", "updated_at") VALUES (23, 'TEST07081', 100, 0, '2025-08-18 23:59:59.999999', 0, '2025-08-11 22:00:19.885053', '2025-08-11 22:00:19.885053') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_ABF457E8' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_ABF457E8' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.2ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Collection Bonus 0712-1', 'BONUS_ABF457E8', 'collection', 'active', NULL, NULL, NULL, NULL, '2024-07-12 00:00:00', '2024-07-12 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:19.891416', '2025-08-11 22:00:19.891416') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:101:in 'block (4 levels) in <main>'
  [1m[36mCollectBonus Create (1.0ms)[0m  [1m[32mINSERT INTO "collect_bonuses" ("bonus_id", "collection_type", "collection_amount", "collection_frequency", "collection_limit", "collected_count", "created_at", "updated_at") VALUES (24, 'daily', 25.0, 'daily', 1, 0, '2025-08-11 22:00:19.894318', '2025-08-11 22:00:19.894318') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:101:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:101:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_7545053E' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_7545053E' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.2ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Scheduler Bonus 0712-2', 'BONUS_7545053E', 'scheduler', 'active', NULL, NULL, NULL, NULL, '2024-07-12 00:01:00', '2024-07-12 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:19.901407', '2025-08-11 22:00:19.901407') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:119:in 'block (4 levels) in <main>'
  [1m[36mSchedulerBonus Create (1.0ms)[0m  [1m[32mINSERT INTO "scheduler_bonuses" ("bonus_id", "schedule_type", "cron_expression", "next_run_at", "last_run_at", "execution_count", "max_executions", "created_at", "updated_at") VALUES (25, 'recurring', '0 12 * * *', '2024-07-13 00:00:00', '2024-07-12 00:00:00', 1, 30, '2025-08-11 22:00:19.911531', '2025-08-11 22:00:19.911531') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:119:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:119:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_6C834602' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_6C834602' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.4ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Deposit Bonus 0705-1', 'BONUS_6C834602', 'deposit', 'active', NULL, NULL, NULL, NULL, '2024-07-05 00:00:00', '2024-07-05 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:19.919034', '2025-08-11 22:00:19.919034') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mDepositBonus Create (1.7ms)[0m  [1m[32mINSERT INTO "deposit_bonuses" ("bonus_id", "deposit_amount_required", "bonus_percentage", "max_bonus_amount", "first_deposit_only", "recurring_eligible", "created_at", "updated_at") VALUES (26, 50.0, 100.0, 500.0, 0, 1, '2025-08-11 22:00:19.922345', '2025-08-11 22:00:19.922345') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_A483D936' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_A483D936' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.5ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Manual Bonus 0705-2', 'BONUS_A483D936', 'manual', 'active', NULL, NULL, NULL, NULL, '2024-07-05 00:01:00', '2024-07-05 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:19.929785', '2025-08-11 22:00:19.929785') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mManualBonus Create (0.7ms)[0m  [1m[32mINSERT INTO "manual_bonuses" ("bonus_id", "admin_notes", "approval_required", "auto_apply", "conditions", "created_at", "updated_at") VALUES (27, 'Test manual bonus for heatmap testing', 0, 1, 'Test conditions for heatmap', '2025-08-11 22:00:19.932508', '2025-08-11 22:00:19.932508') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_60E81759' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_60E81759' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.2ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Input coupon Bonus 0705-3', 'BONUS_60E81759', 'input_coupon', 'active', NULL, NULL, NULL, NULL, '2024-07-05 00:02:00', '2024-07-05 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:19.937092', '2025-08-11 22:00:19.937092') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mInputCouponBonus Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."coupon_code" = 'TEST07053' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mInputCouponBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "input_coupon_bonuses" ("bonus_id", "coupon_code", "usage_limit", "usage_count", "expires_at", "single_use", "created_at", "updated_at") VALUES (28, 'TEST07053', 100, 0, '2025-08-18 23:59:59.999999', 0, '2025-08-11 22:00:19.940748', '2025-08-11 22:00:19.940748') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_DC26AC39' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_DC26AC39' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.2ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Deposit Bonus 0710-1', 'BONUS_DC26AC39', 'deposit', 'active', NULL, NULL, NULL, NULL, '2024-07-10 00:00:00', '2024-07-10 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:19.945186', '2025-08-11 22:00:19.945186') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mDepositBonus Create (0.8ms)[0m  [1m[32mINSERT INTO "deposit_bonuses" ("bonus_id", "deposit_amount_required", "bonus_percentage", "max_bonus_amount", "first_deposit_only", "recurring_eligible", "created_at", "updated_at") VALUES (29, 50.0, 100.0, 500.0, 0, 1, '2025-08-11 22:00:19.947718', '2025-08-11 22:00:19.947718') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_DF79BAF8' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_DF79BAF8' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.2ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Collection Bonus 0710-2', 'BONUS_DF79BAF8', 'collection', 'active', NULL, NULL, NULL, NULL, '2024-07-10 00:01:00', '2024-07-10 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:19.952733', '2025-08-11 22:00:19.952733') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:101:in 'block (4 levels) in <main>'
  [1m[36mCollectBonus Create (0.7ms)[0m  [1m[32mINSERT INTO "collect_bonuses" ("bonus_id", "collection_type", "collection_amount", "collection_frequency", "collection_limit", "collected_count", "created_at", "updated_at") VALUES (30, 'daily', 25.0, 'daily', 1, 0, '2025-08-11 22:00:19.955282', '2025-08-11 22:00:19.955282') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:101:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:101:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_7943A4D2' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_7943A4D2' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.2ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Scheduler Bonus 0710-3', 'BONUS_7943A4D2', 'scheduler', 'active', NULL, NULL, NULL, NULL, '2024-07-10 00:02:00', '2024-07-10 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:19.960299', '2025-08-11 22:00:19.960299') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:119:in 'block (4 levels) in <main>'
  [1m[36mSchedulerBonus Create (0.7ms)[0m  [1m[32mINSERT INTO "scheduler_bonuses" ("bonus_id", "schedule_type", "cron_expression", "next_run_at", "last_run_at", "execution_count", "max_executions", "created_at", "updated_at") VALUES (31, 'recurring', '0 12 * * *', '2024-07-11 00:00:00', '2024-07-10 00:00:00', 1, 30, '2025-08-11 22:00:19.962577', '2025-08-11 22:00:19.962577') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:119:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:119:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_AC2840CB' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_AC2840CB' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.3ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Groups update Bonus 0710-4', 'BONUS_AC2840CB', 'groups_update', 'active', NULL, NULL, NULL, NULL, '2024-07-10 00:03:00', '2024-07-10 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:19.968011', '2025-08-11 22:00:19.968011') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" WHERE "bonuses"."availability_start_date" BETWEEN '2024-07-01 00:00:00' AND '2024-07-31 23:59:59.999999' /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:10:in 'block (2 levels) in <main>'
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."availability_start_date" BETWEEN '2024-07-01 00:00:00' AND '2024-07-31 23:59:59.999999' /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 20 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mDepositBonus Destroy (0.1ms)[0m  [1m[31mDELETE FROM "deposit_bonuses" WHERE "deposit_bonuses"."id" = 10 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" = 20 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mManualBonus Load (0.9ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" = 20 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" = 20 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" = 20 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" = 20 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mBonus Destroy (0.1ms)[0m  [1m[31mDELETE FROM "bonuses" WHERE "bonuses"."id" = 20 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mDepositBonus Load (0.7ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 21 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mDepositBonus Destroy (0.0ms)[0m  [1m[31mDELETE FROM "deposit_bonuses" WHERE "deposit_bonuses"."id" = 11 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" = 21 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" = 21 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" = 21 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" = 21 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mSchedulerBonus Load (0.0ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" = 21 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mBonus Destroy (0.1ms)[0m  [1m[31mDELETE FROM "bonuses" WHERE "bonuses"."id" = 21 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mDepositBonus Load (0.7ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 22 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" = 22 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" = 22 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mManualBonus Destroy (0.1ms)[0m  [1m[31mDELETE FROM "manual_bonuses" WHERE "manual_bonuses"."id" = 4 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" = 22 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" = 22 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" = 22 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mBonus Destroy (0.1ms)[0m  [1m[31mDELETE FROM "bonuses" WHERE "bonuses"."id" = 22 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mDepositBonus Load (0.8ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 26 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mDepositBonus Destroy (0.0ms)[0m  [1m[31mDELETE FROM "deposit_bonuses" WHERE "deposit_bonuses"."id" = 12 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" = 26 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" = 26 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" = 26 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mGroupsUpdateBonus Load (0.3ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" = 26 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" = 26 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mBonus Destroy (0.1ms)[0m  [1m[31mDELETE FROM "bonuses" WHERE "bonuses"."id" = 26 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mDepositBonus Load (0.8ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 27 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" = 27 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" = 27 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mManualBonus Destroy (0.2ms)[0m  [1m[31mDELETE FROM "manual_bonuses" WHERE "manual_bonuses"."id" = 5 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mCollectBonus Load (0.2ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" = 27 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" = 27 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" = 27 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mBonus Destroy (0.1ms)[0m  [1m[31mDELETE FROM "bonuses" WHERE "bonuses"."id" = 27 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mDepositBonus Load (1.0ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 28 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" = 28 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mInputCouponBonus Destroy (0.1ms)[0m  [1m[31mDELETE FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."id" = 5 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" = 28 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" = 28 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" = 28 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" = 28 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mBonus Destroy (0.1ms)[0m  [1m[31mDELETE FROM "bonuses" WHERE "bonuses"."id" = 28 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mDepositBonus Load (1.4ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 23 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" = 23 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mInputCouponBonus Destroy (0.0ms)[0m  [1m[31mDELETE FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."id" = 4 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" = 23 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" = 23 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" = 23 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mSchedulerBonus Load (0.0ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" = 23 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mBonus Destroy (0.1ms)[0m  [1m[31mDELETE FROM "bonuses" WHERE "bonuses"."id" = 23 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mDepositBonus Load (0.6ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 29 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mDepositBonus Destroy (0.0ms)[0m  [1m[31mDELETE FROM "deposit_bonuses" WHERE "deposit_bonuses"."id" = 13 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" = 29 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" = 29 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" = 29 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" = 29 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mSchedulerBonus Load (0.2ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" = 29 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mBonus Destroy (0.1ms)[0m  [1m[31mDELETE FROM "bonuses" WHERE "bonuses"."id" = 29 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mDepositBonus Load (0.7ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 30 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" = 30 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" = 30 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" = 30 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mCollectBonus Destroy (0.1ms)[0m  [1m[31mDELETE FROM "collect_bonuses" WHERE "collect_bonuses"."id" = 3 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mGroupsUpdateBonus Load (0.2ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" = 30 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" = 30 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mBonus Destroy (0.2ms)[0m  [1m[31mDELETE FROM "bonuses" WHERE "bonuses"."id" = 30 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mDepositBonus Load (0.9ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 31 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" = 31 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" = 31 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" = 31 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" = 31 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" = 31 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mSchedulerBonus Destroy (0.1ms)[0m  [1m[31mDELETE FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."id" = 2 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mBonus Destroy (0.1ms)[0m  [1m[31mDELETE FROM "bonuses" WHERE "bonuses"."id" = 31 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mDepositBonus Load (1.8ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 32 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" = 32 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" = 32 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" = 32 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" = 32 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" = 32 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mBonus Destroy (0.1ms)[0m  [1m[31mDELETE FROM "bonuses" WHERE "bonuses"."id" = 32 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mDepositBonus Load (0.7ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 24 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" = 24 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" = 24 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" = 24 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mCollectBonus Destroy (0.1ms)[0m  [1m[31mDELETE FROM "collect_bonuses" WHERE "collect_bonuses"."id" = 2 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" = 24 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" = 24 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mBonus Destroy (0.1ms)[0m  [1m[31mDELETE FROM "bonuses" WHERE "bonuses"."id" = 24 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mDepositBonus Load (0.9ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 25 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" = 25 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mManualBonus Load (0.2ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" = 25 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" = 25 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" = 25 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" = 25 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mSchedulerBonus Destroy (0.1ms)[0m  [1m[31mDELETE FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."id" = 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mBonus Destroy (0.1ms)[0m  [1m[31mDELETE FROM "bonuses" WHERE "bonuses"."id" = 25 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_8B82D1BB' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_8B82D1BB' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.2ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Deposit Bonus 0701-1', 'BONUS_8B82D1BB', 'deposit', 'active', NULL, NULL, NULL, NULL, '2024-07-01 00:00:00', '2024-07-01 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:37.174854', '2025-08-11 22:00:37.174854') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mDepositBonus Create (0.9ms)[0m  [1m[32mINSERT INTO "deposit_bonuses" ("bonus_id", "deposit_amount_required", "bonus_percentage", "max_bonus_amount", "first_deposit_only", "recurring_eligible", "created_at", "updated_at") VALUES (33, 50.0, 100.0, 500.0, 0, 1, '2025-08-11 22:00:37.177643', '2025-08-11 22:00:37.177643') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_6626E164' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_6626E164' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.6ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Deposit Bonus 0703-1', 'BONUS_6626E164', 'deposit', 'active', NULL, NULL, NULL, NULL, '2024-07-03 00:00:00', '2024-07-03 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:37.182960', '2025-08-11 22:00:37.182960') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mDepositBonus Create (0.8ms)[0m  [1m[32mINSERT INTO "deposit_bonuses" ("bonus_id", "deposit_amount_required", "bonus_percentage", "max_bonus_amount", "first_deposit_only", "recurring_eligible", "created_at", "updated_at") VALUES (34, 50.0, 100.0, 500.0, 0, 1, '2025-08-11 22:00:37.186464', '2025-08-11 22:00:37.186464') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_0A79D254' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_0A79D254' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.3ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Manual Bonus 0703-2', 'BONUS_0A79D254', 'manual', 'active', NULL, NULL, NULL, NULL, '2024-07-03 00:01:00', '2024-07-03 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:37.191038', '2025-08-11 22:00:37.191038') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mManualBonus Create (1.0ms)[0m  [1m[32mINSERT INTO "manual_bonuses" ("bonus_id", "admin_notes", "approval_required", "auto_apply", "conditions", "created_at", "updated_at") VALUES (35, 'Test manual bonus for heatmap testing', 0, 1, 'Test conditions for heatmap', '2025-08-11 22:00:37.193093', '2025-08-11 22:00:37.193093') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (2.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_13FF095F' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_13FF095F' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.2ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Input coupon Bonus 0708-1', 'BONUS_13FF095F', 'input_coupon', 'active', NULL, NULL, NULL, NULL, '2024-07-08 00:00:00', '2024-07-08 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:37.199795', '2025-08-11 22:00:37.199795') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mInputCouponBonus Exists? (1.8ms)[0m  [1m[34mSELECT 1 AS one FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."coupon_code" = 'TEST07081' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mInputCouponBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "input_coupon_bonuses" ("bonus_id", "coupon_code", "usage_limit", "usage_count", "expires_at", "single_use", "created_at", "updated_at") VALUES (36, 'TEST07081', 100, 0, '2025-08-18 23:59:59.999999', 0, '2025-08-11 22:00:37.227104', '2025-08-11 22:00:37.227104') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_6D3129EC' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_6D3129EC' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.4ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Collection Bonus 0712-1', 'BONUS_6D3129EC', 'collection', 'active', NULL, NULL, NULL, NULL, '2024-07-12 00:00:00', '2024-07-12 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:37.233247', '2025-08-11 22:00:37.233247') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:101:in 'block (4 levels) in <main>'
  [1m[36mCollectBonus Create (0.8ms)[0m  [1m[32mINSERT INTO "collect_bonuses" ("bonus_id", "collection_type", "collection_amount", "collection_frequency", "collection_limit", "collected_count", "created_at", "updated_at") VALUES (37, 'daily', 25.0, 'daily', 1, 0, '2025-08-11 22:00:37.238057', '2025-08-11 22:00:37.238057') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:101:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:101:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_02FC2A5F' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_02FC2A5F' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.2ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Scheduler Bonus 0712-2', 'BONUS_02FC2A5F', 'scheduler', 'active', NULL, NULL, NULL, NULL, '2024-07-12 00:01:00', '2024-07-12 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:37.243083', '2025-08-11 22:00:37.243083') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:119:in 'block (4 levels) in <main>'
  [1m[36mSchedulerBonus Create (0.7ms)[0m  [1m[32mINSERT INTO "scheduler_bonuses" ("bonus_id", "schedule_type", "cron_expression", "next_run_at", "last_run_at", "execution_count", "max_executions", "created_at", "updated_at") VALUES (38, 'recurring', '0 12 * * *', '2024-07-13 00:00:00', '2024-07-12 00:00:00', 1, 30, '2025-08-11 22:00:37.247078', '2025-08-11 22:00:37.247078') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:119:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:119:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_3D9F07BC' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_3D9F07BC' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Deposit Bonus 0705-1', 'BONUS_3D9F07BC', 'deposit', 'active', NULL, NULL, NULL, NULL, '2024-07-05 00:00:00', '2024-07-05 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:37.253281', '2025-08-11 22:00:37.253281') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mDepositBonus Create (0.8ms)[0m  [1m[32mINSERT INTO "deposit_bonuses" ("bonus_id", "deposit_amount_required", "bonus_percentage", "max_bonus_amount", "first_deposit_only", "recurring_eligible", "created_at", "updated_at") VALUES (39, 50.0, 100.0, 500.0, 0, 1, '2025-08-11 22:00:37.256014', '2025-08-11 22:00:37.256014') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_721180AC' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_721180AC' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.2ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Manual Bonus 0705-2', 'BONUS_721180AC', 'manual', 'active', NULL, NULL, NULL, NULL, '2024-07-05 00:01:00', '2024-07-05 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:37.262834', '2025-08-11 22:00:37.262834') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mManualBonus Create (0.6ms)[0m  [1m[32mINSERT INTO "manual_bonuses" ("bonus_id", "admin_notes", "approval_required", "auto_apply", "conditions", "created_at", "updated_at") VALUES (40, 'Test manual bonus for heatmap testing', 0, 1, 'Test conditions for heatmap', '2025-08-11 22:00:37.265905', '2025-08-11 22:00:37.265905') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_44CC359C' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_44CC359C' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.4ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Input coupon Bonus 0705-3', 'BONUS_44CC359C', 'input_coupon', 'active', NULL, NULL, NULL, NULL, '2024-07-05 00:02:00', '2024-07-05 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:37.272772', '2025-08-11 22:00:37.272772') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mInputCouponBonus Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."coupon_code" = 'TEST07053' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mInputCouponBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "input_coupon_bonuses" ("bonus_id", "coupon_code", "usage_limit", "usage_count", "expires_at", "single_use", "created_at", "updated_at") VALUES (41, 'TEST07053', 100, 0, '2025-08-18 23:59:59.999999', 0, '2025-08-11 22:00:37.278669', '2025-08-11 22:00:37.278669') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_E17E5E9A' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_E17E5E9A' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.2ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Deposit Bonus 0710-1', 'BONUS_E17E5E9A', 'deposit', 'active', NULL, NULL, NULL, NULL, '2024-07-10 00:00:00', '2024-07-10 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:37.284010', '2025-08-11 22:00:37.284010') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mDepositBonus Create (1.4ms)[0m  [1m[32mINSERT INTO "deposit_bonuses" ("bonus_id", "deposit_amount_required", "bonus_percentage", "max_bonus_amount", "first_deposit_only", "recurring_eligible", "created_at", "updated_at") VALUES (42, 50.0, 100.0, 500.0, 0, 1, '2025-08-11 22:00:37.287108', '2025-08-11 22:00:37.287108') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_526382EA' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_526382EA' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Collection Bonus 0710-2', 'BONUS_526382EA', 'collection', 'active', NULL, NULL, NULL, NULL, '2024-07-10 00:01:00', '2024-07-10 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:37.292639', '2025-08-11 22:00:37.292639') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:101:in 'block (4 levels) in <main>'
  [1m[36mCollectBonus Create (1.2ms)[0m  [1m[32mINSERT INTO "collect_bonuses" ("bonus_id", "collection_type", "collection_amount", "collection_frequency", "collection_limit", "collected_count", "created_at", "updated_at") VALUES (43, 'daily', 25.0, 'daily', 1, 0, '2025-08-11 22:00:37.296262', '2025-08-11 22:00:37.296262') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:101:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:101:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_B04B043D' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_B04B043D' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.6ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Scheduler Bonus 0710-3', 'BONUS_B04B043D', 'scheduler', 'active', NULL, NULL, NULL, NULL, '2024-07-10 00:02:00', '2024-07-10 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:37.304336', '2025-08-11 22:00:37.304336') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:119:in 'block (4 levels) in <main>'
  [1m[36mSchedulerBonus Create (0.6ms)[0m  [1m[32mINSERT INTO "scheduler_bonuses" ("bonus_id", "schedule_type", "cron_expression", "next_run_at", "last_run_at", "execution_count", "max_executions", "created_at", "updated_at") VALUES (44, 'recurring', '0 12 * * *', '2024-07-11 00:00:00', '2024-07-10 00:00:00', 1, 30, '2025-08-11 22:00:37.307284', '2025-08-11 22:00:37.307284') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:119:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:119:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_28CB5261' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_28CB5261' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Groups update Bonus 0710-4', 'BONUS_28CB5261', 'groups_update', 'active', NULL, NULL, NULL, NULL, '2024-07-10 00:03:00', '2024-07-10 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:37.313349', '2025-08-11 22:00:37.313349') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:110:in 'block (4 levels) in <main>'
  [1m[36mGroupsUpdateBonus Create (3.6ms)[0m  [1m[32mINSERT INTO "groups_update_bonuses" ("bonus_id", "target_groups", "update_type", "update_parameters", "batch_size", "processing_status", "created_at", "updated_at") VALUES (45, '["test_group_1", "test_group_2"]', 'bulk_apply', '{"amount": 100}', 50, 'completed', '2025-08-11 22:00:37.319712', '2025-08-11 22:00:37.319712') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:110:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:110:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_7A395F01' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_7A395F01' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Manual Bonus 0718-1', 'BONUS_7A395F01', 'manual', 'active', NULL, NULL, NULL, NULL, '2024-07-18 00:00:00', '2024-07-18 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:37.330288', '2025-08-11 22:00:37.330288') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mManualBonus Create (1.4ms)[0m  [1m[32mINSERT INTO "manual_bonuses" ("bonus_id", "admin_notes", "approval_required", "auto_apply", "conditions", "created_at", "updated_at") VALUES (46, 'Test manual bonus for heatmap testing', 0, 1, 'Test conditions for heatmap', '2025-08-11 22:00:37.333890', '2025-08-11 22:00:37.333890') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_D47A7829' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_D47A7829' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Input coupon Bonus 0718-2', 'BONUS_D47A7829', 'input_coupon', 'active', NULL, NULL, NULL, NULL, '2024-07-18 00:01:00', '2024-07-18 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:37.339023', '2025-08-11 22:00:37.339023') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mInputCouponBonus Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."coupon_code" = 'TEST07182' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mInputCouponBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "input_coupon_bonuses" ("bonus_id", "coupon_code", "usage_limit", "usage_count", "expires_at", "single_use", "created_at", "updated_at") VALUES (47, 'TEST07182', 100, 0, '2025-08-18 23:59:59.999999', 0, '2025-08-11 22:00:37.343933', '2025-08-11 22:00:37.343933') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_29AF348A' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_29AF348A' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Collection Bonus 0718-3', 'BONUS_29AF348A', 'collection', 'active', NULL, NULL, NULL, NULL, '2024-07-18 00:02:00', '2024-07-18 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:37.351354', '2025-08-11 22:00:37.351354') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:101:in 'block (4 levels) in <main>'
  [1m[36mCollectBonus Create (0.8ms)[0m  [1m[32mINSERT INTO "collect_bonuses" ("bonus_id", "collection_type", "collection_amount", "collection_frequency", "collection_limit", "collected_count", "created_at", "updated_at") VALUES (48, 'daily', 25.0, 'daily', 1, 0, '2025-08-11 22:00:37.354976', '2025-08-11 22:00:37.354976') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:101:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:101:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_E8EB567F' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_E8EB567F' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Deposit Bonus 0722-1', 'BONUS_E8EB567F', 'deposit', 'active', NULL, NULL, NULL, NULL, '2024-07-22 00:00:00', '2024-07-22 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:37.361833', '2025-08-11 22:00:37.361833') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mDepositBonus Create (0.7ms)[0m  [1m[32mINSERT INTO "deposit_bonuses" ("bonus_id", "deposit_amount_required", "bonus_percentage", "max_bonus_amount", "first_deposit_only", "recurring_eligible", "created_at", "updated_at") VALUES (49, 50.0, 100.0, 500.0, 0, 1, '2025-08-11 22:00:37.365439', '2025-08-11 22:00:37.365439') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_87A114A2' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_87A114A2' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Manual Bonus 0722-2', 'BONUS_87A114A2', 'manual', 'active', NULL, NULL, NULL, NULL, '2024-07-22 00:01:00', '2024-07-22 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:37.371468', '2025-08-11 22:00:37.371468') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mManualBonus Create (1.3ms)[0m  [1m[32mINSERT INTO "manual_bonuses" ("bonus_id", "admin_notes", "approval_required", "auto_apply", "conditions", "created_at", "updated_at") VALUES (50, 'Test manual bonus for heatmap testing', 0, 1, 'Test conditions for heatmap', '2025-08-11 22:00:37.376047', '2025-08-11 22:00:37.376047') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_B18A82AF' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_B18A82AF' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.2ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Scheduler Bonus 0722-3', 'BONUS_B18A82AF', 'scheduler', 'active', NULL, NULL, NULL, NULL, '2024-07-22 00:02:00', '2024-07-22 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:37.382061', '2025-08-11 22:00:37.382061') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:119:in 'block (4 levels) in <main>'
  [1m[36mSchedulerBonus Create (1.8ms)[0m  [1m[32mINSERT INTO "scheduler_bonuses" ("bonus_id", "schedule_type", "cron_expression", "next_run_at", "last_run_at", "execution_count", "max_executions", "created_at", "updated_at") VALUES (51, 'recurring', '0 12 * * *', '2024-07-23 00:00:00', '2024-07-22 00:00:00', 1, 30, '2025-08-11 22:00:37.385734', '2025-08-11 22:00:37.385734') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:119:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:119:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (2.5ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_ACE98943' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_ACE98943' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.7ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Input coupon Bonus 0722-4', 'BONUS_ACE98943', 'input_coupon', 'active', NULL, NULL, NULL, NULL, '2024-07-22 00:03:00', '2024-07-22 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:37.392843', '2025-08-11 22:00:37.392843') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (15.9ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mInputCouponBonus Exists? (1.7ms)[0m  [1m[34mSELECT 1 AS one FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."coupon_code" = 'TEST07224' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mInputCouponBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "input_coupon_bonuses" ("bonus_id", "coupon_code", "usage_limit", "usage_count", "expires_at", "single_use", "created_at", "updated_at") VALUES (52, 'TEST07224', 100, 0, '2025-08-18 23:59:59.999999', 0, '2025-08-11 22:00:37.414364', '2025-08-11 22:00:37.414364') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (2.3ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_3667BFF4' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_3667BFF4' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Deposit Bonus 0707-1', 'BONUS_3667BFF4', 'deposit', 'active', NULL, NULL, NULL, NULL, '2024-07-07 00:00:00', '2024-07-07 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:37.420269', '2025-08-11 22:00:37.420269') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mDepositBonus Create (0.6ms)[0m  [1m[32mINSERT INTO "deposit_bonuses" ("bonus_id", "deposit_amount_required", "bonus_percentage", "max_bonus_amount", "first_deposit_only", "recurring_eligible", "created_at", "updated_at") VALUES (53, 50.0, 100.0, 500.0, 0, 1, '2025-08-11 22:00:37.422702', '2025-08-11 22:00:37.422702') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (2.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_35516490' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_35516490' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Manual Bonus 0707-2', 'BONUS_35516490', 'manual', 'active', NULL, NULL, NULL, NULL, '2024-07-07 00:01:00', '2024-07-07 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:37.430965', '2025-08-11 22:00:37.430965') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mManualBonus Create (0.6ms)[0m  [1m[32mINSERT INTO "manual_bonuses" ("bonus_id", "admin_notes", "approval_required", "auto_apply", "conditions", "created_at", "updated_at") VALUES (54, 'Test manual bonus for heatmap testing', 0, 1, 'Test conditions for heatmap', '2025-08-11 22:00:37.433686', '2025-08-11 22:00:37.433686') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_B859C9F5' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_B859C9F5' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Input coupon Bonus 0707-3', 'BONUS_B859C9F5', 'input_coupon', 'active', NULL, NULL, NULL, NULL, '2024-07-07 00:02:00', '2024-07-07 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:37.437369', '2025-08-11 22:00:37.437369') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mInputCouponBonus Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."coupon_code" = 'TEST07073' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mInputCouponBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "input_coupon_bonuses" ("bonus_id", "coupon_code", "usage_limit", "usage_count", "expires_at", "single_use", "created_at", "updated_at") VALUES (55, 'TEST07073', 100, 0, '2025-08-18 23:59:59.999999', 0, '2025-08-11 22:00:37.442505', '2025-08-11 22:00:37.442505') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_1BBD9510' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_1BBD9510' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Collection Bonus 0707-4', 'BONUS_1BBD9510', 'collection', 'active', NULL, NULL, NULL, NULL, '2024-07-07 00:03:00', '2024-07-07 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:37.447320', '2025-08-11 22:00:37.447320') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:101:in 'block (4 levels) in <main>'
  [1m[36mCollectBonus Create (0.6ms)[0m  [1m[32mINSERT INTO "collect_bonuses" ("bonus_id", "collection_type", "collection_amount", "collection_frequency", "collection_limit", "collected_count", "created_at", "updated_at") VALUES (56, 'daily', 25.0, 'daily', 1, 0, '2025-08-11 22:00:37.451366', '2025-08-11 22:00:37.451366') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:101:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:101:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_500588BE' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_500588BE' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Scheduler Bonus 0707-5', 'BONUS_500588BE', 'scheduler', 'active', NULL, NULL, NULL, NULL, '2024-07-07 00:04:00', '2024-07-07 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:37.459748', '2025-08-11 22:00:37.459748') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:119:in 'block (4 levels) in <main>'
  [1m[36mSchedulerBonus Create (0.6ms)[0m  [1m[32mINSERT INTO "scheduler_bonuses" ("bonus_id", "schedule_type", "cron_expression", "next_run_at", "last_run_at", "execution_count", "max_executions", "created_at", "updated_at") VALUES (57, 'recurring', '0 12 * * *', '2024-07-08 00:00:00', '2024-07-07 00:00:00', 1, 30, '2025-08-11 22:00:37.463330', '2025-08-11 22:00:37.463330') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:119:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:119:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_F951844F' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_F951844F' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.2ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Deposit Bonus 0714-1', 'BONUS_F951844F', 'deposit', 'active', NULL, NULL, NULL, NULL, '2024-07-14 00:00:00', '2024-07-14 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:37.483686', '2025-08-11 22:00:37.483686') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mDepositBonus Create (1.3ms)[0m  [1m[32mINSERT INTO "deposit_bonuses" ("bonus_id", "deposit_amount_required", "bonus_percentage", "max_bonus_amount", "first_deposit_only", "recurring_eligible", "created_at", "updated_at") VALUES (58, 50.0, 100.0, 500.0, 0, 1, '2025-08-11 22:00:37.486155', '2025-08-11 22:00:37.486155') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_C5AFF50A' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_C5AFF50A' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Manual Bonus 0714-2', 'BONUS_C5AFF50A', 'manual', 'active', NULL, NULL, NULL, NULL, '2024-07-14 00:01:00', '2024-07-14 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:37.490978', '2025-08-11 22:00:37.490978') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mManualBonus Create (0.6ms)[0m  [1m[32mINSERT INTO "manual_bonuses" ("bonus_id", "admin_notes", "approval_required", "auto_apply", "conditions", "created_at", "updated_at") VALUES (59, 'Test manual bonus for heatmap testing', 0, 1, 'Test conditions for heatmap', '2025-08-11 22:00:37.494411', '2025-08-11 22:00:37.494411') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_87D0C8ED' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_87D0C8ED' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Input coupon Bonus 0714-3', 'BONUS_87D0C8ED', 'input_coupon', 'active', NULL, NULL, NULL, NULL, '2024-07-14 00:02:00', '2024-07-14 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:37.501212', '2025-08-11 22:00:37.501212') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mInputCouponBonus Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."coupon_code" = 'TEST07143' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mInputCouponBonus Create (0.6ms)[0m  [1m[32mINSERT INTO "input_coupon_bonuses" ("bonus_id", "coupon_code", "usage_limit", "usage_count", "expires_at", "single_use", "created_at", "updated_at") VALUES (60, 'TEST07143', 100, 0, '2025-08-18 23:59:59.999999', 0, '2025-08-11 22:00:37.506391', '2025-08-11 22:00:37.506391') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_02406512' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_02406512' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.4ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Collection Bonus 0714-4', 'BONUS_02406512', 'collection', 'active', NULL, NULL, NULL, NULL, '2024-07-14 00:03:00', '2024-07-14 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:37.517781', '2025-08-11 22:00:37.517781') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:101:in 'block (4 levels) in <main>'
  [1m[36mCollectBonus Create (0.6ms)[0m  [1m[32mINSERT INTO "collect_bonuses" ("bonus_id", "collection_type", "collection_amount", "collection_frequency", "collection_limit", "collected_count", "created_at", "updated_at") VALUES (61, 'daily', 25.0, 'daily', 1, 0, '2025-08-11 22:00:37.520782', '2025-08-11 22:00:37.520782') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:101:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:101:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (1.7ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_84334AE8' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_84334AE8' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Scheduler Bonus 0714-5', 'BONUS_84334AE8', 'scheduler', 'active', NULL, NULL, NULL, NULL, '2024-07-14 00:04:00', '2024-07-14 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:37.526083', '2025-08-11 22:00:37.526083') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:119:in 'block (4 levels) in <main>'
  [1m[36mSchedulerBonus Create (0.6ms)[0m  [1m[32mINSERT INTO "scheduler_bonuses" ("bonus_id", "schedule_type", "cron_expression", "next_run_at", "last_run_at", "execution_count", "max_executions", "created_at", "updated_at") VALUES (62, 'recurring', '0 12 * * *', '2024-07-15 00:00:00', '2024-07-14 00:00:00', 1, 30, '2025-08-11 22:00:37.527870', '2025-08-11 22:00:37.527870') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:119:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:119:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_D6985350' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_D6985350' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.6ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Groups update Bonus 0714-6', 'BONUS_D6985350', 'groups_update', 'active', NULL, NULL, NULL, NULL, '2024-07-14 00:05:00', '2024-07-14 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:37.534584', '2025-08-11 22:00:37.534584') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:110:in 'block (4 levels) in <main>'
  [1m[36mGroupsUpdateBonus Create (0.7ms)[0m  [1m[32mINSERT INTO "groups_update_bonuses" ("bonus_id", "target_groups", "update_type", "update_parameters", "batch_size", "processing_status", "created_at", "updated_at") VALUES (63, '["test_group_1", "test_group_2"]', 'bulk_apply', '{"amount": 100}', 50, 'completed', '2025-08-11 22:00:37.537671', '2025-08-11 22:00:37.537671') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:110:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:110:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_F861385E' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_F861385E' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Deposit Bonus 0725-1', 'BONUS_F861385E', 'deposit', 'active', NULL, NULL, NULL, NULL, '2024-07-25 00:00:00', '2024-07-25 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:37.541732', '2025-08-11 22:00:37.541732') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mDepositBonus Create (4.5ms)[0m  [1m[32mINSERT INTO "deposit_bonuses" ("bonus_id", "deposit_amount_required", "bonus_percentage", "max_bonus_amount", "first_deposit_only", "recurring_eligible", "created_at", "updated_at") VALUES (64, 50.0, 100.0, 500.0, 0, 1, '2025-08-11 22:00:37.545008', '2025-08-11 22:00:37.545008') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (1.7ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_28D9EC21' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_28D9EC21' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Deposit Bonus 0725-2', 'BONUS_28D9EC21', 'deposit', 'active', NULL, NULL, NULL, NULL, '2024-07-25 00:01:00', '2024-07-25 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:37.554257', '2025-08-11 22:00:37.554257') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mDepositBonus Create (2.1ms)[0m  [1m[32mINSERT INTO "deposit_bonuses" ("bonus_id", "deposit_amount_required", "bonus_percentage", "max_bonus_amount", "first_deposit_only", "recurring_eligible", "created_at", "updated_at") VALUES (65, 50.0, 100.0, 500.0, 0, 1, '2025-08-11 22:00:37.556008', '2025-08-11 22:00:37.556008') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (3.7ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_78D8E627' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_78D8E627' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Manual Bonus 0725-3', 'BONUS_78D8E627', 'manual', 'active', NULL, NULL, NULL, NULL, '2024-07-25 00:02:00', '2024-07-25 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:37.567635', '2025-08-11 22:00:37.567635') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mManualBonus Create (1.2ms)[0m  [1m[32mINSERT INTO "manual_bonuses" ("bonus_id", "admin_notes", "approval_required", "auto_apply", "conditions", "created_at", "updated_at") VALUES (66, 'Test manual bonus for heatmap testing', 0, 1, 'Test conditions for heatmap', '2025-08-11 22:00:37.571183', '2025-08-11 22:00:37.571183') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_5E147305' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_5E147305' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Input coupon Bonus 0725-4', 'BONUS_5E147305', 'input_coupon', 'active', NULL, NULL, NULL, NULL, '2024-07-25 00:03:00', '2024-07-25 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:37.579399', '2025-08-11 22:00:37.579399') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mInputCouponBonus Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."coupon_code" = 'TEST07254' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mInputCouponBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "input_coupon_bonuses" ("bonus_id", "coupon_code", "usage_limit", "usage_count", "expires_at", "single_use", "created_at", "updated_at") VALUES (67, 'TEST07254', 100, 0, '2025-08-18 23:59:59.999999', 0, '2025-08-11 22:00:37.586625', '2025-08-11 22:00:37.586625') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (2.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_9128BF0B' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_9128BF0B' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Collection Bonus 0725-5', 'BONUS_9128BF0B', 'collection', 'active', NULL, NULL, NULL, NULL, '2024-07-25 00:04:00', '2024-07-25 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:37.594950', '2025-08-11 22:00:37.594950') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:101:in 'block (4 levels) in <main>'
  [1m[36mCollectBonus Create (2.5ms)[0m  [1m[32mINSERT INTO "collect_bonuses" ("bonus_id", "collection_type", "collection_amount", "collection_frequency", "collection_limit", "collected_count", "created_at", "updated_at") VALUES (68, 'daily', 25.0, 'daily', 1, 0, '2025-08-11 22:00:37.597138', '2025-08-11 22:00:37.597138') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:101:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:101:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_77C149C7' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_77C149C7' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Deposit Bonus 0715-1', 'BONUS_77C149C7', 'deposit', 'active', NULL, NULL, NULL, NULL, '2024-07-15 00:00:00', '2024-07-15 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:37.603068', '2025-08-11 22:00:37.603068') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mDepositBonus Create (0.6ms)[0m  [1m[32mINSERT INTO "deposit_bonuses" ("bonus_id", "deposit_amount_required", "bonus_percentage", "max_bonus_amount", "first_deposit_only", "recurring_eligible", "created_at", "updated_at") VALUES (69, 50.0, 100.0, 500.0, 0, 1, '2025-08-11 22:00:37.604844', '2025-08-11 22:00:37.604844') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_552FC649' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_552FC649' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Deposit Bonus 0715-2', 'BONUS_552FC649', 'deposit', 'active', NULL, NULL, NULL, NULL, '2024-07-15 00:01:00', '2024-07-15 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:37.609518', '2025-08-11 22:00:37.609518') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mDepositBonus Create (0.6ms)[0m  [1m[32mINSERT INTO "deposit_bonuses" ("bonus_id", "deposit_amount_required", "bonus_percentage", "max_bonus_amount", "first_deposit_only", "recurring_eligible", "created_at", "updated_at") VALUES (70, 50.0, 100.0, 500.0, 0, 1, '2025-08-11 22:00:37.611015', '2025-08-11 22:00:37.611015') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_EE09FB72' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_EE09FB72' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Manual Bonus 0715-3', 'BONUS_EE09FB72', 'manual', 'active', NULL, NULL, NULL, NULL, '2024-07-15 00:02:00', '2024-07-15 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:37.614359', '2025-08-11 22:00:37.614359') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mManualBonus Create (0.8ms)[0m  [1m[32mINSERT INTO "manual_bonuses" ("bonus_id", "admin_notes", "approval_required", "auto_apply", "conditions", "created_at", "updated_at") VALUES (71, 'Test manual bonus for heatmap testing', 0, 1, 'Test conditions for heatmap', '2025-08-11 22:00:37.616529', '2025-08-11 22:00:37.616529') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_5A209C56' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_5A209C56' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Input coupon Bonus 0715-4', 'BONUS_5A209C56', 'input_coupon', 'active', NULL, NULL, NULL, NULL, '2024-07-15 00:03:00', '2024-07-15 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:37.620933', '2025-08-11 22:00:37.620933') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mInputCouponBonus Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."coupon_code" = 'TEST07154' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mInputCouponBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "input_coupon_bonuses" ("bonus_id", "coupon_code", "usage_limit", "usage_count", "expires_at", "single_use", "created_at", "updated_at") VALUES (72, 'TEST07154', 100, 0, '2025-08-18 23:59:59.999999', 0, '2025-08-11 22:00:37.626651', '2025-08-11 22:00:37.626651') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_1C59E913' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_1C59E913' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Collection Bonus 0715-5', 'BONUS_1C59E913', 'collection', 'active', NULL, NULL, NULL, NULL, '2024-07-15 00:04:00', '2024-07-15 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:37.630040', '2025-08-11 22:00:37.630040') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:101:in 'block (4 levels) in <main>'
  [1m[36mCollectBonus Create (0.7ms)[0m  [1m[32mINSERT INTO "collect_bonuses" ("bonus_id", "collection_type", "collection_amount", "collection_frequency", "collection_limit", "collected_count", "created_at", "updated_at") VALUES (73, 'daily', 25.0, 'daily', 1, 0, '2025-08-11 22:00:37.631753', '2025-08-11 22:00:37.631753') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:101:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:101:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_95DF57A3' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_95DF57A3' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Scheduler Bonus 0715-6', 'BONUS_95DF57A3', 'scheduler', 'active', NULL, NULL, NULL, NULL, '2024-07-15 00:05:00', '2024-07-15 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:37.635984', '2025-08-11 22:00:37.635984') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:119:in 'block (4 levels) in <main>'
  [1m[36mSchedulerBonus Create (0.6ms)[0m  [1m[32mINSERT INTO "scheduler_bonuses" ("bonus_id", "schedule_type", "cron_expression", "next_run_at", "last_run_at", "execution_count", "max_executions", "created_at", "updated_at") VALUES (74, 'recurring', '0 12 * * *', '2024-07-16 00:00:00', '2024-07-15 00:00:00', 1, 30, '2025-08-11 22:00:37.638445', '2025-08-11 22:00:37.638445') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:119:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:119:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_E4A4A625' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_E4A4A625' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Groups update Bonus 0715-7', 'BONUS_E4A4A625', 'groups_update', 'active', NULL, NULL, NULL, NULL, '2024-07-15 00:06:00', '2024-07-15 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:37.642558', '2025-08-11 22:00:37.642558') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:110:in 'block (4 levels) in <main>'
  [1m[36mGroupsUpdateBonus Create (0.7ms)[0m  [1m[32mINSERT INTO "groups_update_bonuses" ("bonus_id", "target_groups", "update_type", "update_parameters", "batch_size", "processing_status", "created_at", "updated_at") VALUES (75, '["test_group_1", "test_group_2"]', 'bulk_apply', '{"amount": 100}', 50, 'completed', '2025-08-11 22:00:37.644077', '2025-08-11 22:00:37.644077') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:110:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:110:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_E36A4BB6' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_E36A4BB6' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Deposit Bonus 0720-1', 'BONUS_E36A4BB6', 'deposit', 'active', NULL, NULL, NULL, NULL, '2024-07-20 00:00:00', '2024-07-20 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:37.648132', '2025-08-11 22:00:37.648132') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mDepositBonus Create (1.2ms)[0m  [1m[32mINSERT INTO "deposit_bonuses" ("bonus_id", "deposit_amount_required", "bonus_percentage", "max_bonus_amount", "first_deposit_only", "recurring_eligible", "created_at", "updated_at") VALUES (76, 50.0, 100.0, 500.0, 0, 1, '2025-08-11 22:00:37.649866', '2025-08-11 22:00:37.649866') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_5D47C63A' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_5D47C63A' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Deposit Bonus 0720-2', 'BONUS_5D47C63A', 'deposit', 'active', NULL, NULL, NULL, NULL, '2024-07-20 00:01:00', '2024-07-20 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:37.655727', '2025-08-11 22:00:37.655727') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mDepositBonus Create (0.6ms)[0m  [1m[32mINSERT INTO "deposit_bonuses" ("bonus_id", "deposit_amount_required", "bonus_percentage", "max_bonus_amount", "first_deposit_only", "recurring_eligible", "created_at", "updated_at") VALUES (77, 50.0, 100.0, 500.0, 0, 1, '2025-08-11 22:00:37.657689', '2025-08-11 22:00:37.657689') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_8A2E56C5' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_8A2E56C5' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Manual Bonus 0720-3', 'BONUS_8A2E56C5', 'manual', 'active', NULL, NULL, NULL, NULL, '2024-07-20 00:02:00', '2024-07-20 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:37.661964', '2025-08-11 22:00:37.661964') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mManualBonus Create (0.5ms)[0m  [1m[32mINSERT INTO "manual_bonuses" ("bonus_id", "admin_notes", "approval_required", "auto_apply", "conditions", "created_at", "updated_at") VALUES (78, 'Test manual bonus for heatmap testing', 0, 1, 'Test conditions for heatmap', '2025-08-11 22:00:37.663577', '2025-08-11 22:00:37.663577') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_2448F223' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_2448F223' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Manual Bonus 0720-4', 'BONUS_2448F223', 'manual', 'active', NULL, NULL, NULL, NULL, '2024-07-20 00:03:00', '2024-07-20 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:37.667906', '2025-08-11 22:00:37.667906') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mManualBonus Create (1.0ms)[0m  [1m[32mINSERT INTO "manual_bonuses" ("bonus_id", "admin_notes", "approval_required", "auto_apply", "conditions", "created_at", "updated_at") VALUES (79, 'Test manual bonus for heatmap testing', 0, 1, 'Test conditions for heatmap', '2025-08-11 22:00:37.669699', '2025-08-11 22:00:37.669699') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_D501CEAE' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_D501CEAE' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Input coupon Bonus 0720-5', 'BONUS_D501CEAE', 'input_coupon', 'active', NULL, NULL, NULL, NULL, '2024-07-20 00:04:00', '2024-07-20 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:37.673916', '2025-08-11 22:00:37.673916') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mInputCouponBonus Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."coupon_code" = 'TEST07205' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mInputCouponBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "input_coupon_bonuses" ("bonus_id", "coupon_code", "usage_limit", "usage_count", "expires_at", "single_use", "created_at", "updated_at") VALUES (80, 'TEST07205', 100, 0, '2025-08-18 23:59:59.999999', 0, '2025-08-11 22:00:37.685424', '2025-08-11 22:00:37.685424') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_5BA242B9' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_5BA242B9' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Collection Bonus 0720-6', 'BONUS_5BA242B9', 'collection', 'active', NULL, NULL, NULL, NULL, '2024-07-20 00:05:00', '2024-07-20 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:37.688832', '2025-08-11 22:00:37.688832') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:101:in 'block (4 levels) in <main>'
  [1m[36mCollectBonus Create (0.9ms)[0m  [1m[32mINSERT INTO "collect_bonuses" ("bonus_id", "collection_type", "collection_amount", "collection_frequency", "collection_limit", "collected_count", "created_at", "updated_at") VALUES (81, 'daily', 25.0, 'daily', 1, 0, '2025-08-11 22:00:37.690406', '2025-08-11 22:00:37.690406') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:101:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:101:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_F09EC580' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_F09EC580' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Scheduler Bonus 0720-7', 'BONUS_F09EC580', 'scheduler', 'active', NULL, NULL, NULL, NULL, '2024-07-20 00:06:00', '2024-07-20 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:37.695090', '2025-08-11 22:00:37.695090') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:119:in 'block (4 levels) in <main>'
  [1m[36mSchedulerBonus Create (0.6ms)[0m  [1m[32mINSERT INTO "scheduler_bonuses" ("bonus_id", "schedule_type", "cron_expression", "next_run_at", "last_run_at", "execution_count", "max_executions", "created_at", "updated_at") VALUES (82, 'recurring', '0 12 * * *', '2024-07-21 00:00:00', '2024-07-20 00:00:00', 1, 30, '2025-08-11 22:00:37.696844', '2025-08-11 22:00:37.696844') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:119:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:119:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_FF9C1683' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_FF9C1683' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Groups update Bonus 0720-8', 'BONUS_FF9C1683', 'groups_update', 'active', NULL, NULL, NULL, NULL, '2024-07-20 00:07:00', '2024-07-20 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:37.702601', '2025-08-11 22:00:37.702601') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:110:in 'block (4 levels) in <main>'
  [1m[36mGroupsUpdateBonus Create (0.6ms)[0m  [1m[32mINSERT INTO "groups_update_bonuses" ("bonus_id", "target_groups", "update_type", "update_parameters", "batch_size", "processing_status", "created_at", "updated_at") VALUES (83, '["test_group_1", "test_group_2"]', 'bulk_apply', '{"amount": 100}', 50, 'completed', '2025-08-11 22:00:37.704771', '2025-08-11 22:00:37.704771') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:110:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:110:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_3D5DB624' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_3D5DB624' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.3ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Deposit Bonus 0716-1', 'BONUS_3D5DB624', 'deposit', 'active', NULL, NULL, NULL, NULL, '2024-07-16 00:00:00', '2024-07-16 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:37.710001', '2025-08-11 22:00:37.710001') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mDepositBonus Create (0.7ms)[0m  [1m[32mINSERT INTO "deposit_bonuses" ("bonus_id", "deposit_amount_required", "bonus_percentage", "max_bonus_amount", "first_deposit_only", "recurring_eligible", "created_at", "updated_at") VALUES (84, 50.0, 100.0, 500.0, 0, 1, '2025-08-11 22:00:37.713060', '2025-08-11 22:00:37.713060') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_71A64B4D' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_71A64B4D' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.2ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Deposit Bonus 0716-2', 'BONUS_71A64B4D', 'deposit', 'active', NULL, NULL, NULL, NULL, '2024-07-16 00:01:00', '2024-07-16 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:37.718037', '2025-08-11 22:00:37.718037') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mDepositBonus Create (0.6ms)[0m  [1m[32mINSERT INTO "deposit_bonuses" ("bonus_id", "deposit_amount_required", "bonus_percentage", "max_bonus_amount", "first_deposit_only", "recurring_eligible", "created_at", "updated_at") VALUES (85, 50.0, 100.0, 500.0, 0, 1, '2025-08-11 22:00:37.722184', '2025-08-11 22:00:37.722184') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_8EFCBE81' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_8EFCBE81' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Deposit Bonus 0716-3', 'BONUS_8EFCBE81', 'deposit', 'active', NULL, NULL, NULL, NULL, '2024-07-16 00:02:00', '2024-07-16 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:37.726455', '2025-08-11 22:00:37.726455') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mDepositBonus Create (0.6ms)[0m  [1m[32mINSERT INTO "deposit_bonuses" ("bonus_id", "deposit_amount_required", "bonus_percentage", "max_bonus_amount", "first_deposit_only", "recurring_eligible", "created_at", "updated_at") VALUES (86, 50.0, 100.0, 500.0, 0, 1, '2025-08-11 22:00:37.728986', '2025-08-11 22:00:37.728986') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_2C66CA7B' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_2C66CA7B' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Manual Bonus 0716-4', 'BONUS_2C66CA7B', 'manual', 'active', NULL, NULL, NULL, NULL, '2024-07-16 00:03:00', '2024-07-16 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:37.735527', '2025-08-11 22:00:37.735527') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mManualBonus Create (1.2ms)[0m  [1m[32mINSERT INTO "manual_bonuses" ("bonus_id", "admin_notes", "approval_required", "auto_apply", "conditions", "created_at", "updated_at") VALUES (87, 'Test manual bonus for heatmap testing', 0, 1, 'Test conditions for heatmap', '2025-08-11 22:00:37.737173', '2025-08-11 22:00:37.737173') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_2FEDD848' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_2FEDD848' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.4ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Manual Bonus 0716-5', 'BONUS_2FEDD848', 'manual', 'active', NULL, NULL, NULL, NULL, '2024-07-16 00:04:00', '2024-07-16 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:37.741917', '2025-08-11 22:00:37.741917') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mManualBonus Create (0.6ms)[0m  [1m[32mINSERT INTO "manual_bonuses" ("bonus_id", "admin_notes", "approval_required", "auto_apply", "conditions", "created_at", "updated_at") VALUES (88, 'Test manual bonus for heatmap testing', 0, 1, 'Test conditions for heatmap', '2025-08-11 22:00:37.743982', '2025-08-11 22:00:37.743982') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_E4345A84' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_E4345A84' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Input coupon Bonus 0716-6', 'BONUS_E4345A84', 'input_coupon', 'active', NULL, NULL, NULL, NULL, '2024-07-16 00:05:00', '2024-07-16 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:37.747814', '2025-08-11 22:00:37.747814') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mInputCouponBonus Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."coupon_code" = 'TEST07166' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mInputCouponBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "input_coupon_bonuses" ("bonus_id", "coupon_code", "usage_limit", "usage_count", "expires_at", "single_use", "created_at", "updated_at") VALUES (89, 'TEST07166', 100, 0, '2025-08-18 23:59:59.999999', 0, '2025-08-11 22:00:37.752103', '2025-08-11 22:00:37.752103') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_78AB9BAC' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_78AB9BAC' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Collection Bonus 0716-7', 'BONUS_78AB9BAC', 'collection', 'active', NULL, NULL, NULL, NULL, '2024-07-16 00:06:00', '2024-07-16 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:37.755197', '2025-08-11 22:00:37.755197') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:101:in 'block (4 levels) in <main>'
  [1m[36mCollectBonus Create (0.8ms)[0m  [1m[32mINSERT INTO "collect_bonuses" ("bonus_id", "collection_type", "collection_amount", "collection_frequency", "collection_limit", "collected_count", "created_at", "updated_at") VALUES (90, 'daily', 25.0, 'daily', 1, 0, '2025-08-11 22:00:37.757019', '2025-08-11 22:00:37.757019') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:101:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:101:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (1.5ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_ACF0F751' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_ACF0F751' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Scheduler Bonus 0716-8', 'BONUS_ACF0F751', 'scheduler', 'active', NULL, NULL, NULL, NULL, '2024-07-16 00:07:00', '2024-07-16 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:37.762392', '2025-08-11 22:00:37.762392') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:119:in 'block (4 levels) in <main>'
  [1m[36mSchedulerBonus Create (0.5ms)[0m  [1m[32mINSERT INTO "scheduler_bonuses" ("bonus_id", "schedule_type", "cron_expression", "next_run_at", "last_run_at", "execution_count", "max_executions", "created_at", "updated_at") VALUES (91, 'recurring', '0 12 * * *', '2024-07-17 00:00:00', '2024-07-16 00:00:00', 1, 30, '2025-08-11 22:00:37.764285', '2025-08-11 22:00:37.764285') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:119:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:119:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_7AA78032' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_7AA78032' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Groups update Bonus 0716-9', 'BONUS_7AA78032', 'groups_update', 'active', NULL, NULL, NULL, NULL, '2024-07-16 00:08:00', '2024-07-16 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:37.768086', '2025-08-11 22:00:37.768086') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:110:in 'block (4 levels) in <main>'
  [1m[36mGroupsUpdateBonus Create (0.9ms)[0m  [1m[32mINSERT INTO "groups_update_bonuses" ("bonus_id", "target_groups", "update_type", "update_parameters", "batch_size", "processing_status", "created_at", "updated_at") VALUES (92, '["test_group_1", "test_group_2"]', 'bulk_apply', '{"amount": 100}', 50, 'completed', '2025-08-11 22:00:37.771172', '2025-08-11 22:00:37.771172') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:110:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:110:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_79C21D0B' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_79C21D0B' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Deposit Bonus 0728-1', 'BONUS_79C21D0B', 'deposit', 'active', NULL, NULL, NULL, NULL, '2024-07-28 00:00:00', '2024-07-28 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:37.775118', '2025-08-11 22:00:37.775118') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mDepositBonus Create (0.6ms)[0m  [1m[32mINSERT INTO "deposit_bonuses" ("bonus_id", "deposit_amount_required", "bonus_percentage", "max_bonus_amount", "first_deposit_only", "recurring_eligible", "created_at", "updated_at") VALUES (93, 50.0, 100.0, 500.0, 0, 1, '2025-08-11 22:00:37.776777', '2025-08-11 22:00:37.776777') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_B10EB4ED' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_B10EB4ED' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Deposit Bonus 0728-2', 'BONUS_B10EB4ED', 'deposit', 'active', NULL, NULL, NULL, NULL, '2024-07-28 00:01:00', '2024-07-28 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:37.782273', '2025-08-11 22:00:37.782273') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mDepositBonus Create (0.8ms)[0m  [1m[32mINSERT INTO "deposit_bonuses" ("bonus_id", "deposit_amount_required", "bonus_percentage", "max_bonus_amount", "first_deposit_only", "recurring_eligible", "created_at", "updated_at") VALUES (94, 50.0, 100.0, 500.0, 0, 1, '2025-08-11 22:00:37.783943', '2025-08-11 22:00:37.783943') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_9BE436DA' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_9BE436DA' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Deposit Bonus 0728-3', 'BONUS_9BE436DA', 'deposit', 'active', NULL, NULL, NULL, NULL, '2024-07-28 00:02:00', '2024-07-28 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:37.791187', '2025-08-11 22:00:37.791187') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mDepositBonus Create (0.6ms)[0m  [1m[32mINSERT INTO "deposit_bonuses" ("bonus_id", "deposit_amount_required", "bonus_percentage", "max_bonus_amount", "first_deposit_only", "recurring_eligible", "created_at", "updated_at") VALUES (95, 50.0, 100.0, 500.0, 0, 1, '2025-08-11 22:00:37.793045', '2025-08-11 22:00:37.793045') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_DD1636F8' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_DD1636F8' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Manual Bonus 0728-4', 'BONUS_DD1636F8', 'manual', 'active', NULL, NULL, NULL, NULL, '2024-07-28 00:03:00', '2024-07-28 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:37.796758', '2025-08-11 22:00:37.796758') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mManualBonus Create (0.5ms)[0m  [1m[32mINSERT INTO "manual_bonuses" ("bonus_id", "admin_notes", "approval_required", "auto_apply", "conditions", "created_at", "updated_at") VALUES (96, 'Test manual bonus for heatmap testing', 0, 1, 'Test conditions for heatmap', '2025-08-11 22:00:37.798574', '2025-08-11 22:00:37.798574') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_C04B454B' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_C04B454B' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Manual Bonus 0728-5', 'BONUS_C04B454B', 'manual', 'active', NULL, NULL, NULL, NULL, '2024-07-28 00:04:00', '2024-07-28 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:37.801955', '2025-08-11 22:00:37.801955') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mManualBonus Create (0.5ms)[0m  [1m[32mINSERT INTO "manual_bonuses" ("bonus_id", "admin_notes", "approval_required", "auto_apply", "conditions", "created_at", "updated_at") VALUES (97, 'Test manual bonus for heatmap testing', 0, 1, 'Test conditions for heatmap', '2025-08-11 22:00:37.803324', '2025-08-11 22:00:37.803324') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_3589BEDC' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_3589BEDC' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Input coupon Bonus 0728-6', 'BONUS_3589BEDC', 'input_coupon', 'active', NULL, NULL, NULL, NULL, '2024-07-28 00:05:00', '2024-07-28 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:37.806588', '2025-08-11 22:00:37.806588') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mInputCouponBonus Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."coupon_code" = 'TEST07286' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mInputCouponBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "input_coupon_bonuses" ("bonus_id", "coupon_code", "usage_limit", "usage_count", "expires_at", "single_use", "created_at", "updated_at") VALUES (98, 'TEST07286', 100, 0, '2025-08-18 23:59:59.999999', 0, '2025-08-11 22:00:37.809314', '2025-08-11 22:00:37.809314') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_B9C11D6C' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_B9C11D6C' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Input coupon Bonus 0728-7', 'BONUS_B9C11D6C', 'input_coupon', 'active', NULL, NULL, NULL, NULL, '2024-07-28 00:06:00', '2024-07-28 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:37.812086', '2025-08-11 22:00:37.812086') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mInputCouponBonus Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."coupon_code" = 'TEST07287' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mInputCouponBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "input_coupon_bonuses" ("bonus_id", "coupon_code", "usage_limit", "usage_count", "expires_at", "single_use", "created_at", "updated_at") VALUES (99, 'TEST07287', 100, 0, '2025-08-18 23:59:59.999999', 0, '2025-08-11 22:00:37.814819', '2025-08-11 22:00:37.814819') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_37DACE82' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_37DACE82' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Collection Bonus 0728-8', 'BONUS_37DACE82', 'collection', 'active', NULL, NULL, NULL, NULL, '2024-07-28 00:07:00', '2024-07-28 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:37.817634', '2025-08-11 22:00:37.817634') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:101:in 'block (4 levels) in <main>'
  [1m[36mCollectBonus Create (0.5ms)[0m  [1m[32mINSERT INTO "collect_bonuses" ("bonus_id", "collection_type", "collection_amount", "collection_frequency", "collection_limit", "collected_count", "created_at", "updated_at") VALUES (100, 'daily', 25.0, 'daily', 1, 0, '2025-08-11 22:00:37.819063', '2025-08-11 22:00:37.819063') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:101:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:101:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_651A6B8C' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_651A6B8C' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Scheduler Bonus 0728-9', 'BONUS_651A6B8C', 'scheduler', 'active', NULL, NULL, NULL, NULL, '2024-07-28 00:08:00', '2024-07-28 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:37.822982', '2025-08-11 22:00:37.822982') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:119:in 'block (4 levels) in <main>'
  [1m[36mSchedulerBonus Create (0.5ms)[0m  [1m[32mINSERT INTO "scheduler_bonuses" ("bonus_id", "schedule_type", "cron_expression", "next_run_at", "last_run_at", "execution_count", "max_executions", "created_at", "updated_at") VALUES (101, 'recurring', '0 12 * * *', '2024-07-29 00:00:00', '2024-07-28 00:00:00', 1, 30, '2025-08-11 22:00:37.824585', '2025-08-11 22:00:37.824585') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:119:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:119:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_56BAA411' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_56BAA411' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Groups update Bonus 0728-10', 'BONUS_56BAA411', 'groups_update', 'active', NULL, NULL, NULL, NULL, '2024-07-28 00:09:00', '2024-07-28 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:37.827802', '2025-08-11 22:00:37.827802') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:110:in 'block (4 levels) in <main>'
  [1m[36mGroupsUpdateBonus Create (4.5ms)[0m  [1m[32mINSERT INTO "groups_update_bonuses" ("bonus_id", "target_groups", "update_type", "update_parameters", "batch_size", "processing_status", "created_at", "updated_at") VALUES (102, '["test_group_1", "test_group_2"]', 'bulk_apply', '{"amount": 100}', 50, 'completed', '2025-08-11 22:00:37.829280', '2025-08-11 22:00:37.829280') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:110:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:110:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_EDAC49C2' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_EDAC49C2' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Deposit Bonus 0731-1', 'BONUS_EDAC49C2', 'deposit', 'active', NULL, NULL, NULL, NULL, '2024-07-31 00:00:00', '2024-07-31 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:37.837735', '2025-08-11 22:00:37.837735') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mDepositBonus Create (0.7ms)[0m  [1m[32mINSERT INTO "deposit_bonuses" ("bonus_id", "deposit_amount_required", "bonus_percentage", "max_bonus_amount", "first_deposit_only", "recurring_eligible", "created_at", "updated_at") VALUES (103, 50.0, 100.0, 500.0, 0, 1, '2025-08-11 22:00:37.839637', '2025-08-11 22:00:37.839637') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (1.5ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_9F68F0CA' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_9F68F0CA' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Deposit Bonus 0731-2', 'BONUS_9F68F0CA', 'deposit', 'active', NULL, NULL, NULL, NULL, '2024-07-31 00:01:00', '2024-07-31 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:37.845207', '2025-08-11 22:00:37.845207') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mDepositBonus Create (0.9ms)[0m  [1m[32mINSERT INTO "deposit_bonuses" ("bonus_id", "deposit_amount_required", "bonus_percentage", "max_bonus_amount", "first_deposit_only", "recurring_eligible", "created_at", "updated_at") VALUES (104, 50.0, 100.0, 500.0, 0, 1, '2025-08-11 22:00:37.846782', '2025-08-11 22:00:37.846782') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_439D5E8C' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_439D5E8C' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.3ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Deposit Bonus 0731-3', 'BONUS_439D5E8C', 'deposit', 'active', NULL, NULL, NULL, NULL, '2024-07-31 00:02:00', '2024-07-31 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:37.851298', '2025-08-11 22:00:37.851298') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mDepositBonus Create (0.5ms)[0m  [1m[32mINSERT INTO "deposit_bonuses" ("bonus_id", "deposit_amount_required", "bonus_percentage", "max_bonus_amount", "first_deposit_only", "recurring_eligible", "created_at", "updated_at") VALUES (105, 50.0, 100.0, 500.0, 0, 1, '2025-08-11 22:00:37.854612', '2025-08-11 22:00:37.854612') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_927234E0' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_927234E0' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Manual Bonus 0731-4', 'BONUS_927234E0', 'manual', 'active', NULL, NULL, NULL, NULL, '2024-07-31 00:03:00', '2024-07-31 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:37.858691', '2025-08-11 22:00:37.858691') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mManualBonus Create (1.6ms)[0m  [1m[32mINSERT INTO "manual_bonuses" ("bonus_id", "admin_notes", "approval_required", "auto_apply", "conditions", "created_at", "updated_at") VALUES (106, 'Test manual bonus for heatmap testing', 0, 1, 'Test conditions for heatmap', '2025-08-11 22:00:37.860088', '2025-08-11 22:00:37.860088') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_7A95C7CA' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_7A95C7CA' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Manual Bonus 0731-5', 'BONUS_7A95C7CA', 'manual', 'active', NULL, NULL, NULL, NULL, '2024-07-31 00:04:00', '2024-07-31 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:37.865072', '2025-08-11 22:00:37.865072') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mManualBonus Create (0.5ms)[0m  [1m[32mINSERT INTO "manual_bonuses" ("bonus_id", "admin_notes", "approval_required", "auto_apply", "conditions", "created_at", "updated_at") VALUES (107, 'Test manual bonus for heatmap testing', 0, 1, 'Test conditions for heatmap', '2025-08-11 22:00:37.866677', '2025-08-11 22:00:37.866677') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_FB1659EE' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_FB1659EE' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Manual Bonus 0731-6', 'BONUS_FB1659EE', 'manual', 'active', NULL, NULL, NULL, NULL, '2024-07-31 00:05:00', '2024-07-31 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:37.872036', '2025-08-11 22:00:37.872036') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mManualBonus Create (0.7ms)[0m  [1m[32mINSERT INTO "manual_bonuses" ("bonus_id", "admin_notes", "approval_required", "auto_apply", "conditions", "created_at", "updated_at") VALUES (108, 'Test manual bonus for heatmap testing', 0, 1, 'Test conditions for heatmap', '2025-08-11 22:00:37.873456', '2025-08-11 22:00:37.873456') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_6A982A46' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_6A982A46' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Input coupon Bonus 0731-7', 'BONUS_6A982A46', 'input_coupon', 'active', NULL, NULL, NULL, NULL, '2024-07-31 00:06:00', '2024-07-31 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:37.878419', '2025-08-11 22:00:37.878419') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mInputCouponBonus Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."coupon_code" = 'TEST07317' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mInputCouponBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "input_coupon_bonuses" ("bonus_id", "coupon_code", "usage_limit", "usage_count", "expires_at", "single_use", "created_at", "updated_at") VALUES (109, 'TEST07317', 100, 0, '2025-08-18 23:59:59.999999', 0, '2025-08-11 22:00:37.882103', '2025-08-11 22:00:37.882103') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_C30DAF03' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_C30DAF03' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Input coupon Bonus 0731-8', 'BONUS_C30DAF03', 'input_coupon', 'active', NULL, NULL, NULL, NULL, '2024-07-31 00:07:00', '2024-07-31 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:37.884996', '2025-08-11 22:00:37.884996') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mInputCouponBonus Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."coupon_code" = 'TEST07318' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mInputCouponBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "input_coupon_bonuses" ("bonus_id", "coupon_code", "usage_limit", "usage_count", "expires_at", "single_use", "created_at", "updated_at") VALUES (110, 'TEST07318', 100, 0, '2025-08-18 23:59:59.999999', 0, '2025-08-11 22:00:37.889718', '2025-08-11 22:00:37.889718') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_38DAAA06' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_38DAAA06' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Collection Bonus 0731-9', 'BONUS_38DAAA06', 'collection', 'active', NULL, NULL, NULL, NULL, '2024-07-31 00:08:00', '2024-07-31 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:37.892825', '2025-08-11 22:00:37.892825') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:101:in 'block (4 levels) in <main>'
  [1m[36mCollectBonus Create (0.6ms)[0m  [1m[32mINSERT INTO "collect_bonuses" ("bonus_id", "collection_type", "collection_amount", "collection_frequency", "collection_limit", "collected_count", "created_at", "updated_at") VALUES (111, 'daily', 25.0, 'daily', 1, 0, '2025-08-11 22:00:37.895889', '2025-08-11 22:00:37.895889') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:101:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:101:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_A526CDFC' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_A526CDFC' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Collection Bonus 0731-10', 'BONUS_A526CDFC', 'collection', 'active', NULL, NULL, NULL, NULL, '2024-07-31 00:09:00', '2024-07-31 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:37.899942', '2025-08-11 22:00:37.899942') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:101:in 'block (4 levels) in <main>'
  [1m[36mCollectBonus Create (0.8ms)[0m  [1m[32mINSERT INTO "collect_bonuses" ("bonus_id", "collection_type", "collection_amount", "collection_frequency", "collection_limit", "collected_count", "created_at", "updated_at") VALUES (112, 'daily', 25.0, 'daily', 1, 0, '2025-08-11 22:00:37.901662', '2025-08-11 22:00:37.901662') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:101:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:101:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_0B681498' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_0B681498' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.7ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Scheduler Bonus 0731-11', 'BONUS_0B681498', 'scheduler', 'active', NULL, NULL, NULL, NULL, '2024-07-31 00:10:00', '2024-07-31 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:37.907307', '2025-08-11 22:00:37.907307') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:119:in 'block (4 levels) in <main>'
  [1m[36mSchedulerBonus Create (0.6ms)[0m  [1m[32mINSERT INTO "scheduler_bonuses" ("bonus_id", "schedule_type", "cron_expression", "next_run_at", "last_run_at", "execution_count", "max_executions", "created_at", "updated_at") VALUES (113, 'recurring', '0 12 * * *', '2024-08-01 00:00:00', '2024-07-31 00:00:00', 1, 30, '2025-08-11 22:00:37.911137', '2025-08-11 22:00:37.911137') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:119:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:119:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_ADE8478B' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_ADE8478B' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Groups update Bonus 0731-12', 'BONUS_ADE8478B', 'groups_update', 'active', NULL, NULL, NULL, NULL, '2024-07-31 00:11:00', '2024-07-31 23:59:59.999999', 'test_users', 'heatmap_test, july_2024', 'US', 'USD', NULL, NULL, '2025-08-11 22:00:37.915299', '2025-08-11 22:00:37.915299') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:110:in 'block (4 levels) in <main>'
  [1m[36mGroupsUpdateBonus Create (1.0ms)[0m  [1m[32mINSERT INTO "groups_update_bonuses" ("bonus_id", "target_groups", "update_type", "update_parameters", "batch_size", "processing_status", "created_at", "updated_at") VALUES (114, '["test_group_1", "test_group_2"]', 'bulk_apply', '{"amount": 100}', 50, 'completed', '2025-08-11 22:00:37.916971', '2025-08-11 22:00:37.916971') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:110:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:110:in 'block (4 levels) in <main>'
Started GET "/heatmap" for ::1 at 2025-08-12 01:00:53 +0300
Processing by HeatmapController#index as HTML
  [1m[36mBonus Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", DATE(availability_start_date) AS "date_availability_start_date" FROM "bonuses" WHERE "bonuses"."availability_start_date" BETWEEN '2025-08-01 00:00:00' AND '2025-08-31 23:59:59.999999' GROUP BY DATE(availability_start_date) /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:39:in 'HeatmapController#generate_heatmap_data'
  [1m[36mBonus Pluck (0.1ms)[0m  [1m[34mSELECT DISTINCT "bonuses"."bonus_type" FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:16:in 'HeatmapController#index'
  Rendering layout layouts/application.html.erb
  Rendering heatmap/index.html.erb within layouts/application
  Rendered heatmap/index.html.erb within layouts/application (Duration: 4.0ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 7.5ms | GC: 0.0ms)
Completed 200 OK in 39ms (Views: 8.4ms | ActiveRecord: 0.4ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/heatmap?bonus_type=all&month=7&year=2025&commit=Apply+Filter" for ::1 at 2025-08-12 01:00:58 +0300
Processing by HeatmapController#index as HTML
  Parameters: {"bonus_type" => "all", "month" => "7", "year" => "2025", "commit" => "Apply Filter"}
  [1m[36mBonus Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", DATE(availability_start_date) AS "date_availability_start_date" FROM "bonuses" WHERE "bonuses"."availability_start_date" BETWEEN '2025-07-01 00:00:00' AND '2025-07-31 23:59:59.999999' GROUP BY DATE(availability_start_date) /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:39:in 'HeatmapController#generate_heatmap_data'
  [1m[36mBonus Pluck (0.3ms)[0m  [1m[34mSELECT DISTINCT "bonuses"."bonus_type" FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:16:in 'HeatmapController#index'
  Rendering layout layouts/application.html.erb
  Rendering heatmap/index.html.erb within layouts/application
  Rendered heatmap/index.html.erb within layouts/application (Duration: 5.0ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 8.1ms | GC: 0.0ms)
Completed 200 OK in 43ms (Views: 11.0ms | ActiveRecord: 0.4ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/" for ::1 at 2025-08-12 01:01:01 +0300
Processing by BonusesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:59
  [1m[36mBonus Load (0.4ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."created_at" DESC LIMIT 20 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mDepositBonus Load (0.2ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (114, 113, 112, 111, 110, 109, 108, 107, 106, 105, 104, 103, 102, 101, 100, 99, 98, 97, 96, 95) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mInputCouponBonus Load (0.2ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (114, 113, 112, 111, 110, 109, 108, 107, 106, 105, 104, 103, 102, 101, 100, 99, 98, 97, 96, 95) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mManualBonus Load (0.7ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (114, 113, 112, 111, 110, 109, 108, 107, 106, 105, 104, 103, 102, 101, 100, 99, 98, 97, 96, 95) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (114, 113, 112, 111, 110, 109, 108, 107, 106, 105, 104, 103, 102, 101, 100, 99, 98, 97, 96, 95) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mGroupsUpdateBonus Load (0.4ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (114, 113, 112, 111, 110, 109, 108, 107, 106, 105, 104, 103, 102, 101, 100, 99, 98, 97, 96, 95) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mSchedulerBonus Load (2.3ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (114, 113, 112, 111, 110, 109, 108, 107, 106, 105, 104, 103, 102, 101, 100, 99, 98, 97, 96, 95) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  Rendered bonuses/index.html.erb within layouts/application (Duration: 64.9ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 67.9ms | GC: 0.0ms)
Completed 200 OK in 82ms (Views: 64.1ms | ActiveRecord: 4.2ms (8 queries, 0 cached) | GC: 0.0ms)


Started GET "/bonuses" for ::1 at 2025-08-12 01:01:01 +0300
Processing by BonusesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:59
  [1m[36mBonus Load (1.4ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."created_at" DESC LIMIT 20 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mDepositBonus Load (0.2ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (114, 113, 112, 111, 110, 109, 108, 107, 106, 105, 104, 103, 102, 101, 100, 99, 98, 97, 96, 95) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mInputCouponBonus Load (0.2ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (114, 113, 112, 111, 110, 109, 108, 107, 106, 105, 104, 103, 102, 101, 100, 99, 98, 97, 96, 95) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mManualBonus Load (0.8ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (114, 113, 112, 111, 110, 109, 108, 107, 106, 105, 104, 103, 102, 101, 100, 99, 98, 97, 96, 95) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mCollectBonus Load (0.2ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (114, 113, 112, 111, 110, 109, 108, 107, 106, 105, 104, 103, 102, 101, 100, 99, 98, 97, 96, 95) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mGroupsUpdateBonus Load (0.4ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (114, 113, 112, 111, 110, 109, 108, 107, 106, 105, 104, 103, 102, 101, 100, 99, 98, 97, 96, 95) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mSchedulerBonus Load (0.2ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (114, 113, 112, 111, 110, 109, 108, 107, 106, 105, 104, 103, 102, 101, 100, 99, 98, 97, 96, 95) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  Rendered bonuses/index.html.erb within layouts/application (Duration: 65.0ms | GC: 12.0ms)
  Rendered layout layouts/application.html.erb (Duration: 68.1ms | GC: 12.0ms)
Completed 200 OK in 88ms (Views: 65.3ms | ActiveRecord: 3.3ms (8 queries, 0 cached) | GC: 12.0ms)


Started GET "/heatmap?year=2024&month=7" for ::1 at 2025-08-12 01:01:03 +0300
Processing by HeatmapController#index as HTML
  Parameters: {"year" => "2024", "month" => "7"}
  [1m[36mBonus Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", DATE(availability_start_date) AS "date_availability_start_date" FROM "bonuses" WHERE "bonuses"."availability_start_date" BETWEEN '2024-07-01 00:00:00' AND '2024-07-31 23:59:59.999999' GROUP BY DATE(availability_start_date) /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:39:in 'HeatmapController#generate_heatmap_data'
  [1m[36mBonus Pluck (0.1ms)[0m  [1m[34mSELECT DISTINCT "bonuses"."bonus_type" FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:16:in 'HeatmapController#index'
  Rendering layout layouts/application.html.erb
  Rendering heatmap/index.html.erb within layouts/application
  Rendered heatmap/index.html.erb within layouts/application (Duration: 8.8ms | GC: 0.7ms)
  Rendered layout layouts/application.html.erb (Duration: 10.4ms | GC: 0.7ms)
Completed 200 OK in 36ms (Views: 10.8ms | ActiveRecord: 0.4ms (2 queries, 0 cached) | GC: 1.8ms)


Started GET "/bonuses?page=2" for ::1 at 2025-08-12 01:01:07 +0300
Processing by BonusesController#index as HTML
  Parameters: {"page" => "2"}
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 20 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:59
  [1m[36mBonus Load (0.3ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."created_at" DESC LIMIT 20 OFFSET 20 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (94, 93, 92, 91, 90, 89, 88, 87, 86, 85, 84, 83, 82, 81, 80, 79, 78, 77, 76, 75) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mInputCouponBonus Load (0.4ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (94, 93, 92, 91, 90, 89, 88, 87, 86, 85, 84, 83, 82, 81, 80, 79, 78, 77, 76, 75) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mManualBonus Load (0.3ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (94, 93, 92, 91, 90, 89, 88, 87, 86, 85, 84, 83, 82, 81, 80, 79, 78, 77, 76, 75) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (94, 93, 92, 91, 90, 89, 88, 87, 86, 85, 84, 83, 82, 81, 80, 79, 78, 77, 76, 75) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (94, 93, 92, 91, 90, 89, 88, 87, 86, 85, 84, 83, 82, 81, 80, 79, 78, 77, 76, 75) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (94, 93, 92, 91, 90, 89, 88, 87, 86, 85, 84, 83, 82, 81, 80, 79, 78, 77, 76, 75) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
[31mUnpermitted parameter: :page. Context: { controller: BonusesController, action: index, request: #<ActionDispatch::Request:0x000076582e657f00>, params: {"page" => "2", "controller" => "bonuses", "action" => "index"} }[0m
[31mUnpermitted parameter: :page. Context: { controller: BonusesController, action: index, request: #<ActionDispatch::Request:0x000076582e657f00>, params: {"page" => "2", "controller" => "bonuses", "action" => "index"} }[0m
  Rendered bonuses/index.html.erb within layouts/application (Duration: 43.4ms | GC: 4.8ms)
  Rendered layout layouts/application.html.erb (Duration: 47.4ms | GC: 4.8ms)
Completed 200 OK in 64ms (Views: 46.5ms | ActiveRecord: 1.4ms (8 queries, 0 cached) | GC: 4.8ms)


Started GET "/bonuses/84/edit" for ::1 at 2025-08-12 01:01:09 +0300
Processing by BonusesController#edit as HTML
  Parameters: {"id" => "84"}
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."id" = 84 LIMIT 1 /*action='edit',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:175:in 'BonusesController#set_bonus'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/edit.html.erb within layouts/application
  [1m[36mDepositBonus Load (0.2ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 84 LIMIT 1 /*action='edit',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/_type_specific_form.html.erb:10
  Rendered bonuses/_type_specific_form.html.erb (Duration: 7.0ms | GC: 0.8ms)
  Rendered bonuses/edit.html.erb within layouts/application (Duration: 19.0ms | GC: 0.8ms)
  Rendered layout layouts/application.html.erb (Duration: 21.6ms | GC: 0.8ms)
Completed 200 OK in 50ms (Views: 24.7ms | ActiveRecord: 0.3ms (2 queries, 0 cached) | GC: 2.0ms)


Started GET "/bonuses/75" for ::1 at 2025-08-12 01:01:09 +0300
Processing by BonusesController#show as HTML
  Parameters: {"id" => "75"}
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."id" = 75 LIMIT 1 /*action='show',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:175:in 'BonusesController#set_bonus'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/show.html.erb within layouts/application
  [1m[36mGroupsUpdateBonus Load (0.2ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" = 75 LIMIT 1 /*action='show',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/_type_specific_details.html.erb:173
  Rendered bonuses/_type_specific_details.html.erb (Duration: 10.4ms | GC: 0.6ms)
  Rendered bonuses/show.html.erb within layouts/application (Duration: 15.4ms | GC: 0.6ms)
  Rendered layout layouts/application.html.erb (Duration: 19.2ms | GC: 0.6ms)
Completed 200 OK in 33ms (Views: 20.8ms | ActiveRecord: 0.4ms (2 queries, 0 cached) | GC: 0.6ms)


Started GET "/heatmap" for ::1 at 2025-08-12 01:01:12 +0300
Processing by HeatmapController#index as HTML
  [1m[36mBonus Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", DATE(availability_start_date) AS "date_availability_start_date" FROM "bonuses" WHERE "bonuses"."availability_start_date" BETWEEN '2025-08-01 00:00:00' AND '2025-08-31 23:59:59.999999' GROUP BY DATE(availability_start_date) /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:39:in 'HeatmapController#generate_heatmap_data'
  [1m[36mBonus Pluck (0.1ms)[0m  [1m[34mSELECT DISTINCT "bonuses"."bonus_type" FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:16:in 'HeatmapController#index'
  Rendering layout layouts/application.html.erb
  Rendering heatmap/index.html.erb within layouts/application
  Rendered heatmap/index.html.erb within layouts/application (Duration: 7.0ms | GC: 1.3ms)
  Rendered layout layouts/application.html.erb (Duration: 9.7ms | GC: 1.3ms)
Completed 200 OK in 31ms (Views: 10.7ms | ActiveRecord: 0.3ms (2 queries, 0 cached) | GC: 2.1ms)


Started GET "/heatmap?bonus_type=all&month=7&year=2025&commit=Apply+Filter" for ::1 at 2025-08-12 01:01:24 +0300
Processing by HeatmapController#index as HTML
  Parameters: {"bonus_type" => "all", "month" => "7", "year" => "2025", "commit" => "Apply Filter"}
  [1m[36mBonus Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", DATE(availability_start_date) AS "date_availability_start_date" FROM "bonuses" WHERE "bonuses"."availability_start_date" BETWEEN '2025-07-01 00:00:00' AND '2025-07-31 23:59:59.999999' GROUP BY DATE(availability_start_date) /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:39:in 'HeatmapController#generate_heatmap_data'
  [1m[36mBonus Pluck (0.1ms)[0m  [1m[34mSELECT DISTINCT "bonuses"."bonus_type" FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:16:in 'HeatmapController#index'
  Rendering layout layouts/application.html.erb
  Rendering heatmap/index.html.erb within layouts/application
  Rendered heatmap/index.html.erb within layouts/application (Duration: 2.7ms | GC: 0.4ms)
  Rendered layout layouts/application.html.erb (Duration: 4.1ms | GC: 0.4ms)
Completed 200 OK in 19ms (Views: 4.9ms | ActiveRecord: 0.2ms (2 queries, 0 cached) | GC: 0.4ms)


Started GET "/heatmap" for ::1 at 2025-08-12 01:03:48 +0300
Processing by HeatmapController#index as HTML
  [1m[36mBonus Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", DATE(availability_start_date) AS "date_availability_start_date" FROM "bonuses" WHERE "bonuses"."availability_start_date" BETWEEN '2025-08-01 00:00:00' AND '2025-08-31 23:59:59.999999' GROUP BY DATE(availability_start_date) /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:39:in 'HeatmapController#generate_heatmap_data'
  [1m[36mBonus Pluck (0.1ms)[0m  [1m[34mSELECT DISTINCT "bonuses"."bonus_type" FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:16:in 'HeatmapController#index'
  Rendering layout layouts/application.html.erb
  Rendering heatmap/index.html.erb within layouts/application
  Rendered heatmap/index.html.erb within layouts/application (Duration: 4.5ms | GC: 0.3ms)
  Rendered layout layouts/application.html.erb (Duration: 6.2ms | GC: 0.3ms)
Completed 200 OK in 27ms (Views: 7.6ms | ActiveRecord: 0.3ms (2 queries, 0 cached) | GC: 0.3ms)


Started GET "/heatmap?bonus_type=all&month=7&year=2025&commit=Apply+Filter" for ::1 at 2025-08-12 01:03:52 +0300
Processing by HeatmapController#index as HTML
  Parameters: {"bonus_type" => "all", "month" => "7", "year" => "2025", "commit" => "Apply Filter"}
  [1m[36mBonus Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", DATE(availability_start_date) AS "date_availability_start_date" FROM "bonuses" WHERE "bonuses"."availability_start_date" BETWEEN '2025-07-01 00:00:00' AND '2025-07-31 23:59:59.999999' GROUP BY DATE(availability_start_date) /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:39:in 'HeatmapController#generate_heatmap_data'
  [1m[36mBonus Pluck (0.1ms)[0m  [1m[34mSELECT DISTINCT "bonuses"."bonus_type" FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:16:in 'HeatmapController#index'
  Rendering layout layouts/application.html.erb
  Rendering heatmap/index.html.erb within layouts/application
  Rendered heatmap/index.html.erb within layouts/application (Duration: 3.6ms | GC: 0.5ms)
  Rendered layout layouts/application.html.erb (Duration: 5.7ms | GC: 0.5ms)
Completed 200 OK in 26ms (Views: 6.2ms | ActiveRecord: 0.2ms (2 queries, 0 cached) | GC: 0.5ms)


Started GET "/heatmap?bonus_type=all&month=8&year=2025" for ::1 at 2025-08-12 01:03:54 +0300
Processing by HeatmapController#index as HTML
  Parameters: {"bonus_type" => "all", "month" => "8", "year" => "2025"}
  [1m[36mBonus Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", DATE(availability_start_date) AS "date_availability_start_date" FROM "bonuses" WHERE "bonuses"."availability_start_date" BETWEEN '2025-08-01 00:00:00' AND '2025-08-31 23:59:59.999999' GROUP BY DATE(availability_start_date) /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:39:in 'HeatmapController#generate_heatmap_data'
  [1m[36mBonus Pluck (0.1ms)[0m  [1m[34mSELECT DISTINCT "bonuses"."bonus_type" FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:16:in 'HeatmapController#index'
  Rendering layout layouts/application.html.erb
  Rendering heatmap/index.html.erb within layouts/application
  Rendered heatmap/index.html.erb within layouts/application (Duration: 3.2ms | GC: 0.3ms)
  Rendered layout layouts/application.html.erb (Duration: 5.6ms | GC: 0.3ms)
Completed 200 OK in 29ms (Views: 6.2ms | ActiveRecord: 0.3ms (2 queries, 0 cached) | GC: 1.1ms)


Started GET "/heatmap?bonus_type=all&month=9&year=2025" for ::1 at 2025-08-12 01:03:55 +0300
Processing by HeatmapController#index as HTML
  Parameters: {"bonus_type" => "all", "month" => "9", "year" => "2025"}
  [1m[36mBonus Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", DATE(availability_start_date) AS "date_availability_start_date" FROM "bonuses" WHERE "bonuses"."availability_start_date" BETWEEN '2025-09-01 00:00:00' AND '2025-09-30 23:59:59.999999' GROUP BY DATE(availability_start_date) /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:39:in 'HeatmapController#generate_heatmap_data'
  [1m[36mBonus Pluck (0.1ms)[0m  [1m[34mSELECT DISTINCT "bonuses"."bonus_type" FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:16:in 'HeatmapController#index'
  Rendering layout layouts/application.html.erb
  Rendering heatmap/index.html.erb within layouts/application
  Rendered heatmap/index.html.erb within layouts/application (Duration: 6.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 13.2ms | GC: 0.0ms)
Completed 200 OK in 30ms (Views: 13.7ms | ActiveRecord: 0.4ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/heatmap?bonus_type=all&month=10&year=2025" for ::1 at 2025-08-12 01:03:55 +0300
Processing by HeatmapController#index as HTML
  Parameters: {"bonus_type" => "all", "month" => "10", "year" => "2025"}
  [1m[36mBonus Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", DATE(availability_start_date) AS "date_availability_start_date" FROM "bonuses" WHERE "bonuses"."availability_start_date" BETWEEN '2025-10-01 00:00:00' AND '2025-10-31 23:59:59.999999' GROUP BY DATE(availability_start_date) /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:39:in 'HeatmapController#generate_heatmap_data'
  [1m[36mBonus Pluck (0.1ms)[0m  [1m[34mSELECT DISTINCT "bonuses"."bonus_type" FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:16:in 'HeatmapController#index'
  Rendering layout layouts/application.html.erb
  Rendering heatmap/index.html.erb within layouts/application
  Rendered heatmap/index.html.erb within layouts/application (Duration: 2.3ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 4.2ms | GC: 0.0ms)
Completed 200 OK in 28ms (Views: 4.8ms | ActiveRecord: 0.3ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/bonuses" for ::1 at 2025-08-12 01:04:49 +0300
Processing by BonusesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:59
  [1m[36mBonus Load (0.3ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."created_at" DESC LIMIT 20 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (114, 113, 112, 111, 110, 109, 108, 107, 106, 105, 104, 103, 102, 101, 100, 99, 98, 97, 96, 95) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mInputCouponBonus Load (0.2ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (114, 113, 112, 111, 110, 109, 108, 107, 106, 105, 104, 103, 102, 101, 100, 99, 98, 97, 96, 95) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (114, 113, 112, 111, 110, 109, 108, 107, 106, 105, 104, 103, 102, 101, 100, 99, 98, 97, 96, 95) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mCollectBonus Load (0.9ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (114, 113, 112, 111, 110, 109, 108, 107, 106, 105, 104, 103, 102, 101, 100, 99, 98, 97, 96, 95) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (114, 113, 112, 111, 110, 109, 108, 107, 106, 105, 104, 103, 102, 101, 100, 99, 98, 97, 96, 95) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (114, 113, 112, 111, 110, 109, 108, 107, 106, 105, 104, 103, 102, 101, 100, 99, 98, 97, 96, 95) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  Rendered bonuses/index.html.erb within layouts/application (Duration: 34.7ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 35.6ms | GC: 0.0ms)
Completed 200 OK in 57ms (Views: 34.0ms | ActiveRecord: 1.9ms (8 queries, 0 cached) | GC: 0.0ms)


Started GET "/heatmap" for ::1 at 2025-08-12 01:04:56 +0300
Processing by HeatmapController#index as HTML
  [1m[36mBonus Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", DATE(availability_start_date) AS "date_availability_start_date" FROM "bonuses" WHERE "bonuses"."availability_start_date" BETWEEN '2025-08-01 00:00:00' AND '2025-08-31 23:59:59.999999' GROUP BY DATE(availability_start_date) /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:39:in 'HeatmapController#generate_heatmap_data'
  [1m[36mBonus Pluck (0.1ms)[0m  [1m[34mSELECT DISTINCT "bonuses"."bonus_type" FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:16:in 'HeatmapController#index'
  Rendering layout layouts/application.html.erb
  Rendering heatmap/index.html.erb within layouts/application
  Rendered heatmap/index.html.erb within layouts/application (Duration: 3.8ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 5.0ms | GC: 0.0ms)
Completed 200 OK in 34ms (Views: 5.4ms | ActiveRecord: 1.0ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/bonuses" for ::1 at 2025-08-12 01:05:19 +0300
Processing by BonusesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:59
  [1m[36mBonus Load (0.3ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."created_at" DESC LIMIT 20 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mDepositBonus Load (0.2ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (114, 113, 112, 111, 110, 109, 108, 107, 106, 105, 104, 103, 102, 101, 100, 99, 98, 97, 96, 95) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mInputCouponBonus Load (0.2ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (114, 113, 112, 111, 110, 109, 108, 107, 106, 105, 104, 103, 102, 101, 100, 99, 98, 97, 96, 95) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mManualBonus Load (0.2ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (114, 113, 112, 111, 110, 109, 108, 107, 106, 105, 104, 103, 102, 101, 100, 99, 98, 97, 96, 95) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mCollectBonus Load (0.2ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (114, 113, 112, 111, 110, 109, 108, 107, 106, 105, 104, 103, 102, 101, 100, 99, 98, 97, 96, 95) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (114, 113, 112, 111, 110, 109, 108, 107, 106, 105, 104, 103, 102, 101, 100, 99, 98, 97, 96, 95) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (114, 113, 112, 111, 110, 109, 108, 107, 106, 105, 104, 103, 102, 101, 100, 99, 98, 97, 96, 95) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  Rendered bonuses/index.html.erb within layouts/application (Duration: 54.0ms | GC: 7.5ms)
  Rendered layout layouts/application.html.erb (Duration: 55.9ms | GC: 7.5ms)
Completed 200 OK in 68ms (Views: 53.1ms | ActiveRecord: 3.5ms (8 queries, 0 cached) | GC: 7.5ms)


Started GET "/" for ::1 at 2025-08-12 01:05:20 +0300
Processing by BonusesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:59
  [1m[36mBonus Load (0.3ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."created_at" DESC LIMIT 20 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (114, 113, 112, 111, 110, 109, 108, 107, 106, 105, 104, 103, 102, 101, 100, 99, 98, 97, 96, 95) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mInputCouponBonus Load (0.2ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (114, 113, 112, 111, 110, 109, 108, 107, 106, 105, 104, 103, 102, 101, 100, 99, 98, 97, 96, 95) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (114, 113, 112, 111, 110, 109, 108, 107, 106, 105, 104, 103, 102, 101, 100, 99, 98, 97, 96, 95) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mCollectBonus Load (0.2ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (114, 113, 112, 111, 110, 109, 108, 107, 106, 105, 104, 103, 102, 101, 100, 99, 98, 97, 96, 95) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mGroupsUpdateBonus Load (0.3ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (114, 113, 112, 111, 110, 109, 108, 107, 106, 105, 104, 103, 102, 101, 100, 99, 98, 97, 96, 95) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mSchedulerBonus Load (0.2ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (114, 113, 112, 111, 110, 109, 108, 107, 106, 105, 104, 103, 102, 101, 100, 99, 98, 97, 96, 95) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  Rendered bonuses/index.html.erb within layouts/application (Duration: 45.2ms | GC: 2.5ms)
  Rendered layout layouts/application.html.erb (Duration: 47.6ms | GC: 2.5ms)
Completed 200 OK in 62ms (Views: 47.5ms | ActiveRecord: 1.4ms (8 queries, 0 cached) | GC: 2.5ms)


Started GET "/bonuses" for ::1 at 2025-08-12 01:05:21 +0300
Processing by BonusesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:59
  [1m[36mBonus Load (0.3ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."created_at" DESC LIMIT 20 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mDepositBonus Load (0.2ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (114, 113, 112, 111, 110, 109, 108, 107, 106, 105, 104, 103, 102, 101, 100, 99, 98, 97, 96, 95) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (114, 113, 112, 111, 110, 109, 108, 107, 106, 105, 104, 103, 102, 101, 100, 99, 98, 97, 96, 95) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (114, 113, 112, 111, 110, 109, 108, 107, 106, 105, 104, 103, 102, 101, 100, 99, 98, 97, 96, 95) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (114, 113, 112, 111, 110, 109, 108, 107, 106, 105, 104, 103, 102, 101, 100, 99, 98, 97, 96, 95) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mGroupsUpdateBonus Load (0.2ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (114, 113, 112, 111, 110, 109, 108, 107, 106, 105, 104, 103, 102, 101, 100, 99, 98, 97, 96, 95) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mSchedulerBonus Load (0.4ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (114, 113, 112, 111, 110, 109, 108, 107, 106, 105, 104, 103, 102, 101, 100, 99, 98, 97, 96, 95) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  Rendered bonuses/index.html.erb within layouts/application (Duration: 38.4ms | GC: 5.1ms)
  Rendered layout layouts/application.html.erb (Duration: 40.9ms | GC: 5.1ms)
Completed 200 OK in 55ms (Views: 40.0ms | ActiveRecord: 1.5ms (8 queries, 0 cached) | GC: 5.1ms)


Started GET "/bonuses/106" for ::1 at 2025-08-12 01:05:22 +0300
Processing by BonusesController#show as HTML
  Parameters: {"id" => "106"}
  [1m[36mBonus Load (0.3ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."id" = 106 LIMIT 1 /*action='show',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:175:in 'BonusesController#set_bonus'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/show.html.erb within layouts/application
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" = 106 LIMIT 1 /*action='show',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/_type_specific_details.html.erb:89
  Rendered bonuses/_type_specific_details.html.erb (Duration: 6.3ms | GC: 0.0ms)
  Rendered bonuses/show.html.erb within layouts/application (Duration: 8.6ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 10.3ms | GC: 0.0ms)
Completed 200 OK in 35ms (Views: 14.9ms | ActiveRecord: 0.4ms (2 queries, 0 cached) | GC: 1.2ms)


Started GET "/heatmap" for ::1 at 2025-08-12 01:06:57 +0300
Processing by HeatmapController#index as HTML
  [1m[36mBonus Count (0.6ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", DATE(availability_start_date) AS "date_availability_start_date" FROM "bonuses" WHERE "bonuses"."availability_start_date" BETWEEN '2025-08-01 00:00:00' AND '2025-08-31 23:59:59.999999' GROUP BY DATE(availability_start_date) /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:39:in 'HeatmapController#generate_heatmap_data'
  [1m[36mBonus Pluck (0.2ms)[0m  [1m[34mSELECT DISTINCT "bonuses"."bonus_type" FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:16:in 'HeatmapController#index'
  Rendering layout layouts/application.html.erb
  Rendering heatmap/index.html.erb within layouts/application
  Rendered heatmap/index.html.erb within layouts/application (Duration: 9.3ms | GC: 0.3ms)
  Rendered layout layouts/application.html.erb (Duration: 15.6ms | GC: 0.3ms)
Completed 200 OK in 80ms (Views: 19.8ms | ActiveRecord: 11.2ms (2 queries, 0 cached) | GC: 1.3ms)


Started GET "/heatmap?bonus_type=all&month=7&year=2024&commit=Apply+Filter" for ::1 at 2025-08-12 01:07:01 +0300
Processing by HeatmapController#index as HTML
  Parameters: {"bonus_type" => "all", "month" => "7", "year" => "2024", "commit" => "Apply Filter"}
  [1m[36mBonus Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", DATE(availability_start_date) AS "date_availability_start_date" FROM "bonuses" WHERE "bonuses"."availability_start_date" BETWEEN '2024-07-01 00:00:00' AND '2024-07-31 23:59:59.999999' GROUP BY DATE(availability_start_date) /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:39:in 'HeatmapController#generate_heatmap_data'
  [1m[36mBonus Pluck (0.1ms)[0m  [1m[34mSELECT DISTINCT "bonuses"."bonus_type" FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:16:in 'HeatmapController#index'
  Rendering layout layouts/application.html.erb
  Rendering heatmap/index.html.erb within layouts/application
  Rendered heatmap/index.html.erb within layouts/application (Duration: 4.1ms | GC: 0.4ms)
  Rendered layout layouts/application.html.erb (Duration: 6.3ms | GC: 0.4ms)
Completed 200 OK in 25ms (Views: 7.1ms | ActiveRecord: 0.3ms (2 queries, 0 cached) | GC: 0.4ms)


  [1m[36mBonus Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" WHERE "bonuses"."availability_start_date" BETWEEN '2025-07-01 00:00:00' AND '2025-07-31 23:59:59.999999' /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:10:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_BC761402' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_BC761402' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.2ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Deposit Bonus 0701-1', 'BONUS_BC761402', 'deposit', 'active', NULL, NULL, NULL, NULL, '2025-07-01 00:00:00', '2025-07-01 23:59:59.999999', 'test_users', 'heatmap_test, july_2025', 'US', 'USD', NULL, NULL, '2025-08-11 22:10:45.176284', '2025-08-11 22:10:45.176284') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (2.6ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mDepositBonus Create (3.0ms)[0m  [1m[32mINSERT INTO "deposit_bonuses" ("bonus_id", "deposit_amount_required", "bonus_percentage", "max_bonus_amount", "first_deposit_only", "recurring_eligible", "created_at", "updated_at") VALUES (115, 50.0, 100.0, 500.0, 0, 1, '2025-08-11 22:10:45.202538', '2025-08-11 22:10:45.202538') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_13125883' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_13125883' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.3ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Deposit Bonus 0703-1', 'BONUS_13125883', 'deposit', 'active', NULL, NULL, NULL, NULL, '2025-07-03 00:00:00', '2025-07-03 23:59:59.999999', 'test_users', 'heatmap_test, july_2025', 'US', 'USD', NULL, NULL, '2025-08-11 22:10:45.214819', '2025-08-11 22:10:45.214819') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mDepositBonus Create (1.2ms)[0m  [1m[32mINSERT INTO "deposit_bonuses" ("bonus_id", "deposit_amount_required", "bonus_percentage", "max_bonus_amount", "first_deposit_only", "recurring_eligible", "created_at", "updated_at") VALUES (116, 50.0, 100.0, 500.0, 0, 1, '2025-08-11 22:10:45.220058', '2025-08-11 22:10:45.220058') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_EFFD908C' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_EFFD908C' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Manual Bonus 0703-2', 'BONUS_EFFD908C', 'manual', 'active', NULL, NULL, NULL, NULL, '2025-07-03 00:01:00', '2025-07-03 23:59:59.999999', 'test_users', 'heatmap_test, july_2025', 'US', 'USD', NULL, NULL, '2025-08-11 22:10:45.226191', '2025-08-11 22:10:45.226191') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mManualBonus Create (0.7ms)[0m  [1m[32mINSERT INTO "manual_bonuses" ("bonus_id", "admin_notes", "approval_required", "auto_apply", "conditions", "created_at", "updated_at") VALUES (117, 'Test manual bonus for heatmap testing', 0, 1, 'Test conditions for heatmap', '2025-08-11 22:10:45.236114', '2025-08-11 22:10:45.236114') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_171888DE' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_171888DE' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Input coupon Bonus 0708-1', 'BONUS_171888DE', 'input_coupon', 'active', NULL, NULL, NULL, NULL, '2025-07-08 00:00:00', '2025-07-08 23:59:59.999999', 'test_users', 'heatmap_test, july_2025', 'US', 'USD', NULL, NULL, '2025-08-11 22:10:45.242270', '2025-08-11 22:10:45.242270') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mInputCouponBonus Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."coupon_code" = 'TEST07081' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mBonus Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" WHERE "bonuses"."availability_start_date" BETWEEN '2025-07-01 00:00:00' AND '2025-07-31 23:59:59.999999' /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:10:in 'block (2 levels) in <main>'
  [1m[36mBonus Load (0.1ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."availability_start_date" BETWEEN '2025-07-01 00:00:00' AND '2025-07-31 23:59:59.999999' /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mDepositBonus Load (0.2ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 115 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mDepositBonus Destroy (0.1ms)[0m  [1m[31mDELETE FROM "deposit_bonuses" WHERE "deposit_bonuses"."id" = 36 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" = 115 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" = 115 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" = 115 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" = 115 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" = 115 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mBonus Destroy (0.1ms)[0m  [1m[31mDELETE FROM "bonuses" WHERE "bonuses"."id" = 115 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mDepositBonus Load (0.8ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 116 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mDepositBonus Destroy (0.0ms)[0m  [1m[31mDELETE FROM "deposit_bonuses" WHERE "deposit_bonuses"."id" = 37 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" = 116 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" = 116 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" = 116 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" = 116 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" = 116 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mBonus Destroy (0.1ms)[0m  [1m[31mDELETE FROM "bonuses" WHERE "bonuses"."id" = 116 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mDepositBonus Load (0.7ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 117 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" = 117 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" = 117 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mManualBonus Destroy (0.1ms)[0m  [1m[31mDELETE FROM "manual_bonuses" WHERE "manual_bonuses"."id" = 23 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" = 117 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" = 117 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" = 117 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mBonus Destroy (0.3ms)[0m  [1m[31mDELETE FROM "bonuses" WHERE "bonuses"."id" = 117 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mDepositBonus Load (0.7ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 118 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" = 118 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" = 118 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mCollectBonus Load (0.2ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" = 118 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" = 118 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" = 118 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mBonus Destroy (0.1ms)[0m  [1m[31mDELETE FROM "bonuses" WHERE "bonuses"."id" = 118 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:13:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_9B5856EA' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_9B5856EA' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.2ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Deposit Bonus 0701-1', 'BONUS_9B5856EA', 'deposit', 'active', NULL, NULL, NULL, NULL, '2025-07-01 00:00:00', '2025-07-01 23:59:59.999999', 'test_users', 'heatmap_test, july_2025', 'US', 'USD', NULL, NULL, '2025-08-11 22:10:56.636059', '2025-08-11 22:10:56.636059') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mDepositBonus Create (0.9ms)[0m  [1m[32mINSERT INTO "deposit_bonuses" ("bonus_id", "deposit_amount_required", "bonus_percentage", "max_bonus_amount", "first_deposit_only", "recurring_eligible", "created_at", "updated_at") VALUES (119, 50.0, 100.0, 500.0, 0, 1, '2025-08-11 22:10:56.639018', '2025-08-11 22:10:56.639018') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_519D9067' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_519D9067' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.3ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Deposit Bonus 0703-1', 'BONUS_519D9067', 'deposit', 'active', NULL, NULL, NULL, NULL, '2025-07-03 00:00:00', '2025-07-03 23:59:59.999999', 'test_users', 'heatmap_test, july_2025', 'US', 'USD', NULL, NULL, '2025-08-11 22:10:56.644254', '2025-08-11 22:10:56.644254') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mDepositBonus Create (0.8ms)[0m  [1m[32mINSERT INTO "deposit_bonuses" ("bonus_id", "deposit_amount_required", "bonus_percentage", "max_bonus_amount", "first_deposit_only", "recurring_eligible", "created_at", "updated_at") VALUES (120, 50.0, 100.0, 500.0, 0, 1, '2025-08-11 22:10:56.646446', '2025-08-11 22:10:56.646446') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_66DABF57' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_66DABF57' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Manual Bonus 0703-2', 'BONUS_66DABF57', 'manual', 'active', NULL, NULL, NULL, NULL, '2025-07-03 00:01:00', '2025-07-03 23:59:59.999999', 'test_users', 'heatmap_test, july_2025', 'US', 'USD', NULL, NULL, '2025-08-11 22:10:56.654448', '2025-08-11 22:10:56.654448') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mManualBonus Create (2.7ms)[0m  [1m[32mINSERT INTO "manual_bonuses" ("bonus_id", "admin_notes", "approval_required", "auto_apply", "conditions", "created_at", "updated_at") VALUES (121, 'Test manual bonus for heatmap testing', 0, 1, 'Test conditions for heatmap', '2025-08-11 22:10:56.656255', '2025-08-11 22:10:56.656255') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_4DCB744C' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_4DCB744C' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Input coupon Bonus 0708-1', 'BONUS_4DCB744C', 'input_coupon', 'active', NULL, NULL, NULL, NULL, '2025-07-08 00:00:00', '2025-07-08 23:59:59.999999', 'test_users', 'heatmap_test, july_2025', 'US', 'USD', NULL, NULL, '2025-08-11 22:10:56.662562', '2025-08-11 22:10:56.662562') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mInputCouponBonus Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."coupon_code" = 'TEST07081ff5370' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mInputCouponBonus Create (0.2ms)[0m  [1m[32mINSERT INTO "input_coupon_bonuses" ("bonus_id", "coupon_code", "usage_limit", "usage_count", "expires_at", "single_use", "created_at", "updated_at") VALUES (122, 'TEST07081ff5370', 100, 0, '2025-08-18 23:59:59.999999', 0, '2025-08-11 22:10:56.668623', '2025-08-11 22:10:56.668623') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_6559490A' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_6559490A' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Collection Bonus 0712-1', 'BONUS_6559490A', 'collection', 'active', NULL, NULL, NULL, NULL, '2025-07-12 00:00:00', '2025-07-12 23:59:59.999999', 'test_users', 'heatmap_test, july_2025', 'US', 'USD', NULL, NULL, '2025-08-11 22:10:56.673246', '2025-08-11 22:10:56.673246') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:101:in 'block (4 levels) in <main>'
  [1m[36mCollectBonus Create (1.2ms)[0m  [1m[32mINSERT INTO "collect_bonuses" ("bonus_id", "collection_type", "collection_amount", "collection_frequency", "collection_limit", "collected_count", "created_at", "updated_at") VALUES (123, 'daily', 25.0, 'daily', 1, 0, '2025-08-11 22:10:56.695336', '2025-08-11 22:10:56.695336') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:101:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:101:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_13149165' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_13149165' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Scheduler Bonus 0712-2', 'BONUS_13149165', 'scheduler', 'active', NULL, NULL, NULL, NULL, '2025-07-12 00:01:00', '2025-07-12 23:59:59.999999', 'test_users', 'heatmap_test, july_2025', 'US', 'USD', NULL, NULL, '2025-08-11 22:10:56.703231', '2025-08-11 22:10:56.703231') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:119:in 'block (4 levels) in <main>'
  [1m[36mSchedulerBonus Create (1.5ms)[0m  [1m[32mINSERT INTO "scheduler_bonuses" ("bonus_id", "schedule_type", "cron_expression", "next_run_at", "last_run_at", "execution_count", "max_executions", "created_at", "updated_at") VALUES (124, 'recurring', '0 12 * * *', '2025-07-13 00:00:00', '2025-07-12 00:00:00', 1, 30, '2025-08-11 22:10:56.709234', '2025-08-11 22:10:56.709234') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:119:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:119:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_E7AD8EA0' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_E7AD8EA0' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Deposit Bonus 0705-1', 'BONUS_E7AD8EA0', 'deposit', 'active', NULL, NULL, NULL, NULL, '2025-07-05 00:00:00', '2025-07-05 23:59:59.999999', 'test_users', 'heatmap_test, july_2025', 'US', 'USD', NULL, NULL, '2025-08-11 22:10:56.715776', '2025-08-11 22:10:56.715776') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mDepositBonus Create (0.6ms)[0m  [1m[32mINSERT INTO "deposit_bonuses" ("bonus_id", "deposit_amount_required", "bonus_percentage", "max_bonus_amount", "first_deposit_only", "recurring_eligible", "created_at", "updated_at") VALUES (125, 50.0, 100.0, 500.0, 0, 1, '2025-08-11 22:10:56.718373', '2025-08-11 22:10:56.718373') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_EA755D5A' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_EA755D5A' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Manual Bonus 0705-2', 'BONUS_EA755D5A', 'manual', 'active', NULL, NULL, NULL, NULL, '2025-07-05 00:01:00', '2025-07-05 23:59:59.999999', 'test_users', 'heatmap_test, july_2025', 'US', 'USD', NULL, NULL, '2025-08-11 22:10:56.722611', '2025-08-11 22:10:56.722611') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mManualBonus Create (0.6ms)[0m  [1m[32mINSERT INTO "manual_bonuses" ("bonus_id", "admin_notes", "approval_required", "auto_apply", "conditions", "created_at", "updated_at") VALUES (126, 'Test manual bonus for heatmap testing', 0, 1, 'Test conditions for heatmap', '2025-08-11 22:10:56.724673', '2025-08-11 22:10:56.724673') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_8EFA88F8' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_8EFA88F8' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Input coupon Bonus 0705-3', 'BONUS_8EFA88F8', 'input_coupon', 'active', NULL, NULL, NULL, NULL, '2025-07-05 00:02:00', '2025-07-05 23:59:59.999999', 'test_users', 'heatmap_test, july_2025', 'US', 'USD', NULL, NULL, '2025-08-11 22:10:56.728307', '2025-08-11 22:10:56.728307') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mInputCouponBonus Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."coupon_code" = 'TEST070535c27d8' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mInputCouponBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "input_coupon_bonuses" ("bonus_id", "coupon_code", "usage_limit", "usage_count", "expires_at", "single_use", "created_at", "updated_at") VALUES (127, 'TEST070535c27d8', 100, 0, '2025-08-18 23:59:59.999999', 0, '2025-08-11 22:10:56.731355', '2025-08-11 22:10:56.731355') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_C9D88A78' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_C9D88A78' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Deposit Bonus 0710-1', 'BONUS_C9D88A78', 'deposit', 'active', NULL, NULL, NULL, NULL, '2025-07-10 00:00:00', '2025-07-10 23:59:59.999999', 'test_users', 'heatmap_test, july_2025', 'US', 'USD', NULL, NULL, '2025-08-11 22:10:56.735752', '2025-08-11 22:10:56.735752') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mDepositBonus Create (0.6ms)[0m  [1m[32mINSERT INTO "deposit_bonuses" ("bonus_id", "deposit_amount_required", "bonus_percentage", "max_bonus_amount", "first_deposit_only", "recurring_eligible", "created_at", "updated_at") VALUES (128, 50.0, 100.0, 500.0, 0, 1, '2025-08-11 22:10:56.737510', '2025-08-11 22:10:56.737510') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_58A79FF3' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_58A79FF3' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Collection Bonus 0710-2', 'BONUS_58A79FF3', 'collection', 'active', NULL, NULL, NULL, NULL, '2025-07-10 00:01:00', '2025-07-10 23:59:59.999999', 'test_users', 'heatmap_test, july_2025', 'US', 'USD', NULL, NULL, '2025-08-11 22:10:56.741191', '2025-08-11 22:10:56.741191') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:101:in 'block (4 levels) in <main>'
  [1m[36mCollectBonus Create (0.6ms)[0m  [1m[32mINSERT INTO "collect_bonuses" ("bonus_id", "collection_type", "collection_amount", "collection_frequency", "collection_limit", "collected_count", "created_at", "updated_at") VALUES (129, 'daily', 25.0, 'daily', 1, 0, '2025-08-11 22:10:56.742962', '2025-08-11 22:10:56.742962') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:101:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:101:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_0399278D' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_0399278D' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Scheduler Bonus 0710-3', 'BONUS_0399278D', 'scheduler', 'active', NULL, NULL, NULL, NULL, '2025-07-10 00:02:00', '2025-07-10 23:59:59.999999', 'test_users', 'heatmap_test, july_2025', 'US', 'USD', NULL, NULL, '2025-08-11 22:10:56.747403', '2025-08-11 22:10:56.747403') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:119:in 'block (4 levels) in <main>'
  [1m[36mSchedulerBonus Create (0.7ms)[0m  [1m[32mINSERT INTO "scheduler_bonuses" ("bonus_id", "schedule_type", "cron_expression", "next_run_at", "last_run_at", "execution_count", "max_executions", "created_at", "updated_at") VALUES (130, 'recurring', '0 12 * * *', '2025-07-11 00:00:00', '2025-07-10 00:00:00', 1, 30, '2025-08-11 22:10:56.749672', '2025-08-11 22:10:56.749672') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:119:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:119:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_0402FCAA' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_0402FCAA' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Groups update Bonus 0710-4', 'BONUS_0402FCAA', 'groups_update', 'active', NULL, NULL, NULL, NULL, '2025-07-10 00:03:00', '2025-07-10 23:59:59.999999', 'test_users', 'heatmap_test, july_2025', 'US', 'USD', NULL, NULL, '2025-08-11 22:10:56.762000', '2025-08-11 22:10:56.762000') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:110:in 'block (4 levels) in <main>'
  [1m[36mGroupsUpdateBonus Create (1.5ms)[0m  [1m[32mINSERT INTO "groups_update_bonuses" ("bonus_id", "target_groups", "update_type", "update_parameters", "batch_size", "processing_status", "created_at", "updated_at") VALUES (131, '["test_group_1", "test_group_2"]', 'bulk_apply', '{"amount": 100}', 50, 'completed', '2025-08-11 22:10:56.768673', '2025-08-11 22:10:56.768673') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:110:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:110:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_9FCB0D16' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_9FCB0D16' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.9ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Manual Bonus 0718-1', 'BONUS_9FCB0D16', 'manual', 'active', NULL, NULL, NULL, NULL, '2025-07-18 00:00:00', '2025-07-18 23:59:59.999999', 'test_users', 'heatmap_test, july_2025', 'US', 'USD', NULL, NULL, '2025-08-11 22:10:56.775961', '2025-08-11 22:10:56.775961') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mManualBonus Create (0.7ms)[0m  [1m[32mINSERT INTO "manual_bonuses" ("bonus_id", "admin_notes", "approval_required", "auto_apply", "conditions", "created_at", "updated_at") VALUES (132, 'Test manual bonus for heatmap testing', 0, 1, 'Test conditions for heatmap', '2025-08-11 22:10:56.779877', '2025-08-11 22:10:56.779877') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_C45D49E2' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_C45D49E2' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Input coupon Bonus 0718-2', 'BONUS_C45D49E2', 'input_coupon', 'active', NULL, NULL, NULL, NULL, '2025-07-18 00:01:00', '2025-07-18 23:59:59.999999', 'test_users', 'heatmap_test, july_2025', 'US', 'USD', NULL, NULL, '2025-08-11 22:10:56.784286', '2025-08-11 22:10:56.784286') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mInputCouponBonus Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."coupon_code" = 'TEST0718292c659' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mInputCouponBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "input_coupon_bonuses" ("bonus_id", "coupon_code", "usage_limit", "usage_count", "expires_at", "single_use", "created_at", "updated_at") VALUES (133, 'TEST0718292c659', 100, 0, '2025-08-18 23:59:59.999999', 0, '2025-08-11 22:10:56.788530', '2025-08-11 22:10:56.788530') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_416D7699' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_416D7699' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Collection Bonus 0718-3', 'BONUS_416D7699', 'collection', 'active', NULL, NULL, NULL, NULL, '2025-07-18 00:02:00', '2025-07-18 23:59:59.999999', 'test_users', 'heatmap_test, july_2025', 'US', 'USD', NULL, NULL, '2025-08-11 22:10:56.793766', '2025-08-11 22:10:56.793766') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:101:in 'block (4 levels) in <main>'
  [1m[36mCollectBonus Create (0.6ms)[0m  [1m[32mINSERT INTO "collect_bonuses" ("bonus_id", "collection_type", "collection_amount", "collection_frequency", "collection_limit", "collected_count", "created_at", "updated_at") VALUES (134, 'daily', 25.0, 'daily', 1, 0, '2025-08-11 22:10:56.796611', '2025-08-11 22:10:56.796611') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:101:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:101:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_0EC09C3B' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_0EC09C3B' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Deposit Bonus 0722-1', 'BONUS_0EC09C3B', 'deposit', 'active', NULL, NULL, NULL, NULL, '2025-07-22 00:00:00', '2025-07-22 23:59:59.999999', 'test_users', 'heatmap_test, july_2025', 'US', 'USD', NULL, NULL, '2025-08-11 22:10:56.801315', '2025-08-11 22:10:56.801315') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mDepositBonus Create (0.6ms)[0m  [1m[32mINSERT INTO "deposit_bonuses" ("bonus_id", "deposit_amount_required", "bonus_percentage", "max_bonus_amount", "first_deposit_only", "recurring_eligible", "created_at", "updated_at") VALUES (135, 50.0, 100.0, 500.0, 0, 1, '2025-08-11 22:10:56.803201', '2025-08-11 22:10:56.803201') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_0CBD3BAE' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_0CBD3BAE' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Manual Bonus 0722-2', 'BONUS_0CBD3BAE', 'manual', 'active', NULL, NULL, NULL, NULL, '2025-07-22 00:01:00', '2025-07-22 23:59:59.999999', 'test_users', 'heatmap_test, july_2025', 'US', 'USD', NULL, NULL, '2025-08-11 22:10:56.809138', '2025-08-11 22:10:56.809138') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mManualBonus Create (0.9ms)[0m  [1m[32mINSERT INTO "manual_bonuses" ("bonus_id", "admin_notes", "approval_required", "auto_apply", "conditions", "created_at", "updated_at") VALUES (136, 'Test manual bonus for heatmap testing', 0, 1, 'Test conditions for heatmap', '2025-08-11 22:10:56.811682', '2025-08-11 22:10:56.811682') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_39FCDE0C' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_39FCDE0C' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Scheduler Bonus 0722-3', 'BONUS_39FCDE0C', 'scheduler', 'active', NULL, NULL, NULL, NULL, '2025-07-22 00:02:00', '2025-07-22 23:59:59.999999', 'test_users', 'heatmap_test, july_2025', 'US', 'USD', NULL, NULL, '2025-08-11 22:10:56.817130', '2025-08-11 22:10:56.817130') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:119:in 'block (4 levels) in <main>'
  [1m[36mSchedulerBonus Create (0.7ms)[0m  [1m[32mINSERT INTO "scheduler_bonuses" ("bonus_id", "schedule_type", "cron_expression", "next_run_at", "last_run_at", "execution_count", "max_executions", "created_at", "updated_at") VALUES (137, 'recurring', '0 12 * * *', '2025-07-23 00:00:00', '2025-07-22 00:00:00', 1, 30, '2025-08-11 22:10:56.819012', '2025-08-11 22:10:56.819012') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:119:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:119:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_B5C35782' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_B5C35782' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Input coupon Bonus 0722-4', 'BONUS_B5C35782', 'input_coupon', 'active', NULL, NULL, NULL, NULL, '2025-07-22 00:03:00', '2025-07-22 23:59:59.999999', 'test_users', 'heatmap_test, july_2025', 'US', 'USD', NULL, NULL, '2025-08-11 22:10:56.823110', '2025-08-11 22:10:56.823110') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mInputCouponBonus Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."coupon_code" = 'TEST07224e98b15' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mInputCouponBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "input_coupon_bonuses" ("bonus_id", "coupon_code", "usage_limit", "usage_count", "expires_at", "single_use", "created_at", "updated_at") VALUES (138, 'TEST07224e98b15', 100, 0, '2025-08-18 23:59:59.999999', 0, '2025-08-11 22:10:56.830944', '2025-08-11 22:10:56.830944') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_45CB7314' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_45CB7314' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Deposit Bonus 0707-1', 'BONUS_45CB7314', 'deposit', 'active', NULL, NULL, NULL, NULL, '2025-07-07 00:00:00', '2025-07-07 23:59:59.999999', 'test_users', 'heatmap_test, july_2025', 'US', 'USD', NULL, NULL, '2025-08-11 22:10:56.834349', '2025-08-11 22:10:56.834349') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mDepositBonus Create (0.7ms)[0m  [1m[32mINSERT INTO "deposit_bonuses" ("bonus_id", "deposit_amount_required", "bonus_percentage", "max_bonus_amount", "first_deposit_only", "recurring_eligible", "created_at", "updated_at") VALUES (139, 50.0, 100.0, 500.0, 0, 1, '2025-08-11 22:10:56.835969', '2025-08-11 22:10:56.835969') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_33E9646B' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_33E9646B' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Manual Bonus 0707-2', 'BONUS_33E9646B', 'manual', 'active', NULL, NULL, NULL, NULL, '2025-07-07 00:01:00', '2025-07-07 23:59:59.999999', 'test_users', 'heatmap_test, july_2025', 'US', 'USD', NULL, NULL, '2025-08-11 22:10:56.841163', '2025-08-11 22:10:56.841163') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mManualBonus Create (0.7ms)[0m  [1m[32mINSERT INTO "manual_bonuses" ("bonus_id", "admin_notes", "approval_required", "auto_apply", "conditions", "created_at", "updated_at") VALUES (140, 'Test manual bonus for heatmap testing', 0, 1, 'Test conditions for heatmap', '2025-08-11 22:10:56.842700', '2025-08-11 22:10:56.842700') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_39BEDDEF' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_39BEDDEF' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Input coupon Bonus 0707-3', 'BONUS_39BEDDEF', 'input_coupon', 'active', NULL, NULL, NULL, NULL, '2025-07-07 00:02:00', '2025-07-07 23:59:59.999999', 'test_users', 'heatmap_test, july_2025', 'US', 'USD', NULL, NULL, '2025-08-11 22:10:56.848238', '2025-08-11 22:10:56.848238') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mInputCouponBonus Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."coupon_code" = 'TEST070732f5cfd' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mInputCouponBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "input_coupon_bonuses" ("bonus_id", "coupon_code", "usage_limit", "usage_count", "expires_at", "single_use", "created_at", "updated_at") VALUES (141, 'TEST070732f5cfd', 100, 0, '2025-08-18 23:59:59.999999', 0, '2025-08-11 22:10:56.853743', '2025-08-11 22:10:56.853743') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_40CB3BBC' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_40CB3BBC' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Collection Bonus 0707-4', 'BONUS_40CB3BBC', 'collection', 'active', NULL, NULL, NULL, NULL, '2025-07-07 00:03:00', '2025-07-07 23:59:59.999999', 'test_users', 'heatmap_test, july_2025', 'US', 'USD', NULL, NULL, '2025-08-11 22:10:56.857915', '2025-08-11 22:10:56.857915') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:101:in 'block (4 levels) in <main>'
  [1m[36mCollectBonus Create (0.6ms)[0m  [1m[32mINSERT INTO "collect_bonuses" ("bonus_id", "collection_type", "collection_amount", "collection_frequency", "collection_limit", "collected_count", "created_at", "updated_at") VALUES (142, 'daily', 25.0, 'daily', 1, 0, '2025-08-11 22:10:56.860327', '2025-08-11 22:10:56.860327') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:101:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:101:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_F4C25F1E' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_F4C25F1E' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Scheduler Bonus 0707-5', 'BONUS_F4C25F1E', 'scheduler', 'active', NULL, NULL, NULL, NULL, '2025-07-07 00:04:00', '2025-07-07 23:59:59.999999', 'test_users', 'heatmap_test, july_2025', 'US', 'USD', NULL, NULL, '2025-08-11 22:10:56.865357', '2025-08-11 22:10:56.865357') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:119:in 'block (4 levels) in <main>'
  [1m[36mSchedulerBonus Create (1.6ms)[0m  [1m[32mINSERT INTO "scheduler_bonuses" ("bonus_id", "schedule_type", "cron_expression", "next_run_at", "last_run_at", "execution_count", "max_executions", "created_at", "updated_at") VALUES (143, 'recurring', '0 12 * * *', '2025-07-08 00:00:00', '2025-07-07 00:00:00', 1, 30, '2025-08-11 22:10:56.867265', '2025-08-11 22:10:56.867265') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:119:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:119:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_1DE6ADFC' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_1DE6ADFC' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.2ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Deposit Bonus 0714-1', 'BONUS_1DE6ADFC', 'deposit', 'active', NULL, NULL, NULL, NULL, '2025-07-14 00:00:00', '2025-07-14 23:59:59.999999', 'test_users', 'heatmap_test, july_2025', 'US', 'USD', NULL, NULL, '2025-08-11 22:10:56.872211', '2025-08-11 22:10:56.872211') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mDepositBonus Create (0.8ms)[0m  [1m[32mINSERT INTO "deposit_bonuses" ("bonus_id", "deposit_amount_required", "bonus_percentage", "max_bonus_amount", "first_deposit_only", "recurring_eligible", "created_at", "updated_at") VALUES (144, 50.0, 100.0, 500.0, 0, 1, '2025-08-11 22:10:56.874687', '2025-08-11 22:10:56.874687') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_950E720F' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_950E720F' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Manual Bonus 0714-2', 'BONUS_950E720F', 'manual', 'active', NULL, NULL, NULL, NULL, '2025-07-14 00:01:00', '2025-07-14 23:59:59.999999', 'test_users', 'heatmap_test, july_2025', 'US', 'USD', NULL, NULL, '2025-08-11 22:10:56.879871', '2025-08-11 22:10:56.879871') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mManualBonus Create (0.8ms)[0m  [1m[32mINSERT INTO "manual_bonuses" ("bonus_id", "admin_notes", "approval_required", "auto_apply", "conditions", "created_at", "updated_at") VALUES (145, 'Test manual bonus for heatmap testing', 0, 1, 'Test conditions for heatmap', '2025-08-11 22:10:56.883079', '2025-08-11 22:10:56.883079') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_D2393119' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_D2393119' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.3ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Input coupon Bonus 0714-3', 'BONUS_D2393119', 'input_coupon', 'active', NULL, NULL, NULL, NULL, '2025-07-14 00:02:00', '2025-07-14 23:59:59.999999', 'test_users', 'heatmap_test, july_2025', 'US', 'USD', NULL, NULL, '2025-08-11 22:10:56.887089', '2025-08-11 22:10:56.887089') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mInputCouponBonus Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."coupon_code" = 'TEST07143bc52c7' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mInputCouponBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "input_coupon_bonuses" ("bonus_id", "coupon_code", "usage_limit", "usage_count", "expires_at", "single_use", "created_at", "updated_at") VALUES (146, 'TEST07143bc52c7', 100, 0, '2025-08-18 23:59:59.999999', 0, '2025-08-11 22:10:56.894067', '2025-08-11 22:10:56.894067') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_888D10A3' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_888D10A3' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Collection Bonus 0714-4', 'BONUS_888D10A3', 'collection', 'active', NULL, NULL, NULL, NULL, '2025-07-14 00:03:00', '2025-07-14 23:59:59.999999', 'test_users', 'heatmap_test, july_2025', 'US', 'USD', NULL, NULL, '2025-08-11 22:10:56.897868', '2025-08-11 22:10:56.897868') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:101:in 'block (4 levels) in <main>'
  [1m[36mCollectBonus Create (2.0ms)[0m  [1m[32mINSERT INTO "collect_bonuses" ("bonus_id", "collection_type", "collection_amount", "collection_frequency", "collection_limit", "collected_count", "created_at", "updated_at") VALUES (147, 'daily', 25.0, 'daily', 1, 0, '2025-08-11 22:10:56.899740', '2025-08-11 22:10:56.899740') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:101:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:101:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_F3C02EB0' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_F3C02EB0' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Scheduler Bonus 0714-5', 'BONUS_F3C02EB0', 'scheduler', 'active', NULL, NULL, NULL, NULL, '2025-07-14 00:04:00', '2025-07-14 23:59:59.999999', 'test_users', 'heatmap_test, july_2025', 'US', 'USD', NULL, NULL, '2025-08-11 22:10:56.905049', '2025-08-11 22:10:56.905049') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:119:in 'block (4 levels) in <main>'
  [1m[36mSchedulerBonus Create (0.6ms)[0m  [1m[32mINSERT INTO "scheduler_bonuses" ("bonus_id", "schedule_type", "cron_expression", "next_run_at", "last_run_at", "execution_count", "max_executions", "created_at", "updated_at") VALUES (148, 'recurring', '0 12 * * *', '2025-07-15 00:00:00', '2025-07-14 00:00:00', 1, 30, '2025-08-11 22:10:56.906892', '2025-08-11 22:10:56.906892') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:119:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:119:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (2.2ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_A6637ACE' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_A6637ACE' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.2ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Groups update Bonus 0714-6', 'BONUS_A6637ACE', 'groups_update', 'active', NULL, NULL, NULL, NULL, '2025-07-14 00:05:00', '2025-07-14 23:59:59.999999', 'test_users', 'heatmap_test, july_2025', 'US', 'USD', NULL, NULL, '2025-08-11 22:10:56.912711', '2025-08-11 22:10:56.912711') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:110:in 'block (4 levels) in <main>'
  [1m[36mGroupsUpdateBonus Create (0.8ms)[0m  [1m[32mINSERT INTO "groups_update_bonuses" ("bonus_id", "target_groups", "update_type", "update_parameters", "batch_size", "processing_status", "created_at", "updated_at") VALUES (149, '["test_group_1", "test_group_2"]', 'bulk_apply', '{"amount": 100}', 50, 'completed', '2025-08-11 22:10:56.914790', '2025-08-11 22:10:56.914790') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:110:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:110:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_CC8F3F81' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_CC8F3F81' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Deposit Bonus 0725-1', 'BONUS_CC8F3F81', 'deposit', 'active', NULL, NULL, NULL, NULL, '2025-07-25 00:00:00', '2025-07-25 23:59:59.999999', 'test_users', 'heatmap_test, july_2025', 'US', 'USD', NULL, NULL, '2025-08-11 22:10:56.918934', '2025-08-11 22:10:56.918934') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mDepositBonus Create (0.8ms)[0m  [1m[32mINSERT INTO "deposit_bonuses" ("bonus_id", "deposit_amount_required", "bonus_percentage", "max_bonus_amount", "first_deposit_only", "recurring_eligible", "created_at", "updated_at") VALUES (150, 50.0, 100.0, 500.0, 0, 1, '2025-08-11 22:10:56.921172', '2025-08-11 22:10:56.921172') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_50240EE8' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_50240EE8' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Deposit Bonus 0725-2', 'BONUS_50240EE8', 'deposit', 'active', NULL, NULL, NULL, NULL, '2025-07-25 00:01:00', '2025-07-25 23:59:59.999999', 'test_users', 'heatmap_test, july_2025', 'US', 'USD', NULL, NULL, '2025-08-11 22:10:56.925317', '2025-08-11 22:10:56.925317') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mDepositBonus Create (0.6ms)[0m  [1m[32mINSERT INTO "deposit_bonuses" ("bonus_id", "deposit_amount_required", "bonus_percentage", "max_bonus_amount", "first_deposit_only", "recurring_eligible", "created_at", "updated_at") VALUES (151, 50.0, 100.0, 500.0, 0, 1, '2025-08-11 22:10:56.927232', '2025-08-11 22:10:56.927232') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_126ECFE3' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_126ECFE3' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Manual Bonus 0725-3', 'BONUS_126ECFE3', 'manual', 'active', NULL, NULL, NULL, NULL, '2025-07-25 00:02:00', '2025-07-25 23:59:59.999999', 'test_users', 'heatmap_test, july_2025', 'US', 'USD', NULL, NULL, '2025-08-11 22:10:56.931703', '2025-08-11 22:10:56.931703') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mManualBonus Create (1.2ms)[0m  [1m[32mINSERT INTO "manual_bonuses" ("bonus_id", "admin_notes", "approval_required", "auto_apply", "conditions", "created_at", "updated_at") VALUES (152, 'Test manual bonus for heatmap testing', 0, 1, 'Test conditions for heatmap', '2025-08-11 22:10:56.933697', '2025-08-11 22:10:56.933697') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_45A619AC' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_45A619AC' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Input coupon Bonus 0725-4', 'BONUS_45A619AC', 'input_coupon', 'active', NULL, NULL, NULL, NULL, '2025-07-25 00:03:00', '2025-07-25 23:59:59.999999', 'test_users', 'heatmap_test, july_2025', 'US', 'USD', NULL, NULL, '2025-08-11 22:10:56.938478', '2025-08-11 22:10:56.938478') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mInputCouponBonus Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."coupon_code" = 'TEST072548b965f' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mInputCouponBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "input_coupon_bonuses" ("bonus_id", "coupon_code", "usage_limit", "usage_count", "expires_at", "single_use", "created_at", "updated_at") VALUES (153, 'TEST072548b965f', 100, 0, '2025-08-18 23:59:59.999999', 0, '2025-08-11 22:10:56.944424', '2025-08-11 22:10:56.944424') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (1.5ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_2D5035F7' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_2D5035F7' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Collection Bonus 0725-5', 'BONUS_2D5035F7', 'collection', 'active', NULL, NULL, NULL, NULL, '2025-07-25 00:04:00', '2025-07-25 23:59:59.999999', 'test_users', 'heatmap_test, july_2025', 'US', 'USD', NULL, NULL, '2025-08-11 22:10:56.948853', '2025-08-11 22:10:56.948853') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:101:in 'block (4 levels) in <main>'
  [1m[36mCollectBonus Create (1.1ms)[0m  [1m[32mINSERT INTO "collect_bonuses" ("bonus_id", "collection_type", "collection_amount", "collection_frequency", "collection_limit", "collected_count", "created_at", "updated_at") VALUES (154, 'daily', 25.0, 'daily', 1, 0, '2025-08-11 22:10:56.955056', '2025-08-11 22:10:56.955056') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:101:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:101:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_B63DD054' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_B63DD054' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Deposit Bonus 0715-1', 'BONUS_B63DD054', 'deposit', 'active', NULL, NULL, NULL, NULL, '2025-07-15 00:00:00', '2025-07-15 23:59:59.999999', 'test_users', 'heatmap_test, july_2025', 'US', 'USD', NULL, NULL, '2025-08-11 22:10:56.961282', '2025-08-11 22:10:56.961282') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mDepositBonus Create (0.7ms)[0m  [1m[32mINSERT INTO "deposit_bonuses" ("bonus_id", "deposit_amount_required", "bonus_percentage", "max_bonus_amount", "first_deposit_only", "recurring_eligible", "created_at", "updated_at") VALUES (155, 50.0, 100.0, 500.0, 0, 1, '2025-08-11 22:10:56.964131', '2025-08-11 22:10:56.964131') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_0BDB7749' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_0BDB7749' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Deposit Bonus 0715-2', 'BONUS_0BDB7749', 'deposit', 'active', NULL, NULL, NULL, NULL, '2025-07-15 00:01:00', '2025-07-15 23:59:59.999999', 'test_users', 'heatmap_test, july_2025', 'US', 'USD', NULL, NULL, '2025-08-11 22:10:56.971084', '2025-08-11 22:10:56.971084') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mDepositBonus Create (0.7ms)[0m  [1m[32mINSERT INTO "deposit_bonuses" ("bonus_id", "deposit_amount_required", "bonus_percentage", "max_bonus_amount", "first_deposit_only", "recurring_eligible", "created_at", "updated_at") VALUES (156, 50.0, 100.0, 500.0, 0, 1, '2025-08-11 22:10:56.973190', '2025-08-11 22:10:56.973190') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_C7178EDB' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_C7178EDB' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Manual Bonus 0715-3', 'BONUS_C7178EDB', 'manual', 'active', NULL, NULL, NULL, NULL, '2025-07-15 00:02:00', '2025-07-15 23:59:59.999999', 'test_users', 'heatmap_test, july_2025', 'US', 'USD', NULL, NULL, '2025-08-11 22:10:56.978894', '2025-08-11 22:10:56.978894') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mManualBonus Create (0.6ms)[0m  [1m[32mINSERT INTO "manual_bonuses" ("bonus_id", "admin_notes", "approval_required", "auto_apply", "conditions", "created_at", "updated_at") VALUES (157, 'Test manual bonus for heatmap testing', 0, 1, 'Test conditions for heatmap', '2025-08-11 22:10:56.980730', '2025-08-11 22:10:56.980730') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_C9D40E58' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_C9D40E58' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Input coupon Bonus 0715-4', 'BONUS_C9D40E58', 'input_coupon', 'active', NULL, NULL, NULL, NULL, '2025-07-15 00:03:00', '2025-07-15 23:59:59.999999', 'test_users', 'heatmap_test, july_2025', 'US', 'USD', NULL, NULL, '2025-08-11 22:10:56.984676', '2025-08-11 22:10:56.984676') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mInputCouponBonus Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."coupon_code" = 'TEST07154b3cb62' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mInputCouponBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "input_coupon_bonuses" ("bonus_id", "coupon_code", "usage_limit", "usage_count", "expires_at", "single_use", "created_at", "updated_at") VALUES (158, 'TEST07154b3cb62', 100, 0, '2025-08-18 23:59:59.999999', 0, '2025-08-11 22:10:56.988507', '2025-08-11 22:10:56.988507') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_5CF69C74' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_5CF69C74' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Collection Bonus 0715-5', 'BONUS_5CF69C74', 'collection', 'active', NULL, NULL, NULL, NULL, '2025-07-15 00:04:00', '2025-07-15 23:59:59.999999', 'test_users', 'heatmap_test, july_2025', 'US', 'USD', NULL, NULL, '2025-08-11 22:10:56.991826', '2025-08-11 22:10:56.991826') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:101:in 'block (4 levels) in <main>'
  [1m[36mCollectBonus Create (2.3ms)[0m  [1m[32mINSERT INTO "collect_bonuses" ("bonus_id", "collection_type", "collection_amount", "collection_frequency", "collection_limit", "collected_count", "created_at", "updated_at") VALUES (159, 'daily', 25.0, 'daily', 1, 0, '2025-08-11 22:10:56.993863', '2025-08-11 22:10:56.993863') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:101:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:101:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_2248C9F1' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_2248C9F1' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Scheduler Bonus 0715-6', 'BONUS_2248C9F1', 'scheduler', 'active', NULL, NULL, NULL, NULL, '2025-07-15 00:05:00', '2025-07-15 23:59:59.999999', 'test_users', 'heatmap_test, july_2025', 'US', 'USD', NULL, NULL, '2025-08-11 22:10:56.999907', '2025-08-11 22:10:56.999907') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:119:in 'block (4 levels) in <main>'
  [1m[36mSchedulerBonus Create (0.6ms)[0m  [1m[32mINSERT INTO "scheduler_bonuses" ("bonus_id", "schedule_type", "cron_expression", "next_run_at", "last_run_at", "execution_count", "max_executions", "created_at", "updated_at") VALUES (160, 'recurring', '0 12 * * *', '2025-07-16 00:00:00', '2025-07-15 00:00:00', 1, 30, '2025-08-11 22:10:57.001625', '2025-08-11 22:10:57.001625') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:119:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:119:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_A3BA2A45' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_A3BA2A45' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Groups update Bonus 0715-7', 'BONUS_A3BA2A45', 'groups_update', 'active', NULL, NULL, NULL, NULL, '2025-07-15 00:06:00', '2025-07-15 23:59:59.999999', 'test_users', 'heatmap_test, july_2025', 'US', 'USD', NULL, NULL, '2025-08-11 22:10:57.005585', '2025-08-11 22:10:57.005585') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:110:in 'block (4 levels) in <main>'
  [1m[36mGroupsUpdateBonus Create (0.6ms)[0m  [1m[32mINSERT INTO "groups_update_bonuses" ("bonus_id", "target_groups", "update_type", "update_parameters", "batch_size", "processing_status", "created_at", "updated_at") VALUES (161, '["test_group_1", "test_group_2"]', 'bulk_apply', '{"amount": 100}', 50, 'completed', '2025-08-11 22:10:57.007049', '2025-08-11 22:10:57.007049') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:110:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:110:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_C03A7456' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_C03A7456' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Deposit Bonus 0720-1', 'BONUS_C03A7456', 'deposit', 'active', NULL, NULL, NULL, NULL, '2025-07-20 00:00:00', '2025-07-20 23:59:59.999999', 'test_users', 'heatmap_test, july_2025', 'US', 'USD', NULL, NULL, '2025-08-11 22:10:57.010991', '2025-08-11 22:10:57.010991') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mDepositBonus Create (0.6ms)[0m  [1m[32mINSERT INTO "deposit_bonuses" ("bonus_id", "deposit_amount_required", "bonus_percentage", "max_bonus_amount", "first_deposit_only", "recurring_eligible", "created_at", "updated_at") VALUES (162, 50.0, 100.0, 500.0, 0, 1, '2025-08-11 22:10:57.015544', '2025-08-11 22:10:57.015544') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_20F588B0' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_20F588B0' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Deposit Bonus 0720-2', 'BONUS_20F588B0', 'deposit', 'active', NULL, NULL, NULL, NULL, '2025-07-20 00:01:00', '2025-07-20 23:59:59.999999', 'test_users', 'heatmap_test, july_2025', 'US', 'USD', NULL, NULL, '2025-08-11 22:10:57.019948', '2025-08-11 22:10:57.019948') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mDepositBonus Create (0.6ms)[0m  [1m[32mINSERT INTO "deposit_bonuses" ("bonus_id", "deposit_amount_required", "bonus_percentage", "max_bonus_amount", "first_deposit_only", "recurring_eligible", "created_at", "updated_at") VALUES (163, 50.0, 100.0, 500.0, 0, 1, '2025-08-11 22:10:57.022255', '2025-08-11 22:10:57.022255') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_7642C0F1' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_7642C0F1' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.2ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Manual Bonus 0720-3', 'BONUS_7642C0F1', 'manual', 'active', NULL, NULL, NULL, NULL, '2025-07-20 00:02:00', '2025-07-20 23:59:59.999999', 'test_users', 'heatmap_test, july_2025', 'US', 'USD', NULL, NULL, '2025-08-11 22:10:57.030077', '2025-08-11 22:10:57.030077') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mManualBonus Create (0.7ms)[0m  [1m[32mINSERT INTO "manual_bonuses" ("bonus_id", "admin_notes", "approval_required", "auto_apply", "conditions", "created_at", "updated_at") VALUES (164, 'Test manual bonus for heatmap testing', 0, 1, 'Test conditions for heatmap', '2025-08-11 22:10:57.031737', '2025-08-11 22:10:57.031737') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_406CD048' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_406CD048' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.5ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Manual Bonus 0720-4', 'BONUS_406CD048', 'manual', 'active', NULL, NULL, NULL, NULL, '2025-07-20 00:03:00', '2025-07-20 23:59:59.999999', 'test_users', 'heatmap_test, july_2025', 'US', 'USD', NULL, NULL, '2025-08-11 22:10:57.037977', '2025-08-11 22:10:57.037977') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mManualBonus Create (0.7ms)[0m  [1m[32mINSERT INTO "manual_bonuses" ("bonus_id", "admin_notes", "approval_required", "auto_apply", "conditions", "created_at", "updated_at") VALUES (165, 'Test manual bonus for heatmap testing', 0, 1, 'Test conditions for heatmap', '2025-08-11 22:10:57.040827', '2025-08-11 22:10:57.040827') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_127E4658' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_127E4658' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Input coupon Bonus 0720-5', 'BONUS_127E4658', 'input_coupon', 'active', NULL, NULL, NULL, NULL, '2025-07-20 00:04:00', '2025-07-20 23:59:59.999999', 'test_users', 'heatmap_test, july_2025', 'US', 'USD', NULL, NULL, '2025-08-11 22:10:57.047088', '2025-08-11 22:10:57.047088') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mInputCouponBonus Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."coupon_code" = 'TEST07205965daa' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mInputCouponBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "input_coupon_bonuses" ("bonus_id", "coupon_code", "usage_limit", "usage_count", "expires_at", "single_use", "created_at", "updated_at") VALUES (166, 'TEST07205965daa', 100, 0, '2025-08-18 23:59:59.999999', 0, '2025-08-11 22:10:57.051418', '2025-08-11 22:10:57.051418') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_DC02D8FD' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_DC02D8FD' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Collection Bonus 0720-6', 'BONUS_DC02D8FD', 'collection', 'active', NULL, NULL, NULL, NULL, '2025-07-20 00:05:00', '2025-07-20 23:59:59.999999', 'test_users', 'heatmap_test, july_2025', 'US', 'USD', NULL, NULL, '2025-08-11 22:10:57.055432', '2025-08-11 22:10:57.055432') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:101:in 'block (4 levels) in <main>'
  [1m[36mCollectBonus Create (0.7ms)[0m  [1m[32mINSERT INTO "collect_bonuses" ("bonus_id", "collection_type", "collection_amount", "collection_frequency", "collection_limit", "collected_count", "created_at", "updated_at") VALUES (167, 'daily', 25.0, 'daily', 1, 0, '2025-08-11 22:10:57.057265', '2025-08-11 22:10:57.057265') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:101:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:101:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_2EEEE992' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_2EEEE992' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Scheduler Bonus 0720-7', 'BONUS_2EEEE992', 'scheduler', 'active', NULL, NULL, NULL, NULL, '2025-07-20 00:06:00', '2025-07-20 23:59:59.999999', 'test_users', 'heatmap_test, july_2025', 'US', 'USD', NULL, NULL, '2025-08-11 22:10:57.063014', '2025-08-11 22:10:57.063014') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:119:in 'block (4 levels) in <main>'
  [1m[36mSchedulerBonus Create (0.8ms)[0m  [1m[32mINSERT INTO "scheduler_bonuses" ("bonus_id", "schedule_type", "cron_expression", "next_run_at", "last_run_at", "execution_count", "max_executions", "created_at", "updated_at") VALUES (168, 'recurring', '0 12 * * *', '2025-07-21 00:00:00', '2025-07-20 00:00:00', 1, 30, '2025-08-11 22:10:57.064800', '2025-08-11 22:10:57.064800') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:119:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:119:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_E22F9C56' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_E22F9C56' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Groups update Bonus 0720-8', 'BONUS_E22F9C56', 'groups_update', 'active', NULL, NULL, NULL, NULL, '2025-07-20 00:07:00', '2025-07-20 23:59:59.999999', 'test_users', 'heatmap_test, july_2025', 'US', 'USD', NULL, NULL, '2025-08-11 22:10:57.068543', '2025-08-11 22:10:57.068543') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:110:in 'block (4 levels) in <main>'
  [1m[36mGroupsUpdateBonus Create (0.7ms)[0m  [1m[32mINSERT INTO "groups_update_bonuses" ("bonus_id", "target_groups", "update_type", "update_parameters", "batch_size", "processing_status", "created_at", "updated_at") VALUES (169, '["test_group_1", "test_group_2"]', 'bulk_apply', '{"amount": 100}', 50, 'completed', '2025-08-11 22:10:57.070114', '2025-08-11 22:10:57.070114') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:110:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:110:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_EA496163' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_EA496163' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Deposit Bonus 0716-1', 'BONUS_EA496163', 'deposit', 'active', NULL, NULL, NULL, NULL, '2025-07-16 00:00:00', '2025-07-16 23:59:59.999999', 'test_users', 'heatmap_test, july_2025', 'US', 'USD', NULL, NULL, '2025-08-11 22:10:57.074090', '2025-08-11 22:10:57.074090') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mDepositBonus Create (4.4ms)[0m  [1m[32mINSERT INTO "deposit_bonuses" ("bonus_id", "deposit_amount_required", "bonus_percentage", "max_bonus_amount", "first_deposit_only", "recurring_eligible", "created_at", "updated_at") VALUES (170, 50.0, 100.0, 500.0, 0, 1, '2025-08-11 22:10:57.075966', '2025-08-11 22:10:57.075966') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_1169FDC3' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_1169FDC3' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Deposit Bonus 0716-2', 'BONUS_1169FDC3', 'deposit', 'active', NULL, NULL, NULL, NULL, '2025-07-16 00:01:00', '2025-07-16 23:59:59.999999', 'test_users', 'heatmap_test, july_2025', 'US', 'USD', NULL, NULL, '2025-08-11 22:10:57.084102', '2025-08-11 22:10:57.084102') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mDepositBonus Create (0.7ms)[0m  [1m[32mINSERT INTO "deposit_bonuses" ("bonus_id", "deposit_amount_required", "bonus_percentage", "max_bonus_amount", "first_deposit_only", "recurring_eligible", "created_at", "updated_at") VALUES (171, 50.0, 100.0, 500.0, 0, 1, '2025-08-11 22:10:57.085783', '2025-08-11 22:10:57.085783') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (1.6ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_ACDE7154' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_ACDE7154' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Deposit Bonus 0716-3', 'BONUS_ACDE7154', 'deposit', 'active', NULL, NULL, NULL, NULL, '2025-07-16 00:02:00', '2025-07-16 23:59:59.999999', 'test_users', 'heatmap_test, july_2025', 'US', 'USD', NULL, NULL, '2025-08-11 22:10:57.091000', '2025-08-11 22:10:57.091000') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mDepositBonus Create (0.7ms)[0m  [1m[32mINSERT INTO "deposit_bonuses" ("bonus_id", "deposit_amount_required", "bonus_percentage", "max_bonus_amount", "first_deposit_only", "recurring_eligible", "created_at", "updated_at") VALUES (172, 50.0, 100.0, 500.0, 0, 1, '2025-08-11 22:10:57.092648', '2025-08-11 22:10:57.092648') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_E095092A' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_E095092A' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (2.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Manual Bonus 0716-4', 'BONUS_E095092A', 'manual', 'active', NULL, NULL, NULL, NULL, '2025-07-16 00:03:00', '2025-07-16 23:59:59.999999', 'test_users', 'heatmap_test, july_2025', 'US', 'USD', NULL, NULL, '2025-08-11 22:10:57.096913', '2025-08-11 22:10:57.096913') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mManualBonus Create (0.7ms)[0m  [1m[32mINSERT INTO "manual_bonuses" ("bonus_id", "admin_notes", "approval_required", "auto_apply", "conditions", "created_at", "updated_at") VALUES (173, 'Test manual bonus for heatmap testing', 0, 1, 'Test conditions for heatmap', '2025-08-11 22:10:57.102374', '2025-08-11 22:10:57.102374') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_D7E627AE' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_D7E627AE' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Manual Bonus 0716-5', 'BONUS_D7E627AE', 'manual', 'active', NULL, NULL, NULL, NULL, '2025-07-16 00:04:00', '2025-07-16 23:59:59.999999', 'test_users', 'heatmap_test, july_2025', 'US', 'USD', NULL, NULL, '2025-08-11 22:10:57.107406', '2025-08-11 22:10:57.107406') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mManualBonus Create (0.7ms)[0m  [1m[32mINSERT INTO "manual_bonuses" ("bonus_id", "admin_notes", "approval_required", "auto_apply", "conditions", "created_at", "updated_at") VALUES (174, 'Test manual bonus for heatmap testing', 0, 1, 'Test conditions for heatmap', '2025-08-11 22:10:57.109096', '2025-08-11 22:10:57.109096') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_F5850114' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_F5850114' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Input coupon Bonus 0716-6', 'BONUS_F5850114', 'input_coupon', 'active', NULL, NULL, NULL, NULL, '2025-07-16 00:05:00', '2025-07-16 23:59:59.999999', 'test_users', 'heatmap_test, july_2025', 'US', 'USD', NULL, NULL, '2025-08-11 22:10:57.113830', '2025-08-11 22:10:57.113830') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mInputCouponBonus Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."coupon_code" = 'TEST07166f793cf' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mInputCouponBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "input_coupon_bonuses" ("bonus_id", "coupon_code", "usage_limit", "usage_count", "expires_at", "single_use", "created_at", "updated_at") VALUES (175, 'TEST07166f793cf', 100, 0, '2025-08-18 23:59:59.999999', 0, '2025-08-11 22:10:57.117336', '2025-08-11 22:10:57.117336') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_A3E0EE82' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_A3E0EE82' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Collection Bonus 0716-7', 'BONUS_A3E0EE82', 'collection', 'active', NULL, NULL, NULL, NULL, '2025-07-16 00:06:00', '2025-07-16 23:59:59.999999', 'test_users', 'heatmap_test, july_2025', 'US', 'USD', NULL, NULL, '2025-08-11 22:10:57.121804', '2025-08-11 22:10:57.121804') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:101:in 'block (4 levels) in <main>'
  [1m[36mCollectBonus Create (0.6ms)[0m  [1m[32mINSERT INTO "collect_bonuses" ("bonus_id", "collection_type", "collection_amount", "collection_frequency", "collection_limit", "collected_count", "created_at", "updated_at") VALUES (176, 'daily', 25.0, 'daily', 1, 0, '2025-08-11 22:10:57.123515', '2025-08-11 22:10:57.123515') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:101:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:101:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_68A54313' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_68A54313' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Scheduler Bonus 0716-8', 'BONUS_68A54313', 'scheduler', 'active', NULL, NULL, NULL, NULL, '2025-07-16 00:07:00', '2025-07-16 23:59:59.999999', 'test_users', 'heatmap_test, july_2025', 'US', 'USD', NULL, NULL, '2025-08-11 22:10:57.127332', '2025-08-11 22:10:57.127332') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:119:in 'block (4 levels) in <main>'
  [1m[36mSchedulerBonus Create (0.7ms)[0m  [1m[32mINSERT INTO "scheduler_bonuses" ("bonus_id", "schedule_type", "cron_expression", "next_run_at", "last_run_at", "execution_count", "max_executions", "created_at", "updated_at") VALUES (177, 'recurring', '0 12 * * *', '2025-07-17 00:00:00', '2025-07-16 00:00:00', 1, 30, '2025-08-11 22:10:57.129546', '2025-08-11 22:10:57.129546') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:119:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:119:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_C35840A2' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_C35840A2' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Groups update Bonus 0716-9', 'BONUS_C35840A2', 'groups_update', 'active', NULL, NULL, NULL, NULL, '2025-07-16 00:08:00', '2025-07-16 23:59:59.999999', 'test_users', 'heatmap_test, july_2025', 'US', 'USD', NULL, NULL, '2025-08-11 22:10:57.133579', '2025-08-11 22:10:57.133579') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:110:in 'block (4 levels) in <main>'
  [1m[36mGroupsUpdateBonus Create (2.7ms)[0m  [1m[32mINSERT INTO "groups_update_bonuses" ("bonus_id", "target_groups", "update_type", "update_parameters", "batch_size", "processing_status", "created_at", "updated_at") VALUES (178, '["test_group_1", "test_group_2"]', 'bulk_apply', '{"amount": 100}', 50, 'completed', '2025-08-11 22:10:57.135153', '2025-08-11 22:10:57.135153') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:110:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:110:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_04CB458F' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_04CB458F' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Deposit Bonus 0728-1', 'BONUS_04CB458F', 'deposit', 'active', NULL, NULL, NULL, NULL, '2025-07-28 00:00:00', '2025-07-28 23:59:59.999999', 'test_users', 'heatmap_test, july_2025', 'US', 'USD', NULL, NULL, '2025-08-11 22:10:57.141118', '2025-08-11 22:10:57.141118') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mDepositBonus Create (0.8ms)[0m  [1m[32mINSERT INTO "deposit_bonuses" ("bonus_id", "deposit_amount_required", "bonus_percentage", "max_bonus_amount", "first_deposit_only", "recurring_eligible", "created_at", "updated_at") VALUES (179, 50.0, 100.0, 500.0, 0, 1, '2025-08-11 22:10:57.142984', '2025-08-11 22:10:57.142984') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_A06F306A' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_A06F306A' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.2ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Deposit Bonus 0728-2', 'BONUS_A06F306A', 'deposit', 'active', NULL, NULL, NULL, NULL, '2025-07-28 00:01:00', '2025-07-28 23:59:59.999999', 'test_users', 'heatmap_test, july_2025', 'US', 'USD', NULL, NULL, '2025-08-11 22:10:57.149049', '2025-08-11 22:10:57.149049') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (7.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mDepositBonus Create (1.0ms)[0m  [1m[32mINSERT INTO "deposit_bonuses" ("bonus_id", "deposit_amount_required", "bonus_percentage", "max_bonus_amount", "first_deposit_only", "recurring_eligible", "created_at", "updated_at") VALUES (180, 50.0, 100.0, 500.0, 0, 1, '2025-08-11 22:10:57.159131', '2025-08-11 22:10:57.159131') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (2.3ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_C2DE9F7A' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_C2DE9F7A' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Deposit Bonus 0728-3', 'BONUS_C2DE9F7A', 'deposit', 'active', NULL, NULL, NULL, NULL, '2025-07-28 00:02:00', '2025-07-28 23:59:59.999999', 'test_users', 'heatmap_test, july_2025', 'US', 'USD', NULL, NULL, '2025-08-11 22:10:57.171741', '2025-08-11 22:10:57.171741') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mDepositBonus Create (0.8ms)[0m  [1m[32mINSERT INTO "deposit_bonuses" ("bonus_id", "deposit_amount_required", "bonus_percentage", "max_bonus_amount", "first_deposit_only", "recurring_eligible", "created_at", "updated_at") VALUES (181, 50.0, 100.0, 500.0, 0, 1, '2025-08-11 22:10:57.175182', '2025-08-11 22:10:57.175182') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_176C1125' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_176C1125' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Manual Bonus 0728-4', 'BONUS_176C1125', 'manual', 'active', NULL, NULL, NULL, NULL, '2025-07-28 00:03:00', '2025-07-28 23:59:59.999999', 'test_users', 'heatmap_test, july_2025', 'US', 'USD', NULL, NULL, '2025-08-11 22:10:57.181134', '2025-08-11 22:10:57.181134') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mManualBonus Create (0.6ms)[0m  [1m[32mINSERT INTO "manual_bonuses" ("bonus_id", "admin_notes", "approval_required", "auto_apply", "conditions", "created_at", "updated_at") VALUES (182, 'Test manual bonus for heatmap testing', 0, 1, 'Test conditions for heatmap', '2025-08-11 22:10:57.182999', '2025-08-11 22:10:57.182999') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_D45018EE' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_D45018EE' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Manual Bonus 0728-5', 'BONUS_D45018EE', 'manual', 'active', NULL, NULL, NULL, NULL, '2025-07-28 00:04:00', '2025-07-28 23:59:59.999999', 'test_users', 'heatmap_test, july_2025', 'US', 'USD', NULL, NULL, '2025-08-11 22:10:57.187532', '2025-08-11 22:10:57.187532') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mManualBonus Create (0.5ms)[0m  [1m[32mINSERT INTO "manual_bonuses" ("bonus_id", "admin_notes", "approval_required", "auto_apply", "conditions", "created_at", "updated_at") VALUES (183, 'Test manual bonus for heatmap testing', 0, 1, 'Test conditions for heatmap', '2025-08-11 22:10:57.189273', '2025-08-11 22:10:57.189273') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_13FDBB6A' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_13FDBB6A' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Input coupon Bonus 0728-6', 'BONUS_13FDBB6A', 'input_coupon', 'active', NULL, NULL, NULL, NULL, '2025-07-28 00:05:00', '2025-07-28 23:59:59.999999', 'test_users', 'heatmap_test, july_2025', 'US', 'USD', NULL, NULL, '2025-08-11 22:10:57.193848', '2025-08-11 22:10:57.193848') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mInputCouponBonus Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."coupon_code" = 'TEST0728651e56c' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mInputCouponBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "input_coupon_bonuses" ("bonus_id", "coupon_code", "usage_limit", "usage_count", "expires_at", "single_use", "created_at", "updated_at") VALUES (184, 'TEST0728651e56c', 100, 0, '2025-08-18 23:59:59.999999', 0, '2025-08-11 22:10:57.199291', '2025-08-11 22:10:57.199291') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_85C1C954' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_85C1C954' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Input coupon Bonus 0728-7', 'BONUS_85C1C954', 'input_coupon', 'active', NULL, NULL, NULL, NULL, '2025-07-28 00:06:00', '2025-07-28 23:59:59.999999', 'test_users', 'heatmap_test, july_2025', 'US', 'USD', NULL, NULL, '2025-08-11 22:10:57.203622', '2025-08-11 22:10:57.203622') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mInputCouponBonus Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."coupon_code" = 'TEST07287ed022b' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mInputCouponBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "input_coupon_bonuses" ("bonus_id", "coupon_code", "usage_limit", "usage_count", "expires_at", "single_use", "created_at", "updated_at") VALUES (185, 'TEST07287ed022b', 100, 0, '2025-08-18 23:59:59.999999', 0, '2025-08-11 22:10:57.206836', '2025-08-11 22:10:57.206836') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_09951999' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_09951999' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Collection Bonus 0728-8', 'BONUS_09951999', 'collection', 'active', NULL, NULL, NULL, NULL, '2025-07-28 00:07:00', '2025-07-28 23:59:59.999999', 'test_users', 'heatmap_test, july_2025', 'US', 'USD', NULL, NULL, '2025-08-11 22:10:57.210673', '2025-08-11 22:10:57.210673') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:101:in 'block (4 levels) in <main>'
  [1m[36mCollectBonus Create (3.7ms)[0m  [1m[32mINSERT INTO "collect_bonuses" ("bonus_id", "collection_type", "collection_amount", "collection_frequency", "collection_limit", "collected_count", "created_at", "updated_at") VALUES (186, 'daily', 25.0, 'daily', 1, 0, '2025-08-11 22:10:57.212558', '2025-08-11 22:10:57.212558') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:101:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:101:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_89BB6A98' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_89BB6A98' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Scheduler Bonus 0728-9', 'BONUS_89BB6A98', 'scheduler', 'active', NULL, NULL, NULL, NULL, '2025-07-28 00:08:00', '2025-07-28 23:59:59.999999', 'test_users', 'heatmap_test, july_2025', 'US', 'USD', NULL, NULL, '2025-08-11 22:10:57.220297', '2025-08-11 22:10:57.220297') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:119:in 'block (4 levels) in <main>'
  [1m[36mSchedulerBonus Create (1.0ms)[0m  [1m[32mINSERT INTO "scheduler_bonuses" ("bonus_id", "schedule_type", "cron_expression", "next_run_at", "last_run_at", "execution_count", "max_executions", "created_at", "updated_at") VALUES (187, 'recurring', '0 12 * * *', '2025-07-29 00:00:00', '2025-07-28 00:00:00', 1, 30, '2025-08-11 22:10:57.222731', '2025-08-11 22:10:57.222731') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:119:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:119:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (1.9ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_449C3169' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_449C3169' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.3ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Groups update Bonus 0728-10', 'BONUS_449C3169', 'groups_update', 'active', NULL, NULL, NULL, NULL, '2025-07-28 00:09:00', '2025-07-28 23:59:59.999999', 'test_users', 'heatmap_test, july_2025', 'US', 'USD', NULL, NULL, '2025-08-11 22:10:57.228355', '2025-08-11 22:10:57.228355') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:110:in 'block (4 levels) in <main>'
  [1m[36mGroupsUpdateBonus Create (0.6ms)[0m  [1m[32mINSERT INTO "groups_update_bonuses" ("bonus_id", "target_groups", "update_type", "update_parameters", "batch_size", "processing_status", "created_at", "updated_at") VALUES (188, '["test_group_1", "test_group_2"]', 'bulk_apply', '{"amount": 100}', 50, 'completed', '2025-08-11 22:10:57.230280', '2025-08-11 22:10:57.230280') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:110:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:110:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_D9848566' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_D9848566' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.6ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Deposit Bonus 0731-1', 'BONUS_D9848566', 'deposit', 'active', NULL, NULL, NULL, NULL, '2025-07-31 00:00:00', '2025-07-31 23:59:59.999999', 'test_users', 'heatmap_test, july_2025', 'US', 'USD', NULL, NULL, '2025-08-11 22:10:57.234417', '2025-08-11 22:10:57.234417') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mDepositBonus Create (0.9ms)[0m  [1m[32mINSERT INTO "deposit_bonuses" ("bonus_id", "deposit_amount_required", "bonus_percentage", "max_bonus_amount", "first_deposit_only", "recurring_eligible", "created_at", "updated_at") VALUES (189, 50.0, 100.0, 500.0, 0, 1, '2025-08-11 22:10:57.238579', '2025-08-11 22:10:57.238579') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_FA2DEB06' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_FA2DEB06' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Deposit Bonus 0731-2', 'BONUS_FA2DEB06', 'deposit', 'active', NULL, NULL, NULL, NULL, '2025-07-31 00:01:00', '2025-07-31 23:59:59.999999', 'test_users', 'heatmap_test, july_2025', 'US', 'USD', NULL, NULL, '2025-08-11 22:10:57.243163', '2025-08-11 22:10:57.243163') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mDepositBonus Create (0.8ms)[0m  [1m[32mINSERT INTO "deposit_bonuses" ("bonus_id", "deposit_amount_required", "bonus_percentage", "max_bonus_amount", "first_deposit_only", "recurring_eligible", "created_at", "updated_at") VALUES (190, 50.0, 100.0, 500.0, 0, 1, '2025-08-11 22:10:57.247601', '2025-08-11 22:10:57.247601') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_422F4070' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_422F4070' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.2ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Deposit Bonus 0731-3', 'BONUS_422F4070', 'deposit', 'active', NULL, NULL, NULL, NULL, '2025-07-31 00:02:00', '2025-07-31 23:59:59.999999', 'test_users', 'heatmap_test, july_2025', 'US', 'USD', NULL, NULL, '2025-08-11 22:10:57.252599', '2025-08-11 22:10:57.252599') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mDepositBonus Create (0.6ms)[0m  [1m[32mINSERT INTO "deposit_bonuses" ("bonus_id", "deposit_amount_required", "bonus_percentage", "max_bonus_amount", "first_deposit_only", "recurring_eligible", "created_at", "updated_at") VALUES (191, 50.0, 100.0, 500.0, 0, 1, '2025-08-11 22:10:57.255132', '2025-08-11 22:10:57.255132') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:75:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_1E998E7F' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_1E998E7F' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Manual Bonus 0731-4', 'BONUS_1E998E7F', 'manual', 'active', NULL, NULL, NULL, NULL, '2025-07-31 00:03:00', '2025-07-31 23:59:59.999999', 'test_users', 'heatmap_test, july_2025', 'US', 'USD', NULL, NULL, '2025-08-11 22:10:57.260008', '2025-08-11 22:10:57.260008') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mManualBonus Create (0.7ms)[0m  [1m[32mINSERT INTO "manual_bonuses" ("bonus_id", "admin_notes", "approval_required", "auto_apply", "conditions", "created_at", "updated_at") VALUES (192, 'Test manual bonus for heatmap testing', 0, 1, 'Test conditions for heatmap', '2025-08-11 22:10:57.261764', '2025-08-11 22:10:57.261764') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_62AB9DC4' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_62AB9DC4' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Manual Bonus 0731-5', 'BONUS_62AB9DC4', 'manual', 'active', NULL, NULL, NULL, NULL, '2025-07-31 00:04:00', '2025-07-31 23:59:59.999999', 'test_users', 'heatmap_test, july_2025', 'US', 'USD', NULL, NULL, '2025-08-11 22:10:57.265509', '2025-08-11 22:10:57.265509') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mManualBonus Create (0.6ms)[0m  [1m[32mINSERT INTO "manual_bonuses" ("bonus_id", "admin_notes", "approval_required", "auto_apply", "conditions", "created_at", "updated_at") VALUES (193, 'Test manual bonus for heatmap testing', 0, 1, 'Test conditions for heatmap', '2025-08-11 22:10:57.267154', '2025-08-11 22:10:57.267154') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_B32FADF6' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_B32FADF6' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Manual Bonus 0731-6', 'BONUS_B32FADF6', 'manual', 'active', NULL, NULL, NULL, NULL, '2025-07-31 00:05:00', '2025-07-31 23:59:59.999999', 'test_users', 'heatmap_test, july_2025', 'US', 'USD', NULL, NULL, '2025-08-11 22:10:57.270768', '2025-08-11 22:10:57.270768') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mManualBonus Create (0.6ms)[0m  [1m[32mINSERT INTO "manual_bonuses" ("bonus_id", "admin_notes", "approval_required", "auto_apply", "conditions", "created_at", "updated_at") VALUES (194, 'Test manual bonus for heatmap testing', 0, 1, 'Test conditions for heatmap', '2025-08-11 22:10:57.272365', '2025-08-11 22:10:57.272365') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:93:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_B3B2CDCD' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_B3B2CDCD' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Input coupon Bonus 0731-7', 'BONUS_B3B2CDCD', 'input_coupon', 'active', NULL, NULL, NULL, NULL, '2025-07-31 00:06:00', '2025-07-31 23:59:59.999999', 'test_users', 'heatmap_test, july_2025', 'US', 'USD', NULL, NULL, '2025-08-11 22:10:57.277806', '2025-08-11 22:10:57.277806') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mInputCouponBonus Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."coupon_code" = 'TEST07317671fea' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mInputCouponBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "input_coupon_bonuses" ("bonus_id", "coupon_code", "usage_limit", "usage_count", "expires_at", "single_use", "created_at", "updated_at") VALUES (195, 'TEST07317671fea', 100, 0, '2025-08-18 23:59:59.999999', 0, '2025-08-11 22:10:57.280834', '2025-08-11 22:10:57.280834') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_0445F17A' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_0445F17A' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Input coupon Bonus 0731-8', 'BONUS_0445F17A', 'input_coupon', 'active', NULL, NULL, NULL, NULL, '2025-07-31 00:07:00', '2025-07-31 23:59:59.999999', 'test_users', 'heatmap_test, july_2025', 'US', 'USD', NULL, NULL, '2025-08-11 22:10:57.286648', '2025-08-11 22:10:57.286648') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mInputCouponBonus Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."coupon_code" = 'TEST07318371701' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mInputCouponBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "input_coupon_bonuses" ("bonus_id", "coupon_code", "usage_limit", "usage_count", "expires_at", "single_use", "created_at", "updated_at") VALUES (196, 'TEST07318371701', 100, 0, '2025-08-18 23:59:59.999999', 0, '2025-08-11 22:10:57.290438', '2025-08-11 22:10:57.290438') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:84:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_7AFC2235' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_7AFC2235' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.5ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Collection Bonus 0731-9', 'BONUS_7AFC2235', 'collection', 'active', NULL, NULL, NULL, NULL, '2025-07-31 00:08:00', '2025-07-31 23:59:59.999999', 'test_users', 'heatmap_test, july_2025', 'US', 'USD', NULL, NULL, '2025-08-11 22:10:57.296932', '2025-08-11 22:10:57.296932') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:101:in 'block (4 levels) in <main>'
  [1m[36mCollectBonus Create (0.6ms)[0m  [1m[32mINSERT INTO "collect_bonuses" ("bonus_id", "collection_type", "collection_amount", "collection_frequency", "collection_limit", "collected_count", "created_at", "updated_at") VALUES (197, 'daily', 25.0, 'daily', 1, 0, '2025-08-11 22:10:57.300850', '2025-08-11 22:10:57.300850') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:101:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:101:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_7266F1D5' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_7266F1D5' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Collection Bonus 0731-10', 'BONUS_7266F1D5', 'collection', 'active', NULL, NULL, NULL, NULL, '2025-07-31 00:09:00', '2025-07-31 23:59:59.999999', 'test_users', 'heatmap_test, july_2025', 'US', 'USD', NULL, NULL, '2025-08-11 22:10:57.305543', '2025-08-11 22:10:57.305543') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:101:in 'block (4 levels) in <main>'
  [1m[36mCollectBonus Create (1.5ms)[0m  [1m[32mINSERT INTO "collect_bonuses" ("bonus_id", "collection_type", "collection_amount", "collection_frequency", "collection_limit", "collected_count", "created_at", "updated_at") VALUES (198, 'daily', 25.0, 'daily', 1, 0, '2025-08-11 22:10:57.307870', '2025-08-11 22:10:57.307870') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:101:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:101:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_89B76048' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_89B76048' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Scheduler Bonus 0731-11', 'BONUS_89B76048', 'scheduler', 'active', NULL, NULL, NULL, NULL, '2025-07-31 00:10:00', '2025-07-31 23:59:59.999999', 'test_users', 'heatmap_test, july_2025', 'US', 'USD', NULL, NULL, '2025-08-11 22:10:57.313147', '2025-08-11 22:10:57.313147') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:119:in 'block (4 levels) in <main>'
  [1m[36mSchedulerBonus Create (0.7ms)[0m  [1m[32mINSERT INTO "scheduler_bonuses" ("bonus_id", "schedule_type", "cron_expression", "next_run_at", "last_run_at", "execution_count", "max_executions", "created_at", "updated_at") VALUES (199, 'recurring', '0 12 * * *', '2025-08-01 00:00:00', '2025-07-31 00:00:00', 1, 30, '2025-08-11 22:10:57.314931', '2025-08-11 22:10:57.314931') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:119:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:119:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_87FABCB7' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ app/models/bonus.rb:129:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_87FABCB7' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at") VALUES ('Test Groups update Bonus 0731-12', 'BONUS_87FABCB7', 'groups_update', 'active', NULL, NULL, NULL, NULL, '2025-07-31 00:11:00', '2025-07-31 23:59:59.999999', 'test_users', 'heatmap_test, july_2025', 'US', 'USD', NULL, NULL, '2025-08-11 22:10:57.319989', '2025-08-11 22:10:57.319989') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:60:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:110:in 'block (4 levels) in <main>'
  [1m[36mGroupsUpdateBonus Create (0.7ms)[0m  [1m[32mINSERT INTO "groups_update_bonuses" ("bonus_id", "target_groups", "update_type", "update_parameters", "batch_size", "processing_status", "created_at", "updated_at") VALUES (200, '["test_group_1", "test_group_2"]', 'bulk_apply', '{"amount": 100}', 50, 'completed', '2025-08-11 22:10:57.322835', '2025-08-11 22:10:57.322835') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:110:in 'block (4 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_heatmap_data.rake:110:in 'block (4 levels) in <main>'
Started GET "/heatmap?year=2025&month=7" for ::1 at 2025-08-12 01:11:02 +0300
Processing by HeatmapController#index as HTML
  Parameters: {"year" => "2025", "month" => "7"}
  [1m[36mBonus Count (0.4ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", DATE(availability_start_date) AS "date_availability_start_date" FROM "bonuses" WHERE "bonuses"."availability_start_date" BETWEEN '2025-07-01 00:00:00' AND '2025-07-31 23:59:59.999999' GROUP BY DATE(availability_start_date) /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:39:in 'HeatmapController#generate_heatmap_data'
  [1m[36mBonus Pluck (0.2ms)[0m  [1m[34mSELECT DISTINCT "bonuses"."bonus_type" FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:16:in 'HeatmapController#index'
  Rendering layout layouts/application.html.erb
  Rendering heatmap/index.html.erb within layouts/application
  Rendered heatmap/index.html.erb within layouts/application (Duration: 8.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 14.5ms | GC: 0.0ms)
Completed 200 OK in 39ms (Views: 15.6ms | ActiveRecord: 0.5ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/heatmap?bonus_type=all&month=7&year=2025&commit=Apply+Filter" for ::1 at 2025-08-12 01:11:05 +0300
Processing by HeatmapController#index as HTML
  Parameters: {"bonus_type" => "all", "month" => "7", "year" => "2025", "commit" => "Apply Filter"}
  [1m[36mBonus Count (0.4ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", DATE(availability_start_date) AS "date_availability_start_date" FROM "bonuses" WHERE "bonuses"."availability_start_date" BETWEEN '2025-07-01 00:00:00' AND '2025-07-31 23:59:59.999999' GROUP BY DATE(availability_start_date) /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:39:in 'HeatmapController#generate_heatmap_data'
  [1m[36mBonus Pluck (0.1ms)[0m  [1m[34mSELECT DISTINCT "bonuses"."bonus_type" FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:16:in 'HeatmapController#index'
  Rendering layout layouts/application.html.erb
  Rendering heatmap/index.html.erb within layouts/application
  Rendered heatmap/index.html.erb within layouts/application (Duration: 5.3ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 8.7ms | GC: 0.0ms)
Completed 200 OK in 27ms (Views: 10.2ms | ActiveRecord: 0.5ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/heatmap?year=2025&month=7" for ::1 at 2025-08-12 01:11:26 +0300
Processing by HeatmapController#index as HTML
  Parameters: {"year" => "2025", "month" => "7"}
Heatmap Debug: Start date: 2025-07-01, End date: 2025-07-31
Heatmap Debug: Bonus type filter: all
  [1m[36mBonus Count (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" WHERE "bonuses"."availability_start_date" BETWEEN '2025-07-01 00:00:00' AND '2025-07-31 23:59:59.999999' /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:39:in 'HeatmapController#generate_heatmap_data'
Heatmap Debug: Raw bonuses count: 82
  [1m[36mBonus Count (0.6ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", DATE(availability_start_date) AS "date_availability_start_date" FROM "bonuses" WHERE "bonuses"."availability_start_date" BETWEEN '2025-07-01 00:00:00' AND '2025-07-31 23:59:59.999999' GROUP BY DATE(availability_start_date) /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:44:in 'HeatmapController#generate_heatmap_data'
Heatmap Debug: Bonuses by date: {"2025-07-01" => 1, "2025-07-03" => 2, "2025-07-05" => 3, "2025-07-07" => 5, "2025-07-08" => 1, "2025-07-10" => 4, "2025-07-12" => 2, "2025-07-14" => 6, "2025-07-15" => 7, "2025-07-16" => 9, "2025-07-18" => 3, "2025-07-20" => 8, "2025-07-22" => 4, "2025-07-25" => 5, "2025-07-28" => 10, "2025-07-31" => 12}
Heatmap Debug: Final heatmap data: {"2025-07-01" => {count: 0, intensity: 0.0, date: Tue, 01 Jul 2025}, "2025-07-02" => {count: 0, intensity: 0.0, date: Wed, 02 Jul 2025}, "2025-07-03" => {count: 0, intensity: 0.0, date: Thu, 03 Jul 2025}, "2025-07-04" => {count: 0, intensity: 0.0, date: Fri, 04 Jul 2025}, "2025-07-05" => {count: 0, intensity: 0.0, date: Sat, 05 Jul 2025}, "2025-07-06" => {count: 0, intensity: 0.0, date: Sun, 06 Jul 2025}, "2025-07-07" => {count: 0, intensity: 0.0, date: Mon, 07 Jul 2025}, "2025-07-08" => {count: 0, intensity: 0.0, date: Tue, 08 Jul 2025}, "2025-07-09" => {count: 0, intensity: 0.0, date: Wed, 09 Jul 2025}, "2025-07-10" => {count: 0, intensity: 0.0, date: Thu, 10 Jul 2025}, "2025-07-11" => {count: 0, intensity: 0.0, date: Fri, 11 Jul 2025}, "2025-07-12" => {count: 0, intensity: 0.0, date: Sat, 12 Jul 2025}, "2025-07-13" => {count: 0, intensity: 0.0, date: Sun, 13 Jul 2025}, "2025-07-14" => {count: 0, intensity: 0.0, date: Mon, 14 Jul 2025}, "2025-07-15" => {count: 0, intensity: 0.0, date: Tue, 15 Jul 2025}, "2025-07-16" => {count: 0, intensity: 0.0, date: Wed, 16 Jul 2025}, "2025-07-17" => {count: 0, intensity: 0.0, date: Thu, 17 Jul 2025}, "2025-07-18" => {count: 0, intensity: 0.0, date: Fri, 18 Jul 2025}, "2025-07-19" => {count: 0, intensity: 0.0, date: Sat, 19 Jul 2025}, "2025-07-20" => {count: 0, intensity: 0.0, date: Sun, 20 Jul 2025}, "2025-07-21" => {count: 0, intensity: 0.0, date: Mon, 21 Jul 2025}, "2025-07-22" => {count: 0, intensity: 0.0, date: Tue, 22 Jul 2025}, "2025-07-23" => {count: 0, intensity: 0.0, date: Wed, 23 Jul 2025}, "2025-07-24" => {count: 0, intensity: 0.0, date: Thu, 24 Jul 2025}, "2025-07-25" => {count: 0, intensity: 0.0, date: Fri, 25 Jul 2025}, "2025-07-26" => {count: 0, intensity: 0.0, date: Sat, 26 Jul 2025}, "2025-07-27" => {count: 0, intensity: 0.0, date: Sun, 27 Jul 2025}, "2025-07-28" => {count: 0, intensity: 0.0, date: Mon, 28 Jul 2025}, "2025-07-29" => {count: 0, intensity: 0.0, date: Tue, 29 Jul 2025}, "2025-07-30" => {count: 0, intensity: 0.0, date: Wed, 30 Jul 2025}, "2025-07-31" => {count: 0, intensity: 0.0, date: Thu, 31 Jul 2025}}
  [1m[36mBonus Pluck (0.8ms)[0m  [1m[34mSELECT DISTINCT "bonuses"."bonus_type" FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:16:in 'HeatmapController#index'
  Rendering layout layouts/application.html.erb
  Rendering heatmap/index.html.erb within layouts/application
  Rendered heatmap/index.html.erb within layouts/application (Duration: 11.6ms | GC: 1.0ms)
  Rendered layout layouts/application.html.erb (Duration: 19.8ms | GC: 1.6ms)
Completed 200 OK in 93ms (Views: 21.9ms | ActiveRecord: 9.9ms (3 queries, 0 cached) | GC: 13.1ms)


Started GET "/heatmap?year=2025&month=7" for ::1 at 2025-08-12 01:11:57 +0300
Processing by HeatmapController#index as HTML
  Parameters: {"year" => "2025", "month" => "7"}
  [1m[36mBonus Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", DATE(availability_start_date) AS "date_availability_start_date" FROM "bonuses" WHERE "bonuses"."availability_start_date" BETWEEN '2025-07-01 00:00:00' AND '2025-07-31 23:59:59.999999' GROUP BY DATE(availability_start_date) /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:39:in 'HeatmapController#generate_heatmap_data'
  [1m[36mBonus Pluck (0.2ms)[0m  [1m[34mSELECT DISTINCT "bonuses"."bonus_type" FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:16:in 'HeatmapController#index'
  Rendering layout layouts/application.html.erb
  Rendering heatmap/index.html.erb within layouts/application
  Rendered heatmap/index.html.erb within layouts/application (Duration: 7.8ms | GC: 0.4ms)
  Rendered layout layouts/application.html.erb (Duration: 12.5ms | GC: 0.4ms)
Completed 200 OK in 46ms (Views: 13.8ms | ActiveRecord: 1.1ms (2 queries, 0 cached) | GC: 2.4ms)


Started GET "/heatmap?bonus_type=deposit&month=7&year=2025&commit=Apply+Filter" for ::1 at 2025-08-12 01:12:13 +0300
Processing by HeatmapController#index as HTML
  Parameters: {"bonus_type" => "deposit", "month" => "7", "year" => "2025", "commit" => "Apply Filter"}
  [1m[36mBonus Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", DATE(availability_start_date) AS "date_availability_start_date" FROM "bonuses" WHERE "bonuses"."availability_start_date" BETWEEN '2025-07-01 00:00:00' AND '2025-07-31 23:59:59.999999' AND "bonuses"."bonus_type" = 'deposit' GROUP BY DATE(availability_start_date) /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:39:in 'HeatmapController#generate_heatmap_data'
  [1m[36mBonus Pluck (0.2ms)[0m  [1m[34mSELECT DISTINCT "bonuses"."bonus_type" FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:16:in 'HeatmapController#index'
  Rendering layout layouts/application.html.erb
  Rendering heatmap/index.html.erb within layouts/application
  Rendered heatmap/index.html.erb within layouts/application (Duration: 5.4ms | GC: 0.6ms)
  Rendered layout layouts/application.html.erb (Duration: 8.4ms | GC: 0.6ms)
Completed 200 OK in 36ms (Views: 9.1ms | ActiveRecord: 0.5ms (2 queries, 0 cached) | GC: 0.6ms)


Started GET "/heatmap?bonus_type=deposit&month=8&year=2025" for ::1 at 2025-08-12 01:12:23 +0300
Processing by HeatmapController#index as HTML
  Parameters: {"bonus_type" => "deposit", "month" => "8", "year" => "2025"}
  [1m[36mBonus Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", DATE(availability_start_date) AS "date_availability_start_date" FROM "bonuses" WHERE "bonuses"."availability_start_date" BETWEEN '2025-08-01 00:00:00' AND '2025-08-31 23:59:59.999999' AND "bonuses"."bonus_type" = 'deposit' GROUP BY DATE(availability_start_date) /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:39:in 'HeatmapController#generate_heatmap_data'
  [1m[36mBonus Pluck (0.1ms)[0m  [1m[34mSELECT DISTINCT "bonuses"."bonus_type" FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:16:in 'HeatmapController#index'
  Rendering layout layouts/application.html.erb
  Rendering heatmap/index.html.erb within layouts/application
  Rendered heatmap/index.html.erb within layouts/application (Duration: 7.8ms | GC: 0.3ms)
  Rendered layout layouts/application.html.erb (Duration: 11.3ms | GC: 0.3ms)
Completed 200 OK in 34ms (Views: 13.6ms | ActiveRecord: 0.3ms (2 queries, 0 cached) | GC: 0.3ms)


Started GET "/heatmap?bonus_type=deposit&month=9&year=2025" for ::1 at 2025-08-12 01:12:23 +0300
Processing by HeatmapController#index as HTML
  Parameters: {"bonus_type" => "deposit", "month" => "9", "year" => "2025"}
  [1m[36mBonus Count (0.4ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", DATE(availability_start_date) AS "date_availability_start_date" FROM "bonuses" WHERE "bonuses"."availability_start_date" BETWEEN '2025-09-01 00:00:00' AND '2025-09-30 23:59:59.999999' AND "bonuses"."bonus_type" = 'deposit' GROUP BY DATE(availability_start_date) /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:39:in 'HeatmapController#generate_heatmap_data'
  [1m[36mBonus Pluck (0.1ms)[0m  [1m[34mSELECT DISTINCT "bonuses"."bonus_type" FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:16:in 'HeatmapController#index'
  Rendering layout layouts/application.html.erb
  Rendering heatmap/index.html.erb within layouts/application
  Rendered heatmap/index.html.erb within layouts/application (Duration: 5.3ms | GC: 0.2ms)
  Rendered layout layouts/application.html.erb (Duration: 7.1ms | GC: 0.2ms)
Completed 200 OK in 35ms (Views: 7.8ms | ActiveRecord: 0.5ms (2 queries, 0 cached) | GC: 0.6ms)


Started GET "/heatmap?bonus_type=deposit&month=7&year=2025" for ::1 at 2025-08-12 01:12:28 +0300
Processing by HeatmapController#index as HTML
  Parameters: {"bonus_type" => "deposit", "month" => "7", "year" => "2025"}
  [1m[36mBonus Count (0.5ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", DATE(availability_start_date) AS "date_availability_start_date" FROM "bonuses" WHERE "bonuses"."availability_start_date" BETWEEN '2025-07-01 00:00:00' AND '2025-07-31 23:59:59.999999' AND "bonuses"."bonus_type" = 'deposit' GROUP BY DATE(availability_start_date) /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:39:in 'HeatmapController#generate_heatmap_data'
  [1m[36mBonus Pluck (0.2ms)[0m  [1m[34mSELECT DISTINCT "bonuses"."bonus_type" FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:16:in 'HeatmapController#index'
  Rendering layout layouts/application.html.erb
  Rendering heatmap/index.html.erb within layouts/application
  Rendered heatmap/index.html.erb within layouts/application (Duration: 3.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 4.7ms | GC: 0.0ms)
Completed 200 OK in 25ms (Views: 5.4ms | ActiveRecord: 0.6ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/heatmap?bonus_type=deposit&month=6&year=2025" for ::1 at 2025-08-12 01:12:28 +0300
Processing by HeatmapController#index as HTML
  Parameters: {"bonus_type" => "deposit", "month" => "6", "year" => "2025"}
  [1m[36mBonus Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", DATE(availability_start_date) AS "date_availability_start_date" FROM "bonuses" WHERE "bonuses"."availability_start_date" BETWEEN '2025-06-01 00:00:00' AND '2025-06-30 23:59:59.999999' AND "bonuses"."bonus_type" = 'deposit' GROUP BY DATE(availability_start_date) /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:39:in 'HeatmapController#generate_heatmap_data'
  [1m[36mBonus Pluck (0.2ms)[0m  [1m[34mSELECT DISTINCT "bonuses"."bonus_type" FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:16:in 'HeatmapController#index'
  Rendering layout layouts/application.html.erb
  Rendering heatmap/index.html.erb within layouts/application
  Rendered heatmap/index.html.erb within layouts/application (Duration: 3.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 4.6ms | GC: 0.0ms)
Completed 200 OK in 23ms (Views: 5.0ms | ActiveRecord: 0.4ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/" for ::1 at 2025-08-12 01:12:46 +0300
Processing by BonusesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:59
  [1m[36mBonus Load (4.8ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."created_at" DESC LIMIT 20 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mDepositBonus Load (0.2ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182, 181) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182, 181) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mManualBonus Load (1.4ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182, 181) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mCollectBonus Load (1.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182, 181) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mGroupsUpdateBonus Load (1.3ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182, 181) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mSchedulerBonus Load (3.9ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182, 181) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  Rendered bonuses/index.html.erb within layouts/application (Duration: 392.0ms | GC: 10.8ms)
  Rendered layout layouts/application.html.erb (Duration: 406.0ms | GC: 10.8ms)
Completed 200 OK in 429ms (Views: 390.0ms | ActiveRecord: 16.7ms (8 queries, 0 cached) | GC: 10.8ms)


Started GET "/heatmap?bonus_type=all&month=7&year=2024&commit=Apply+Filter" for ::1 at 2025-08-12 01:12:46 +0300
Processing by HeatmapController#index as HTML
  Parameters: {"bonus_type" => "all", "month" => "7", "year" => "2024", "commit" => "Apply Filter"}
  [1m[36mBonus Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", DATE(availability_start_date) AS "date_availability_start_date" FROM "bonuses" WHERE "bonuses"."availability_start_date" BETWEEN '2024-07-01 00:00:00' AND '2024-07-31 23:59:59.999999' GROUP BY DATE(availability_start_date) /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:39:in 'HeatmapController#generate_heatmap_data'
  [1m[36mBonus Pluck (0.1ms)[0m  [1m[34mSELECT DISTINCT "bonuses"."bonus_type" FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:16:in 'HeatmapController#index'
  Rendering layout layouts/application.html.erb
  Rendering heatmap/index.html.erb within layouts/application
  Rendered heatmap/index.html.erb within layouts/application (Duration: 6.2ms | GC: 0.5ms)
  Rendered layout layouts/application.html.erb (Duration: 9.5ms | GC: 0.5ms)
Completed 200 OK in 32ms (Views: 10.0ms | ActiveRecord: 0.3ms (2 queries, 0 cached) | GC: 0.5ms)


Started GET "/bonuses" for ::1 at 2025-08-12 01:15:31 +0300
Processing by BonusesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:59
  [1m[36mBonus Load (2.7ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."created_at" DESC LIMIT 20 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182, 181) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182, 181) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182, 181) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mCollectBonus Load (0.3ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182, 181) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mGroupsUpdateBonus Load (0.5ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182, 181) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mSchedulerBonus Load (0.2ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182, 181) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  Rendered bonuses/index.html.erb within layouts/application (Duration: 98.9ms | GC: 0.6ms)
  Rendered layout layouts/application.html.erb (Duration: 103.7ms | GC: 0.6ms)
Completed 200 OK in 128ms (Views: 96.1ms | ActiveRecord: 9.8ms (8 queries, 0 cached) | GC: 1.2ms)


Started GET "/heatmap" for ::1 at 2025-08-12 01:15:39 +0300
Processing by HeatmapController#index as HTML
  [1m[36mBonus Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", DATE(availability_start_date) AS "date_availability_start_date" FROM "bonuses" WHERE "bonuses"."availability_start_date" BETWEEN '2025-08-01 00:00:00' AND '2025-08-31 23:59:59.999999' GROUP BY DATE(availability_start_date) /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:39:in 'HeatmapController#generate_heatmap_data'
  [1m[36mBonus Pluck (0.2ms)[0m  [1m[34mSELECT DISTINCT "bonuses"."bonus_type" FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:16:in 'HeatmapController#index'
  Rendering layout layouts/application.html.erb
  Rendering heatmap/index.html.erb within layouts/application
  Rendered heatmap/index.html.erb within layouts/application (Duration: 9.3ms | GC: 1.0ms)
  Rendered layout layouts/application.html.erb (Duration: 14.4ms | GC: 1.5ms)
Completed 200 OK in 48ms (Views: 15.2ms | ActiveRecord: 0.4ms (2 queries, 0 cached) | GC: 8.5ms)


Started GET "/heatmap?bonus_type=all&month=7&year=2025" for ::1 at 2025-08-12 01:15:42 +0300
Processing by HeatmapController#index as HTML
  Parameters: {"bonus_type" => "all", "month" => "7", "year" => "2025"}
  [1m[36mBonus Count (1.2ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", DATE(availability_start_date) AS "date_availability_start_date" FROM "bonuses" WHERE "bonuses"."availability_start_date" BETWEEN '2025-07-01 00:00:00' AND '2025-07-31 23:59:59.999999' GROUP BY DATE(availability_start_date) /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:39:in 'HeatmapController#generate_heatmap_data'
  [1m[36mBonus Pluck (0.1ms)[0m  [1m[34mSELECT DISTINCT "bonuses"."bonus_type" FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:16:in 'HeatmapController#index'
  Rendering layout layouts/application.html.erb
  Rendering heatmap/index.html.erb within layouts/application
  Rendered heatmap/index.html.erb within layouts/application (Duration: 5.8ms | GC: 0.7ms)
  Rendered layout layouts/application.html.erb (Duration: 8.1ms | GC: 0.7ms)
Completed 200 OK in 25ms (Views: 8.7ms | ActiveRecord: 1.3ms (2 queries, 0 cached) | GC: 0.7ms)


Started GET "/heatmap?bonus_type=all&month=6&year=2025" for ::1 at 2025-08-12 01:15:43 +0300
Processing by HeatmapController#index as HTML
  Parameters: {"bonus_type" => "all", "month" => "6", "year" => "2025"}
  [1m[36mBonus Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", DATE(availability_start_date) AS "date_availability_start_date" FROM "bonuses" WHERE "bonuses"."availability_start_date" BETWEEN '2025-06-01 00:00:00' AND '2025-06-30 23:59:59.999999' GROUP BY DATE(availability_start_date) /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:39:in 'HeatmapController#generate_heatmap_data'
  [1m[36mBonus Pluck (0.1ms)[0m  [1m[34mSELECT DISTINCT "bonuses"."bonus_type" FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:16:in 'HeatmapController#index'
  Rendering layout layouts/application.html.erb
  Rendering heatmap/index.html.erb within layouts/application
  Rendered heatmap/index.html.erb within layouts/application (Duration: 3.7ms | GC: 0.5ms)
  Rendered layout layouts/application.html.erb (Duration: 5.7ms | GC: 0.5ms)
Completed 200 OK in 20ms (Views: 6.9ms | ActiveRecord: 0.2ms (2 queries, 0 cached) | GC: 1.1ms)


Started GET "/heatmap?bonus_type=all&month=6&year=2025" for ::1 at 2025-08-12 01:15:44 +0300
Processing by HeatmapController#index as HTML
  Parameters: {"bonus_type" => "all", "month" => "6", "year" => "2025"}
  [1m[36mBonus Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", DATE(availability_start_date) AS "date_availability_start_date" FROM "bonuses" WHERE "bonuses"."availability_start_date" BETWEEN '2025-06-01 00:00:00' AND '2025-06-30 23:59:59.999999' GROUP BY DATE(availability_start_date) /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:39:in 'HeatmapController#generate_heatmap_data'
  [1m[36mBonus Pluck (0.1ms)[0m  [1m[34mSELECT DISTINCT "bonuses"."bonus_type" FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:16:in 'HeatmapController#index'
  Rendering layout layouts/application.html.erb
  Rendering heatmap/index.html.erb within layouts/application
  Rendered heatmap/index.html.erb within layouts/application (Duration: 7.2ms | GC: 1.0ms)
  Rendered layout layouts/application.html.erb (Duration: 10.8ms | GC: 1.0ms)
Completed 200 OK in 29ms (Views: 12.3ms | ActiveRecord: 0.3ms (2 queries, 0 cached) | GC: 1.0ms)


Started GET "/heatmap?bonus_type=all&month=5&year=2025" for ::1 at 2025-08-12 01:15:44 +0300
Processing by HeatmapController#index as HTML
  Parameters: {"bonus_type" => "all", "month" => "5", "year" => "2025"}
  [1m[36mBonus Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", DATE(availability_start_date) AS "date_availability_start_date" FROM "bonuses" WHERE "bonuses"."availability_start_date" BETWEEN '2025-05-01 00:00:00' AND '2025-05-31 23:59:59.999999' GROUP BY DATE(availability_start_date) /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:39:in 'HeatmapController#generate_heatmap_data'
  [1m[36mBonus Pluck (0.1ms)[0m  [1m[34mSELECT DISTINCT "bonuses"."bonus_type" FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:16:in 'HeatmapController#index'
  Rendering layout layouts/application.html.erb
  Rendering heatmap/index.html.erb within layouts/application
  Rendered heatmap/index.html.erb within layouts/application (Duration: 5.0ms | GC: 0.6ms)
  Rendered layout layouts/application.html.erb (Duration: 7.2ms | GC: 0.6ms)
Completed 200 OK in 22ms (Views: 8.3ms | ActiveRecord: 0.4ms (2 queries, 0 cached) | GC: 1.1ms)


Started GET "/heatmap?bonus_type=all&month=7&year=2025" for ::1 at 2025-08-12 01:15:45 +0300
Processing by HeatmapController#index as HTML
  Parameters: {"bonus_type" => "all", "month" => "7", "year" => "2025"}
  [1m[36mBonus Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", DATE(availability_start_date) AS "date_availability_start_date" FROM "bonuses" WHERE "bonuses"."availability_start_date" BETWEEN '2025-07-01 00:00:00' AND '2025-07-31 23:59:59.999999' GROUP BY DATE(availability_start_date) /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:39:in 'HeatmapController#generate_heatmap_data'
  [1m[36mBonus Pluck (0.4ms)[0m  [1m[34mSELECT DISTINCT "bonuses"."bonus_type" FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:16:in 'HeatmapController#index'
  Rendering layout layouts/application.html.erb
  Rendering heatmap/index.html.erb within layouts/application
  Rendered heatmap/index.html.erb within layouts/application (Duration: 3.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 6.2ms | GC: 0.0ms)
Completed 200 OK in 20ms (Views: 6.8ms | ActiveRecord: 0.6ms (2 queries, 0 cached) | GC: 0.6ms)


Started GET "/heatmap?bonus_type=all&month=8&year=2025" for ::1 at 2025-08-12 01:15:45 +0300
Processing by HeatmapController#index as HTML
  Parameters: {"bonus_type" => "all", "month" => "8", "year" => "2025"}
  [1m[36mBonus Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", DATE(availability_start_date) AS "date_availability_start_date" FROM "bonuses" WHERE "bonuses"."availability_start_date" BETWEEN '2025-08-01 00:00:00' AND '2025-08-31 23:59:59.999999' GROUP BY DATE(availability_start_date) /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:39:in 'HeatmapController#generate_heatmap_data'
  [1m[36mBonus Pluck (0.1ms)[0m  [1m[34mSELECT DISTINCT "bonuses"."bonus_type" FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:16:in 'HeatmapController#index'
  Rendering layout layouts/application.html.erb
  Rendering heatmap/index.html.erb within layouts/application
  Rendered heatmap/index.html.erb within layouts/application (Duration: 2.6ms | GC: 0.5ms)
  Rendered layout layouts/application.html.erb (Duration: 3.6ms | GC: 0.5ms)
Completed 200 OK in 16ms (Views: 3.9ms | ActiveRecord: 0.2ms (2 queries, 0 cached) | GC: 0.5ms)


Started GET "/heatmap?bonus_type=collection&month=7&year=2025&commit=Apply+Filter" for ::1 at 2025-08-12 01:15:49 +0300
Processing by HeatmapController#index as HTML
  Parameters: {"bonus_type" => "collection", "month" => "7", "year" => "2025", "commit" => "Apply Filter"}
  [1m[36mBonus Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", DATE(availability_start_date) AS "date_availability_start_date" FROM "bonuses" WHERE "bonuses"."availability_start_date" BETWEEN '2025-07-01 00:00:00' AND '2025-07-31 23:59:59.999999' AND "bonuses"."bonus_type" = 'collection' GROUP BY DATE(availability_start_date) /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:39:in 'HeatmapController#generate_heatmap_data'
  [1m[36mBonus Pluck (0.1ms)[0m  [1m[34mSELECT DISTINCT "bonuses"."bonus_type" FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:16:in 'HeatmapController#index'
  Rendering layout layouts/application.html.erb
  Rendering heatmap/index.html.erb within layouts/application
  Rendered heatmap/index.html.erb within layouts/application (Duration: 2.0ms | GC: 0.2ms)
  Rendered layout layouts/application.html.erb (Duration: 2.9ms | GC: 0.2ms)
Completed 200 OK in 17ms (Views: 3.2ms | ActiveRecord: 0.3ms (2 queries, 0 cached) | GC: 0.7ms)


Started GET "/heatmap?bonus_type=deposit&month=7&year=2025&commit=Apply+Filter" for ::1 at 2025-08-12 01:15:52 +0300
Processing by HeatmapController#index as HTML
  Parameters: {"bonus_type" => "deposit", "month" => "7", "year" => "2025", "commit" => "Apply Filter"}
  [1m[36mBonus Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", DATE(availability_start_date) AS "date_availability_start_date" FROM "bonuses" WHERE "bonuses"."availability_start_date" BETWEEN '2025-07-01 00:00:00' AND '2025-07-31 23:59:59.999999' AND "bonuses"."bonus_type" = 'deposit' GROUP BY DATE(availability_start_date) /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:39:in 'HeatmapController#generate_heatmap_data'
  [1m[36mBonus Pluck (0.1ms)[0m  [1m[34mSELECT DISTINCT "bonuses"."bonus_type" FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:16:in 'HeatmapController#index'
  Rendering layout layouts/application.html.erb
  Rendering heatmap/index.html.erb within layouts/application
  Rendered heatmap/index.html.erb within layouts/application (Duration: 128.1ms | GC: 16.6ms)
  Rendered layout layouts/application.html.erb (Duration: 199.3ms | GC: 26.3ms)
Completed 200 OK in 216ms (Views: 201.4ms | ActiveRecord: 0.4ms (2 queries, 0 cached) | GC: 26.3ms)


Started GET "/heatmap?bonus_type=groups_update&month=7&year=2025&commit=Apply+Filter" for ::1 at 2025-08-12 01:15:56 +0300
Processing by HeatmapController#index as HTML
  Parameters: {"bonus_type" => "groups_update", "month" => "7", "year" => "2025", "commit" => "Apply Filter"}
  [1m[36mBonus Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", DATE(availability_start_date) AS "date_availability_start_date" FROM "bonuses" WHERE "bonuses"."availability_start_date" BETWEEN '2025-07-01 00:00:00' AND '2025-07-31 23:59:59.999999' AND "bonuses"."bonus_type" = 'groups_update' GROUP BY DATE(availability_start_date) /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:39:in 'HeatmapController#generate_heatmap_data'
  [1m[36mBonus Pluck (0.2ms)[0m  [1m[34mSELECT DISTINCT "bonuses"."bonus_type" FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:16:in 'HeatmapController#index'
  Rendering layout layouts/application.html.erb
  Rendering heatmap/index.html.erb within layouts/application
  Rendered heatmap/index.html.erb within layouts/application (Duration: 98.5ms | GC: 20.2ms)
  Rendered layout layouts/application.html.erb (Duration: 106.4ms | GC: 21.4ms)
Completed 200 OK in 163ms (Views: 107.2ms | ActiveRecord: 0.3ms (2 queries, 0 cached) | GC: 30.1ms)


Started GET "/bonuses" for ::1 at 2025-08-12 01:16:02 +0300
Processing by BonusesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:59
  [1m[36mBonus Load (6.3ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."created_at" DESC LIMIT 20 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mDepositBonus Load (0.2ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182, 181) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mInputCouponBonus Load (0.2ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182, 181) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mManualBonus Load (0.2ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182, 181) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mCollectBonus Load (0.2ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182, 181) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mGroupsUpdateBonus Load (0.2ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182, 181) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mSchedulerBonus Load (3.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182, 181) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  Rendered bonuses/index.html.erb within layouts/application (Duration: 156.4ms | GC: 34.5ms)
  Rendered layout layouts/application.html.erb (Duration: 159.3ms | GC: 34.8ms)
Completed 200 OK in 178ms (Views: 150.0ms | ActiveRecord: 10.4ms (8 queries, 0 cached) | GC: 36.2ms)


Started GET "/bonuses/new?type=input_coupon" for ::1 at 2025-08-12 01:16:04 +0300
Processing by BonusesController#new as HTML
  Parameters: {"type" => "input_coupon"}
  Rendering layout layouts/application.html.erb
  Rendering bonuses/new.html.erb within layouts/application
  Rendered bonuses/_type_specific_form.html.erb (Duration: 3.8ms | GC: 0.0ms)
  Rendered bonuses/new.html.erb within layouts/application (Duration: 19.2ms | GC: 3.4ms)
  Rendered layout layouts/application.html.erb (Duration: 21.0ms | GC: 3.4ms)
Completed 200 OK in 47ms (Views: 21.7ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 4.0ms)


Started GET "/bonuses/new?type=deposit" for ::1 at 2025-08-12 01:16:24 +0300
Processing by BonusesController#new as HTML
  Parameters: {"type" => "deposit"}
  Rendering layout layouts/application.html.erb
  Rendering bonuses/new.html.erb within layouts/application
  Rendered bonuses/_type_specific_form.html.erb (Duration: 7.3ms | GC: 1.7ms)
  Rendered bonuses/new.html.erb within layouts/application (Duration: 13.7ms | GC: 1.7ms)
  Rendered layout layouts/application.html.erb (Duration: 15.8ms | GC: 1.7ms)
Completed 200 OK in 29ms (Views: 16.7ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 1.7ms)


Started GET "/bonuses" for ::1 at 2025-08-12 01:16:35 +0300
Processing by BonusesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:59
  [1m[36mBonus Load (0.3ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."created_at" DESC LIMIT 20 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mDepositBonus Load (0.2ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182, 181) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mInputCouponBonus Load (0.5ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182, 181) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182, 181) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mCollectBonus Load (0.2ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182, 181) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182, 181) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mSchedulerBonus Load (0.2ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182, 181) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  Rendered bonuses/index.html.erb within layouts/application (Duration: 35.4ms | GC: 3.7ms)
  Rendered layout layouts/application.html.erb (Duration: 39.0ms | GC: 4.8ms)
Completed 200 OK in 52ms (Views: 37.7ms | ActiveRecord: 1.8ms (8 queries, 0 cached) | GC: 4.8ms)


Started GET "/api/v1/bonuses" for ::1 at 2025-08-12 01:16:36 +0300
Processing by Api::V1::BonusesController#index as HTML
  [1m[36mBonus Count (1.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/api/v1/bonuses_controller.rb:20:in 'Api::V1::BonusesController#index'
  [1m[36mBonus Load (1.7ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."created_at" DESC LIMIT 20 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/api/v1/bonuses_controller.rb:24:in 'Api::V1::BonusesController#index'
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182, 181) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/api/v1/bonuses_controller.rb:24:in 'Api::V1::BonusesController#index'
  [1m[36mInputCouponBonus Load (0.2ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182, 181) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/api/v1/bonuses_controller.rb:24:in 'Api::V1::BonusesController#index'
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182, 181) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/api/v1/bonuses_controller.rb:24:in 'Api::V1::BonusesController#index'
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182, 181) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/api/v1/bonuses_controller.rb:24:in 'Api::V1::BonusesController#index'
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182, 181) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/api/v1/bonuses_controller.rb:24:in 'Api::V1::BonusesController#index'
  [1m[36mSchedulerBonus Load (0.3ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182, 181) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/api/v1/bonuses_controller.rb:24:in 'Api::V1::BonusesController#index'
Completed 200 OK in 34ms (Views: 2.3ms | ActiveRecord: 3.8ms (8 queries, 0 cached) | GC: 2.3ms)


Started GET "/heatmap" for ::1 at 2025-08-12 01:16:52 +0300
Processing by HeatmapController#index as HTML
  [1m[36mBonus Count (0.8ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", DATE(availability_start_date) AS "date_availability_start_date" FROM "bonuses" WHERE "bonuses"."availability_start_date" BETWEEN '2025-08-01 00:00:00' AND '2025-08-31 23:59:59.999999' GROUP BY DATE(availability_start_date) /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:39:in 'HeatmapController#generate_heatmap_data'
  [1m[36mBonus Pluck (0.1ms)[0m  [1m[34mSELECT DISTINCT "bonuses"."bonus_type" FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:16:in 'HeatmapController#index'
  Rendering layout layouts/application.html.erb
  Rendering heatmap/index.html.erb within layouts/application
  Rendered heatmap/index.html.erb within layouts/application (Duration: 15.5ms | GC: 3.8ms)
  Rendered layout layouts/application.html.erb (Duration: 19.3ms | GC: 3.8ms)
Completed 200 OK in 35ms (Views: 19.8ms | ActiveRecord: 0.8ms (2 queries, 0 cached) | GC: 3.8ms)


Started GET "/bonuses?page=2" for ::1 at 2025-08-12 01:16:59 +0300
Processing by BonusesController#index as HTML
  Parameters: {"page" => "2"}
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 20 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:59
  [1m[36mBonus Load (0.3ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."created_at" DESC LIMIT 20 OFFSET 20 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mDepositBonus Load (0.2ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (180, 179, 178, 177, 176, 175, 174, 173, 172, 171, 170, 169, 168, 167, 166, 165, 164, 163, 162, 161) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mInputCouponBonus Load (0.3ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (180, 179, 178, 177, 176, 175, 174, 173, 172, 171, 170, 169, 168, 167, 166, 165, 164, 163, 162, 161) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mManualBonus Load (0.2ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (180, 179, 178, 177, 176, 175, 174, 173, 172, 171, 170, 169, 168, 167, 166, 165, 164, 163, 162, 161) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mCollectBonus Load (0.2ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (180, 179, 178, 177, 176, 175, 174, 173, 172, 171, 170, 169, 168, 167, 166, 165, 164, 163, 162, 161) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mGroupsUpdateBonus Load (0.2ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (180, 179, 178, 177, 176, 175, 174, 173, 172, 171, 170, 169, 168, 167, 166, 165, 164, 163, 162, 161) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mSchedulerBonus Load (0.3ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (180, 179, 178, 177, 176, 175, 174, 173, 172, 171, 170, 169, 168, 167, 166, 165, 164, 163, 162, 161) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
[31mUnpermitted parameter: :page. Context: { controller: BonusesController, action: index, request: #<ActionDispatch::Request:0x000076582d9cff08>, params: {"page" => "2", "controller" => "bonuses", "action" => "index"} }[0m
[31mUnpermitted parameter: :page. Context: { controller: BonusesController, action: index, request: #<ActionDispatch::Request:0x000076582d9cff08>, params: {"page" => "2", "controller" => "bonuses", "action" => "index"} }[0m
  Rendered bonuses/index.html.erb within layouts/application (Duration: 46.7ms | GC: 5.0ms)
  Rendered layout layouts/application.html.erb (Duration: 48.6ms | GC: 5.0ms)
Completed 200 OK in 61ms (Views: 47.3ms | ActiveRecord: 1.7ms (8 queries, 0 cached) | GC: 5.0ms)


Started GET "/" for ::1 at 2025-08-12 22:33:36 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='MbsPromoRetention'*/[0m
Processing by BonusesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (2.9ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:59
  [1m[36mBonus Load (2.3ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."created_at" DESC LIMIT 20 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182, 181) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mInputCouponBonus Load (0.2ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182, 181) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mManualBonus Load (0.2ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182, 181) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mCollectBonus Load (0.2ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182, 181) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mGroupsUpdateBonus Load (0.2ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182, 181) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182, 181) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:76
  Rendered bonuses/index.html.erb within layouts/application (Duration: 142.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 153.6ms | GC: 0.0ms)
Completed 200 OK in 221ms (Views: 144.5ms | ActiveRecord: 13.7ms (8 queries, 0 cached) | GC: 0.4ms)


  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='MbsPromoRetention'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='MbsPromoRetention'*/[0m
Migrating to AddProjectAndDslTagToBonuses (20250812193953)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  [1m[35m (2.5ms)[0m  [1m[35mALTER TABLE "bonuses" ADD "project" varchar /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "bonuses" ADD "dsl_tag" varchar /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE INDEX "index_bonuses_on_project" ON "bonuses" ("project") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_bonuses_on_dsl_tag" ON "bonuses" ("dsl_tag") /*application='MbsPromoRetention'*/[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20250812193953') RETURNING "version" /*application='MbsPromoRetention'*/[0m
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='MbsPromoRetention'*/[0m
Started GET "/bonuses" for ::1 at 2025-08-12 22:41:45 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='MbsPromoRetention'*/[0m
Processing by BonusesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (1.8ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.7ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."created_at" DESC LIMIT 20 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.3ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182, 181) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.2ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182, 181) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.9ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182, 181) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182, 181) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.2ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182, 181) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.2ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182, 181) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 114.3ms | GC: 18.9ms)
  Rendered layout layouts/application.html.erb (Duration: 117.1ms | GC: 18.9ms)
Completed 200 OK in 148ms (Views: 116.6ms | ActiveRecord: 4.3ms (8 queries, 0 cached) | GC: 19.3ms)


Started GET "/bonuses/new?type=deposit" for ::1 at 2025-08-12 22:41:54 +0300
Processing by BonusesController#new as HTML
  Parameters: {"type" => "deposit"}
  Rendering layout layouts/application.html.erb
  Rendering bonuses/new.html.erb within layouts/application
  Rendered bonuses/_type_specific_form.html.erb (Duration: 9.5ms | GC: 0.5ms)
  Rendered bonuses/new.html.erb within layouts/application (Duration: 28.9ms | GC: 0.8ms)
  Rendered layout layouts/application.html.erb (Duration: 29.8ms | GC: 0.8ms)
Completed 200 OK in 57ms (Views: 32.6ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.8ms)


Started POST "/bonuses" for ::1 at 2025-08-12 22:42:30 +0300
Processing by BonusesController#create as TURBO_STREAM
  Parameters: {"authenticity_token" => "[FILTERED]", "bonus" => {"name" => "Test Bonus with Project and DSL Tag", "code" => "", "bonus_type" => "deposit", "status" => "draft", "currency" => "USD", "country" => "", "user_group" => "", "tags" => "", "project" => "VOLNA", "dsl_tag" => "test_bonus_volna_001", "minimum_deposit" => "", "wager" => "", "maximum_winnings" => "", "wagering_strategy" => "", "availability_start_date" => "2025-08-12T19:41", "availability_end_date" => "2025-09-12T19:41"}, "deposit_bonus" => {"deposit_amount_required" => "100", "bonus_percentage" => "50", "max_bonus_amount" => "", "first_deposit_only" => "0", "recurring_eligible" => "0"}, "commit" => "Create Bonus"}
Completed 500 Internal Server Error in 15ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.4ms)


  
ActiveModel::UnknownAttributeError (unknown attribute 'project' for Bonus.)
Caused by: NoMethodError (undefined method 'project=' for an instance of Bonus)

Information for: ActiveModel::UnknownAttributeError (unknown attribute 'project' for Bonus.):
  
app/controllers/bonuses_controller.rb:78:in 'BonusesController#create'

Information for cause: NoMethodError (undefined method 'project=' for an instance of Bonus):
  
app/controllers/bonuses_controller.rb:78:in 'BonusesController#create'
Started GET "/bonuses/new?type=deposit" for ::1 at 2025-08-12 22:42:51 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='MbsPromoRetention'*/[0m
Processing by BonusesController#new as HTML
  Parameters: {"type" => "deposit"}
  Rendering layout layouts/application.html.erb
  Rendering bonuses/new.html.erb within layouts/application
  Rendered bonuses/_type_specific_form.html.erb (Duration: 7.7ms | GC: 1.7ms)
  Rendered bonuses/new.html.erb within layouts/application (Duration: 17.8ms | GC: 1.7ms)
  Rendered layout layouts/application.html.erb (Duration: 28.3ms | GC: 3.5ms)
Completed 200 OK in 86ms (Views: 32.3ms | ActiveRecord: 3.0ms (0 queries, 0 cached) | GC: 12.4ms)


Started POST "/bonuses" for ::1 at 2025-08-12 22:43:14 +0300
Processing by BonusesController#create as TURBO_STREAM
  Parameters: {"authenticity_token" => "[FILTERED]", "bonus" => {"name" => "Test Bonus with Project and DSL Tag", "code" => "", "bonus_type" => "deposit", "status" => "draft", "currency" => "USD", "country" => "", "user_group" => "", "tags" => "", "project" => "VOLNA", "dsl_tag" => "test_bonus_volna_001", "minimum_deposit" => "", "wager" => "", "maximum_winnings" => "", "wagering_strategy" => "", "availability_start_date" => "2025-08-12T19:42", "availability_end_date" => "2025-09-12T19:42"}, "deposit_bonus" => {"deposit_amount_required" => "100", "bonus_percentage" => "50", "max_bonus_amount" => "", "first_deposit_only" => "0", "recurring_eligible" => "0"}, "commit" => "Create Bonus"}
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/models/bonus.rb:134:in 'block in Bonus#generate_code'
  [1m[36mBonus Exists? (3.8ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_7EE48A23' LIMIT 1 /*action='create',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/models/bonus.rb:134:in 'block in Bonus#generate_code'
  [1m[36mCACHE Bonus Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'BONUS_7EE48A23' LIMIT 1[0m
  ↳ app/controllers/bonuses_controller.rb:82:in 'block in BonusesController#create'
  [1m[36mBonus Create (0.2ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at", "project", "dsl_tag") VALUES ('Test Bonus with Project and DSL Tag', 'BONUS_7EE48A23', 'deposit', 'draft', NULL, NULL, NULL, '', '2025-08-12 19:42:00', '2025-09-12 19:42:00', '', '', '', 'USD', NULL, NULL, '2025-08-12 19:43:14.783145', '2025-08-12 19:43:14.783145', 'VOLNA', 'test_bonus_volna_001') RETURNING "id" /*action='create',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:82:in 'block in BonusesController#create'
  [1m[36mTRANSACTION (2.2ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:82:in 'block in BonusesController#create'
  [1m[36mDepositBonus Load (0.5ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 201 LIMIT 1 /*action='create',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:247:in 'BonusesController#update_type_specific_attributes'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:250:in 'BonusesController#update_type_specific_attributes'
  [1m[36mDepositBonus Create (3.4ms)[0m  [1m[32mINSERT INTO "deposit_bonuses" ("bonus_id", "deposit_amount_required", "bonus_percentage", "max_bonus_amount", "first_deposit_only", "recurring_eligible", "created_at", "updated_at") VALUES (201, 100.0, 50.0, NULL, 0, 0, '2025-08-12 19:43:14.826091', '2025-08-12 19:43:14.826091') RETURNING "id" /*action='create',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:250:in 'BonusesController#update_type_specific_attributes'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:250:in 'BonusesController#update_type_specific_attributes'
Redirected to http://localhost:3000/bonuses/201
Completed 302 Found in 115ms (ActiveRecord: 13.3ms (5 queries, 1 cached) | GC: 31.0ms)


Started GET "/bonuses/201" for ::1 at 2025-08-12 22:43:14 +0300
Processing by BonusesController#show as TURBO_STREAM
  Parameters: {"id" => "201"}
  [1m[36mBonus Load (0.1ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."id" = 201 LIMIT 1 /*action='show',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:181:in 'BonusesController#set_bonus'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/show.html.erb within layouts/application
  [1m[36mDepositBonus Load (0.3ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 201 LIMIT 1 /*action='show',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/_type_specific_details.html.erb:3
  Rendered bonuses/_type_specific_details.html.erb (Duration: 7.5ms | GC: 0.0ms)
  Rendered bonuses/show.html.erb within layouts/application (Duration: 17.0ms | GC: 5.2ms)
  Rendered layout layouts/application.html.erb (Duration: 22.3ms | GC: 6.3ms)
Completed 200 OK in 37ms (Views: 23.9ms | ActiveRecord: 0.4ms (2 queries, 0 cached) | GC: 9.5ms)


Started GET "/bonuses" for ::1 at 2025-08-12 22:43:18 +0300
Processing by BonusesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.4ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."created_at" DESC LIMIT 20 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (201, 200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (201, 200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (201, 200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (201, 200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (201, 200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (201, 200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 69.2ms | GC: 3.8ms)
  Rendered layout layouts/application.html.erb (Duration: 75.8ms | GC: 4.3ms)
Completed 200 OK in 88ms (Views: 73.5ms | ActiveRecord: 4.4ms (8 queries, 0 cached) | GC: 4.9ms)


Started GET "/bonuses?type=&status=&search=&project=VOLNA&dsl_tag=&commit=Filter" for ::1 at 2025-08-12 22:43:27 +0300
Processing by BonusesController#index as HTML
  Parameters: {"type" => "", "status" => "", "search" => "", "project" => "VOLNA", "dsl_tag" => "", "commit" => "Filter"}
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."project" = 'VOLNA' LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.1ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."project" = 'VOLNA' ORDER BY "bonuses"."created_at" DESC LIMIT 20 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 201 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" = 201 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" = 201 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" = 201 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" = 201 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" = 201 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
[31mUnpermitted parameters: :project, :dsl_tag, :commit. Context: { controller: BonusesController, action: index, request: #<ActionDispatch::Request:0x000076f8de5b50b0>, params: {"type" => "", "status" => "", "search" => "", "project" => "VOLNA", "dsl_tag" => "", "commit" => "Filter", "controller" => "bonuses", "action" => "index"} }[0m
  Rendered bonuses/index.html.erb within layouts/application (Duration: 19.0ms | GC: 0.6ms)
  Rendered layout layouts/application.html.erb (Duration: 22.4ms | GC: 0.6ms)
Completed 200 OK in 36ms (Views: 22.1ms | ActiveRecord: 0.8ms (8 queries, 0 cached) | GC: 0.6ms)


Started GET "/bonuses?type=&status=&search=&project=VOLNA&dsl_tag=test_bonus_volna_001&commit=Filter" for ::1 at 2025-08-12 22:43:39 +0300
Processing by BonusesController#index as HTML
  Parameters: {"type" => "", "status" => "", "search" => "", "project" => "VOLNA", "dsl_tag" => "test_bonus_volna_001", "commit" => "Filter"}
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."project" = 'VOLNA' AND (dsl_tag LIKE '%test_bonus_volna_001%') LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.3ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."project" = 'VOLNA' AND (dsl_tag LIKE '%test_bonus_volna_001%') ORDER BY "bonuses"."created_at" DESC LIMIT 20 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (1.8ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 201 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" = 201 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" = 201 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (1.3ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" = 201 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" = 201 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" = 201 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
[31mUnpermitted parameters: :project, :dsl_tag, :commit. Context: { controller: BonusesController, action: index, request: #<ActionDispatch::Request:0x000076f8de062ef0>, params: {"type" => "", "status" => "", "search" => "", "project" => "VOLNA", "dsl_tag" => "test_bonus_volna_001", "commit" => "Filter", "controller" => "bonuses", "action" => "index"} }[0m
  Rendered bonuses/index.html.erb within layouts/application (Duration: 29.9ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 32.9ms | GC: 0.0ms)
Completed 200 OK in 48ms (Views: 29.7ms | ActiveRecord: 3.7ms (8 queries, 0 cached) | GC: 0.0ms)


Started GET "/" for ::1 at 2025-08-12 22:44:44 +0300
Processing by BonusesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.4ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."created_at" DESC LIMIT 20 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (1.0ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (201, 200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.2ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (201, 200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.4ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (201, 200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (201, 200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (201, 200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.5ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (201, 200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 77.5ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 81.9ms | GC: 0.0ms)
Completed 200 OK in 103ms (Views: 77.2ms | ActiveRecord: 7.1ms (8 queries, 0 cached) | GC: 0.0ms)


Started GET "/bonuses" for ::1 at 2025-08-12 22:50:30 +0300
Processing by BonusesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.7ms)[0m  [1m[34mSELECT "bonuses"."id", "bonuses"."name", "bonuses"."code", "bonuses"."bonus_type", "bonuses"."status", "bonuses"."minimum_deposit", "bonuses"."wager", "bonuses"."maximum_winnings", "bonuses"."wagering_strategy", "bonuses"."availability_start_date", "bonuses"."availability_end_date", "bonuses"."user_group", "bonuses"."tags", "bonuses"."country", "bonuses"."created_by", "bonuses"."updated_by", "bonuses"."created_at", "bonuses"."updated_at", "bonuses"."project", "bonuses"."dsl_tag" FROM "bonuses" ORDER BY "bonuses"."created_at" DESC LIMIT 20 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (1.2ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (201, 200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.2ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (201, 200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.2ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (201, 200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.2ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (201, 200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (201, 200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.5ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (201, 200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 100.3ms | GC: 12.1ms)
  Rendered layout layouts/application.html.erb (Duration: 101.4ms | GC: 12.1ms)
Completed 500 Internal Server Error in 125ms (ActiveRecord: 16.4ms (8 queries, 0 cached) | GC: 12.1ms)


  
ActionView::Template::Error (missing attribute 'currency' for Bonus)
Caused by: ActiveModel::MissingAttributeError (missing attribute 'currency' for Bonus)

Information for: ActionView::Template::Error (missing attribute 'currency' for Bonus):
    129:                           <%= bonus.status.humanize %>
    130:                         </span>
    131:                       </td>
    132:                       <td><%= bonus.currency %></td>
    133:                       <td>
    134:                         <% if bonus.project.present? %>
    135:                           <span class="badge bg-primary"><%= bonus.project %></span>
  

Information for cause: ActiveModel::MissingAttributeError (missing attribute 'currency' for Bonus):
  
Started GET "/favicon.ico" for ::1 at 2025-08-12 22:50:30 +0300
  
ActionController::RoutingError (No route matches [GET] "/favicon.ico"):
  
Started GET "/bonuses" for ::1 at 2025-08-12 22:51:54 +0300
Processing by BonusesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (2.5ms)[0m  [1m[34mSELECT "bonuses"."id", "bonuses"."name", "bonuses"."code", "bonuses"."bonus_type", "bonuses"."status", "bonuses"."minimum_deposit", "bonuses"."wager", "bonuses"."maximum_winnings", "bonuses"."wagering_strategy", "bonuses"."availability_start_date", "bonuses"."availability_end_date", "bonuses"."user_group", "bonuses"."tags", "bonuses"."country", "bonuses"."created_by", "bonuses"."updated_by", "bonuses"."created_at", "bonuses"."updated_at", "bonuses"."project", "bonuses"."dsl_tag" FROM "bonuses" ORDER BY "bonuses"."created_at" DESC LIMIT 20 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:110
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (201, 200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:110
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (201, 200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:110
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (201, 200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:110
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (201, 200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:110
  [1m[36mGroupsUpdateBonus Load (0.2ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (201, 200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:110
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (201, 200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:110
  Rendered bonuses/index.html.erb within layouts/application (Duration: 83.6ms | GC: 9.7ms)
  Rendered layout layouts/application.html.erb (Duration: 86.5ms | GC: 10.2ms)
Completed 200 OK in 107ms (Views: 82.4ms | ActiveRecord: 6.9ms (8 queries, 0 cached) | GC: 10.2ms)


Started GET "/bonuses/201" for ::1 at 2025-08-12 22:51:57 +0300
Processing by BonusesController#show as HTML
  Parameters: {"id" => "201"}
  [1m[36mBonus Load (0.3ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."id" = 201 LIMIT 1 /*action='show',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:182:in 'BonusesController#set_bonus'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/show.html.erb within layouts/application
  [1m[36mDepositBonus Load (0.2ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 201 LIMIT 1 /*action='show',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/_type_specific_details.html.erb:3
  Rendered bonuses/_type_specific_details.html.erb (Duration: 7.3ms | GC: 0.0ms)
  Rendered bonuses/show.html.erb within layouts/application (Duration: 12.2ms | GC: 0.5ms)
  Rendered layout layouts/application.html.erb (Duration: 16.5ms | GC: 0.5ms)
Completed 200 OK in 35ms (Views: 16.7ms | ActiveRecord: 0.5ms (2 queries, 0 cached) | GC: 0.5ms)


Started GET "/api/v1/bonuses" for ::1 at 2025-08-12 22:52:01 +0300
Processing by Api::V1::BonusesController#index as HTML
  [1m[36mBonus Count (1.8ms)[0m  [1m[34mSELECT COUNT("bonuses"."id", "bonuses"."name", "bonuses"."code", "bonuses"."bonus_type", "bonuses"."status", "bonuses"."minimum_deposit", "bonuses"."wager", "bonuses"."maximum_winnings", "bonuses"."wagering_strategy", "bonuses"."availability_start_date", "bonuses"."availability_end_date", "bonuses"."user_group", "bonuses"."tags", "bonuses"."country", "bonuses"."created_by", "bonuses"."updated_by", "bonuses"."created_at", "bonuses"."updated_at", "bonuses"."project", "bonuses"."dsl_tag") FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/api/v1/bonuses_controller.rb:21:in 'Api::V1::BonusesController#index'
Completed 500 Internal Server Error in 17ms (ActiveRecord: 1.8ms (1 query, 0 cached) | GC: 0.7ms)


  
ActiveRecord::StatementInvalid (SQLite3::SQLException: wrong number of arguments to function COUNT():
SELECT COUNT("bonuses"."id", "bonuses"."name", "bonuses"."code", "bonuses"."bonus_type", "bonuses"."status", "bonuses"."minimum_deposit", "bonuses"."wager", "bonuses"."maximum_winnings", "bonuses"."wagering_strategy", "bonuses"."availability_start_date", "bonuses"."availability_end_date", "bonuses"."user_group", "bonuses"."tags", "bonuses"."country", "bonuses"."created_by", "bonuses"."updated_by", "bonuses"."created_at", "bonuses"."updated_at", "bonuses"."project", "bonuses"."dsl_tag") FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='bonuses'*/
       ^)
Caused by: SQLite3::SQLException (wrong number of arguments to function COUNT():
SELECT COUNT("bonuses"."id", "bonuses"."name", "bonuses"."code", "bonuses"."bonus_type", "bonuses"."status", "bonuses"."minimum_deposit", "bonuses"."wager", "bonuses"."maximum_winnings", "bonuses"."wagering_strategy", "bonuses"."availability_start_date", "bonuses"."availability_end_date", "bonuses"."user_group", "bonuses"."tags", "bonuses"."country", "bonuses"."created_by", "bonuses"."updated_by", "bonuses"."created_at", "bonuses"."updated_at", "bonuses"."project", "bonuses"."dsl_tag") FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='bonuses'*/
       ^)

Information for: ActiveRecord::StatementInvalid (SQLite3::SQLException: wrong number of arguments to function COUNT():
SELECT COUNT("bonuses"."id", "bonuses"."name", "bonuses"."code", "bonuses"."bonus_type", "bonuses"."status", "bonuses"."minimum_deposit", "bonuses"."wager", "bonuses"."maximum_winnings", "bonuses"."wagering_strategy", "bonuses"."availability_start_date", "bonuses"."availability_end_date", "bonuses"."user_group", "bonuses"."tags", "bonuses"."country", "bonuses"."created_by", "bonuses"."updated_by", "bonuses"."created_at", "bonuses"."updated_at", "bonuses"."project", "bonuses"."dsl_tag") FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='bonuses'*/
       ^):
  

Information for cause: SQLite3::SQLException (wrong number of arguments to function COUNT():
SELECT COUNT("bonuses"."id", "bonuses"."name", "bonuses"."code", "bonuses"."bonus_type", "bonuses"."status", "bonuses"."minimum_deposit", "bonuses"."wager", "bonuses"."maximum_winnings", "bonuses"."wagering_strategy", "bonuses"."availability_start_date", "bonuses"."availability_end_date", "bonuses"."user_group", "bonuses"."tags", "bonuses"."country", "bonuses"."created_by", "bonuses"."updated_by", "bonuses"."created_at", "bonuses"."updated_at", "bonuses"."project", "bonuses"."dsl_tag") FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='bonuses'*/
       ^):
  
app/controllers/api/v1/bonuses_controller.rb:21:in 'Api::V1::BonusesController#index'
Started GET "/api/v1/bonuses" for ::1 at 2025-08-12 22:52:09 +0300
Processing by Api::V1::BonusesController#index as HTML
  [1m[36mBonus Count (0.5ms)[0m  [1m[34mSELECT COUNT("bonuses"."id", "bonuses"."name", "bonuses"."code", "bonuses"."bonus_type", "bonuses"."status", "bonuses"."minimum_deposit", "bonuses"."wager", "bonuses"."maximum_winnings", "bonuses"."wagering_strategy", "bonuses"."availability_start_date", "bonuses"."availability_end_date", "bonuses"."user_group", "bonuses"."tags", "bonuses"."country", "bonuses"."created_by", "bonuses"."updated_by", "bonuses"."created_at", "bonuses"."updated_at", "bonuses"."project", "bonuses"."dsl_tag") FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/api/v1/bonuses_controller.rb:21:in 'Api::V1::BonusesController#index'
Completed 500 Internal Server Error in 17ms (ActiveRecord: 0.4ms (1 query, 0 cached) | GC: 0.8ms)


  
ActiveRecord::StatementInvalid (SQLite3::SQLException: wrong number of arguments to function COUNT():
SELECT COUNT("bonuses"."id", "bonuses"."name", "bonuses"."code", "bonuses"."bonus_type", "bonuses"."status", "bonuses"."minimum_deposit", "bonuses"."wager", "bonuses"."maximum_winnings", "bonuses"."wagering_strategy", "bonuses"."availability_start_date", "bonuses"."availability_end_date", "bonuses"."user_group", "bonuses"."tags", "bonuses"."country", "bonuses"."created_by", "bonuses"."updated_by", "bonuses"."created_at", "bonuses"."updated_at", "bonuses"."project", "bonuses"."dsl_tag") FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='bonuses'*/
       ^)
Caused by: SQLite3::SQLException (wrong number of arguments to function COUNT():
SELECT COUNT("bonuses"."id", "bonuses"."name", "bonuses"."code", "bonuses"."bonus_type", "bonuses"."status", "bonuses"."minimum_deposit", "bonuses"."wager", "bonuses"."maximum_winnings", "bonuses"."wagering_strategy", "bonuses"."availability_start_date", "bonuses"."availability_end_date", "bonuses"."user_group", "bonuses"."tags", "bonuses"."country", "bonuses"."created_by", "bonuses"."updated_by", "bonuses"."created_at", "bonuses"."updated_at", "bonuses"."project", "bonuses"."dsl_tag") FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='bonuses'*/
       ^)

Information for: ActiveRecord::StatementInvalid (SQLite3::SQLException: wrong number of arguments to function COUNT():
SELECT COUNT("bonuses"."id", "bonuses"."name", "bonuses"."code", "bonuses"."bonus_type", "bonuses"."status", "bonuses"."minimum_deposit", "bonuses"."wager", "bonuses"."maximum_winnings", "bonuses"."wagering_strategy", "bonuses"."availability_start_date", "bonuses"."availability_end_date", "bonuses"."user_group", "bonuses"."tags", "bonuses"."country", "bonuses"."created_by", "bonuses"."updated_by", "bonuses"."created_at", "bonuses"."updated_at", "bonuses"."project", "bonuses"."dsl_tag") FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='bonuses'*/
       ^):
  

Information for cause: SQLite3::SQLException (wrong number of arguments to function COUNT():
SELECT COUNT("bonuses"."id", "bonuses"."name", "bonuses"."code", "bonuses"."bonus_type", "bonuses"."status", "bonuses"."minimum_deposit", "bonuses"."wager", "bonuses"."maximum_winnings", "bonuses"."wagering_strategy", "bonuses"."availability_start_date", "bonuses"."availability_end_date", "bonuses"."user_group", "bonuses"."tags", "bonuses"."country", "bonuses"."created_by", "bonuses"."updated_by", "bonuses"."created_at", "bonuses"."updated_at", "bonuses"."project", "bonuses"."dsl_tag") FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='bonuses'*/
       ^):
  
app/controllers/api/v1/bonuses_controller.rb:21:in 'Api::V1::BonusesController#index'
Started GET "/api/v1/bonuses" for ::1 at 2025-08-12 22:53:19 +0300
Processing by Api::V1::BonusesController#index as HTML
  [1m[36mBonus Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/api/v1/bonuses_controller.rb:20:in 'Api::V1::BonusesController#index'
  [1m[36mBonus Load (0.4ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."created_at" DESC LIMIT 20 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/api/v1/bonuses_controller.rb:24:in 'Api::V1::BonusesController#index'
  [1m[36mDepositBonus Load (0.2ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (201, 200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/api/v1/bonuses_controller.rb:24:in 'Api::V1::BonusesController#index'
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (201, 200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/api/v1/bonuses_controller.rb:24:in 'Api::V1::BonusesController#index'
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (201, 200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/api/v1/bonuses_controller.rb:24:in 'Api::V1::BonusesController#index'
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (201, 200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/api/v1/bonuses_controller.rb:24:in 'Api::V1::BonusesController#index'
  [1m[36mGroupsUpdateBonus Load (1.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (201, 200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/api/v1/bonuses_controller.rb:24:in 'Api::V1::BonusesController#index'
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (201, 200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/api/v1/bonuses_controller.rb:24:in 'Api::V1::BonusesController#index'
Completed 200 OK in 117ms (Views: 1.1ms | ActiveRecord: 11.1ms (8 queries, 0 cached) | GC: 1.6ms)


Started GET "/api/v1/bonuses/201" for ::1 at 2025-08-12 22:53:23 +0300
Processing by Api::V1::BonusesController#show as HTML
  Parameters: {"id" => "201"}
  [1m[36mBonus Load (0.3ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."id" = 201 LIMIT 1 /*action='show',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/api/v1/bonuses_controller.rb:118:in 'Api::V1::BonusesController#set_bonus'
  [1m[36mDepositBonus Load (2.0ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 201 LIMIT 1 /*action='show',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/api/v1/bonuses_controller.rb:36:in 'Api::V1::BonusesController#show'
Completed 200 OK in 20ms (Views: 0.1ms | ActiveRecord: 2.2ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/bonuses" for ::1 at 2025-08-12 22:53:26 +0300
Processing by BonusesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.3ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."created_at" DESC LIMIT 20 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:110
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (201, 200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:110
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (201, 200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:110
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (201, 200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:110
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (201, 200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:110
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (201, 200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:110
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (201, 200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:110
  Rendered bonuses/index.html.erb within layouts/application (Duration: 24.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 28.9ms | GC: 0.0ms)
Completed 200 OK in 44ms (Views: 29.7ms | ActiveRecord: 1.1ms (8 queries, 0 cached) | GC: 0.0ms)


Started GET "/" for ::1 at 2025-08-12 22:56:48 +0300
Processing by BonusesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (1.3ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."created_at" DESC LIMIT 20 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:110
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (201, 200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:110
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (201, 200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:110
  [1m[36mManualBonus Load (0.2ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (201, 200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:110
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (201, 200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:110
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (201, 200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:110
  [1m[36mSchedulerBonus Load (0.2ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (201, 200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:110
  Rendered bonuses/index.html.erb within layouts/application (Duration: 93.2ms | GC: 5.3ms)
  Rendered layout layouts/application.html.erb (Duration: 96.7ms | GC: 5.3ms)
Completed 200 OK in 124ms (Views: 92.3ms | ActiveRecord: 7.8ms (8 queries, 0 cached) | GC: 6.2ms)


Started GET "/bonuses/201" for ::1 at 2025-08-12 22:57:01 +0300
Processing by BonusesController#show as HTML
  Parameters: {"id" => "201"}
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."id" = 201 LIMIT 1 /*action='show',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:181:in 'BonusesController#set_bonus'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/show.html.erb within layouts/application
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 201 LIMIT 1 /*action='show',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/_type_specific_details.html.erb:3
  Rendered bonuses/_type_specific_details.html.erb (Duration: 5.5ms | GC: 0.1ms)
  Rendered bonuses/show.html.erb within layouts/application (Duration: 9.1ms | GC: 0.1ms)
  Rendered layout layouts/application.html.erb (Duration: 11.7ms | GC: 0.1ms)
Completed 200 OK in 26ms (Views: 12.9ms | ActiveRecord: 0.3ms (2 queries, 0 cached) | GC: 0.1ms)


Started GET "/bonuses/201/edit" for ::1 at 2025-08-12 22:57:01 +0300
Processing by BonusesController#edit as HTML
  Parameters: {"id" => "201"}
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."id" = 201 LIMIT 1 /*action='edit',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:181:in 'BonusesController#set_bonus'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/edit.html.erb within layouts/application
  [1m[36mDepositBonus Load (0.2ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 201 LIMIT 1 /*action='edit',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/_type_specific_form.html.erb:10
  Rendered bonuses/_type_specific_form.html.erb (Duration: 3.5ms | GC: 0.0ms)
  Rendered bonuses/edit.html.erb within layouts/application (Duration: 17.8ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 19.1ms | GC: 0.0ms)
Completed 200 OK in 35ms (Views: 19.3ms | ActiveRecord: 0.3ms (2 queries, 0 cached) | GC: 0.0ms)


Started PATCH "/bonuses/201/activate?_method=patch" for ::1 at 2025-08-12 22:57:02 +0300
Processing by BonusesController#activate as TURBO_STREAM
  Parameters: {"id" => "201"}
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."id" = 201 LIMIT 1 /*action='activate',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:181:in 'BonusesController#set_bonus'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='activate',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/models/bonus.rb:95:in 'Bonus#activate!'
  [1m[36mBonus Update (0.1ms)[0m  [1m[33mUPDATE "bonuses" SET "status" = 'active', "updated_at" = '2025-08-12 19:57:02.794429' WHERE "bonuses"."id" = 201 /*action='activate',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/models/bonus.rb:95:in 'Bonus#activate!'
  [1m[36mTRANSACTION (3.5ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='activate',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/models/bonus.rb:95:in 'Bonus#activate!'
Redirected to http://localhost:3000/bonuses/201
Completed 302 Found in 26ms (ActiveRecord: 6.6ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/bonuses/201" for ::1 at 2025-08-12 22:57:02 +0300
Processing by BonusesController#show as TURBO_STREAM
  Parameters: {"id" => "201"}
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."id" = 201 LIMIT 1 /*action='show',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:181:in 'BonusesController#set_bonus'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/show.html.erb within layouts/application
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 201 LIMIT 1 /*action='show',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/_type_specific_details.html.erb:3
  Rendered bonuses/_type_specific_details.html.erb (Duration: 1.5ms | GC: 0.0ms)
  Rendered bonuses/show.html.erb within layouts/application (Duration: 2.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 3.2ms | GC: 0.0ms)
Completed 200 OK in 17ms (Views: 3.5ms | ActiveRecord: 0.3ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/" for ::1 at 2025-08-12 22:57:05 +0300
Processing by BonusesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.3ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."created_at" DESC LIMIT 20 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:110
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (201, 200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:110
  [1m[36mInputCouponBonus Load (0.2ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (201, 200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:110
  [1m[36mManualBonus Load (0.2ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (201, 200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:110
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (201, 200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:110
  [1m[36mGroupsUpdateBonus Load (0.5ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (201, 200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:110
  [1m[36mSchedulerBonus Load (0.6ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (201, 200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:110
  Rendered bonuses/index.html.erb within layouts/application (Duration: 29.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 32.3ms | GC: 0.0ms)
Completed 200 OK in 47ms (Views: 30.9ms | ActiveRecord: 2.1ms (8 queries, 0 cached) | GC: 0.0ms)


Started GET "/bonuses/200" for ::1 at 2025-08-12 22:57:07 +0300
Processing by BonusesController#show as HTML
  Parameters: {"id" => "200"}
  [1m[36mBonus Load (0.3ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."id" = 200 LIMIT 1 /*action='show',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:181:in 'BonusesController#set_bonus'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/show.html.erb within layouts/application
  [1m[36mGroupsUpdateBonus Load (0.3ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" = 200 LIMIT 1 /*action='show',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/_type_specific_details.html.erb:173
  Rendered bonuses/_type_specific_details.html.erb (Duration: 5.1ms | GC: 0.0ms)
  Rendered bonuses/show.html.erb within layouts/application (Duration: 6.5ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 7.9ms | GC: 0.0ms)
Completed 200 OK in 20ms (Views: 8.2ms | ActiveRecord: 0.4ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/bonuses/201" for ::1 at 2025-08-12 22:57:21 +0300
Processing by BonusesController#show as HTML
  Parameters: {"id" => "201"}
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."id" = 201 LIMIT 1 /*action='show',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:181:in 'BonusesController#set_bonus'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/show.html.erb within layouts/application
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 201 LIMIT 1 /*action='show',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/_type_specific_details.html.erb:3
  Rendered bonuses/_type_specific_details.html.erb (Duration: 3.9ms | GC: 0.0ms)
  Rendered bonuses/show.html.erb within layouts/application (Duration: 6.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 8.1ms | GC: 0.0ms)
Completed 200 OK in 24ms (Views: 11.1ms | ActiveRecord: 0.3ms (2 queries, 0 cached) | GC: 0.0ms)


Started PATCH "/bonuses/201/deactivate?_method=patch" for ::1 at 2025-08-12 22:57:22 +0300
Processing by BonusesController#deactivate as TURBO_STREAM
  Parameters: {"id" => "201"}
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."id" = 201 LIMIT 1 /*action='deactivate',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:181:in 'BonusesController#set_bonus'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='deactivate',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/models/bonus.rb:99:in 'Bonus#deactivate!'
  [1m[36mBonus Update (3.6ms)[0m  [1m[33mUPDATE "bonuses" SET "status" = 'inactive', "updated_at" = '2025-08-12 19:57:22.291535' WHERE "bonuses"."id" = 201 /*action='deactivate',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/models/bonus.rb:99:in 'Bonus#deactivate!'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='deactivate',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/models/bonus.rb:99:in 'Bonus#deactivate!'
Redirected to http://localhost:3000/bonuses/201
Completed 302 Found in 21ms (ActiveRecord: 3.9ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/bonuses/201" for ::1 at 2025-08-12 22:57:22 +0300
Processing by BonusesController#show as TURBO_STREAM
  Parameters: {"id" => "201"}
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."id" = 201 LIMIT 1 /*action='show',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:181:in 'BonusesController#set_bonus'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/show.html.erb within layouts/application
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 201 LIMIT 1 /*action='show',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/_type_specific_details.html.erb:3
  Rendered bonuses/_type_specific_details.html.erb (Duration: 1.5ms | GC: 0.0ms)
  Rendered bonuses/show.html.erb within layouts/application (Duration: 2.5ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 4.7ms | GC: 0.0ms)
Completed 200 OK in 18ms (Views: 5.3ms | ActiveRecord: 0.3ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/" for ::1 at 2025-08-12 22:57:23 +0300
Processing by BonusesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.3ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."created_at" DESC LIMIT 20 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:110
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (201, 200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:110
  [1m[36mInputCouponBonus Load (0.5ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (201, 200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:110
  [1m[36mManualBonus Load (0.2ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (201, 200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:110
  [1m[36mCollectBonus Load (0.2ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (201, 200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:110
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (201, 200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:110
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (201, 200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:110
  Rendered bonuses/index.html.erb within layouts/application (Duration: 22.4ms | GC: 1.7ms)
  Rendered layout layouts/application.html.erb (Duration: 24.1ms | GC: 2.1ms)
Completed 200 OK in 32ms (Views: 23.1ms | ActiveRecord: 1.5ms (8 queries, 0 cached) | GC: 2.1ms)


Started GET "/" for ::1 at 2025-08-12 22:57:24 +0300
Processing by BonusesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.3ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."created_at" DESC LIMIT 20 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:110
  [1m[36mDepositBonus Load (0.6ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (201, 200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:110
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (201, 200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:110
  [1m[36mManualBonus Load (0.2ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (201, 200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:110
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (201, 200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:110
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (201, 200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:110
  [1m[36mSchedulerBonus Load (0.3ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (201, 200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:110
  Rendered bonuses/index.html.erb within layouts/application (Duration: 29.6ms | GC: 2.1ms)
  Rendered layout layouts/application.html.erb (Duration: 33.5ms | GC: 2.1ms)
Completed 200 OK in 45ms (Views: 32.0ms | ActiveRecord: 1.8ms (8 queries, 0 cached) | GC: 2.1ms)


Started GET "/bonuses" for ::1 at 2025-08-12 23:00:14 +0300
Processing by BonusesController#index as HTML
Completed 404 Not Found in 12ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.4ms)


  
AbstractController::ActionNotFound (The activate action could not be found for the :set_bonus
callback on BonusesController, but it is listed in the controller's
:only option.

Raising for missing callback actions is a new default in Rails 7.1, if you'd
like to turn this off you can delete the option from the environment configurations
or set `config.action_controller.raise_on_missing_callback_actions` to `false`.
):
  
actionpack (8.0.2) lib/abstract_controller/callbacks.rb:62:in 'AbstractController::Callbacks::ActionFilter#match?'
activesupport (8.0.2) lib/active_support/callbacks.rb:384:in 'block in ActiveSupport::Callbacks::CallTemplate::ObjectCall#make_lambda'
activesupport (8.0.2) lib/active_support/callbacks.rb:177:in 'block in ActiveSupport::Callbacks::Filters::Before#call'
activesupport (8.0.2) lib/active_support/callbacks.rb:177:in 'Array#all?'
activesupport (8.0.2) lib/active_support/callbacks.rb:177:in 'ActiveSupport::Callbacks::Filters::Before#call'
activesupport (8.0.2) lib/active_support/callbacks.rb:559:in 'block in ActiveSupport::Callbacks::CallbackSequence#invoke_before'
activesupport (8.0.2) lib/active_support/callbacks.rb:559:in 'Array#each'
activesupport (8.0.2) lib/active_support/callbacks.rb:559:in 'ActiveSupport::Callbacks::CallbackSequence#invoke_before'
activesupport (8.0.2) lib/active_support/callbacks.rb:118:in 'block in ActiveSupport::Callbacks#run_callbacks'
turbo-rails (2.0.16) lib/turbo-rails.rb:24:in 'Turbo.with_request_id'
turbo-rails (2.0.16) app/controllers/concerns/turbo/request_id_tracking.rb:10:in 'Turbo::RequestIdTracking#turbo_tracking_request_id'
activesupport (8.0.2) lib/active_support/callbacks.rb:129:in 'block in ActiveSupport::Callbacks#run_callbacks'
actiontext (8.0.2) lib/action_text/rendering.rb:25:in 'ActionText::Rendering::ClassMethods#with_renderer'
actiontext (8.0.2) lib/action_text/engine.rb:71:in 'block (4 levels) in <class:Engine>'
activesupport (8.0.2) lib/active_support/callbacks.rb:129:in 'BasicObject#instance_exec'
activesupport (8.0.2) lib/active_support/callbacks.rb:129:in 'block in ActiveSupport::Callbacks#run_callbacks'
activesupport (8.0.2) lib/active_support/callbacks.rb:140:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (8.0.2) lib/abstract_controller/callbacks.rb:260:in 'AbstractController::Callbacks#process_action'
actionpack (8.0.2) lib/action_controller/metal/rescue.rb:27:in 'ActionController::Rescue#process_action'
actionpack (8.0.2) lib/action_controller/metal/instrumentation.rb:76:in 'block in ActionController::Instrumentation#process_action'
activesupport (8.0.2) lib/active_support/notifications.rb:210:in 'block in ActiveSupport::Notifications.instrument'
activesupport (8.0.2) lib/active_support/notifications/instrumenter.rb:58:in 'ActiveSupport::Notifications::Instrumenter#instrument'
activesupport (8.0.2) lib/active_support/notifications.rb:210:in 'ActiveSupport::Notifications.instrument'
actionpack (8.0.2) lib/action_controller/metal/instrumentation.rb:75:in 'ActionController::Instrumentation#process_action'
actionpack (8.0.2) lib/action_controller/metal/params_wrapper.rb:259:in 'ActionController::ParamsWrapper#process_action'
activerecord (8.0.2) lib/active_record/railties/controller_runtime.rb:39:in 'ActiveRecord::Railties::ControllerRuntime#process_action'
actionpack (8.0.2) lib/abstract_controller/base.rb:163:in 'AbstractController::Base#process'
actionview (8.0.2) lib/action_view/rendering.rb:40:in 'ActionView::Rendering#process'
actionpack (8.0.2) lib/action_controller/metal.rb:252:in 'ActionController::Metal#dispatch'
actionpack (8.0.2) lib/action_controller/metal.rb:335:in 'ActionController::Metal.dispatch'
actionpack (8.0.2) lib/action_dispatch/routing/route_set.rb:67:in 'ActionDispatch::Routing::RouteSet::Dispatcher#dispatch'
actionpack (8.0.2) lib/action_dispatch/routing/route_set.rb:50:in 'ActionDispatch::Routing::RouteSet::Dispatcher#serve'
actionpack (8.0.2) lib/action_dispatch/journey/router.rb:53:in 'block in ActionDispatch::Journey::Router#serve'
actionpack (8.0.2) lib/action_dispatch/journey/router.rb:133:in 'block in ActionDispatch::Journey::Router#find_routes'
actionpack (8.0.2) lib/action_dispatch/journey/router.rb:126:in 'Array#each'
actionpack (8.0.2) lib/action_dispatch/journey/router.rb:126:in 'ActionDispatch::Journey::Router#find_routes'
actionpack (8.0.2) lib/action_dispatch/journey/router.rb:34:in 'ActionDispatch::Journey::Router#serve'
actionpack (8.0.2) lib/action_dispatch/routing/route_set.rb:908:in 'ActionDispatch::Routing::RouteSet#call'
railties (8.0.2) lib/rails/engine/lazy_route_set.rb:68:in 'Rails::Engine::LazyRouteSet#call'
rack (3.1.16) lib/rack/tempfile_reaper.rb:20:in 'Rack::TempfileReaper#call'
rack (3.1.16) lib/rack/etag.rb:29:in 'Rack::ETag#call'
rack (3.1.16) lib/rack/conditional_get.rb:31:in 'Rack::ConditionalGet#call'
rack (3.1.16) lib/rack/head.rb:15:in 'Rack::Head#call'
actionpack (8.0.2) lib/action_dispatch/http/permissions_policy.rb:38:in 'ActionDispatch::PermissionsPolicy::Middleware#call'
actionpack (8.0.2) lib/action_dispatch/http/content_security_policy.rb:38:in 'ActionDispatch::ContentSecurityPolicy::Middleware#call'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:274:in 'Rack::Session::Abstract::Persisted#context'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:268:in 'Rack::Session::Abstract::Persisted#call'
actionpack (8.0.2) lib/action_dispatch/middleware/cookies.rb:706:in 'ActionDispatch::Cookies#call'
activerecord (8.0.2) lib/active_record/migration.rb:671:in 'ActiveRecord::Migration::CheckPending#call'
actionpack (8.0.2) lib/action_dispatch/middleware/callbacks.rb:31:in 'block in ActionDispatch::Callbacks#call'
activesupport (8.0.2) lib/active_support/callbacks.rb:100:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (8.0.2) lib/action_dispatch/middleware/callbacks.rb:30:in 'ActionDispatch::Callbacks#call'
actionpack (8.0.2) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (8.0.2) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in 'ActionDispatch::ActionableExceptions#call'
actionpack (8.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:31:in 'ActionDispatch::DebugExceptions#call'
web-console (4.2.1) lib/web_console/middleware.rb:132:in 'WebConsole::Middleware#call_app'
web-console (4.2.1) lib/web_console/middleware.rb:28:in 'block in WebConsole::Middleware#call'
web-console (4.2.1) lib/web_console/middleware.rb:17:in 'Kernel#catch'
web-console (4.2.1) lib/web_console/middleware.rb:17:in 'WebConsole::Middleware#call'
actionpack (8.0.2) lib/action_dispatch/middleware/show_exceptions.rb:32:in 'ActionDispatch::ShowExceptions#call'
railties (8.0.2) lib/rails/rack/logger.rb:41:in 'Rails::Rack::Logger#call_app'
railties (8.0.2) lib/rails/rack/logger.rb:29:in 'Rails::Rack::Logger#call'
actionpack (8.0.2) lib/action_dispatch/middleware/remote_ip.rb:96:in 'ActionDispatch::RemoteIp#call'
actionpack (8.0.2) lib/action_dispatch/middleware/request_id.rb:34:in 'ActionDispatch::RequestId#call'
rack (3.1.16) lib/rack/method_override.rb:28:in 'Rack::MethodOverride#call'
rack (3.1.16) lib/rack/runtime.rb:24:in 'Rack::Runtime#call'
actionpack (8.0.2) lib/action_dispatch/middleware/server_timing.rb:61:in 'block in ActionDispatch::ServerTiming#call'
actionpack (8.0.2) lib/action_dispatch/middleware/server_timing.rb:26:in 'ActionDispatch::ServerTiming::Subscriber#collect_events'
actionpack (8.0.2) lib/action_dispatch/middleware/server_timing.rb:60:in 'ActionDispatch::ServerTiming#call'
actionpack (8.0.2) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (8.0.2) lib/action_dispatch/middleware/static.rb:27:in 'ActionDispatch::Static#call'
rack (3.1.16) lib/rack/sendfile.rb:114:in 'Rack::Sendfile#call'
actionpack (8.0.2) lib/action_dispatch/middleware/host_authorization.rb:143:in 'ActionDispatch::HostAuthorization#call'
railties (8.0.2) lib/rails/engine.rb:535:in 'Rails::Engine#call'
puma (6.6.0) lib/puma/configuration.rb:279:in 'Puma::Configuration::ConfigMiddleware#call'
puma (6.6.0) lib/puma/request.rb:99:in 'block in Puma::Request#handle_request'
puma (6.6.0) lib/puma/thread_pool.rb:390:in 'Puma::ThreadPool#with_force_shutdown'
puma (6.6.0) lib/puma/request.rb:98:in 'Puma::Request#handle_request'
puma (6.6.0) lib/puma/server.rb:472:in 'Puma::Server#process_client'
puma (6.6.0) lib/puma/server.rb:254:in 'block in Puma::Server#run'
puma (6.6.0) lib/puma/thread_pool.rb:167:in 'block in Puma::ThreadPool#spawn_thread'
Started GET "/favicon.ico" for ::1 at 2025-08-12 23:00:15 +0300
  
ActionController::RoutingError (No route matches [GET] "/favicon.ico"):
  
Started GET "/bonuses" for ::1 at 2025-08-12 23:00:32 +0300
Processing by BonusesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.5ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."created_at" DESC LIMIT 20 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:110
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (201, 200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:110
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (201, 200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:110
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (201, 200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:110
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (201, 200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:110
  [1m[36mGroupsUpdateBonus Load (0.2ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (201, 200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:110
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (201, 200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:110
  Rendered bonuses/index.html.erb within layouts/application (Duration: 75.6ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 80.3ms | GC: 0.0ms)
Completed 200 OK in 107ms (Views: 77.6ms | ActiveRecord: 4.9ms (8 queries, 0 cached) | GC: 1.9ms)


Started GET "/bonuses/201" for ::1 at 2025-08-12 23:00:59 +0300
Processing by BonusesController#show as HTML
  Parameters: {"id" => "201"}
  [1m[36mBonus Load (0.1ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."id" = 201 LIMIT 1 /*action='show',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:159:in 'BonusesController#set_bonus'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/show.html.erb within layouts/application
  [1m[36mDepositBonus Load (0.3ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 201 LIMIT 1 /*action='show',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/_type_specific_details.html.erb:3
  Rendered bonuses/_type_specific_details.html.erb (Duration: 28.6ms | GC: 2.2ms)
  Rendered bonuses/show.html.erb within layouts/application (Duration: 35.1ms | GC: 2.2ms)
  Rendered layout layouts/application.html.erb (Duration: 45.7ms | GC: 2.2ms)
Completed 200 OK in 104ms (Views: 53.4ms | ActiveRecord: 6.8ms (2 queries, 0 cached) | GC: 4.9ms)


Started GET "/bonuses/201/edit" for ::1 at 2025-08-12 23:01:03 +0300
Processing by BonusesController#edit as HTML
  Parameters: {"id" => "201"}
  [1m[36mBonus Load (0.5ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."id" = 201 LIMIT 1 /*action='edit',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:159:in 'BonusesController#set_bonus'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/edit.html.erb within layouts/application
  [1m[36mDepositBonus Load (0.2ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 201 LIMIT 1 /*action='edit',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/_type_specific_form.html.erb:10
  Rendered bonuses/_type_specific_form.html.erb (Duration: 8.3ms | GC: 0.0ms)
  Rendered bonuses/edit.html.erb within layouts/application (Duration: 18.1ms | GC: 1.6ms)
  Rendered layout layouts/application.html.erb (Duration: 19.0ms | GC: 1.6ms)
Completed 200 OK in 39ms (Views: 21.4ms | ActiveRecord: 0.6ms (2 queries, 0 cached) | GC: 2.9ms)


Started GET "/bonuses/new" for ::1 at 2025-08-12 23:01:09 +0300
Processing by BonusesController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering bonuses/new.html.erb within layouts/application
  Rendered bonuses/_type_specific_form.html.erb (Duration: 3.0ms | GC: 0.0ms)
  Rendered bonuses/new.html.erb within layouts/application (Duration: 15.3ms | GC: 0.7ms)
  Rendered layout layouts/application.html.erb (Duration: 19.8ms | GC: 0.7ms)
Completed 200 OK in 46ms (Views: 20.3ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.7ms)


Started GET "/api/v1/bonuses" for ::1 at 2025-08-12 23:01:13 +0300
Processing by Api::V1::BonusesController#index as HTML
  [1m[36mBonus Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/api/v1/bonuses_controller.rb:20:in 'Api::V1::BonusesController#index'
  [1m[36mBonus Load (0.6ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."created_at" DESC LIMIT 20 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/api/v1/bonuses_controller.rb:24:in 'Api::V1::BonusesController#index'
  [1m[36mDepositBonus Load (0.9ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (201, 200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/api/v1/bonuses_controller.rb:24:in 'Api::V1::BonusesController#index'
  [1m[36mInputCouponBonus Load (0.2ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (201, 200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/api/v1/bonuses_controller.rb:24:in 'Api::V1::BonusesController#index'
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (201, 200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/api/v1/bonuses_controller.rb:24:in 'Api::V1::BonusesController#index'
  [1m[36mCollectBonus Load (0.2ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (201, 200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/api/v1/bonuses_controller.rb:24:in 'Api::V1::BonusesController#index'
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (201, 200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/api/v1/bonuses_controller.rb:24:in 'Api::V1::BonusesController#index'
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (201, 200, 199, 198, 197, 196, 195, 194, 193, 192, 191, 190, 189, 188, 187, 186, 185, 184, 183, 182) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/api/v1/bonuses_controller.rb:24:in 'Api::V1::BonusesController#index'
Completed 200 OK in 95ms (Views: 0.4ms | ActiveRecord: 5.8ms (8 queries, 0 cached) | GC: 0.5ms)


Started GET "/" for ::1 at 2025-08-12 23:04:41 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='MbsPromoRetention'*/[0m
  
ActiveRecord::PendingMigrationError (

Migrations are pending. To resolve this issue, run:

        bin/rails db:migrate

You have 1 pending migration:

db/migrate/20250812200426_add_id_column_to_bonuses.rb


):
  
activerecord (8.0.2) lib/active_record/migration.rb:743:in 'ActiveRecord::Migration.check_pending_migrations'
activerecord (8.0.2) lib/active_record/migration.rb:660:in 'block (2 levels) in ActiveRecord::Migration::CheckPending#call'
activesupport (8.0.2) lib/active_support/file_update_checker.rb:85:in 'ActiveSupport::FileUpdateChecker#execute'
activesupport (8.0.2) lib/active_support/file_update_checker.rb:95:in 'ActiveSupport::FileUpdateChecker#execute_if_updated'
activerecord (8.0.2) lib/active_record/migration.rb:667:in 'block in ActiveRecord::Migration::CheckPending#call'
activerecord (8.0.2) lib/active_record/migration.rb:657:in 'Thread::Mutex#synchronize'
activerecord (8.0.2) lib/active_record/migration.rb:657:in 'ActiveRecord::Migration::CheckPending#call'
actionpack (8.0.2) lib/action_dispatch/middleware/callbacks.rb:31:in 'block in ActionDispatch::Callbacks#call'
activesupport (8.0.2) lib/active_support/callbacks.rb:100:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (8.0.2) lib/action_dispatch/middleware/callbacks.rb:30:in 'ActionDispatch::Callbacks#call'
actionpack (8.0.2) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (8.0.2) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in 'ActionDispatch::ActionableExceptions#call'
actionpack (8.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:31:in 'ActionDispatch::DebugExceptions#call'
web-console (4.2.1) lib/web_console/middleware.rb:132:in 'WebConsole::Middleware#call_app'
web-console (4.2.1) lib/web_console/middleware.rb:28:in 'block in WebConsole::Middleware#call'
web-console (4.2.1) lib/web_console/middleware.rb:17:in 'Kernel#catch'
web-console (4.2.1) lib/web_console/middleware.rb:17:in 'WebConsole::Middleware#call'
actionpack (8.0.2) lib/action_dispatch/middleware/show_exceptions.rb:32:in 'ActionDispatch::ShowExceptions#call'
railties (8.0.2) lib/rails/rack/logger.rb:41:in 'Rails::Rack::Logger#call_app'
railties (8.0.2) lib/rails/rack/logger.rb:29:in 'Rails::Rack::Logger#call'
actionpack (8.0.2) lib/action_dispatch/middleware/remote_ip.rb:96:in 'ActionDispatch::RemoteIp#call'
actionpack (8.0.2) lib/action_dispatch/middleware/request_id.rb:34:in 'ActionDispatch::RequestId#call'
rack (3.1.16) lib/rack/method_override.rb:28:in 'Rack::MethodOverride#call'
rack (3.1.16) lib/rack/runtime.rb:24:in 'Rack::Runtime#call'
actionpack (8.0.2) lib/action_dispatch/middleware/server_timing.rb:61:in 'block in ActionDispatch::ServerTiming#call'
actionpack (8.0.2) lib/action_dispatch/middleware/server_timing.rb:26:in 'ActionDispatch::ServerTiming::Subscriber#collect_events'
actionpack (8.0.2) lib/action_dispatch/middleware/server_timing.rb:60:in 'ActionDispatch::ServerTiming#call'
actionpack (8.0.2) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (8.0.2) lib/action_dispatch/middleware/static.rb:27:in 'ActionDispatch::Static#call'
rack (3.1.16) lib/rack/sendfile.rb:114:in 'Rack::Sendfile#call'
actionpack (8.0.2) lib/action_dispatch/middleware/host_authorization.rb:143:in 'ActionDispatch::HostAuthorization#call'
railties (8.0.2) lib/rails/engine.rb:535:in 'Rails::Engine#call'
puma (6.6.0) lib/puma/configuration.rb:279:in 'Puma::Configuration::ConfigMiddleware#call'
puma (6.6.0) lib/puma/request.rb:99:in 'block in Puma::Request#handle_request'
puma (6.6.0) lib/puma/thread_pool.rb:390:in 'Puma::ThreadPool#with_force_shutdown'
puma (6.6.0) lib/puma/request.rb:98:in 'Puma::Request#handle_request'
puma (6.6.0) lib/puma/server.rb:472:in 'Puma::Server#process_client'
puma (6.6.0) lib/puma/server.rb:254:in 'block in Puma::Server#run'
puma (6.6.0) lib/puma/thread_pool.rb:167:in 'block in Puma::ThreadPool#spawn_thread'
Started GET "/favicon.ico" for ::1 at 2025-08-12 23:04:41 +0300
  [1m[36mActiveRecord::SchemaMigration Load (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='MbsPromoRetention'*/[0m
  
ActiveRecord::PendingMigrationError (

Migrations are pending. To resolve this issue, run:

        bin/rails db:migrate

You have 1 pending migration:

db/migrate/20250812200426_add_id_column_to_bonuses.rb


):
  
activerecord (8.0.2) lib/active_record/migration.rb:743:in 'ActiveRecord::Migration.check_pending_migrations'
activerecord (8.0.2) lib/active_record/migration.rb:660:in 'block (2 levels) in ActiveRecord::Migration::CheckPending#call'
activesupport (8.0.2) lib/active_support/file_update_checker.rb:85:in 'ActiveSupport::FileUpdateChecker#execute'
activerecord (8.0.2) lib/active_record/migration.rb:665:in 'block in ActiveRecord::Migration::CheckPending#call'
activerecord (8.0.2) lib/active_record/migration.rb:657:in 'Thread::Mutex#synchronize'
activerecord (8.0.2) lib/active_record/migration.rb:657:in 'ActiveRecord::Migration::CheckPending#call'
actionpack (8.0.2) lib/action_dispatch/middleware/callbacks.rb:31:in 'block in ActionDispatch::Callbacks#call'
activesupport (8.0.2) lib/active_support/callbacks.rb:100:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (8.0.2) lib/action_dispatch/middleware/callbacks.rb:30:in 'ActionDispatch::Callbacks#call'
actionpack (8.0.2) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (8.0.2) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in 'ActionDispatch::ActionableExceptions#call'
actionpack (8.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:31:in 'ActionDispatch::DebugExceptions#call'
web-console (4.2.1) lib/web_console/middleware.rb:132:in 'WebConsole::Middleware#call_app'
web-console (4.2.1) lib/web_console/middleware.rb:28:in 'block in WebConsole::Middleware#call'
web-console (4.2.1) lib/web_console/middleware.rb:17:in 'Kernel#catch'
web-console (4.2.1) lib/web_console/middleware.rb:17:in 'WebConsole::Middleware#call'
actionpack (8.0.2) lib/action_dispatch/middleware/show_exceptions.rb:32:in 'ActionDispatch::ShowExceptions#call'
railties (8.0.2) lib/rails/rack/logger.rb:41:in 'Rails::Rack::Logger#call_app'
railties (8.0.2) lib/rails/rack/logger.rb:29:in 'Rails::Rack::Logger#call'
actionpack (8.0.2) lib/action_dispatch/middleware/remote_ip.rb:96:in 'ActionDispatch::RemoteIp#call'
actionpack (8.0.2) lib/action_dispatch/middleware/request_id.rb:34:in 'ActionDispatch::RequestId#call'
rack (3.1.16) lib/rack/method_override.rb:28:in 'Rack::MethodOverride#call'
rack (3.1.16) lib/rack/runtime.rb:24:in 'Rack::Runtime#call'
actionpack (8.0.2) lib/action_dispatch/middleware/server_timing.rb:61:in 'block in ActionDispatch::ServerTiming#call'
actionpack (8.0.2) lib/action_dispatch/middleware/server_timing.rb:26:in 'ActionDispatch::ServerTiming::Subscriber#collect_events'
actionpack (8.0.2) lib/action_dispatch/middleware/server_timing.rb:60:in 'ActionDispatch::ServerTiming#call'
actionpack (8.0.2) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (8.0.2) lib/action_dispatch/middleware/static.rb:27:in 'ActionDispatch::Static#call'
rack (3.1.16) lib/rack/sendfile.rb:114:in 'Rack::Sendfile#call'
actionpack (8.0.2) lib/action_dispatch/middleware/host_authorization.rb:143:in 'ActionDispatch::HostAuthorization#call'
railties (8.0.2) lib/rails/engine.rb:535:in 'Rails::Engine#call'
puma (6.6.0) lib/puma/configuration.rb:279:in 'Puma::Configuration::ConfigMiddleware#call'
puma (6.6.0) lib/puma/request.rb:99:in 'block in Puma::Request#handle_request'
puma (6.6.0) lib/puma/thread_pool.rb:390:in 'Puma::ThreadPool#with_force_shutdown'
puma (6.6.0) lib/puma/request.rb:98:in 'Puma::Request#handle_request'
puma (6.6.0) lib/puma/server.rb:472:in 'Puma::Server#process_client'
puma (6.6.0) lib/puma/server.rb:254:in 'block in Puma::Server#run'
puma (6.6.0) lib/puma/thread_pool.rb:167:in 'block in Puma::ThreadPool#spawn_thread'
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='MbsPromoRetention'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='MbsPromoRetention'*/[0m
Migrating to AddIdColumnToBonuses (20250812200426)
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='MbsPromoRetention'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='MbsPromoRetention'*/[0m
Migrating to AddIdColumnToBonuses (20250812200426)
  [1m[36mActiveRecord::InternalMetadata Load (2.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='MbsPromoRetention'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='MbsPromoRetention'*/[0m
Migrating to AddIdColumnToBonuses (20250812200426)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  [1m[35m (1.5ms)[0m  [1m[35mALTER TABLE "bonuses" ADD "id" bigint /*application='MbsPromoRetention'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION /*application='MbsPromoRetention'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='MbsPromoRetention'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='MbsPromoRetention'*/[0m
Migrating to AddIdColumnToBonuses (20250812200426)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "bonuses" ADD "id" bigint /*application='MbsPromoRetention'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION /*application='MbsPromoRetention'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='MbsPromoRetention'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='MbsPromoRetention'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='MbsPromoRetention'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='MbsPromoRetention'*/[0m
Migrating to AddProjectAndDslTagToBonuses (20250812193953)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mDROP INDEX "index_bonuses_on_dsl_tag" /*application='MbsPromoRetention'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mDROP INDEX "index_bonuses_on_project" /*application='MbsPromoRetention'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[35mPRAGMA foreign_keys /*application='MbsPromoRetention'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TEMPORARY TABLE "abonuses" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar NOT NULL, "code" varchar NOT NULL, "bonus_type" varchar NOT NULL, "status" varchar DEFAULT 'active', "minimum_deposit" decimal(10,2), "wager" decimal(10,2), "maximum_winnings" decimal(15,2), "wagering_strategy" varchar, "availability_start_date" datetime(6) NOT NULL, "availability_end_date" datetime(6) NOT NULL, "user_group" varchar, "tags" text, "country" varchar, "currency" varchar NOT NULL, "created_by" integer, "updated_by" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, "project" varchar, "dsl_tag" varchar) /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "tindex_abonuses_on_currency" ON "abonuses" ("currency") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "tindex_abonuses_on_country" ON "abonuses" ("country") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "tindex_abonuses_on_user_group" ON "abonuses" ("user_group") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "tindex_abonuses_on_availability_end_date" ON "abonuses" ("availability_end_date") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "tindex_abonuses_on_availability_start_date" ON "abonuses" ("availability_start_date") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "tindex_abonuses_on_status" ON "abonuses" ("status") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "tindex_abonuses_on_bonus_type" ON "abonuses" ("bonus_type") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "tindex_abonuses_on_code" ON "abonuses" ("code") /*application='MbsPromoRetention'*/[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "abonuses" ("id","name","code","bonus_type","status","minimum_deposit","wager","maximum_winnings","wagering_strategy","availability_start_date","availability_end_date","user_group","tags","country","currency","created_by","updated_by","created_at","updated_at","project","dsl_tag")
                     SELECT "id","name","code","bonus_type","status","minimum_deposit","wager","maximum_winnings","wagering_strategy","availability_start_date","availability_end_date","user_group","tags","country","currency","created_by","updated_by","created_at","updated_at","project","dsl_tag" FROM "bonuses" /*application='MbsPromoRetention'*/[0m
  [1m[35m (1.2ms)[0m  [1m[35mDROP TABLE "bonuses" /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "bonuses" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar NOT NULL, "code" varchar NOT NULL, "bonus_type" varchar NOT NULL, "status" varchar DEFAULT 'active', "minimum_deposit" decimal(10,2), "wager" decimal(10,2), "maximum_winnings" decimal(15,2), "wagering_strategy" varchar, "availability_start_date" datetime(6) NOT NULL, "availability_end_date" datetime(6) NOT NULL, "user_group" varchar, "tags" text, "country" varchar, "currency" varchar NOT NULL, "created_by" integer, "updated_by" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, "project" varchar) /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_bonuses_on_code" ON "bonuses" ("code") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_bonuses_on_bonus_type" ON "bonuses" ("bonus_type") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_bonuses_on_status" ON "bonuses" ("status") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_bonuses_on_availability_start_date" ON "bonuses" ("availability_start_date") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_bonuses_on_availability_end_date" ON "bonuses" ("availability_end_date") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_bonuses_on_user_group" ON "bonuses" ("user_group") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_bonuses_on_country" ON "bonuses" ("country") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_bonuses_on_currency" ON "bonuses" ("currency") /*application='MbsPromoRetention'*/[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "bonuses" ("id","name","code","bonus_type","status","minimum_deposit","wager","maximum_winnings","wagering_strategy","availability_start_date","availability_end_date","user_group","tags","country","currency","created_by","updated_by","created_at","updated_at","project")
                     SELECT "id","name","code","bonus_type","status","minimum_deposit","wager","maximum_winnings","wagering_strategy","availability_start_date","availability_end_date","user_group","tags","country","currency","created_by","updated_by","created_at","updated_at","project" FROM "abonuses" /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE "abonuses" /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0 /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1 /*application='MbsPromoRetention'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[35mPRAGMA foreign_keys /*application='MbsPromoRetention'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TEMPORARY TABLE "abonuses" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar NOT NULL, "code" varchar NOT NULL, "bonus_type" varchar NOT NULL, "status" varchar DEFAULT 'active', "minimum_deposit" decimal(10,2), "wager" decimal(10,2), "maximum_winnings" decimal(15,2), "wagering_strategy" varchar, "availability_start_date" datetime(6) NOT NULL, "availability_end_date" datetime(6) NOT NULL, "user_group" varchar, "tags" text, "country" varchar, "currency" varchar NOT NULL, "created_by" integer, "updated_by" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, "project" varchar) /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "tindex_abonuses_on_currency" ON "abonuses" ("currency") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "tindex_abonuses_on_country" ON "abonuses" ("country") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "tindex_abonuses_on_user_group" ON "abonuses" ("user_group") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "tindex_abonuses_on_availability_end_date" ON "abonuses" ("availability_end_date") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "tindex_abonuses_on_availability_start_date" ON "abonuses" ("availability_start_date") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "tindex_abonuses_on_status" ON "abonuses" ("status") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "tindex_abonuses_on_bonus_type" ON "abonuses" ("bonus_type") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "tindex_abonuses_on_code" ON "abonuses" ("code") /*application='MbsPromoRetention'*/[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "abonuses" ("id","name","code","bonus_type","status","minimum_deposit","wager","maximum_winnings","wagering_strategy","availability_start_date","availability_end_date","user_group","tags","country","currency","created_by","updated_by","created_at","updated_at","project")
                     SELECT "id","name","code","bonus_type","status","minimum_deposit","wager","maximum_winnings","wagering_strategy","availability_start_date","availability_end_date","user_group","tags","country","currency","created_by","updated_by","created_at","updated_at","project" FROM "bonuses" /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "bonuses" /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "bonuses" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar NOT NULL, "code" varchar NOT NULL, "bonus_type" varchar NOT NULL, "status" varchar DEFAULT 'active', "minimum_deposit" decimal(10,2), "wager" decimal(10,2), "maximum_winnings" decimal(15,2), "wagering_strategy" varchar, "availability_start_date" datetime(6) NOT NULL, "availability_end_date" datetime(6) NOT NULL, "user_group" varchar, "tags" text, "country" varchar, "currency" varchar NOT NULL, "created_by" integer, "updated_by" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL) /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_bonuses_on_code" ON "bonuses" ("code") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_bonuses_on_bonus_type" ON "bonuses" ("bonus_type") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_bonuses_on_status" ON "bonuses" ("status") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_bonuses_on_availability_start_date" ON "bonuses" ("availability_start_date") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_bonuses_on_availability_end_date" ON "bonuses" ("availability_end_date") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_bonuses_on_user_group" ON "bonuses" ("user_group") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_bonuses_on_country" ON "bonuses" ("country") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_bonuses_on_currency" ON "bonuses" ("currency") /*application='MbsPromoRetention'*/[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "bonuses" ("id","name","code","bonus_type","status","minimum_deposit","wager","maximum_winnings","wagering_strategy","availability_start_date","availability_end_date","user_group","tags","country","currency","created_by","updated_by","created_at","updated_at")
                     SELECT "id","name","code","bonus_type","status","minimum_deposit","wager","maximum_winnings","wagering_strategy","availability_start_date","availability_end_date","user_group","tags","country","currency","created_by","updated_by","created_at","updated_at" FROM "abonuses" /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE "abonuses" /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0 /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1 /*application='MbsPromoRetention'*/[0m
  [1m[36mActiveRecord::SchemaMigration Destroy (0.0ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = '20250812193953' /*application='MbsPromoRetention'*/[0m
  [1m[36mTRANSACTION (4.5ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='MbsPromoRetention'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='MbsPromoRetention'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='MbsPromoRetention'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='MbsPromoRetention'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='MbsPromoRetention'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='MbsPromoRetention'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "bonuses" /*application='MbsPromoRetention'*/[0m
  [1m[35m (3.7ms)[0m  [1m[35mCREATE TABLE "bonuses" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar NOT NULL, "code" varchar NOT NULL, "bonus_type" varchar NOT NULL, "status" varchar DEFAULT 'active', "minimum_deposit" decimal(10,2), "wager" decimal(10,2), "maximum_winnings" decimal(15,2), "wagering_strategy" varchar, "availability_start_date" datetime(6) NOT NULL, "availability_end_date" datetime(6) NOT NULL, "user_group" varchar, "tags" text, "country" varchar, "currency" varchar NOT NULL, "created_by" integer, "updated_by" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL) /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE INDEX "index_bonuses_on_availability_end_date" ON "bonuses" ("availability_end_date") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE INDEX "index_bonuses_on_availability_start_date" ON "bonuses" ("availability_start_date") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_bonuses_on_bonus_type" ON "bonuses" ("bonus_type") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_bonuses_on_code" ON "bonuses" ("code") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_bonuses_on_country" ON "bonuses" ("country") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_bonuses_on_currency" ON "bonuses" ("currency") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_bonuses_on_status" ON "bonuses" ("status") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_bonuses_on_user_group" ON "bonuses" ("user_group") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "collect_bonuses" /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "collect_bonuses" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "bonus_id" integer NOT NULL, "collection_type" varchar NOT NULL, "collection_amount" decimal(15,2), "collection_frequency" varchar DEFAULT 'daily', "collection_limit" integer DEFAULT 1, "collected_count" integer DEFAULT 0, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL) /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_collect_bonuses_on_bonus_id" ON "collect_bonuses" ("bonus_id") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE INDEX "index_collect_bonuses_on_collection_frequency" ON "collect_bonuses" ("collection_frequency") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_collect_bonuses_on_collection_type" ON "collect_bonuses" ("collection_type") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "deposit_bonuses" /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "deposit_bonuses" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "bonus_id" integer NOT NULL, "deposit_amount_required" decimal(10,2), "bonus_percentage" decimal(5,2), "max_bonus_amount" decimal(15,2), "first_deposit_only" boolean DEFAULT 0, "recurring_eligible" boolean DEFAULT 0, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL) /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_deposit_bonuses_on_bonus_id" ON "deposit_bonuses" ("bonus_id") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups_update_bonuses" /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "groups_update_bonuses" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "bonus_id" integer NOT NULL, "target_groups" text NOT NULL, "update_type" varchar NOT NULL, "update_parameters" text, "batch_size" integer DEFAULT 100, "processing_status" varchar DEFAULT 'pending', "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL) /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_groups_update_bonuses_on_bonus_id" ON "groups_update_bonuses" ("bonus_id") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_groups_update_bonuses_on_processing_status" ON "groups_update_bonuses" ("processing_status") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE INDEX "index_groups_update_bonuses_on_update_type" ON "groups_update_bonuses" ("update_type") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "input_coupon_bonuses" /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "input_coupon_bonuses" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "bonus_id" integer NOT NULL, "coupon_code" varchar NOT NULL, "usage_limit" integer DEFAULT 1, "usage_count" integer DEFAULT 0, "expires_at" datetime(6), "single_use" boolean DEFAULT 1, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL) /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_input_coupon_bonuses_on_bonus_id" ON "input_coupon_bonuses" ("bonus_id") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_input_coupon_bonuses_on_coupon_code" ON "input_coupon_bonuses" ("coupon_code") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_input_coupon_bonuses_on_expires_at" ON "input_coupon_bonuses" ("expires_at") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "manual_bonuses" /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE TABLE "manual_bonuses" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "bonus_id" integer NOT NULL, "admin_notes" text, "approval_required" boolean DEFAULT 1, "auto_apply" boolean DEFAULT 0, "conditions" text, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL) /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_manual_bonuses_on_approval_required" ON "manual_bonuses" ("approval_required") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE INDEX "index_manual_bonuses_on_auto_apply" ON "manual_bonuses" ("auto_apply") /*application='MbsPromoRetention'*/[0m
  [1m[35m (2.5ms)[0m  [1m[35mCREATE INDEX "index_manual_bonuses_on_bonus_id" ON "manual_bonuses" ("bonus_id") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "scheduler_bonuses" /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "scheduler_bonuses" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "bonus_id" integer NOT NULL, "schedule_type" varchar NOT NULL, "cron_expression" varchar, "next_run_at" datetime(6), "last_run_at" datetime(6), "execution_count" integer DEFAULT 0, "max_executions" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL) /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_scheduler_bonuses_on_bonus_id" ON "scheduler_bonuses" ("bonus_id") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE INDEX "index_scheduler_bonuses_on_last_run_at" ON "scheduler_bonuses" ("last_run_at") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_scheduler_bonuses_on_next_run_at" ON "scheduler_bonuses" ("next_run_at") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_scheduler_bonuses_on_schedule_type" ON "scheduler_bonuses" ("schedule_type") /*application='MbsPromoRetention'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  [1m[35mSQL (0.9ms)[0m  [1m[35mPRAGMA foreign_keys /*application='MbsPromoRetention'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TEMPORARY TABLE "acollect_bonuses" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "bonus_id" integer NOT NULL, "collection_type" varchar NOT NULL, "collection_amount" decimal(15,2), "collection_frequency" varchar DEFAULT 'daily', "collection_limit" integer DEFAULT 1, "collected_count" integer DEFAULT 0, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL) /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "tindex_acollect_bonuses_on_collection_type" ON "acollect_bonuses" ("collection_type") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "tindex_acollect_bonuses_on_collection_frequency" ON "acollect_bonuses" ("collection_frequency") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "tindex_acollect_bonuses_on_bonus_id" ON "acollect_bonuses" ("bonus_id") /*application='MbsPromoRetention'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[32mINSERT INTO "acollect_bonuses" ("id","bonus_id","collection_type","collection_amount","collection_frequency","collection_limit","collected_count","created_at","updated_at")
                     SELECT "id","bonus_id","collection_type","collection_amount","collection_frequency","collection_limit","collected_count","created_at","updated_at" FROM "collect_bonuses" /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE "collect_bonuses" /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "collect_bonuses" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "bonus_id" integer NOT NULL, "collection_type" varchar NOT NULL, "collection_amount" decimal(15,2), "collection_frequency" varchar DEFAULT 'daily', "collection_limit" integer DEFAULT 1, "collected_count" integer DEFAULT 0, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_39036008a7"
FOREIGN KEY ("bonus_id")
  REFERENCES "bonuses" ("id")
) /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_collect_bonuses_on_bonus_id" ON "collect_bonuses" ("bonus_id") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_collect_bonuses_on_collection_frequency" ON "collect_bonuses" ("collection_frequency") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_collect_bonuses_on_collection_type" ON "collect_bonuses" ("collection_type") /*application='MbsPromoRetention'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[32mINSERT INTO "collect_bonuses" ("id","bonus_id","collection_type","collection_amount","collection_frequency","collection_limit","collected_count","created_at","updated_at")
                     SELECT "id","bonus_id","collection_type","collection_amount","collection_frequency","collection_limit","collected_count","created_at","updated_at" FROM "acollect_bonuses" /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE "acollect_bonuses" /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0 /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1 /*application='MbsPromoRetention'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  [1m[35mSQL (0.7ms)[0m  [1m[35mPRAGMA foreign_keys /*application='MbsPromoRetention'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TEMPORARY TABLE "adeposit_bonuses" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "bonus_id" integer NOT NULL, "deposit_amount_required" decimal(10,2), "bonus_percentage" decimal(5,2), "max_bonus_amount" decimal(15,2), "first_deposit_only" boolean DEFAULT 0, "recurring_eligible" boolean DEFAULT 0, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL) /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "tindex_adeposit_bonuses_on_bonus_id" ON "adeposit_bonuses" ("bonus_id") /*application='MbsPromoRetention'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "adeposit_bonuses" ("id","bonus_id","deposit_amount_required","bonus_percentage","max_bonus_amount","first_deposit_only","recurring_eligible","created_at","updated_at")
                     SELECT "id","bonus_id","deposit_amount_required","bonus_percentage","max_bonus_amount","first_deposit_only","recurring_eligible","created_at","updated_at" FROM "deposit_bonuses" /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE "deposit_bonuses" /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "deposit_bonuses" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "bonus_id" integer NOT NULL, "deposit_amount_required" decimal(10,2), "bonus_percentage" decimal(5,2), "max_bonus_amount" decimal(15,2), "first_deposit_only" boolean DEFAULT 0, "recurring_eligible" boolean DEFAULT 0, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_2448ff73ca"
FOREIGN KEY ("bonus_id")
  REFERENCES "bonuses" ("id")
) /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_deposit_bonuses_on_bonus_id" ON "deposit_bonuses" ("bonus_id") /*application='MbsPromoRetention'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[32mINSERT INTO "deposit_bonuses" ("id","bonus_id","deposit_amount_required","bonus_percentage","max_bonus_amount","first_deposit_only","recurring_eligible","created_at","updated_at")
                     SELECT "id","bonus_id","deposit_amount_required","bonus_percentage","max_bonus_amount","first_deposit_only","recurring_eligible","created_at","updated_at" FROM "adeposit_bonuses" /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE "adeposit_bonuses" /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0 /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1 /*application='MbsPromoRetention'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  [1m[35mSQL (0.7ms)[0m  [1m[35mPRAGMA foreign_keys /*application='MbsPromoRetention'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TEMPORARY TABLE "agroups_update_bonuses" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "bonus_id" integer NOT NULL, "target_groups" text NOT NULL, "update_type" varchar NOT NULL, "update_parameters" text, "batch_size" integer DEFAULT 100, "processing_status" varchar DEFAULT 'pending', "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL) /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "tindex_agroups_update_bonuses_on_update_type" ON "agroups_update_bonuses" ("update_type") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "tindex_agroups_update_bonuses_on_processing_status" ON "agroups_update_bonuses" ("processing_status") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "tindex_agroups_update_bonuses_on_bonus_id" ON "agroups_update_bonuses" ("bonus_id") /*application='MbsPromoRetention'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[32mINSERT INTO "agroups_update_bonuses" ("id","bonus_id","target_groups","update_type","update_parameters","batch_size","processing_status","created_at","updated_at")
                     SELECT "id","bonus_id","target_groups","update_type","update_parameters","batch_size","processing_status","created_at","updated_at" FROM "groups_update_bonuses" /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE "groups_update_bonuses" /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "groups_update_bonuses" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "bonus_id" integer NOT NULL, "target_groups" text NOT NULL, "update_type" varchar NOT NULL, "update_parameters" text, "batch_size" integer DEFAULT 100, "processing_status" varchar DEFAULT 'pending', "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_ed7bb087a7"
FOREIGN KEY ("bonus_id")
  REFERENCES "bonuses" ("id")
) /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_groups_update_bonuses_on_bonus_id" ON "groups_update_bonuses" ("bonus_id") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_groups_update_bonuses_on_processing_status" ON "groups_update_bonuses" ("processing_status") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_groups_update_bonuses_on_update_type" ON "groups_update_bonuses" ("update_type") /*application='MbsPromoRetention'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[32mINSERT INTO "groups_update_bonuses" ("id","bonus_id","target_groups","update_type","update_parameters","batch_size","processing_status","created_at","updated_at")
                     SELECT "id","bonus_id","target_groups","update_type","update_parameters","batch_size","processing_status","created_at","updated_at" FROM "agroups_update_bonuses" /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE "agroups_update_bonuses" /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0 /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1 /*application='MbsPromoRetention'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  [1m[35mSQL (0.8ms)[0m  [1m[35mPRAGMA foreign_keys /*application='MbsPromoRetention'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TEMPORARY TABLE "ainput_coupon_bonuses" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "bonus_id" integer NOT NULL, "coupon_code" varchar NOT NULL, "usage_limit" integer DEFAULT 1, "usage_count" integer DEFAULT 0, "expires_at" datetime(6), "single_use" boolean DEFAULT 1, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL) /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "tindex_ainput_coupon_bonuses_on_expires_at" ON "ainput_coupon_bonuses" ("expires_at") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "tindex_ainput_coupon_bonuses_on_coupon_code" ON "ainput_coupon_bonuses" ("coupon_code") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "tindex_ainput_coupon_bonuses_on_bonus_id" ON "ainput_coupon_bonuses" ("bonus_id") /*application='MbsPromoRetention'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[32mINSERT INTO "ainput_coupon_bonuses" ("id","bonus_id","coupon_code","usage_limit","usage_count","expires_at","single_use","created_at","updated_at")
                     SELECT "id","bonus_id","coupon_code","usage_limit","usage_count","expires_at","single_use","created_at","updated_at" FROM "input_coupon_bonuses" /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE "input_coupon_bonuses" /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "input_coupon_bonuses" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "bonus_id" integer NOT NULL, "coupon_code" varchar NOT NULL, "usage_limit" integer DEFAULT 1, "usage_count" integer DEFAULT 0, "expires_at" datetime(6), "single_use" boolean DEFAULT 1, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_196a679410"
FOREIGN KEY ("bonus_id")
  REFERENCES "bonuses" ("id")
) /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_input_coupon_bonuses_on_bonus_id" ON "input_coupon_bonuses" ("bonus_id") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_input_coupon_bonuses_on_coupon_code" ON "input_coupon_bonuses" ("coupon_code") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_input_coupon_bonuses_on_expires_at" ON "input_coupon_bonuses" ("expires_at") /*application='MbsPromoRetention'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[32mINSERT INTO "input_coupon_bonuses" ("id","bonus_id","coupon_code","usage_limit","usage_count","expires_at","single_use","created_at","updated_at")
                     SELECT "id","bonus_id","coupon_code","usage_limit","usage_count","expires_at","single_use","created_at","updated_at" FROM "ainput_coupon_bonuses" /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE "ainput_coupon_bonuses" /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0 /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1 /*application='MbsPromoRetention'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  [1m[35mSQL (2.7ms)[0m  [1m[35mPRAGMA foreign_keys /*application='MbsPromoRetention'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TEMPORARY TABLE "amanual_bonuses" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "bonus_id" integer NOT NULL, "admin_notes" text, "approval_required" boolean DEFAULT 1, "auto_apply" boolean DEFAULT 0, "conditions" text, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL) /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "tindex_amanual_bonuses_on_bonus_id" ON "amanual_bonuses" ("bonus_id") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "tindex_amanual_bonuses_on_auto_apply" ON "amanual_bonuses" ("auto_apply") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "tindex_amanual_bonuses_on_approval_required" ON "amanual_bonuses" ("approval_required") /*application='MbsPromoRetention'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[32mINSERT INTO "amanual_bonuses" ("id","bonus_id","admin_notes","approval_required","auto_apply","conditions","created_at","updated_at")
                     SELECT "id","bonus_id","admin_notes","approval_required","auto_apply","conditions","created_at","updated_at" FROM "manual_bonuses" /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE "manual_bonuses" /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "manual_bonuses" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "bonus_id" integer NOT NULL, "admin_notes" text, "approval_required" boolean DEFAULT 1, "auto_apply" boolean DEFAULT 0, "conditions" text, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_342825fcc9"
FOREIGN KEY ("bonus_id")
  REFERENCES "bonuses" ("id")
) /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_manual_bonuses_on_approval_required" ON "manual_bonuses" ("approval_required") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_manual_bonuses_on_auto_apply" ON "manual_bonuses" ("auto_apply") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_manual_bonuses_on_bonus_id" ON "manual_bonuses" ("bonus_id") /*application='MbsPromoRetention'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "manual_bonuses" ("id","bonus_id","admin_notes","approval_required","auto_apply","conditions","created_at","updated_at")
                     SELECT "id","bonus_id","admin_notes","approval_required","auto_apply","conditions","created_at","updated_at" FROM "amanual_bonuses" /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE "amanual_bonuses" /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0 /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1 /*application='MbsPromoRetention'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  [1m[35mSQL (0.8ms)[0m  [1m[35mPRAGMA foreign_keys /*application='MbsPromoRetention'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TEMPORARY TABLE "ascheduler_bonuses" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "bonus_id" integer NOT NULL, "schedule_type" varchar NOT NULL, "cron_expression" varchar, "next_run_at" datetime(6), "last_run_at" datetime(6), "execution_count" integer DEFAULT 0, "max_executions" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL) /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "tindex_ascheduler_bonuses_on_schedule_type" ON "ascheduler_bonuses" ("schedule_type") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "tindex_ascheduler_bonuses_on_next_run_at" ON "ascheduler_bonuses" ("next_run_at") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "tindex_ascheduler_bonuses_on_last_run_at" ON "ascheduler_bonuses" ("last_run_at") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "tindex_ascheduler_bonuses_on_bonus_id" ON "ascheduler_bonuses" ("bonus_id") /*application='MbsPromoRetention'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[32mINSERT INTO "ascheduler_bonuses" ("id","bonus_id","schedule_type","cron_expression","next_run_at","last_run_at","execution_count","max_executions","created_at","updated_at")
                     SELECT "id","bonus_id","schedule_type","cron_expression","next_run_at","last_run_at","execution_count","max_executions","created_at","updated_at" FROM "scheduler_bonuses" /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE "scheduler_bonuses" /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "scheduler_bonuses" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "bonus_id" integer NOT NULL, "schedule_type" varchar NOT NULL, "cron_expression" varchar, "next_run_at" datetime(6), "last_run_at" datetime(6), "execution_count" integer DEFAULT 0, "max_executions" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_f9f29eae23"
FOREIGN KEY ("bonus_id")
  REFERENCES "bonuses" ("id")
) /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_scheduler_bonuses_on_bonus_id" ON "scheduler_bonuses" ("bonus_id") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_scheduler_bonuses_on_last_run_at" ON "scheduler_bonuses" ("last_run_at") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_scheduler_bonuses_on_next_run_at" ON "scheduler_bonuses" ("next_run_at") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_scheduler_bonuses_on_schedule_type" ON "scheduler_bonuses" ("schedule_type") /*application='MbsPromoRetention'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "scheduler_bonuses" ("id","bonus_id","schedule_type","cron_expression","next_run_at","last_run_at","execution_count","max_executions","created_at","updated_at")
                     SELECT "id","bonus_id","schedule_type","cron_expression","next_run_at","last_run_at","execution_count","max_executions","created_at","updated_at" FROM "ascheduler_bonuses" /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE "ascheduler_bonuses" /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0 /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1 /*application='MbsPromoRetention'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY) /*application='MbsPromoRetention'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20250811210559) /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20250811204912),
(20250811204906),
(20250811204849),
(20250811204844),
(20250811204839),
(20250811204831),
(20250811204823); /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL) /*application='MbsPromoRetention'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='MbsPromoRetention'*/[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'development', '2025-08-12 20:06:19.561060', '2025-08-12 20:06:19.561063') RETURNING "key" /*application='MbsPromoRetention'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='MbsPromoRetention'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'schema_sha1' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='MbsPromoRetention'*/[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '980d16bbc047c109e8fed7d1cab9da470bc3843d', '2025-08-12 20:06:19.563042', '2025-08-12 20:06:19.563043') RETURNING "key" /*application='MbsPromoRetention'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='MbsPromoRetention'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='MbsPromoRetention'*/[0m
Migrating to AddProjectAndDslTagToBonuses (20250812193953)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "bonuses" ADD "project" varchar /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "bonuses" ADD "dsl_tag" varchar /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_bonuses_on_project" ON "bonuses" ("project") /*application='MbsPromoRetention'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_bonuses_on_dsl_tag" ON "bonuses" ("dsl_tag") /*application='MbsPromoRetention'*/[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20250812193953') RETURNING "version" /*application='MbsPromoRetention'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='MbsPromoRetention'*/[0m
Started GET "/" for ::1 at 2025-08-12 23:06:27 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='MbsPromoRetention'*/[0m
Processing by BonusesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  Rendered bonuses/index.html.erb within layouts/application (Duration: 10.4ms | GC: 1.6ms)
  Rendered layout layouts/application.html.erb (Duration: 15.5ms | GC: 1.6ms)
Completed 200 OK in 44ms (Views: 17.5ms | ActiveRecord: 1.8ms (1 query, 0 cached) | GC: 3.7ms)


Started GET "/bonuses/new" for ::1 at 2025-08-12 23:06:29 +0300
Processing by BonusesController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering bonuses/new.html.erb within layouts/application
  Rendered bonuses/_type_specific_form.html.erb (Duration: 1.9ms | GC: 0.0ms)
  Rendered bonuses/new.html.erb within layouts/application (Duration: 8.3ms | GC: 0.7ms)
  Rendered layout layouts/application.html.erb (Duration: 9.2ms | GC: 0.7ms)
Completed 200 OK in 39ms (Views: 9.7ms | ActiveRecord: 1.1ms (0 queries, 0 cached) | GC: 7.2ms)


Started GET "/bonuses/new" for ::1 at 2025-08-12 23:06:30 +0300
Processing by BonusesController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering bonuses/new.html.erb within layouts/application
  Rendered bonuses/_type_specific_form.html.erb (Duration: 0.6ms | GC: 0.0ms)
  Rendered bonuses/new.html.erb within layouts/application (Duration: 5.9ms | GC: 1.0ms)
  Rendered layout layouts/application.html.erb (Duration: 6.8ms | GC: 1.0ms)
Completed 200 OK in 18ms (Views: 7.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 1.0ms)


  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:113:in 'block (3 levels) in <main>'
  [1m[36mBonus Exists? (1.5ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'WELCOME100' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:113:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:113:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:113:in 'block (3 levels) in <main>'
  [1m[36mBonus Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'WELCOME100' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:113:in 'block (3 levels) in <main>'
  [1m[36mBonus Create (0.2ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at", "project", "dsl_tag") VALUES ('Welcome Bonus 100%', 'WELCOME100', 'deposit', 'active', NULL, 1000.0, 500.0, 'standard', '2025-08-12 00:00:00', '2025-09-11 00:00:00', 'new_users', 'welcome, first_deposit, high_value', 'US', 'USD', 1, 1, '2025-08-12 20:08:44.328940', '2025-08-12 20:08:44.328940', 'VOLNA', 'welcome_bonus') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:113:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (3.3ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:113:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:118:in 'block (3 levels) in <main>'
  [1m[36mDepositBonus Create (0.8ms)[0m  [1m[32mINSERT INTO "deposit_bonuses" ("bonus_id", "deposit_amount_required", "bonus_percentage", "max_bonus_amount", "first_deposit_only", "recurring_eligible", "created_at", "updated_at") VALUES (1, 10.0, 100.0, 500.0, 1, 0, '2025-08-12 20:08:44.349629', '2025-08-12 20:08:44.349629') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:118:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:118:in 'block (3 levels) in <main>'
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 1 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:118:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:113:in 'block (3 levels) in <main>'
  [1m[36mBonus Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'RELOAD50' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:113:in 'block (3 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at", "project", "dsl_tag") VALUES ('Reload Bonus 50%', 'RELOAD50', 'deposit', 'active', NULL, 750.0, 250.0, 'standard', '2025-08-12 00:00:00', '2025-10-11 00:00:00', 'existing_users', 'reload, weekly, medium_value', 'US', 'USD', 1, 1, '2025-08-12 20:08:44.356906', '2025-08-12 20:08:44.356906', 'ROX', 'reload_bonus') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:113:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:113:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:126:in 'block (3 levels) in <main>'
  [1m[36mDepositBonus Create (0.8ms)[0m  [1m[32mINSERT INTO "deposit_bonuses" ("bonus_id", "deposit_amount_required", "bonus_percentage", "max_bonus_amount", "first_deposit_only", "recurring_eligible", "created_at", "updated_at") VALUES (2, 25.0, 50.0, 250.0, 0, 1, '2025-08-12 20:08:44.362008', '2025-08-12 20:08:44.362008') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:126:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:126:in 'block (3 levels) in <main>'
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 2 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:126:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:113:in 'block (3 levels) in <main>'
  [1m[36mBonus Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'VIP200' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:113:in 'block (3 levels) in <main>'
  [1m[36mBonus Create (0.2ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at", "project", "dsl_tag") VALUES ('VIP Bonus 200%', 'VIP200', 'deposit', 'active', NULL, 3000.0, 2000.0, 'vip', '2025-08-12 00:00:00', '2025-11-10 00:00:00', 'vip_users', 'vip, high_roller, exclusive', 'US', 'USD', 1, 1, '2025-08-12 20:08:44.370970', '2025-08-12 20:08:44.370970', 'FRESH', 'vip_bonus') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:113:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:113:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:134:in 'block (3 levels) in <main>'
  [1m[36mDepositBonus Create (0.8ms)[0m  [1m[32mINSERT INTO "deposit_bonuses" ("bonus_id", "deposit_amount_required", "bonus_percentage", "max_bonus_amount", "first_deposit_only", "recurring_eligible", "created_at", "updated_at") VALUES (3, 100.0, 200.0, 2000.0, 0, 1, '2025-08-12 20:08:44.373449', '2025-08-12 20:08:44.373449') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:134:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:134:in 'block (3 levels) in <main>'
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 3 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:134:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:113:in 'block (3 levels) in <main>'
  [1m[36mBonus Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'WEEKEND75' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:113:in 'block (3 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at", "project", "dsl_tag") VALUES ('Weekend Special 75%', 'WEEKEND75', 'deposit', 'active', NULL, 600.0, 150.0, 'weekend', '2025-08-11 00:00:00', '2025-08-17 00:00:00', 'all_users', 'weekend, limited_time, medium_value', 'US', 'USD', 1, 1, '2025-08-12 20:08:44.379180', '2025-08-12 20:08:44.379180', 'SOL', 'weekend_bonus') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:113:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:113:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:142:in 'block (3 levels) in <main>'
  [1m[36mDepositBonus Create (0.7ms)[0m  [1m[32mINSERT INTO "deposit_bonuses" ("bonus_id", "deposit_amount_required", "bonus_percentage", "max_bonus_amount", "first_deposit_only", "recurring_eligible", "created_at", "updated_at") VALUES (4, 20.0, 75.0, 150.0, 0, 0, '2025-08-12 20:08:44.381356', '2025-08-12 20:08:44.381356') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:142:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:142:in 'block (3 levels) in <main>'
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 4 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:142:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:113:in 'block (3 levels) in <main>'
  [1m[36mBonus Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'FIRST150' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:113:in 'block (3 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at", "project", "dsl_tag") VALUES ('First Deposit 150%', 'FIRST150', 'deposit', 'active', NULL, 1500.0, 750.0, 'first_deposit', '2025-08-12 00:00:00', '2025-12-10 00:00:00', 'new_users', 'first_deposit, high_value, exclusive', 'US', 'USD', 1, 1, '2025-08-12 20:08:44.386399', '2025-08-12 20:08:44.386399', 'JET', 'first_deposit_bonus') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:113:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:113:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:150:in 'block (3 levels) in <main>'
  [1m[36mDepositBonus Create (3.6ms)[0m  [1m[32mINSERT INTO "deposit_bonuses" ("bonus_id", "deposit_amount_required", "bonus_percentage", "max_bonus_amount", "first_deposit_only", "recurring_eligible", "created_at", "updated_at") VALUES (5, 50.0, 150.0, 750.0, 1, 0, '2025-08-12 20:08:44.388201', '2025-08-12 20:08:44.388201') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:150:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:150:in 'block (3 levels) in <main>'
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 5 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:150:in 'block (3 levels) in <main>'
  [1m[36mBonus Count (2.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" /*application='MbsPromoRetention'*/[0m
  [1m[36mBonus Count (1.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" WHERE "bonuses"."bonus_type" = 'deposit' /*application='MbsPromoRetention'*/[0m
  [1m[36mBonus Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" WHERE "bonuses"."status" = 'active' /*application='MbsPromoRetention'*/[0m
  [1m[36mBonus Load (0.1ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."id" = 1 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 1 LIMIT 1 /*application='MbsPromoRetention'*/[0m
Started GET "/" for ::1 at 2025-08-12 23:09:05 +0300
Processing by BonusesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.1ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."created_at" DESC LIMIT 20 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:110
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (5, 4, 3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:110
  [1m[36mInputCouponBonus Load (0.2ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (5, 4, 3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:110
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (5, 4, 3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:110
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (5, 4, 3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:110
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (5, 4, 3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:110
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (5, 4, 3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:110
  Rendered bonuses/index.html.erb within layouts/application (Duration: 66.3ms | GC: 5.0ms)
  Rendered layout layouts/application.html.erb (Duration: 73.6ms | GC: 5.0ms)
Completed 200 OK in 111ms (Views: 73.0ms | ActiveRecord: 2.5ms (8 queries, 0 cached) | GC: 5.0ms)


Started GET "/bonuses/5" for ::1 at 2025-08-12 23:09:08 +0300
Processing by BonusesController#show as HTML
  Parameters: {"id" => "5"}
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."id" = 5 LIMIT 1 /*action='show',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:159:in 'BonusesController#set_bonus'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/show.html.erb within layouts/application
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 5 LIMIT 1 /*action='show',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/_type_specific_details.html.erb:3
  Rendered bonuses/_type_specific_details.html.erb (Duration: 4.2ms | GC: 0.5ms)
  Rendered bonuses/show.html.erb within layouts/application (Duration: 6.7ms | GC: 0.5ms)
  Rendered layout layouts/application.html.erb (Duration: 7.7ms | GC: 0.5ms)
Completed 200 OK in 19ms (Views: 7.9ms | ActiveRecord: 0.3ms (2 queries, 0 cached) | GC: 0.5ms)


Started GET "/bonuses/new?duplicate=5" for ::1 at 2025-08-12 23:09:09 +0300
Processing by BonusesController#new as HTML
  Parameters: {"duplicate" => "5"}
  Rendering layout layouts/application.html.erb
  Rendering bonuses/new.html.erb within layouts/application
  Rendered bonuses/_type_specific_form.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered bonuses/new.html.erb within layouts/application (Duration: 4.3ms | GC: 0.4ms)
  Rendered layout layouts/application.html.erb (Duration: 5.5ms | GC: 0.4ms)
Completed 200 OK in 18ms (Views: 8.0ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.4ms)


Started GET "/" for ::1 at 2025-08-12 23:09:18 +0300
Processing by BonusesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.3ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."created_at" DESC LIMIT 20 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:110
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (5, 4, 3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:110
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (5, 4, 3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:110
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (5, 4, 3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:110
  [1m[36mCollectBonus Load (0.8ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (5, 4, 3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:110
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (5, 4, 3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:110
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (5, 4, 3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:110
  Rendered bonuses/index.html.erb within layouts/application (Duration: 21.4ms | GC: 0.7ms)
  Rendered layout layouts/application.html.erb (Duration: 23.7ms | GC: 0.7ms)
Completed 200 OK in 39ms (Views: 23.0ms | ActiveRecord: 1.7ms (8 queries, 0 cached) | GC: 1.3ms)


Started GET "/bonuses" for ::1 at 2025-08-12 23:10:08 +0300
Processing by BonusesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.1ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."created_at" DESC LIMIT 20 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (5, 4, 3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (5, 4, 3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.2ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (5, 4, 3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (5, 4, 3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.3ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (5, 4, 3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.2ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (5, 4, 3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 67.4ms | GC: 6.2ms)
  Rendered layout layouts/application.html.erb (Duration: 70.0ms | GC: 6.2ms)
Completed 200 OK in 94ms (Views: 67.4ms | ActiveRecord: 6.2ms (8 queries, 0 cached) | GC: 6.2ms)


Started GET "/" for ::1 at 2025-08-12 23:10:21 +0300
Processing by BonusesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."created_at" DESC LIMIT 20 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.6ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (5, 4, 3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.2ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (5, 4, 3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (5, 4, 3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (5, 4, 3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (5, 4, 3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (5, 4, 3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 68.0ms | GC: 3.1ms)
  Rendered layout layouts/application.html.erb (Duration: 70.9ms | GC: 3.1ms)
Completed 200 OK in 102ms (Views: 70.0ms | ActiveRecord: 4.9ms (8 queries, 0 cached) | GC: 5.5ms)


Started GET "/bonuses" for ::1 at 2025-08-12 23:12:44 +0300
Processing by BonusesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."created_at" DESC LIMIT 20 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (5, 4, 3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.4ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (5, 4, 3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (5, 4, 3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.3ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (5, 4, 3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (5, 4, 3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (5, 4, 3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 62.6ms | GC: 6.3ms)
  Rendered layout layouts/application.html.erb (Duration: 67.3ms | GC: 6.9ms)
Completed 200 OK in 83ms (Views: 61.5ms | ActiveRecord: 7.9ms (8 queries, 0 cached) | GC: 6.9ms)


Started GET "/" for ::1 at 2025-08-12 23:13:07 +0300
Processing by BonusesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."created_at" DESC LIMIT 20 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (5, 4, 3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (5, 4, 3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (5, 4, 3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (5, 4, 3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.2ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (5, 4, 3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (5, 4, 3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 83.3ms | GC: 2.7ms)
  Rendered layout layouts/application.html.erb (Duration: 87.1ms | GC: 2.7ms)
Completed 200 OK in 109ms (Views: 86.1ms | ActiveRecord: 5.8ms (8 queries, 0 cached) | GC: 3.3ms)


Started GET "/bonuses" for ::1 at 2025-08-12 23:13:51 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='MbsPromoRetention'*/[0m
Processing by BonusesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."created_at" DESC LIMIT 20 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.3ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (5, 4, 3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (5, 4, 3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (5, 4, 3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.2ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (5, 4, 3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (5, 4, 3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (5, 4, 3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 73.5ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 85.3ms | GC: 0.0ms)
Completed 200 OK in 151ms (Views: 84.9ms | ActiveRecord: 6.5ms (8 queries, 0 cached) | GC: 0.4ms)


Started GET "/bonuses" for ::1 at 2025-08-12 23:14:17 +0300
Processing by BonusesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."created_at" DESC LIMIT 20 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.2ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (5, 4, 3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (5, 4, 3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (1.7ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (5, 4, 3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (5, 4, 3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (5, 4, 3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (5, 4, 3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 93.1ms | GC: 20.4ms)
  Rendered layout layouts/application.html.erb (Duration: 95.9ms | GC: 20.7ms)
Completed 200 OK in 120ms (Views: 91.9ms | ActiveRecord: 6.5ms (8 queries, 0 cached) | GC: 20.7ms)


Started GET "/bonuses" for ::1 at 2025-08-12 23:14:39 +0300
Processing by BonusesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.3ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."created_at" DESC LIMIT 20 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (5, 4, 3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (5, 4, 3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (5, 4, 3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (5, 4, 3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (5, 4, 3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.4ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (5, 4, 3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 59.7ms | GC: 0.1ms)
  Rendered layout layouts/application.html.erb (Duration: 64.6ms | GC: 0.1ms)
Completed 200 OK in 84ms (Views: 61.1ms | ActiveRecord: 6.5ms (8 queries, 0 cached) | GC: 0.5ms)


Started GET "/" for ::1 at 2025-08-12 23:15:03 +0300
Processing by BonusesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.3ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."created_at" DESC LIMIT 20 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (5, 4, 3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.2ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (5, 4, 3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.2ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (5, 4, 3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (5, 4, 3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (5, 4, 3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.2ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (5, 4, 3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 44.3ms | GC: 1.3ms)
  Rendered layout layouts/application.html.erb (Duration: 46.6ms | GC: 1.3ms)
Completed 200 OK in 61ms (Views: 44.0ms | ActiveRecord: 4.3ms (8 queries, 0 cached) | GC: 1.5ms)


Started GET "/" for ::1 at 2025-08-12 23:15:05 +0300
Processing by BonusesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."created_at" DESC LIMIT 20 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (5, 4, 3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (5, 4, 3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (5, 4, 3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (5, 4, 3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (5, 4, 3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (5, 4, 3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 17.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 18.5ms | GC: 0.0ms)
Completed 200 OK in 29ms (Views: 18.2ms | ActiveRecord: 0.8ms (8 queries, 0 cached) | GC: 0.0ms)


Started GET "/bonuses" for ::1 at 2025-08-12 23:15:07 +0300
Processing by BonusesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."created_at" DESC LIMIT 20 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (5, 4, 3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (5, 4, 3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (5, 4, 3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (5, 4, 3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (5, 4, 3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (5, 4, 3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 13.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 15.0ms | GC: 0.0ms)
Completed 200 OK in 24ms (Views: 14.6ms | ActiveRecord: 0.9ms (8 queries, 0 cached) | GC: 0.0ms)


Started GET "/bonuses" for ::1 at 2025-08-12 23:15:08 +0300
Processing by BonusesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.9ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."created_at" DESC LIMIT 20 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.5ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (5, 4, 3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.2ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (5, 4, 3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (5, 4, 3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (5, 4, 3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.2ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (5, 4, 3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.2ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (5, 4, 3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 17.2ms | GC: 1.2ms)
  Rendered layout layouts/application.html.erb (Duration: 18.2ms | GC: 1.2ms)
Completed 200 OK in 26ms (Views: 16.5ms | ActiveRecord: 2.0ms (8 queries, 0 cached) | GC: 1.2ms)


Started GET "/heatmap" for ::1 at 2025-08-12 23:15:09 +0300
Processing by HeatmapController#index as HTML
  [1m[36mBonus Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", DATE(availability_start_date) AS "date_availability_start_date" FROM "bonuses" WHERE "bonuses"."availability_start_date" BETWEEN '2025-08-01 00:00:00' AND '2025-08-31 23:59:59.999999' GROUP BY DATE(availability_start_date) /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:43:in 'HeatmapController#generate_heatmap_data'
  [1m[36mBonus Pluck (0.1ms)[0m  [1m[34mSELECT DISTINCT "bonuses"."bonus_type" FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:16:in 'HeatmapController#index'
  Rendering layout layouts/application.html.erb
  Rendering heatmap/index.html.erb within layouts/application
  Rendered heatmap/index.html.erb within layouts/application (Duration: 3.2ms | GC: 0.3ms)
  Rendered layout layouts/application.html.erb (Duration: 4.4ms | GC: 0.3ms)
Completed 200 OK in 18ms (Views: 4.9ms | ActiveRecord: 0.3ms (2 queries, 0 cached) | GC: 0.7ms)


Started GET "/heatmap" for ::1 at 2025-08-12 23:15:10 +0300
Processing by HeatmapController#index as HTML
  [1m[36mBonus Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", DATE(availability_start_date) AS "date_availability_start_date" FROM "bonuses" WHERE "bonuses"."availability_start_date" BETWEEN '2025-08-01 00:00:00' AND '2025-08-31 23:59:59.999999' GROUP BY DATE(availability_start_date) /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:43:in 'HeatmapController#generate_heatmap_data'
  [1m[36mBonus Pluck (0.1ms)[0m  [1m[34mSELECT DISTINCT "bonuses"."bonus_type" FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:16:in 'HeatmapController#index'
  Rendering layout layouts/application.html.erb
  Rendering heatmap/index.html.erb within layouts/application
  Rendered heatmap/index.html.erb within layouts/application (Duration: 2.3ms | GC: 0.2ms)
  Rendered layout layouts/application.html.erb (Duration: 3.3ms | GC: 0.2ms)
Completed 200 OK in 16ms (Views: 3.8ms | ActiveRecord: 0.3ms (2 queries, 0 cached) | GC: 0.5ms)


Started GET "/heatmap" for ::1 at 2025-08-12 23:15:57 +0300
Processing by HeatmapController#index as HTML
  [1m[36mBonus Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", DATE(availability_start_date) AS "date_availability_start_date" FROM "bonuses" WHERE "bonuses"."availability_start_date" BETWEEN '2025-08-01 00:00:00' AND '2025-08-31 23:59:59.999999' GROUP BY DATE(availability_start_date) /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:43:in 'HeatmapController#generate_heatmap_data'
  [1m[36mBonus Pluck (0.1ms)[0m  [1m[34mSELECT DISTINCT "bonuses"."bonus_type" FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:16:in 'HeatmapController#index'
  Rendering layout layouts/application.html.erb
  Rendering heatmap/index.html.erb within layouts/application
  Rendered heatmap/index.html.erb within layouts/application (Duration: 2.1ms | GC: 0.1ms)
  Rendered layout layouts/application.html.erb (Duration: 3.5ms | GC: 0.1ms)
Completed 200 OK in 18ms (Views: 4.6ms | ActiveRecord: 0.3ms (2 queries, 0 cached) | GC: 0.4ms)


Started GET "/bonuses" for ::1 at 2025-08-12 23:15:57 +0300
Processing by BonusesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.3ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."created_at" DESC LIMIT 20 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.2ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (5, 4, 3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.2ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (5, 4, 3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (5, 4, 3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.5ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (5, 4, 3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (5, 4, 3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (5, 4, 3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 39.7ms | GC: 15.2ms)
  Rendered layout layouts/application.html.erb (Duration: 41.5ms | GC: 15.8ms)
Completed 200 OK in 50ms (Views: 40.5ms | ActiveRecord: 1.7ms (8 queries, 0 cached) | GC: 15.8ms)


  [1m[36mBonus Load (2.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE (name LIKE 'Test Bonus%') /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'TESTDEPOSIT1' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at", "project", "dsl_tag") VALUES ('Test Bonus 1 - Deposit', 'TESTDEPOSIT1', 'deposit', 'active', NULL, 446.0, 629.0, 'vip', '2025-08-10 00:00:00', '2025-12-13 00:00:00', 'new_users', 'deposit, test, volna', 'US', 'USD', 1, 1, '2025-08-12 20:22:17.585142', '2025-08-12 20:22:17.585142', 'VOLNA', 'test_deposit_1') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:215:in 'block (3 levels) in <main>'
  [1m[36mDepositBonus Create (1.0ms)[0m  [1m[32mINSERT INTO "deposit_bonuses" ("bonus_id", "deposit_amount_required", "bonus_percentage", "max_bonus_amount", "first_deposit_only", "recurring_eligible", "created_at", "updated_at") VALUES (6, 52.0, 25.0, 433.0, 1, 0, '2025-08-12 20:22:17.604652', '2025-08-12 20:22:17.604652') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:215:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:215:in 'block (3 levels) in <main>'
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 6 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:215:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'TESTINPUT_COUPON2' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Create (0.2ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at", "project", "dsl_tag") VALUES ('Test Bonus 2 - Input coupon', 'TESTINPUT_COUPON2', 'input_coupon', 'inactive', NULL, 2725.0, 1457.0, 'vip', '2025-07-18 00:00:00', '2025-10-22 00:00:00', 'vip_users', 'input_coupon, test, rox', 'RU', 'EUR', 1, 1, '2025-08-12 20:22:17.614286', '2025-08-12 20:22:17.614286', 'ROX', 'test_input_coupon_2') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:223:in 'block (3 levels) in <main>'
  [1m[36mInputCouponBonus Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."coupon_code" = 'COUPON2' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:223:in 'block (3 levels) in <main>'
  [1m[36mInputCouponBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "input_coupon_bonuses" ("bonus_id", "coupon_code", "usage_limit", "usage_count", "expires_at", "single_use", "created_at", "updated_at") VALUES (7, 'COUPON2', 402, 0, '2026-03-01 00:00:00', 1, '2025-08-12 20:22:17.624237', '2025-08-12 20:22:17.624237') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:223:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:223:in 'block (3 levels) in <main>'
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" = 7 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:223:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'TESTMANUAL3' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at", "project", "dsl_tag") VALUES ('Test Bonus 3 - Manual', 'TESTMANUAL3', 'manual', 'draft', NULL, 390.0, 583.0, 'first_deposit', '2025-08-01 00:00:00', '2025-10-16 00:00:00', 'existing_users', 'manual, test, fresh', 'DE', 'RUB', 1, 1, '2025-08-12 20:22:17.628955', '2025-08-12 20:22:17.628955', 'FRESH', 'test_manual_3') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" = 8 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:230:in 'block (3 levels) in <main>'
  [1m[36mBonus Load (4.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE (name LIKE 'Test Bonus%') /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 6 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mDepositBonus Destroy (0.1ms)[0m  [1m[31mDELETE FROM "deposit_bonuses" WHERE "deposit_bonuses"."id" = 6 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" = 6 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" = 6 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" = 6 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" = 6 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" = 6 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mBonus Destroy (0.1ms)[0m  [1m[31mDELETE FROM "bonuses" WHERE "bonuses"."id" = 6 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (3.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mDepositBonus Load (0.8ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 7 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" = 7 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mInputCouponBonus Destroy (0.1ms)[0m  [1m[31mDELETE FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."id" = 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" = 7 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" = 7 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" = 7 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" = 7 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mBonus Destroy (0.1ms)[0m  [1m[31mDELETE FROM "bonuses" WHERE "bonuses"."id" = 7 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mDepositBonus Load (0.8ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 8 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" = 8 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" = 8 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" = 8 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" = 8 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" = 8 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mBonus Destroy (0.1ms)[0m  [1m[31mDELETE FROM "bonuses" WHERE "bonuses"."id" = 8 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'TESTDEPOSIT1' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Create (0.2ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at", "project", "dsl_tag") VALUES ('Test Bonus 1 - Deposit', 'TESTDEPOSIT1', 'deposit', 'active', NULL, 1035.0, 1948.0, 'standard', '2025-07-20 00:00:00', '2026-01-02 00:00:00', 'existing_users', 'deposit, test, volna', 'US', 'USD', 1, 1, '2025-08-12 20:22:35.574846', '2025-08-12 20:22:35.574846', 'VOLNA', 'test_deposit_1') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:215:in 'block (3 levels) in <main>'
  [1m[36mDepositBonus Create (0.8ms)[0m  [1m[32mINSERT INTO "deposit_bonuses" ("bonus_id", "deposit_amount_required", "bonus_percentage", "max_bonus_amount", "first_deposit_only", "recurring_eligible", "created_at", "updated_at") VALUES (9, 152.0, 132.0, 959.0, 0, 0, '2025-08-12 20:22:35.579344', '2025-08-12 20:22:35.579344') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:215:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:215:in 'block (3 levels) in <main>'
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 9 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:215:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'TESTINPUT_COUPON2' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at", "project", "dsl_tag") VALUES ('Test Bonus 2 - Input coupon', 'TESTINPUT_COUPON2', 'input_coupon', 'inactive', NULL, 2630.0, 351.0, 'weekend', '2025-08-07 00:00:00', '2026-02-06 00:00:00', 'new_users', 'input_coupon, test, rox', 'RU', 'EUR', 1, 1, '2025-08-12 20:22:35.585718', '2025-08-12 20:22:35.585718', 'ROX', 'test_input_coupon_2') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:223:in 'block (3 levels) in <main>'
  [1m[36mInputCouponBonus Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."coupon_code" = 'COUPON2' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:223:in 'block (3 levels) in <main>'
  [1m[36mInputCouponBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "input_coupon_bonuses" ("bonus_id", "coupon_code", "usage_limit", "usage_count", "expires_at", "single_use", "created_at", "updated_at") VALUES (10, 'COUPON2', 59, 0, '2025-11-01 00:00:00', 1, '2025-08-12 20:22:35.590834', '2025-08-12 20:22:35.590834') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:223:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:223:in 'block (3 levels) in <main>'
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" = 10 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:223:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'TESTMANUAL3' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at", "project", "dsl_tag") VALUES ('Test Bonus 3 - Manual', 'TESTMANUAL3', 'manual', 'draft', NULL, 3419.0, 1041.0, 'weekend', '2025-07-25 00:00:00', '2026-02-04 00:00:00', 'all_users', 'manual, test, fresh', 'DE', 'RUB', 1, 1, '2025-08-12 20:22:35.596987', '2025-08-12 20:22:35.596987', 'FRESH', 'test_manual_3') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:233:in 'block (3 levels) in <main>'
  [1m[36mManualBonus Create (1.1ms)[0m  [1m[32mINSERT INTO "manual_bonuses" ("bonus_id", "admin_notes", "approval_required", "auto_apply", "conditions", "created_at", "updated_at") VALUES (11, 'Test manual bonus 3', 1, 0, 'Test conditions for bonus 3', '2025-08-12 20:22:35.603062', '2025-08-12 20:22:35.603062') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:233:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:233:in 'block (3 levels) in <main>'
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" = 11 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:233:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'TESTCOLLECTION4' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Create (0.6ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at", "project", "dsl_tag") VALUES ('Test Bonus 4 - Collection', 'TESTCOLLECTION4', 'collection', 'active', NULL, 2791.0, 1062.0, 'first_deposit', '2025-08-05 00:00:00', '2026-02-06 00:00:00', 'existing_users', 'collection, test, sol', 'FR', 'USD', 1, 1, '2025-08-12 20:22:35.610221', '2025-08-12 20:22:35.610221', 'SOL', 'test_collection_4') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" = 12 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:240:in 'block (3 levels) in <main>'
  [1m[36mBonus Load (1.6ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE (name LIKE 'Test Bonus%') /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 9 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mDepositBonus Destroy (1.7ms)[0m  [1m[31mDELETE FROM "deposit_bonuses" WHERE "deposit_bonuses"."id" = 7 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" = 9 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mManualBonus Load (0.2ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" = 9 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mCollectBonus Load (0.3ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" = 9 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" = 9 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" = 9 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mBonus Destroy (0.1ms)[0m  [1m[31mDELETE FROM "bonuses" WHERE "bonuses"."id" = 9 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mDepositBonus Load (0.6ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 10 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" = 10 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mInputCouponBonus Destroy (0.0ms)[0m  [1m[31mDELETE FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."id" = 2 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" = 10 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" = 10 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" = 10 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" = 10 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mBonus Destroy (0.1ms)[0m  [1m[31mDELETE FROM "bonuses" WHERE "bonuses"."id" = 10 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mDepositBonus Load (0.7ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 11 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" = 11 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" = 11 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mManualBonus Destroy (0.1ms)[0m  [1m[31mDELETE FROM "manual_bonuses" WHERE "manual_bonuses"."id" = 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" = 11 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" = 11 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" = 11 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mBonus Destroy (0.1ms)[0m  [1m[31mDELETE FROM "bonuses" WHERE "bonuses"."id" = 11 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mDepositBonus Load (0.6ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 12 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" = 12 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mManualBonus Load (0.0ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" = 12 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" = 12 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" = 12 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" = 12 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mBonus Destroy (0.1ms)[0m  [1m[31mDELETE FROM "bonuses" WHERE "bonuses"."id" = 12 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'TESTDEPOSIT1' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at", "project", "dsl_tag") VALUES ('Test Bonus 1 - Deposit', 'TESTDEPOSIT1', 'deposit', 'active', NULL, 1108.0, 1784.0, 'weekend', '2025-07-28 00:00:00', '2026-01-09 00:00:00', 'new_users', 'deposit, test, volna', 'US', 'USD', 1, 1, '2025-08-12 20:22:50.060092', '2025-08-12 20:22:50.060092', 'VOLNA', 'test_deposit_1') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:215:in 'block (3 levels) in <main>'
  [1m[36mDepositBonus Create (0.9ms)[0m  [1m[32mINSERT INTO "deposit_bonuses" ("bonus_id", "deposit_amount_required", "bonus_percentage", "max_bonus_amount", "first_deposit_only", "recurring_eligible", "created_at", "updated_at") VALUES (13, 154.0, 58.0, 272.0, 1, 0, '2025-08-12 20:22:50.063528', '2025-08-12 20:22:50.063528') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:215:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:215:in 'block (3 levels) in <main>'
  [1m[36mDepositBonus Load (0.3ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 13 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:215:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'TESTINPUT_COUPON2' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Create (0.3ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at", "project", "dsl_tag") VALUES ('Test Bonus 2 - Input coupon', 'TESTINPUT_COUPON2', 'input_coupon', 'inactive', NULL, 2925.0, 832.0, 'standard', '2025-08-05 00:00:00', '2026-02-01 00:00:00', 'all_users', 'input_coupon, test, rox', 'RU', 'EUR', 1, 1, '2025-08-12 20:22:50.070410', '2025-08-12 20:22:50.070410', 'ROX', 'test_input_coupon_2') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:223:in 'block (3 levels) in <main>'
  [1m[36mInputCouponBonus Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."coupon_code" = 'COUPON2' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:223:in 'block (3 levels) in <main>'
  [1m[36mInputCouponBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "input_coupon_bonuses" ("bonus_id", "coupon_code", "usage_limit", "usage_count", "expires_at", "single_use", "created_at", "updated_at") VALUES (14, 'COUPON2', 677, 0, '2026-03-24 00:00:00', 0, '2025-08-12 20:22:50.076387', '2025-08-12 20:22:50.076387') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:223:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:223:in 'block (3 levels) in <main>'
  [1m[36mInputCouponBonus Load (0.2ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" = 14 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:223:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'TESTMANUAL3' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at", "project", "dsl_tag") VALUES ('Test Bonus 3 - Manual', 'TESTMANUAL3', 'manual', 'draft', NULL, 2566.0, 1367.0, 'weekend', '2025-08-08 00:00:00', '2025-11-17 00:00:00', 'all_users', 'manual, test, fresh', 'DE', 'RUB', 1, 1, '2025-08-12 20:22:50.083350', '2025-08-12 20:22:50.083350', 'FRESH', 'test_manual_3') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:233:in 'block (3 levels) in <main>'
  [1m[36mManualBonus Create (0.7ms)[0m  [1m[32mINSERT INTO "manual_bonuses" ("bonus_id", "admin_notes", "approval_required", "auto_apply", "conditions", "created_at", "updated_at") VALUES (15, 'Test manual bonus 3', 1, 0, 'Test conditions for bonus 3', '2025-08-12 20:22:50.085616', '2025-08-12 20:22:50.085616') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:233:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:233:in 'block (3 levels) in <main>'
  [1m[36mManualBonus Load (0.2ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" = 15 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:233:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'TESTCOLLECTION4' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at", "project", "dsl_tag") VALUES ('Test Bonus 4 - Collection', 'TESTCOLLECTION4', 'collection', 'active', NULL, 3321.0, 1706.0, 'first_deposit', '2025-07-16 00:00:00', '2025-10-12 00:00:00', 'all_users', 'collection, test, sol', 'FR', 'USD', 1, 1, '2025-08-12 20:22:50.093423', '2025-08-12 20:22:50.093423', 'SOL', 'test_collection_4') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:240:in 'block (3 levels) in <main>'
  [1m[36mCollectBonus Create (1.6ms)[0m  [1m[32mINSERT INTO "collect_bonuses" ("bonus_id", "collection_type", "collection_amount", "collection_frequency", "collection_limit", "collected_count", "created_at", "updated_at") VALUES (16, 'percentage', 34.0, 'daily', 31, 0, '2025-08-12 20:22:50.099992', '2025-08-12 20:22:50.099992') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:240:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:240:in 'block (3 levels) in <main>'
  [1m[36mCollectBonus Load (0.4ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" = 16 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:240:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'TESTGROUPS_UPDATE5' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Create (0.2ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at", "project", "dsl_tag") VALUES ('Test Bonus 5 - Groups update', 'TESTGROUPS_UPDATE5', 'groups_update', 'inactive', NULL, 2358.0, 1838.0, 'weekend', '2025-08-04 00:00:00', '2026-01-05 00:00:00', 'all_users', 'groups_update, test, jet', 'IT', 'EUR', 1, 1, '2025-08-12 20:22:50.108162', '2025-08-12 20:22:50.108162', 'JET', 'test_groups_update_5') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mGroupsUpdateBonus Load (0.2ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" = 17 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:247:in 'block (3 levels) in <main>'
  [1m[36mBonus Load (2.7ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE (name LIKE 'Test Bonus%') /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 13 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mDepositBonus Destroy (0.1ms)[0m  [1m[31mDELETE FROM "deposit_bonuses" WHERE "deposit_bonuses"."id" = 8 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" = 13 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" = 13 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" = 13 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" = 13 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" = 13 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mBonus Destroy (0.1ms)[0m  [1m[31mDELETE FROM "bonuses" WHERE "bonuses"."id" = 13 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (3.7ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mDepositBonus Load (0.8ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 14 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" = 14 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mInputCouponBonus Destroy (0.0ms)[0m  [1m[31mDELETE FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."id" = 3 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" = 14 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" = 14 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" = 14 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mSchedulerBonus Load (0.0ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" = 14 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mBonus Destroy (0.1ms)[0m  [1m[31mDELETE FROM "bonuses" WHERE "bonuses"."id" = 14 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mDepositBonus Load (0.7ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 15 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mInputCouponBonus Load (0.2ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" = 15 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" = 15 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mManualBonus Destroy (0.1ms)[0m  [1m[31mDELETE FROM "manual_bonuses" WHERE "manual_bonuses"."id" = 2 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" = 15 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" = 15 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" = 15 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mBonus Destroy (0.1ms)[0m  [1m[31mDELETE FROM "bonuses" WHERE "bonuses"."id" = 15 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mDepositBonus Load (0.8ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 16 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" = 16 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" = 16 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" = 16 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mCollectBonus Destroy (0.1ms)[0m  [1m[31mDELETE FROM "collect_bonuses" WHERE "collect_bonuses"."id" = 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" = 16 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" = 16 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mBonus Destroy (0.1ms)[0m  [1m[31mDELETE FROM "bonuses" WHERE "bonuses"."id" = 16 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mDepositBonus Load (1.2ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 17 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" = 17 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" = 17 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" = 17 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" = 17 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" = 17 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mBonus Destroy (0.1ms)[0m  [1m[31mDELETE FROM "bonuses" WHERE "bonuses"."id" = 17 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'TESTDEPOSIT1' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at", "project", "dsl_tag") VALUES ('Test Bonus 1 - Deposit', 'TESTDEPOSIT1', 'deposit', 'active', NULL, 1111.0, 1689.0, 'standard', '2025-08-05 00:00:00', '2026-01-24 00:00:00', 'new_users', 'deposit, test, volna', 'US', 'USD', 1, 1, '2025-08-12 20:23:04.955699', '2025-08-12 20:23:04.955699', 'VOLNA', 'test_deposit_1') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:215:in 'block (3 levels) in <main>'
  [1m[36mDepositBonus Create (1.1ms)[0m  [1m[32mINSERT INTO "deposit_bonuses" ("bonus_id", "deposit_amount_required", "bonus_percentage", "max_bonus_amount", "first_deposit_only", "recurring_eligible", "created_at", "updated_at") VALUES (18, 22.0, 139.0, 323.0, 0, 1, '2025-08-12 20:23:04.958613', '2025-08-12 20:23:04.958613') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:215:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:215:in 'block (3 levels) in <main>'
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 18 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:215:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'TESTINPUT_COUPON2' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at", "project", "dsl_tag") VALUES ('Test Bonus 2 - Input coupon', 'TESTINPUT_COUPON2', 'input_coupon', 'inactive', NULL, 2668.0, 1304.0, 'first_deposit', '2025-08-06 00:00:00', '2025-10-14 00:00:00', 'vip_users', 'input_coupon, test, rox', 'RU', 'EUR', 1, 1, '2025-08-12 20:23:04.965485', '2025-08-12 20:23:04.965485', 'ROX', 'test_input_coupon_2') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:223:in 'block (3 levels) in <main>'
  [1m[36mInputCouponBonus Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."coupon_code" = 'COUPON2' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:223:in 'block (3 levels) in <main>'
  [1m[36mInputCouponBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "input_coupon_bonuses" ("bonus_id", "coupon_code", "usage_limit", "usage_count", "expires_at", "single_use", "created_at", "updated_at") VALUES (19, 'COUPON2', 44, 0, '2026-05-04 00:00:00', 1, '2025-08-12 20:23:04.971782', '2025-08-12 20:23:04.971782') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:223:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:223:in 'block (3 levels) in <main>'
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" = 19 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:223:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'TESTMANUAL3' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at", "project", "dsl_tag") VALUES ('Test Bonus 3 - Manual', 'TESTMANUAL3', 'manual', 'draft', NULL, 3981.0, 1464.0, 'weekend', '2025-08-07 00:00:00', '2025-12-13 00:00:00', 'new_users', 'manual, test, fresh', 'DE', 'RUB', 1, 1, '2025-08-12 20:23:04.976248', '2025-08-12 20:23:04.976248', 'FRESH', 'test_manual_3') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:233:in 'block (3 levels) in <main>'
  [1m[36mManualBonus Create (1.7ms)[0m  [1m[32mINSERT INTO "manual_bonuses" ("bonus_id", "admin_notes", "approval_required", "auto_apply", "conditions", "created_at", "updated_at") VALUES (20, 'Test manual bonus 3', 1, 0, 'Test conditions for bonus 3', '2025-08-12 20:23:04.978867', '2025-08-12 20:23:04.978867') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:233:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:233:in 'block (3 levels) in <main>'
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" = 20 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:233:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'TESTCOLLECTION4' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Create (0.2ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at", "project", "dsl_tag") VALUES ('Test Bonus 4 - Collection', 'TESTCOLLECTION4', 'collection', 'active', NULL, 3327.0, 210.0, 'standard', '2025-08-03 00:00:00', '2025-12-17 00:00:00', 'vip_users', 'collection, test, sol', 'FR', 'USD', 1, 1, '2025-08-12 20:23:04.985660', '2025-08-12 20:23:04.985660', 'SOL', 'test_collection_4') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:240:in 'block (3 levels) in <main>'
  [1m[36mCollectBonus Create (1.2ms)[0m  [1m[32mINSERT INTO "collect_bonuses" ("bonus_id", "collection_type", "collection_amount", "collection_frequency", "collection_limit", "collected_count", "created_at", "updated_at") VALUES (21, 'fixed_amount', 95.0, 'once', 44, 0, '2025-08-12 20:23:04.990366', '2025-08-12 20:23:04.990366') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:240:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:240:in 'block (3 levels) in <main>'
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" = 21 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:240:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'TESTGROUPS_UPDATE5' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Create (0.2ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at", "project", "dsl_tag") VALUES ('Test Bonus 5 - Groups update', 'TESTGROUPS_UPDATE5', 'groups_update', 'inactive', NULL, 604.0, 401.0, 'first_deposit', '2025-07-26 00:00:00', '2025-10-15 00:00:00', 'vip_users', 'groups_update, test, jet', 'IT', 'EUR', 1, 1, '2025-08-12 20:23:04.999093', '2025-08-12 20:23:04.999093', 'JET', 'test_groups_update_5') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:247:in 'block (3 levels) in <main>'
  [1m[36mGroupsUpdateBonus Create (0.8ms)[0m  [1m[32mINSERT INTO "groups_update_bonuses" ("bonus_id", "target_groups", "update_type", "update_parameters", "batch_size", "processing_status", "created_at", "updated_at") VALUES (22, '["group_5", "group_6"]', 'modify_bonus', '{"param_5": "value_5"}', 859, 'pending', '2025-08-12 20:23:05.006348', '2025-08-12 20:23:05.006348') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:247:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:247:in 'block (3 levels) in <main>'
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" = 22 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:247:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'TESTSCHEDULER6' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Create (0.2ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at", "project", "dsl_tag") VALUES ('Test Bonus 6 - Scheduler', 'TESTSCHEDULER6', 'scheduler', 'draft', NULL, 4727.0, 684.0, 'first_deposit', '2025-08-11 00:00:00', '2025-11-14 00:00:00', 'new_users', 'scheduler, test, izzi', 'ES', 'RUB', 1, 1, '2025-08-12 20:23:05.015159', '2025-08-12 20:23:05.015159', 'IZZI', 'test_scheduler_6') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mSchedulerBonus Load (0.2ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" = 23 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:254:in 'block (3 levels) in <main>'
  [1m[36mBonus Load (2.6ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE (name LIKE 'Test Bonus%') /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 18 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mDepositBonus Destroy (0.1ms)[0m  [1m[31mDELETE FROM "deposit_bonuses" WHERE "deposit_bonuses"."id" = 9 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" = 18 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" = 18 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" = 18 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" = 18 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" = 18 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mBonus Destroy (0.1ms)[0m  [1m[31mDELETE FROM "bonuses" WHERE "bonuses"."id" = 18 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (3.6ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mDepositBonus Load (0.6ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 19 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" = 19 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mInputCouponBonus Destroy (0.1ms)[0m  [1m[31mDELETE FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."id" = 4 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" = 19 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" = 19 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" = 19 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" = 19 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mBonus Destroy (0.1ms)[0m  [1m[31mDELETE FROM "bonuses" WHERE "bonuses"."id" = 19 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mDepositBonus Load (3.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 20 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" = 20 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" = 20 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mManualBonus Destroy (0.1ms)[0m  [1m[31mDELETE FROM "manual_bonuses" WHERE "manual_bonuses"."id" = 3 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" = 20 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" = 20 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" = 20 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mBonus Destroy (0.1ms)[0m  [1m[31mDELETE FROM "bonuses" WHERE "bonuses"."id" = 20 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mDepositBonus Load (0.6ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 21 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" = 21 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" = 21 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" = 21 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mCollectBonus Destroy (0.1ms)[0m  [1m[31mDELETE FROM "collect_bonuses" WHERE "collect_bonuses"."id" = 2 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" = 21 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" = 21 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mBonus Destroy (0.1ms)[0m  [1m[31mDELETE FROM "bonuses" WHERE "bonuses"."id" = 21 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mDepositBonus Load (0.6ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 22 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" = 22 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" = 22 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" = 22 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" = 22 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mGroupsUpdateBonus Destroy (0.1ms)[0m  [1m[31mDELETE FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."id" = 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" = 22 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mBonus Destroy (0.1ms)[0m  [1m[31mDELETE FROM "bonuses" WHERE "bonuses"."id" = 22 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mDepositBonus Load (0.6ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 23 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" = 23 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" = 23 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" = 23 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mGroupsUpdateBonus Load (0.0ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" = 23 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mSchedulerBonus Load (0.0ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" = 23 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mBonus Destroy (0.1ms)[0m  [1m[31mDELETE FROM "bonuses" WHERE "bonuses"."id" = 23 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:172:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'TESTDEPOSIT1' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Create (0.4ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at", "project", "dsl_tag") VALUES ('Test Bonus 1 - Deposit', 'TESTDEPOSIT1', 'deposit', 'active', NULL, 4260.0, 306.0, 'first_deposit', '2025-07-31 00:00:00', '2025-11-15 00:00:00', 'vip_users', 'deposit, test, volna', 'US', 'USD', 1, 1, '2025-08-12 20:23:18.097973', '2025-08-12 20:23:18.097973', 'VOLNA', 'test_deposit_1') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:215:in 'block (3 levels) in <main>'
  [1m[36mDepositBonus Create (1.8ms)[0m  [1m[32mINSERT INTO "deposit_bonuses" ("bonus_id", "deposit_amount_required", "bonus_percentage", "max_bonus_amount", "first_deposit_only", "recurring_eligible", "created_at", "updated_at") VALUES (24, 26.0, 166.0, 399.0, 1, 0, '2025-08-12 20:23:18.101418', '2025-08-12 20:23:18.101418') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:215:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:215:in 'block (3 levels) in <main>'
  [1m[36mDepositBonus Load (0.3ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 24 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:215:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'TESTINPUT_COUPON2' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Create (0.2ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at", "project", "dsl_tag") VALUES ('Test Bonus 2 - Input coupon', 'TESTINPUT_COUPON2', 'input_coupon', 'inactive', NULL, 4664.0, 544.0, 'weekend', '2025-07-28 00:00:00', '2025-12-13 00:00:00', 'existing_users', 'input_coupon, test, rox', 'RU', 'EUR', 1, 1, '2025-08-12 20:23:18.109397', '2025-08-12 20:23:18.109397', 'ROX', 'test_input_coupon_2') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:223:in 'block (3 levels) in <main>'
  [1m[36mInputCouponBonus Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."coupon_code" = 'COUPON2' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:223:in 'block (3 levels) in <main>'
  [1m[36mInputCouponBonus Create (0.2ms)[0m  [1m[32mINSERT INTO "input_coupon_bonuses" ("bonus_id", "coupon_code", "usage_limit", "usage_count", "expires_at", "single_use", "created_at", "updated_at") VALUES (25, 'COUPON2', 379, 0, '2026-06-12 00:00:00', 1, '2025-08-12 20:23:18.115397', '2025-08-12 20:23:18.115397') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:223:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:223:in 'block (3 levels) in <main>'
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" = 25 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:223:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'TESTMANUAL3' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Create (0.2ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at", "project", "dsl_tag") VALUES ('Test Bonus 3 - Manual', 'TESTMANUAL3', 'manual', 'draft', NULL, 2660.0, 956.0, 'vip', '2025-07-21 00:00:00', '2025-11-19 00:00:00', 'all_users', 'manual, test, fresh', 'DE', 'RUB', 1, 1, '2025-08-12 20:23:18.123175', '2025-08-12 20:23:18.123175', 'FRESH', 'test_manual_3') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:233:in 'block (3 levels) in <main>'
  [1m[36mManualBonus Create (0.7ms)[0m  [1m[32mINSERT INTO "manual_bonuses" ("bonus_id", "admin_notes", "approval_required", "auto_apply", "conditions", "created_at", "updated_at") VALUES (26, 'Test manual bonus 3', 1, 0, 'Test conditions for bonus 3', '2025-08-12 20:23:18.125281', '2025-08-12 20:23:18.125281') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:233:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:233:in 'block (3 levels) in <main>'
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" = 26 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:233:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'TESTCOLLECTION4' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at", "project", "dsl_tag") VALUES ('Test Bonus 4 - Collection', 'TESTCOLLECTION4', 'collection', 'active', NULL, 2521.0, 1840.0, 'weekend', '2025-07-22 00:00:00', '2026-01-15 00:00:00', 'all_users', 'collection, test, sol', 'FR', 'USD', 1, 1, '2025-08-12 20:23:18.130443', '2025-08-12 20:23:18.130443', 'SOL', 'test_collection_4') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:240:in 'block (3 levels) in <main>'
  [1m[36mCollectBonus Create (0.9ms)[0m  [1m[32mINSERT INTO "collect_bonuses" ("bonus_id", "collection_type", "collection_amount", "collection_frequency", "collection_limit", "collected_count", "created_at", "updated_at") VALUES (27, 'fixed_amount', 27.0, 'weekly', 42, 0, '2025-08-12 20:23:18.132460', '2025-08-12 20:23:18.132460') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:240:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:240:in 'block (3 levels) in <main>'
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" = 27 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:240:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'TESTGROUPS_UPDATE5' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Create (0.2ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at", "project", "dsl_tag") VALUES ('Test Bonus 5 - Groups update', 'TESTGROUPS_UPDATE5', 'groups_update', 'inactive', NULL, 714.0, 1254.0, 'standard', '2025-07-21 00:00:00', '2025-12-09 00:00:00', 'all_users', 'groups_update, test, jet', 'IT', 'EUR', 1, 1, '2025-08-12 20:23:18.137303', '2025-08-12 20:23:18.137303', 'JET', 'test_groups_update_5') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:247:in 'block (3 levels) in <main>'
  [1m[36mGroupsUpdateBonus Create (0.7ms)[0m  [1m[32mINSERT INTO "groups_update_bonuses" ("bonus_id", "target_groups", "update_type", "update_parameters", "batch_size", "processing_status", "created_at", "updated_at") VALUES (28, '["group_5", "group_6"]', 'add_bonus', '{"param_5": "value_5"}', 869, 'pending', '2025-08-12 20:23:18.139269', '2025-08-12 20:23:18.139269') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:247:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:247:in 'block (3 levels) in <main>'
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" = 28 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:247:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'TESTSCHEDULER6' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Create (0.2ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at", "project", "dsl_tag") VALUES ('Test Bonus 6 - Scheduler', 'TESTSCHEDULER6', 'scheduler', 'draft', NULL, 4970.0, 135.0, 'vip', '2025-07-22 00:00:00', '2025-12-09 00:00:00', 'all_users', 'scheduler, test, izzi', 'ES', 'RUB', 1, 1, '2025-08-12 20:23:18.143751', '2025-08-12 20:23:18.143751', 'IZZI', 'test_scheduler_6') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:254:in 'block (3 levels) in <main>'
  [1m[36mSchedulerBonus Create (0.8ms)[0m  [1m[32mINSERT INTO "scheduler_bonuses" ("bonus_id", "schedule_type", "cron_expression", "next_run_at", "last_run_at", "execution_count", "max_executions", "created_at", "updated_at") VALUES (29, 'interval_based', '0 15 * * *', '2025-08-13 20:23:18.149381', NULL, 0, 821, '2025-08-12 20:23:18.149447', '2025-08-12 20:23:18.149447') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:254:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:254:in 'block (3 levels) in <main>'
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" = 29 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:254:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'TESTDEPOSIT7' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Create (0.2ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at", "project", "dsl_tag") VALUES ('Test Bonus 7 - Deposit', 'TESTDEPOSIT7', 'deposit', 'active', NULL, 276.0, 1190.0, 'vip', '2025-07-31 00:00:00', '2025-10-30 00:00:00', 'new_users', 'deposit, test, legzo', 'US', 'USD', 1, 1, '2025-08-12 20:23:18.154101', '2025-08-12 20:23:18.154101', 'LEGZO', 'test_deposit_7') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:215:in 'block (3 levels) in <main>'
  [1m[36mDepositBonus Create (0.7ms)[0m  [1m[32mINSERT INTO "deposit_bonuses" ("bonus_id", "deposit_amount_required", "bonus_percentage", "max_bonus_amount", "first_deposit_only", "recurring_eligible", "created_at", "updated_at") VALUES (30, 172.0, 143.0, 798.0, 0, 0, '2025-08-12 20:23:18.156143', '2025-08-12 20:23:18.156143') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:215:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:215:in 'block (3 levels) in <main>'
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 30 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:215:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'TESTINPUT_COUPON8' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Create (2.5ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at", "project", "dsl_tag") VALUES ('Test Bonus 8 - Input coupon', 'TESTINPUT_COUPON8', 'input_coupon', 'inactive', NULL, 1105.0, 468.0, 'weekend', '2025-07-19 00:00:00', '2025-10-11 00:00:00', 'all_users', 'input_coupon, test, starda', 'RU', 'EUR', 1, 1, '2025-08-12 20:23:18.160764', '2025-08-12 20:23:18.160764', 'STARDA', 'test_input_coupon_8') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:223:in 'block (3 levels) in <main>'
  [1m[36mInputCouponBonus Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."coupon_code" = 'COUPON8' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:223:in 'block (3 levels) in <main>'
  [1m[36mInputCouponBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "input_coupon_bonuses" ("bonus_id", "coupon_code", "usage_limit", "usage_count", "expires_at", "single_use", "created_at", "updated_at") VALUES (31, 'COUPON8', 732, 0, '2026-02-13 00:00:00', 1, '2025-08-12 20:23:18.167241', '2025-08-12 20:23:18.167241') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:223:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:223:in 'block (3 levels) in <main>'
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" = 31 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:223:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'TESTMANUAL9' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Create (0.2ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at", "project", "dsl_tag") VALUES ('Test Bonus 9 - Manual', 'TESTMANUAL9', 'manual', 'draft', NULL, 1941.0, 1918.0, 'vip', '2025-07-24 00:00:00', '2025-12-12 00:00:00', 'new_users', 'manual, test, drip', 'DE', 'RUB', 1, 1, '2025-08-12 20:23:18.171219', '2025-08-12 20:23:18.171219', 'DRIP', 'test_manual_9') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:233:in 'block (3 levels) in <main>'
  [1m[36mManualBonus Create (1.9ms)[0m  [1m[32mINSERT INTO "manual_bonuses" ("bonus_id", "admin_notes", "approval_required", "auto_apply", "conditions", "created_at", "updated_at") VALUES (32, 'Test manual bonus 9', 1, 0, 'Test conditions for bonus 9', '2025-08-12 20:23:18.174993', '2025-08-12 20:23:18.174993') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:233:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:233:in 'block (3 levels) in <main>'
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" = 32 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:233:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'TESTCOLLECTION10' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Create (0.2ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at", "project", "dsl_tag") VALUES ('Test Bonus 10 - Collection', 'TESTCOLLECTION10', 'collection', 'active', NULL, 3570.0, 1345.0, 'weekend', '2025-08-01 00:00:00', '2025-12-14 00:00:00', 'all_users', 'collection, test, monro', 'FR', 'USD', 1, 1, '2025-08-12 20:23:18.181213', '2025-08-12 20:23:18.181213', 'MONRO', 'test_collection_10') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:240:in 'block (3 levels) in <main>'
  [1m[36mCollectBonus Create (0.6ms)[0m  [1m[32mINSERT INTO "collect_bonuses" ("bonus_id", "collection_type", "collection_amount", "collection_frequency", "collection_limit", "collected_count", "created_at", "updated_at") VALUES (33, 'fixed_amount', 85.0, 'once', 40, 0, '2025-08-12 20:23:18.183750', '2025-08-12 20:23:18.183750') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:240:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:240:in 'block (3 levels) in <main>'
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" = 33 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:240:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'TESTGROUPS_UPDATE11' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Create (0.2ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at", "project", "dsl_tag") VALUES ('Test Bonus 11 - Groups update', 'TESTGROUPS_UPDATE11', 'groups_update', 'inactive', NULL, 3711.0, 1558.0, 'first_deposit', '2025-07-16 00:00:00', '2025-10-11 00:00:00', 'all_users', 'groups_update, test, 1go', 'IT', 'EUR', 1, 1, '2025-08-12 20:23:18.190426', '2025-08-12 20:23:18.190426', '1GO', 'test_groups_update_11') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:247:in 'block (3 levels) in <main>'
  [1m[36mGroupsUpdateBonus Create (19.1ms)[0m  [1m[32mINSERT INTO "groups_update_bonuses" ("bonus_id", "target_groups", "update_type", "update_parameters", "batch_size", "processing_status", "created_at", "updated_at") VALUES (34, '["group_11", "group_12"]', 'add_bonus', '{"param_11": "value_11"}', 798, 'pending', '2025-08-12 20:23:18.193107', '2025-08-12 20:23:18.193107') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:247:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:247:in 'block (3 levels) in <main>'
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" = 34 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:247:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'TESTSCHEDULER12' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Create (0.5ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at", "project", "dsl_tag") VALUES ('Test Bonus 12 - Scheduler', 'TESTSCHEDULER12', 'scheduler', 'draft', NULL, 4131.0, 763.0, 'first_deposit', '2025-07-20 00:00:00', '2025-11-02 00:00:00', 'all_users', 'scheduler, test, lex', 'ES', 'RUB', 1, 1, '2025-08-12 20:23:18.218229', '2025-08-12 20:23:18.218229', 'LEX', 'test_scheduler_12') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:254:in 'block (3 levels) in <main>'
  [1m[36mSchedulerBonus Create (0.8ms)[0m  [1m[32mINSERT INTO "scheduler_bonuses" ("bonus_id", "schedule_type", "cron_expression", "next_run_at", "last_run_at", "execution_count", "max_executions", "created_at", "updated_at") VALUES (35, 'recurring', '0 19 * * *', '2025-08-13 20:23:18.220610', NULL, 0, 700, '2025-08-12 20:23:18.220692', '2025-08-12 20:23:18.220692') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:254:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:254:in 'block (3 levels) in <main>'
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" = 35 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:254:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'TESTDEPOSIT13' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Create (0.2ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at", "project", "dsl_tag") VALUES ('Test Bonus 13 - Deposit', 'TESTDEPOSIT13', 'deposit', 'active', NULL, 3770.0, 1801.0, 'standard', '2025-07-15 00:00:00', '2025-11-20 00:00:00', 'vip_users', 'deposit, test, gizbo', 'US', 'USD', 1, 1, '2025-08-12 20:23:18.227798', '2025-08-12 20:23:18.227798', 'GIZBO', 'test_deposit_13') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:215:in 'block (3 levels) in <main>'
  [1m[36mDepositBonus Create (2.1ms)[0m  [1m[32mINSERT INTO "deposit_bonuses" ("bonus_id", "deposit_amount_required", "bonus_percentage", "max_bonus_amount", "first_deposit_only", "recurring_eligible", "created_at", "updated_at") VALUES (36, 42.0, 200.0, 852.0, 1, 0, '2025-08-12 20:23:18.231120', '2025-08-12 20:23:18.231120') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:215:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:215:in 'block (3 levels) in <main>'
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 36 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:215:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'TESTINPUT_COUPON14' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at", "project", "dsl_tag") VALUES ('Test Bonus 14 - Input coupon', 'TESTINPUT_COUPON14', 'input_coupon', 'inactive', NULL, 4703.0, 460.0, 'standard', '2025-08-09 00:00:00', '2025-10-15 00:00:00', 'existing_users', 'input_coupon, test, irwin', 'RU', 'EUR', 1, 1, '2025-08-12 20:23:18.239116', '2025-08-12 20:23:18.239116', 'IRWIN', 'test_input_coupon_14') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:223:in 'block (3 levels) in <main>'
  [1m[36mInputCouponBonus Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."coupon_code" = 'COUPON14' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:223:in 'block (3 levels) in <main>'
  [1m[36mInputCouponBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "input_coupon_bonuses" ("bonus_id", "coupon_code", "usage_limit", "usage_count", "expires_at", "single_use", "created_at", "updated_at") VALUES (37, 'COUPON14', 182, 0, '2026-08-06 00:00:00', 0, '2025-08-12 20:23:18.244554', '2025-08-12 20:23:18.244554') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:223:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:223:in 'block (3 levels) in <main>'
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" = 37 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:223:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'TESTMANUAL15' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at", "project", "dsl_tag") VALUES ('Test Bonus 15 - Manual', 'TESTMANUAL15', 'manual', 'draft', NULL, 283.0, 825.0, 'first_deposit', '2025-07-29 00:00:00', '2025-11-28 00:00:00', 'new_users', 'manual, test, flagman', 'DE', 'RUB', 1, 1, '2025-08-12 20:23:18.249386', '2025-08-12 20:23:18.249386', 'FLAGMAN', 'test_manual_15') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:233:in 'block (3 levels) in <main>'
  [1m[36mManualBonus Create (0.8ms)[0m  [1m[32mINSERT INTO "manual_bonuses" ("bonus_id", "admin_notes", "approval_required", "auto_apply", "conditions", "created_at", "updated_at") VALUES (38, 'Test manual bonus 15', 0, 0, 'Test conditions for bonus 15', '2025-08-12 20:23:18.251115', '2025-08-12 20:23:18.251115') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:233:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:233:in 'block (3 levels) in <main>'
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" = 38 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:233:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'TESTCOLLECTION16' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at", "project", "dsl_tag") VALUES ('Test Bonus 16 - Collection', 'TESTCOLLECTION16', 'collection', 'active', NULL, 1572.0, 721.0, 'standard', '2025-07-16 00:00:00', '2025-12-28 00:00:00', 'vip_users', 'collection, test, martin', 'FR', 'USD', 1, 1, '2025-08-12 20:23:18.256857', '2025-08-12 20:23:18.256857', 'MARTIN', 'test_collection_16') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:240:in 'block (3 levels) in <main>'
  [1m[36mCollectBonus Create (0.8ms)[0m  [1m[32mINSERT INTO "collect_bonuses" ("bonus_id", "collection_type", "collection_amount", "collection_frequency", "collection_limit", "collected_count", "created_at", "updated_at") VALUES (39, 'daily', 88.0, 'once', 45, 0, '2025-08-12 20:23:18.259084', '2025-08-12 20:23:18.259084') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:240:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:240:in 'block (3 levels) in <main>'
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" = 39 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:240:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'TESTGROUPS_UPDATE17' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at", "project", "dsl_tag") VALUES ('Test Bonus 17 - Groups update', 'TESTGROUPS_UPDATE17', 'groups_update', 'inactive', NULL, 3692.0, 1861.0, 'standard', '2025-07-26 00:00:00', '2025-11-25 00:00:00', 'all_users', 'groups_update, test, p17', 'IT', 'EUR', 1, 1, '2025-08-12 20:23:18.264478', '2025-08-12 20:23:18.264478', 'P17', 'test_groups_update_17') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:247:in 'block (3 levels) in <main>'
  [1m[36mGroupsUpdateBonus Create (0.6ms)[0m  [1m[32mINSERT INTO "groups_update_bonuses" ("bonus_id", "target_groups", "update_type", "update_parameters", "batch_size", "processing_status", "created_at", "updated_at") VALUES (40, '["group_17", "group_18"]', 'add_bonus', '{"param_17": "value_17"}', 826, 'pending', '2025-08-12 20:23:18.266779', '2025-08-12 20:23:18.266779') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:247:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:247:in 'block (3 levels) in <main>'
  [1m[36mGroupsUpdateBonus Load (0.2ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" = 40 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:247:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Exists? (1.5ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'TESTSCHEDULER18' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at", "project", "dsl_tag") VALUES ('Test Bonus 18 - Scheduler', 'TESTSCHEDULER18', 'scheduler', 'draft', NULL, 2023.0, 1462.0, 'standard', '2025-07-21 00:00:00', '2026-01-16 00:00:00', 'all_users', 'scheduler, test, anjuan', 'ES', 'RUB', 1, 1, '2025-08-12 20:23:18.271985', '2025-08-12 20:23:18.271985', 'ANJUAN', 'test_scheduler_18') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:254:in 'block (3 levels) in <main>'
  [1m[36mSchedulerBonus Create (1.1ms)[0m  [1m[32mINSERT INTO "scheduler_bonuses" ("bonus_id", "schedule_type", "cron_expression", "next_run_at", "last_run_at", "execution_count", "max_executions", "created_at", "updated_at") VALUES (41, 'one_time', '0 10 * * *', '2025-08-13 20:23:18.273308', NULL, 0, 311, '2025-08-12 20:23:18.274050', '2025-08-12 20:23:18.274050') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:254:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:254:in 'block (3 levels) in <main>'
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" = 41 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:254:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Exists? (2.3ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'TESTDEPOSIT19' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at", "project", "dsl_tag") VALUES ('Test Bonus 19 - Deposit', 'TESTDEPOSIT19', 'deposit', 'active', NULL, 1272.0, 1685.0, 'vip', '2025-07-27 00:00:00', '2025-11-15 00:00:00', 'new_users', 'deposit, test, namaste', 'US', 'USD', 1, 1, '2025-08-12 20:23:18.280913', '2025-08-12 20:23:18.280913', 'NAMASTE', 'test_deposit_19') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:215:in 'block (3 levels) in <main>'
  [1m[36mDepositBonus Create (0.6ms)[0m  [1m[32mINSERT INTO "deposit_bonuses" ("bonus_id", "deposit_amount_required", "bonus_percentage", "max_bonus_amount", "first_deposit_only", "recurring_eligible", "created_at", "updated_at") VALUES (42, 11.0, 37.0, 751.0, 0, 0, '2025-08-12 20:23:18.283098', '2025-08-12 20:23:18.283098') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:215:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:215:in 'block (3 levels) in <main>'
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 42 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:215:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'TESTINPUT_COUPON20' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Create (0.2ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at", "project", "dsl_tag") VALUES ('Test Bonus 20 - Input coupon', 'TESTINPUT_COUPON20', 'input_coupon', 'inactive', NULL, 2034.0, 1501.0, 'vip', '2025-07-18 00:00:00', '2025-12-14 00:00:00', 'vip_users', 'input_coupon, test, volna', 'RU', 'EUR', 1, 1, '2025-08-12 20:23:18.287812', '2025-08-12 20:23:18.287812', 'VOLNA', 'test_input_coupon_20') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:223:in 'block (3 levels) in <main>'
  [1m[36mInputCouponBonus Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."coupon_code" = 'COUPON20' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:223:in 'block (3 levels) in <main>'
  [1m[36mInputCouponBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "input_coupon_bonuses" ("bonus_id", "coupon_code", "usage_limit", "usage_count", "expires_at", "single_use", "created_at", "updated_at") VALUES (43, 'COUPON20', 459, 0, '2025-11-21 00:00:00', 1, '2025-08-12 20:23:18.292126', '2025-08-12 20:23:18.292126') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:223:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:223:in 'block (3 levels) in <main>'
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" = 43 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:223:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'TESTMANUAL21' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at", "project", "dsl_tag") VALUES ('Test Bonus 21 - Manual', 'TESTMANUAL21', 'manual', 'draft', NULL, 1581.0, 1228.0, 'weekend', '2025-08-09 00:00:00', '2025-12-25 00:00:00', 'all_users', 'manual, test, rox', 'DE', 'RUB', 1, 1, '2025-08-12 20:23:18.295815', '2025-08-12 20:23:18.295815', 'ROX', 'test_manual_21') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:233:in 'block (3 levels) in <main>'
  [1m[36mManualBonus Create (0.6ms)[0m  [1m[32mINSERT INTO "manual_bonuses" ("bonus_id", "admin_notes", "approval_required", "auto_apply", "conditions", "created_at", "updated_at") VALUES (44, 'Test manual bonus 21', 0, 1, 'Test conditions for bonus 21', '2025-08-12 20:23:18.298196', '2025-08-12 20:23:18.298196') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:233:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:233:in 'block (3 levels) in <main>'
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" = 44 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:233:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'TESTCOLLECTION22' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at", "project", "dsl_tag") VALUES ('Test Bonus 22 - Collection', 'TESTCOLLECTION22', 'collection', 'active', NULL, 2427.0, 1823.0, 'first_deposit', '2025-07-22 00:00:00', '2026-02-07 00:00:00', 'all_users', 'collection, test, fresh', 'FR', 'USD', 1, 1, '2025-08-12 20:23:18.302563', '2025-08-12 20:23:18.302563', 'FRESH', 'test_collection_22') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:240:in 'block (3 levels) in <main>'
  [1m[36mCollectBonus Create (1.8ms)[0m  [1m[32mINSERT INTO "collect_bonuses" ("bonus_id", "collection_type", "collection_amount", "collection_frequency", "collection_limit", "collected_count", "created_at", "updated_at") VALUES (45, 'daily', 76.0, 'weekly', 18, 0, '2025-08-12 20:23:18.304427', '2025-08-12 20:23:18.304427') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:240:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:240:in 'block (3 levels) in <main>'
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" = 45 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:240:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'TESTGROUPS_UPDATE23' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at", "project", "dsl_tag") VALUES ('Test Bonus 23 - Groups update', 'TESTGROUPS_UPDATE23', 'groups_update', 'inactive', NULL, 3491.0, 1536.0, 'standard', '2025-07-18 00:00:00', '2025-11-02 00:00:00', 'existing_users', 'groups_update, test, sol', 'IT', 'EUR', 1, 1, '2025-08-12 20:23:18.310048', '2025-08-12 20:23:18.310048', 'SOL', 'test_groups_update_23') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:247:in 'block (3 levels) in <main>'
  [1m[36mGroupsUpdateBonus Create (0.6ms)[0m  [1m[32mINSERT INTO "groups_update_bonuses" ("bonus_id", "target_groups", "update_type", "update_parameters", "batch_size", "processing_status", "created_at", "updated_at") VALUES (46, '["group_23", "group_24"]', 'remove_bonus', '{"param_23": "value_23"}', 520, 'pending', '2025-08-12 20:23:18.311760', '2025-08-12 20:23:18.311760') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:247:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:247:in 'block (3 levels) in <main>'
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" = 46 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:247:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'TESTSCHEDULER24' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at", "project", "dsl_tag") VALUES ('Test Bonus 24 - Scheduler', 'TESTSCHEDULER24', 'scheduler', 'draft', NULL, 4617.0, 125.0, 'first_deposit', '2025-07-17 00:00:00', '2025-12-01 00:00:00', 'vip_users', 'scheduler, test, jet', 'ES', 'RUB', 1, 1, '2025-08-12 20:23:18.315830', '2025-08-12 20:23:18.315830', 'JET', 'test_scheduler_24') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:254:in 'block (3 levels) in <main>'
  [1m[36mSchedulerBonus Create (0.6ms)[0m  [1m[32mINSERT INTO "scheduler_bonuses" ("bonus_id", "schedule_type", "cron_expression", "next_run_at", "last_run_at", "execution_count", "max_executions", "created_at", "updated_at") VALUES (47, 'recurring', '0 17 * * *', '2025-08-13 20:23:18.317581', NULL, 0, 654, '2025-08-12 20:23:18.317627', '2025-08-12 20:23:18.317627') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:254:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:254:in 'block (3 levels) in <main>'
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" = 47 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:254:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'TESTDEPOSIT25' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at", "project", "dsl_tag") VALUES ('Test Bonus 25 - Deposit', 'TESTDEPOSIT25', 'deposit', 'active', NULL, 4458.0, 155.0, 'weekend', '2025-07-18 00:00:00', '2026-01-07 00:00:00', 'new_users', 'deposit, test, izzi', 'US', 'USD', 1, 1, '2025-08-12 20:23:18.321705', '2025-08-12 20:23:18.321705', 'IZZI', 'test_deposit_25') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:215:in 'block (3 levels) in <main>'
  [1m[36mDepositBonus Create (0.6ms)[0m  [1m[32mINSERT INTO "deposit_bonuses" ("bonus_id", "deposit_amount_required", "bonus_percentage", "max_bonus_amount", "first_deposit_only", "recurring_eligible", "created_at", "updated_at") VALUES (48, 103.0, 75.0, 880.0, 0, 1, '2025-08-12 20:23:18.323403', '2025-08-12 20:23:18.323403') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:215:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:215:in 'block (3 levels) in <main>'
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 48 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:215:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'TESTINPUT_COUPON26' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at", "project", "dsl_tag") VALUES ('Test Bonus 26 - Input coupon', 'TESTINPUT_COUPON26', 'input_coupon', 'inactive', NULL, 4959.0, 293.0, 'standard', '2025-08-01 00:00:00', '2026-02-06 00:00:00', 'vip_users', 'input_coupon, test, legzo', 'RU', 'EUR', 1, 1, '2025-08-12 20:23:18.327623', '2025-08-12 20:23:18.327623', 'LEGZO', 'test_input_coupon_26') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:223:in 'block (3 levels) in <main>'
  [1m[36mInputCouponBonus Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."coupon_code" = 'COUPON26' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:223:in 'block (3 levels) in <main>'
  [1m[36mInputCouponBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "input_coupon_bonuses" ("bonus_id", "coupon_code", "usage_limit", "usage_count", "expires_at", "single_use", "created_at", "updated_at") VALUES (49, 'COUPON26', 808, 0, '2025-12-14 00:00:00', 0, '2025-08-12 20:23:18.330794', '2025-08-12 20:23:18.330794') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:223:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:223:in 'block (3 levels) in <main>'
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" = 49 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:223:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'TESTMANUAL27' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at", "project", "dsl_tag") VALUES ('Test Bonus 27 - Manual', 'TESTMANUAL27', 'manual', 'draft', NULL, 4626.0, 1169.0, 'first_deposit', '2025-07-26 00:00:00', '2026-02-08 00:00:00', 'vip_users', 'manual, test, starda', 'DE', 'RUB', 1, 1, '2025-08-12 20:23:18.334809', '2025-08-12 20:23:18.334809', 'STARDA', 'test_manual_27') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:233:in 'block (3 levels) in <main>'
  [1m[36mManualBonus Create (0.6ms)[0m  [1m[32mINSERT INTO "manual_bonuses" ("bonus_id", "admin_notes", "approval_required", "auto_apply", "conditions", "created_at", "updated_at") VALUES (50, 'Test manual bonus 27', 0, 0, 'Test conditions for bonus 27', '2025-08-12 20:23:18.336489', '2025-08-12 20:23:18.336489') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:233:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:233:in 'block (3 levels) in <main>'
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" = 50 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:233:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'TESTCOLLECTION28' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at", "project", "dsl_tag") VALUES ('Test Bonus 28 - Collection', 'TESTCOLLECTION28', 'collection', 'active', NULL, 830.0, 1380.0, 'vip', '2025-08-01 00:00:00', '2025-11-24 00:00:00', 'new_users', 'collection, test, drip', 'FR', 'USD', 1, 1, '2025-08-12 20:23:18.340909', '2025-08-12 20:23:18.340909', 'DRIP', 'test_collection_28') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:240:in 'block (3 levels) in <main>'
  [1m[36mCollectBonus Create (0.6ms)[0m  [1m[32mINSERT INTO "collect_bonuses" ("bonus_id", "collection_type", "collection_amount", "collection_frequency", "collection_limit", "collected_count", "created_at", "updated_at") VALUES (51, 'weekly', 62.0, 'once', 16, 0, '2025-08-12 20:23:18.342824', '2025-08-12 20:23:18.342824') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:240:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:240:in 'block (3 levels) in <main>'
  [1m[36mCollectBonus Load (0.2ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" = 51 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:240:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'TESTGROUPS_UPDATE29' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at", "project", "dsl_tag") VALUES ('Test Bonus 29 - Groups update', 'TESTGROUPS_UPDATE29', 'groups_update', 'inactive', NULL, 3930.0, 877.0, 'weekend', '2025-07-16 00:00:00', '2025-12-17 00:00:00', 'vip_users', 'groups_update, test, monro', 'IT', 'EUR', 1, 1, '2025-08-12 20:23:18.347455', '2025-08-12 20:23:18.347455', 'MONRO', 'test_groups_update_29') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:247:in 'block (3 levels) in <main>'
  [1m[36mGroupsUpdateBonus Create (12.4ms)[0m  [1m[32mINSERT INTO "groups_update_bonuses" ("bonus_id", "target_groups", "update_type", "update_parameters", "batch_size", "processing_status", "created_at", "updated_at") VALUES (52, '["group_29", "group_30"]', 'remove_bonus', '{"param_29": "value_29"}', 923, 'pending', '2025-08-12 20:23:18.349586', '2025-08-12 20:23:18.349586') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:247:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:247:in 'block (3 levels) in <main>'
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" = 52 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:247:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'TESTSCHEDULER30' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at", "project", "dsl_tag") VALUES ('Test Bonus 30 - Scheduler', 'TESTSCHEDULER30', 'scheduler', 'draft', NULL, 522.0, 1119.0, 'weekend', '2025-08-12 00:00:00', '2025-11-18 00:00:00', 'vip_users', 'scheduler, test, 1go', 'ES', 'RUB', 1, 1, '2025-08-12 20:23:18.367319', '2025-08-12 20:23:18.367319', '1GO', 'test_scheduler_30') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:254:in 'block (3 levels) in <main>'
  [1m[36mSchedulerBonus Create (0.6ms)[0m  [1m[32mINSERT INTO "scheduler_bonuses" ("bonus_id", "schedule_type", "cron_expression", "next_run_at", "last_run_at", "execution_count", "max_executions", "created_at", "updated_at") VALUES (53, 'cron_based', '0 21 * * *', '2025-08-12 21:23:18.369762', NULL, 0, 671, '2025-08-12 20:23:18.369789', '2025-08-12 20:23:18.369789') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:254:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:254:in 'block (3 levels) in <main>'
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" = 53 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:254:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'TESTDEPOSIT31' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at", "project", "dsl_tag") VALUES ('Test Bonus 31 - Deposit', 'TESTDEPOSIT31', 'deposit', 'active', NULL, 1991.0, 905.0, 'weekend', '2025-08-10 00:00:00', '2025-11-17 00:00:00', 'vip_users', 'deposit, test, lex', 'US', 'USD', 1, 1, '2025-08-12 20:23:18.375424', '2025-08-12 20:23:18.375424', 'LEX', 'test_deposit_31') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:215:in 'block (3 levels) in <main>'
  [1m[36mDepositBonus Create (0.6ms)[0m  [1m[32mINSERT INTO "deposit_bonuses" ("bonus_id", "deposit_amount_required", "bonus_percentage", "max_bonus_amount", "first_deposit_only", "recurring_eligible", "created_at", "updated_at") VALUES (54, 52.0, 151.0, 509.0, 0, 1, '2025-08-12 20:23:18.377176', '2025-08-12 20:23:18.377176') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:215:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:215:in 'block (3 levels) in <main>'
  [1m[36mDepositBonus Load (0.2ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 54 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:215:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'TESTINPUT_COUPON32' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at", "project", "dsl_tag") VALUES ('Test Bonus 32 - Input coupon', 'TESTINPUT_COUPON32', 'input_coupon', 'inactive', NULL, 4417.0, 449.0, 'weekend', '2025-08-06 00:00:00', '2025-12-06 00:00:00', 'vip_users', 'input_coupon, test, gizbo', 'RU', 'EUR', 1, 1, '2025-08-12 20:23:18.382468', '2025-08-12 20:23:18.382468', 'GIZBO', 'test_input_coupon_32') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:223:in 'block (3 levels) in <main>'
  [1m[36mInputCouponBonus Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."coupon_code" = 'COUPON32' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:223:in 'block (3 levels) in <main>'
  [1m[36mInputCouponBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "input_coupon_bonuses" ("bonus_id", "coupon_code", "usage_limit", "usage_count", "expires_at", "single_use", "created_at", "updated_at") VALUES (55, 'COUPON32', 617, 0, '2025-11-20 00:00:00', 0, '2025-08-12 20:23:18.385390', '2025-08-12 20:23:18.385390') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:223:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:223:in 'block (3 levels) in <main>'
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" = 55 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:223:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'TESTMANUAL33' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at", "project", "dsl_tag") VALUES ('Test Bonus 33 - Manual', 'TESTMANUAL33', 'manual', 'draft', NULL, 3434.0, 1260.0, 'weekend', '2025-08-09 00:00:00', '2025-11-26 00:00:00', 'vip_users', 'manual, test, irwin', 'DE', 'RUB', 1, 1, '2025-08-12 20:23:18.390714', '2025-08-12 20:23:18.390714', 'IRWIN', 'test_manual_33') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:233:in 'block (3 levels) in <main>'
  [1m[36mManualBonus Create (0.6ms)[0m  [1m[32mINSERT INTO "manual_bonuses" ("bonus_id", "admin_notes", "approval_required", "auto_apply", "conditions", "created_at", "updated_at") VALUES (56, 'Test manual bonus 33', 0, 1, 'Test conditions for bonus 33', '2025-08-12 20:23:18.392527', '2025-08-12 20:23:18.392527') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:233:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:233:in 'block (3 levels) in <main>'
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" = 56 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:233:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'TESTCOLLECTION34' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at", "project", "dsl_tag") VALUES ('Test Bonus 34 - Collection', 'TESTCOLLECTION34', 'collection', 'active', NULL, 3672.0, 1693.0, 'vip', '2025-08-11 00:00:00', '2025-12-06 00:00:00', 'new_users', 'collection, test, flagman', 'FR', 'USD', 1, 1, '2025-08-12 20:23:18.397541', '2025-08-12 20:23:18.397541', 'FLAGMAN', 'test_collection_34') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:240:in 'block (3 levels) in <main>'
  [1m[36mCollectBonus Create (0.6ms)[0m  [1m[32mINSERT INTO "collect_bonuses" ("bonus_id", "collection_type", "collection_amount", "collection_frequency", "collection_limit", "collected_count", "created_at", "updated_at") VALUES (57, 'daily', 93.0, 'weekly', 20, 0, '2025-08-12 20:23:18.399237', '2025-08-12 20:23:18.399237') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:240:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:240:in 'block (3 levels) in <main>'
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" = 57 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:240:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'TESTGROUPS_UPDATE35' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at", "project", "dsl_tag") VALUES ('Test Bonus 35 - Groups update', 'TESTGROUPS_UPDATE35', 'groups_update', 'inactive', NULL, 3982.0, 191.0, 'weekend', '2025-07-25 00:00:00', '2025-11-11 00:00:00', 'vip_users', 'groups_update, test, martin', 'IT', 'EUR', 1, 1, '2025-08-12 20:23:18.404355', '2025-08-12 20:23:18.404355', 'MARTIN', 'test_groups_update_35') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:247:in 'block (3 levels) in <main>'
  [1m[36mGroupsUpdateBonus Create (0.7ms)[0m  [1m[32mINSERT INTO "groups_update_bonuses" ("bonus_id", "target_groups", "update_type", "update_parameters", "batch_size", "processing_status", "created_at", "updated_at") VALUES (58, '["group_35", "group_36"]', 'add_bonus', '{"param_35": "value_35"}', 219, 'pending', '2025-08-12 20:23:18.406319', '2025-08-12 20:23:18.406319') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:247:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:247:in 'block (3 levels) in <main>'
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" = 58 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:247:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'TESTSCHEDULER36' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Create (0.5ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at", "project", "dsl_tag") VALUES ('Test Bonus 36 - Scheduler', 'TESTSCHEDULER36', 'scheduler', 'draft', NULL, 4713.0, 465.0, 'weekend', '2025-07-26 00:00:00', '2025-11-10 00:00:00', 'existing_users', 'scheduler, test, p17', 'ES', 'RUB', 1, 1, '2025-08-12 20:23:18.411050', '2025-08-12 20:23:18.411050', 'P17', 'test_scheduler_36') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:254:in 'block (3 levels) in <main>'
  [1m[36mSchedulerBonus Create (0.8ms)[0m  [1m[32mINSERT INTO "scheduler_bonuses" ("bonus_id", "schedule_type", "cron_expression", "next_run_at", "last_run_at", "execution_count", "max_executions", "created_at", "updated_at") VALUES (59, 'recurring', '0 12 * * *', '2025-08-13 20:23:18.415392', NULL, 0, 991, '2025-08-12 20:23:18.415453', '2025-08-12 20:23:18.415453') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:254:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:254:in 'block (3 levels) in <main>'
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" = 59 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:254:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'TESTDEPOSIT37' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at", "project", "dsl_tag") VALUES ('Test Bonus 37 - Deposit', 'TESTDEPOSIT37', 'deposit', 'active', NULL, 4075.0, 837.0, 'weekend', '2025-07-18 00:00:00', '2025-12-20 00:00:00', 'existing_users', 'deposit, test, anjuan', 'US', 'USD', 1, 1, '2025-08-12 20:23:18.420202', '2025-08-12 20:23:18.420202', 'ANJUAN', 'test_deposit_37') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:215:in 'block (3 levels) in <main>'
  [1m[36mDepositBonus Create (0.6ms)[0m  [1m[32mINSERT INTO "deposit_bonuses" ("bonus_id", "deposit_amount_required", "bonus_percentage", "max_bonus_amount", "first_deposit_only", "recurring_eligible", "created_at", "updated_at") VALUES (60, 180.0, 44.0, 750.0, 0, 1, '2025-08-12 20:23:18.422101', '2025-08-12 20:23:18.422101') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:215:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:215:in 'block (3 levels) in <main>'
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 60 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:215:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'TESTINPUT_COUPON38' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at", "project", "dsl_tag") VALUES ('Test Bonus 38 - Input coupon', 'TESTINPUT_COUPON38', 'input_coupon', 'inactive', NULL, 3588.0, 1590.0, 'first_deposit', '2025-07-15 00:00:00', '2025-10-11 00:00:00', 'all_users', 'input_coupon, test, namaste', 'RU', 'EUR', 1, 1, '2025-08-12 20:23:18.427734', '2025-08-12 20:23:18.427734', 'NAMASTE', 'test_input_coupon_38') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:223:in 'block (3 levels) in <main>'
  [1m[36mInputCouponBonus Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."coupon_code" = 'COUPON38' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:223:in 'block (3 levels) in <main>'
  [1m[36mInputCouponBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "input_coupon_bonuses" ("bonus_id", "coupon_code", "usage_limit", "usage_count", "expires_at", "single_use", "created_at", "updated_at") VALUES (61, 'COUPON38', 787, 0, '2026-04-29 00:00:00', 1, '2025-08-12 20:23:18.431268', '2025-08-12 20:23:18.431268') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:223:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:223:in 'block (3 levels) in <main>'
  [1m[36mInputCouponBonus Load (0.7ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" = 61 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:223:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'TESTMANUAL39' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at", "project", "dsl_tag") VALUES ('Test Bonus 39 - Manual', 'TESTMANUAL39', 'manual', 'draft', NULL, 4206.0, 1343.0, 'standard', '2025-08-08 00:00:00', '2025-10-24 00:00:00', 'existing_users', 'manual, test, volna', 'DE', 'RUB', 1, 1, '2025-08-12 20:23:18.436203', '2025-08-12 20:23:18.436203', 'VOLNA', 'test_manual_39') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:233:in 'block (3 levels) in <main>'
  [1m[36mManualBonus Create (0.6ms)[0m  [1m[32mINSERT INTO "manual_bonuses" ("bonus_id", "admin_notes", "approval_required", "auto_apply", "conditions", "created_at", "updated_at") VALUES (62, 'Test manual bonus 39', 1, 0, 'Test conditions for bonus 39', '2025-08-12 20:23:18.437967', '2025-08-12 20:23:18.437967') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:233:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:233:in 'block (3 levels) in <main>'
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" = 62 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:233:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Exists? (3.3ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'TESTCOLLECTION40' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at", "project", "dsl_tag") VALUES ('Test Bonus 40 - Collection', 'TESTCOLLECTION40', 'collection', 'active', NULL, 2177.0, 325.0, 'vip', '2025-07-28 00:00:00', '2025-12-11 00:00:00', 'all_users', 'collection, test, rox', 'FR', 'USD', 1, 1, '2025-08-12 20:23:18.445150', '2025-08-12 20:23:18.445150', 'ROX', 'test_collection_40') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:240:in 'block (3 levels) in <main>'
  [1m[36mCollectBonus Create (0.6ms)[0m  [1m[32mINSERT INTO "collect_bonuses" ("bonus_id", "collection_type", "collection_amount", "collection_frequency", "collection_limit", "collected_count", "created_at", "updated_at") VALUES (63, 'percentage', 6.0, 'monthly', 27, 0, '2025-08-12 20:23:18.447146', '2025-08-12 20:23:18.447146') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:240:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:240:in 'block (3 levels) in <main>'
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" = 63 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:240:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'TESTGROUPS_UPDATE41' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at", "project", "dsl_tag") VALUES ('Test Bonus 41 - Groups update', 'TESTGROUPS_UPDATE41', 'groups_update', 'inactive', NULL, 4903.0, 441.0, 'standard', '2025-08-11 00:00:00', '2026-01-03 00:00:00', 'all_users', 'groups_update, test, fresh', 'IT', 'EUR', 1, 1, '2025-08-12 20:23:18.454922', '2025-08-12 20:23:18.454922', 'FRESH', 'test_groups_update_41') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:247:in 'block (3 levels) in <main>'
  [1m[36mGroupsUpdateBonus Create (0.6ms)[0m  [1m[32mINSERT INTO "groups_update_bonuses" ("bonus_id", "target_groups", "update_type", "update_parameters", "batch_size", "processing_status", "created_at", "updated_at") VALUES (64, '["group_41", "group_42"]', 'add_bonus', '{"param_41": "value_41"}', 727, 'pending', '2025-08-12 20:23:18.456864', '2025-08-12 20:23:18.456864') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:247:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:247:in 'block (3 levels) in <main>'
  [1m[36mGroupsUpdateBonus Load (0.5ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" = 64 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:247:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'TESTSCHEDULER42' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at", "project", "dsl_tag") VALUES ('Test Bonus 42 - Scheduler', 'TESTSCHEDULER42', 'scheduler', 'draft', NULL, 4967.0, 674.0, 'weekend', '2025-07-14 00:00:00', '2025-10-21 00:00:00', 'all_users', 'scheduler, test, sol', 'ES', 'RUB', 1, 1, '2025-08-12 20:23:18.461438', '2025-08-12 20:23:18.461438', 'SOL', 'test_scheduler_42') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:254:in 'block (3 levels) in <main>'
  [1m[36mSchedulerBonus Create (0.6ms)[0m  [1m[32mINSERT INTO "scheduler_bonuses" ("bonus_id", "schedule_type", "cron_expression", "next_run_at", "last_run_at", "execution_count", "max_executions", "created_at", "updated_at") VALUES (65, 'interval_based', '0 9 * * *', '2025-08-13 20:23:18.463289', NULL, 0, 708, '2025-08-12 20:23:18.463335', '2025-08-12 20:23:18.463335') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:254:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:254:in 'block (3 levels) in <main>'
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" = 65 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:254:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'TESTDEPOSIT43' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at", "project", "dsl_tag") VALUES ('Test Bonus 43 - Deposit', 'TESTDEPOSIT43', 'deposit', 'active', NULL, 1711.0, 684.0, 'weekend', '2025-07-30 00:00:00', '2025-12-06 00:00:00', 'vip_users', 'deposit, test, jet', 'US', 'USD', 1, 1, '2025-08-12 20:23:18.467758', '2025-08-12 20:23:18.467758', 'JET', 'test_deposit_43') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:215:in 'block (3 levels) in <main>'
  [1m[36mDepositBonus Create (0.6ms)[0m  [1m[32mINSERT INTO "deposit_bonuses" ("bonus_id", "deposit_amount_required", "bonus_percentage", "max_bonus_amount", "first_deposit_only", "recurring_eligible", "created_at", "updated_at") VALUES (66, 116.0, 198.0, 342.0, 1, 1, '2025-08-12 20:23:18.469714', '2025-08-12 20:23:18.469714') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:215:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:215:in 'block (3 levels) in <main>'
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 66 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:215:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'TESTINPUT_COUPON44' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at", "project", "dsl_tag") VALUES ('Test Bonus 44 - Input coupon', 'TESTINPUT_COUPON44', 'input_coupon', 'inactive', NULL, 3321.0, 1236.0, 'first_deposit', '2025-08-07 00:00:00', '2025-12-28 00:00:00', 'all_users', 'input_coupon, test, izzi', 'RU', 'EUR', 1, 1, '2025-08-12 20:23:18.473734', '2025-08-12 20:23:18.473734', 'IZZI', 'test_input_coupon_44') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:223:in 'block (3 levels) in <main>'
  [1m[36mInputCouponBonus Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."coupon_code" = 'COUPON44' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:223:in 'block (3 levels) in <main>'
  [1m[36mInputCouponBonus Create (0.4ms)[0m  [1m[32mINSERT INTO "input_coupon_bonuses" ("bonus_id", "coupon_code", "usage_limit", "usage_count", "expires_at", "single_use", "created_at", "updated_at") VALUES (67, 'COUPON44', 196, 0, '2026-03-07 00:00:00', 1, '2025-08-12 20:23:18.476924', '2025-08-12 20:23:18.476924') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:223:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:223:in 'block (3 levels) in <main>'
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" = 67 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:223:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'TESTMANUAL45' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at", "project", "dsl_tag") VALUES ('Test Bonus 45 - Manual', 'TESTMANUAL45', 'manual', 'draft', NULL, 1997.0, 531.0, 'vip', '2025-07-28 00:00:00', '2025-11-21 00:00:00', 'vip_users', 'manual, test, legzo', 'DE', 'RUB', 1, 1, '2025-08-12 20:23:18.481385', '2025-08-12 20:23:18.481385', 'LEGZO', 'test_manual_45') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:233:in 'block (3 levels) in <main>'
  [1m[36mManualBonus Create (0.9ms)[0m  [1m[32mINSERT INTO "manual_bonuses" ("bonus_id", "admin_notes", "approval_required", "auto_apply", "conditions", "created_at", "updated_at") VALUES (68, 'Test manual bonus 45', 1, 0, 'Test conditions for bonus 45', '2025-08-12 20:23:18.483537', '2025-08-12 20:23:18.483537') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:233:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:233:in 'block (3 levels) in <main>'
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" = 68 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:233:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'TESTCOLLECTION46' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at", "project", "dsl_tag") VALUES ('Test Bonus 46 - Collection', 'TESTCOLLECTION46', 'collection', 'active', NULL, 2405.0, 1404.0, 'standard', '2025-08-05 00:00:00', '2026-01-16 00:00:00', 'existing_users', 'collection, test, starda', 'FR', 'USD', 1, 1, '2025-08-12 20:23:18.488165', '2025-08-12 20:23:18.488165', 'STARDA', 'test_collection_46') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:240:in 'block (3 levels) in <main>'
  [1m[36mCollectBonus Create (0.6ms)[0m  [1m[32mINSERT INTO "collect_bonuses" ("bonus_id", "collection_type", "collection_amount", "collection_frequency", "collection_limit", "collected_count", "created_at", "updated_at") VALUES (69, 'monthly', 66.0, 'once', 49, 0, '2025-08-12 20:23:18.489973', '2025-08-12 20:23:18.489973') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:240:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:240:in 'block (3 levels) in <main>'
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" = 69 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:240:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'TESTGROUPS_UPDATE47' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at", "project", "dsl_tag") VALUES ('Test Bonus 47 - Groups update', 'TESTGROUPS_UPDATE47', 'groups_update', 'inactive', NULL, 4948.0, 1430.0, 'first_deposit', '2025-07-14 00:00:00', '2025-11-13 00:00:00', 'vip_users', 'groups_update, test, drip', 'IT', 'EUR', 1, 1, '2025-08-12 20:23:18.494154', '2025-08-12 20:23:18.494154', 'DRIP', 'test_groups_update_47') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:247:in 'block (3 levels) in <main>'
  [1m[36mGroupsUpdateBonus Create (0.6ms)[0m  [1m[32mINSERT INTO "groups_update_bonuses" ("bonus_id", "target_groups", "update_type", "update_parameters", "batch_size", "processing_status", "created_at", "updated_at") VALUES (70, '["group_47", "group_48"]', 'bulk_apply', '{"param_47": "value_47"}', 926, 'pending', '2025-08-12 20:23:18.495840', '2025-08-12 20:23:18.495840') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:247:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:247:in 'block (3 levels) in <main>'
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" = 70 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:247:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'TESTSCHEDULER48' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at", "project", "dsl_tag") VALUES ('Test Bonus 48 - Scheduler', 'TESTSCHEDULER48', 'scheduler', 'draft', NULL, 261.0, 1803.0, 'standard', '2025-07-17 00:00:00', '2025-10-16 00:00:00', 'all_users', 'scheduler, test, monro', 'ES', 'RUB', 1, 1, '2025-08-12 20:23:18.507809', '2025-08-12 20:23:18.507809', 'MONRO', 'test_scheduler_48') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:254:in 'block (3 levels) in <main>'
  [1m[36mSchedulerBonus Create (0.6ms)[0m  [1m[32mINSERT INTO "scheduler_bonuses" ("bonus_id", "schedule_type", "cron_expression", "next_run_at", "last_run_at", "execution_count", "max_executions", "created_at", "updated_at") VALUES (71, 'one_time', '0 18 * * *', '2025-08-16 20:23:18.509193', NULL, 0, 793, '2025-08-12 20:23:18.509751', '2025-08-12 20:23:18.509751') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:254:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:254:in 'block (3 levels) in <main>'
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" = 71 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:254:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'TESTDEPOSIT49' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at", "project", "dsl_tag") VALUES ('Test Bonus 49 - Deposit', 'TESTDEPOSIT49', 'deposit', 'active', NULL, 3077.0, 894.0, 'vip', '2025-07-23 00:00:00', '2025-12-10 00:00:00', 'all_users', 'deposit, test, 1go', 'US', 'USD', 1, 1, '2025-08-12 20:23:18.515542', '2025-08-12 20:23:18.515542', '1GO', 'test_deposit_49') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:215:in 'block (3 levels) in <main>'
  [1m[36mDepositBonus Create (0.6ms)[0m  [1m[32mINSERT INTO "deposit_bonuses" ("bonus_id", "deposit_amount_required", "bonus_percentage", "max_bonus_amount", "first_deposit_only", "recurring_eligible", "created_at", "updated_at") VALUES (72, 18.0, 46.0, 891.0, 0, 0, '2025-08-12 20:23:18.517333', '2025-08-12 20:23:18.517333') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:215:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:215:in 'block (3 levels) in <main>'
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" = 72 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:215:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'TESTINPUT_COUPON50' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at", "project", "dsl_tag") VALUES ('Test Bonus 50 - Input coupon', 'TESTINPUT_COUPON50', 'input_coupon', 'inactive', NULL, 2267.0, 1641.0, 'vip', '2025-07-28 00:00:00', '2026-02-01 00:00:00', 'existing_users', 'input_coupon, test, lex', 'RU', 'EUR', 1, 1, '2025-08-12 20:23:18.523215', '2025-08-12 20:23:18.523215', 'LEX', 'test_input_coupon_50') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:223:in 'block (3 levels) in <main>'
  [1m[36mInputCouponBonus Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."coupon_code" = 'COUPON50' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:223:in 'block (3 levels) in <main>'
  [1m[36mInputCouponBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "input_coupon_bonuses" ("bonus_id", "coupon_code", "usage_limit", "usage_count", "expires_at", "single_use", "created_at", "updated_at") VALUES (73, 'COUPON50', 263, 0, '2026-05-05 00:00:00', 0, '2025-08-12 20:23:18.526453', '2025-08-12 20:23:18.526453') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:223:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:223:in 'block (3 levels) in <main>'
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" = 73 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:223:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'TESTMANUAL51' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at", "project", "dsl_tag") VALUES ('Test Bonus 51 - Manual', 'TESTMANUAL51', 'manual', 'draft', NULL, 3496.0, 1173.0, 'standard', '2025-07-18 00:00:00', '2025-11-12 00:00:00', 'existing_users', 'manual, test, gizbo', 'DE', 'RUB', 1, 1, '2025-08-12 20:23:18.531778', '2025-08-12 20:23:18.531778', 'GIZBO', 'test_manual_51') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:233:in 'block (3 levels) in <main>'
  [1m[36mManualBonus Create (0.6ms)[0m  [1m[32mINSERT INTO "manual_bonuses" ("bonus_id", "admin_notes", "approval_required", "auto_apply", "conditions", "created_at", "updated_at") VALUES (74, 'Test manual bonus 51', 0, 0, 'Test conditions for bonus 51', '2025-08-12 20:23:18.533490', '2025-08-12 20:23:18.533490') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:233:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:233:in 'block (3 levels) in <main>'
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" = 74 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:233:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."code" = 'TESTCOLLECTION52' LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mBonus Create (0.1ms)[0m  [1m[32mINSERT INTO "bonuses" ("name", "code", "bonus_type", "status", "minimum_deposit", "wager", "maximum_winnings", "wagering_strategy", "availability_start_date", "availability_end_date", "user_group", "tags", "country", "currency", "created_by", "updated_by", "created_at", "updated_at", "project", "dsl_tag") VALUES ('Test Bonus 52 - Collection', 'TESTCOLLECTION52', 'collection', 'active', NULL, 1149.0, 1486.0, 'standard', '2025-08-05 00:00:00', '2025-10-30 00:00:00', 'new_users', 'collection, test, irwin', 'FR', 'USD', 1, 1, '2025-08-12 20:23:18.538907', '2025-08-12 20:23:18.538907', 'IRWIN', 'test_collection_52') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:210:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:240:in 'block (3 levels) in <main>'
  [1m[36mCollectBonus Create (0.7ms)[0m  [1m[32mINSERT INTO "collect_bonuses" ("bonus_id", "collection_type", "collection_amount", "collection_frequency", "collection_limit", "collected_count", "created_at", "updated_at") VALUES (75, 'monthly', 98.0, 'daily', 18, 0, '2025-08-12 20:23:18.541083', '2025-08-12 20:23:18.541083') RETURNING "id" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:240:in 'block (3 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:240:in 'block (3 levels) in <main>'
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" = 75 LIMIT 1 /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:240:in 'block (3 levels) in <main>'
  [1m[36mBonus Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" /*application='MbsPromoRetention'*/[0m
  ↳ lib/tasks/create_test_bonuses.rake:273:in 'block (2 levels) in <main>'
Started GET "/bonuses" for ::1 at 2025-08-12 23:23:26 +0300
Processing by BonusesController#index as HTML
  [1m[36mBonus Count (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:50:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.7ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."id" DESC LIMIT 50 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.2ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51, 50, 49, 48, 47, 46, 45, 44, 43, 42, 41, 40, 39, 38, 37, 36, 35, 34, 33, 32, 31, 30, 29, 28, 27, 26) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (1.3ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51, 50, 49, 48, 47, 46, 45, 44, 43, 42, 41, 40, 39, 38, 37, 36, 35, 34, 33, 32, 31, 30, 29, 28, 27, 26) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.2ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51, 50, 49, 48, 47, 46, 45, 44, 43, 42, 41, 40, 39, 38, 37, 36, 35, 34, 33, 32, 31, 30, 29, 28, 27, 26) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.2ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51, 50, 49, 48, 47, 46, 45, 44, 43, 42, 41, 40, 39, 38, 37, 36, 35, 34, 33, 32, 31, 30, 29, 28, 27, 26) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.2ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51, 50, 49, 48, 47, 46, 45, 44, 43, 42, 41, 40, 39, 38, 37, 36, 35, 34, 33, 32, 31, 30, 29, 28, 27, 26) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.2ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51, 50, 49, 48, 47, 46, 45, 44, 43, 42, 41, 40, 39, 38, 37, 36, 35, 34, 33, 32, 31, 30, 29, 28, 27, 26) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 95.2ms | GC: 2.1ms)
  Rendered layout layouts/application.html.erb (Duration: 98.0ms | GC: 2.1ms)
Completed 200 OK in 122ms (Views: 96.2ms | ActiveRecord: 3.8ms (9 queries, 0 cached) | GC: 3.1ms)


Started GET "/bonuses?page=2" for ::1 at 2025-08-12 23:23:31 +0300
Processing by BonusesController#index as HTML
  Parameters: {"page" => "2"}
  [1m[36mBonus Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:50:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 50 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."id" DESC LIMIT 50 OFFSET 50 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.2ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (25, 24, 5, 4, 3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (25, 24, 5, 4, 3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (25, 24, 5, 4, 3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.2ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (25, 24, 5, 4, 3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (25, 24, 5, 4, 3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.2ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (25, 24, 5, 4, 3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
[31mUnpermitted parameter: :page. Context: { controller: BonusesController, action: index, request: #<ActionDispatch::Request:0x00007ededce4cc78>, params: {"page" => "2", "controller" => "bonuses", "action" => "index"} }[0m
  Rendered bonuses/index.html.erb within layouts/application (Duration: 26.9ms | GC: 1.2ms)
  Rendered layout layouts/application.html.erb (Duration: 28.4ms | GC: 1.2ms)
Completed 200 OK in 53ms (Views: 27.8ms | ActiveRecord: 1.1ms (9 queries, 0 cached) | GC: 6.9ms)


Started GET "/bonuses?type=deposit&status=&search=&project=&dsl_tag=&commit=Filter" for ::1 at 2025-08-12 23:23:40 +0300
Processing by BonusesController#index as HTML
  Parameters: {"type" => "deposit", "status" => "", "search" => "", "project" => "", "dsl_tag" => "", "commit" => "Filter"}
  [1m[36mBonus Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" WHERE "bonuses"."bonus_type" = 'deposit' /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:50:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."bonus_type" = 'deposit' LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."bonus_type" = 'deposit' ORDER BY "bonuses"."id" DESC LIMIT 50 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (2.2ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (72, 66, 60, 54, 48, 42, 36, 30, 24, 5, 4, 3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (72, 66, 60, 54, 48, 42, 36, 30, 24, 5, 4, 3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (72, 66, 60, 54, 48, 42, 36, 30, 24, 5, 4, 3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (72, 66, 60, 54, 48, 42, 36, 30, 24, 5, 4, 3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (72, 66, 60, 54, 48, 42, 36, 30, 24, 5, 4, 3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (72, 66, 60, 54, 48, 42, 36, 30, 24, 5, 4, 3, 2, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 24.0ms | GC: 1.3ms)
  Rendered layout layouts/application.html.erb (Duration: 25.3ms | GC: 1.3ms)
Completed 200 OK in 39ms (Views: 22.8ms | ActiveRecord: 3.0ms (9 queries, 0 cached) | GC: 1.3ms)


Started GET "/" for ::1 at 2025-08-12 23:23:48 +0300
Processing by BonusesController#index as HTML
  [1m[36mBonus Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:50:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.3ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."id" DESC LIMIT 50 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51, 50, 49, 48, 47, 46, 45, 44, 43, 42, 41, 40, 39, 38, 37, 36, 35, 34, 33, 32, 31, 30, 29, 28, 27, 26) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.2ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51, 50, 49, 48, 47, 46, 45, 44, 43, 42, 41, 40, 39, 38, 37, 36, 35, 34, 33, 32, 31, 30, 29, 28, 27, 26) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51, 50, 49, 48, 47, 46, 45, 44, 43, 42, 41, 40, 39, 38, 37, 36, 35, 34, 33, 32, 31, 30, 29, 28, 27, 26) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51, 50, 49, 48, 47, 46, 45, 44, 43, 42, 41, 40, 39, 38, 37, 36, 35, 34, 33, 32, 31, 30, 29, 28, 27, 26) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51, 50, 49, 48, 47, 46, 45, 44, 43, 42, 41, 40, 39, 38, 37, 36, 35, 34, 33, 32, 31, 30, 29, 28, 27, 26) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51, 50, 49, 48, 47, 46, 45, 44, 43, 42, 41, 40, 39, 38, 37, 36, 35, 34, 33, 32, 31, 30, 29, 28, 27, 26) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 30.4ms | GC: 1.5ms)
  Rendered layout layouts/application.html.erb (Duration: 31.9ms | GC: 1.5ms)
Completed 200 OK in 50ms (Views: 31.2ms | ActiveRecord: 1.3ms (9 queries, 0 cached) | GC: 1.5ms)


Started GET "/" for ::1 at 2025-08-12 23:24:03 +0300
Processing by BonusesController#index as HTML
  [1m[36mBonus Count (1.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:50:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.4ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.5ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.2ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 61.3ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 63.6ms | GC: 0.0ms)
Completed 200 OK in 92ms (Views: 62.8ms | ActiveRecord: 7.3ms (9 queries, 0 cached) | GC: 0.0ms)


Started GET "/" for ::1 at 2025-08-12 23:25:46 +0300
Processing by BonusesController#index as HTML
  [1m[36mBonus Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:50:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.4ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.4ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.8ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (1.2ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 124.6ms | GC: 16.5ms)
  Rendered layout layouts/application.html.erb (Duration: 130.5ms | GC: 17.0ms)
Completed 200 OK in 158ms (Views: 125.8ms | ActiveRecord: 9.0ms (9 queries, 0 cached) | GC: 17.0ms)


Started GET "/bonuses?page=2" for ::1 at 2025-08-12 23:25:48 +0300
Processing by BonusesController#index as HTML
  Parameters: {"page" => "2"}
  [1m[36mBonus Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:50:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 25 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 25 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (1.7ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (50, 49, 48, 47, 46, 45, 44, 43, 42, 41, 40, 39, 38, 37, 36, 35, 34, 33, 32, 31, 30, 29, 28, 27, 26) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.2ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (50, 49, 48, 47, 46, 45, 44, 43, 42, 41, 40, 39, 38, 37, 36, 35, 34, 33, 32, 31, 30, 29, 28, 27, 26) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (50, 49, 48, 47, 46, 45, 44, 43, 42, 41, 40, 39, 38, 37, 36, 35, 34, 33, 32, 31, 30, 29, 28, 27, 26) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (1.2ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (50, 49, 48, 47, 46, 45, 44, 43, 42, 41, 40, 39, 38, 37, 36, 35, 34, 33, 32, 31, 30, 29, 28, 27, 26) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.2ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (50, 49, 48, 47, 46, 45, 44, 43, 42, 41, 40, 39, 38, 37, 36, 35, 34, 33, 32, 31, 30, 29, 28, 27, 26) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.9ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (50, 49, 48, 47, 46, 45, 44, 43, 42, 41, 40, 39, 38, 37, 36, 35, 34, 33, 32, 31, 30, 29, 28, 27, 26) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
[31mUnpermitted parameter: :page. Context: { controller: BonusesController, action: index, request: #<ActionDispatch::Request:0x00007ededaa82590>, params: {"page" => "2", "controller" => "bonuses", "action" => "index"} }[0m
[31mUnpermitted parameter: :page. Context: { controller: BonusesController, action: index, request: #<ActionDispatch::Request:0x00007ededaa82590>, params: {"page" => "2", "controller" => "bonuses", "action" => "index"} }[0m
  Rendered bonuses/index.html.erb within layouts/application (Duration: 37.8ms | GC: 0.5ms)
  Rendered layout layouts/application.html.erb (Duration: 39.2ms | GC: 0.5ms)
Completed 200 OK in 61ms (Views: 35.5ms | ActiveRecord: 4.7ms (9 queries, 0 cached) | GC: 0.6ms)


Started GET "/" for ::1 at 2025-08-12 23:25:58 +0300
Processing by BonusesController#index as HTML
  [1m[36mBonus Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:50:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.8ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.2ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.2ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.2ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.3ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 87.4ms | GC: 8.6ms)
  Rendered layout layouts/application.html.erb (Duration: 90.7ms | GC: 9.1ms)
Completed 200 OK in 116ms (Views: 86.9ms | ActiveRecord: 7.0ms (9 queries, 0 cached) | GC: 9.1ms)


Started GET "/bonuses?page=2" for ::1 at 2025-08-12 23:26:06 +0300
Processing by BonusesController#index as HTML
  Parameters: {"page" => "2"}
  [1m[36mBonus Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:50:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 25 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.4ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 25 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (50, 49, 48, 47, 46, 45, 44, 43, 42, 41, 40, 39, 38, 37, 36, 35, 34, 33, 32, 31, 30, 29, 28, 27, 26) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.6ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (50, 49, 48, 47, 46, 45, 44, 43, 42, 41, 40, 39, 38, 37, 36, 35, 34, 33, 32, 31, 30, 29, 28, 27, 26) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.2ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (50, 49, 48, 47, 46, 45, 44, 43, 42, 41, 40, 39, 38, 37, 36, 35, 34, 33, 32, 31, 30, 29, 28, 27, 26) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.2ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (50, 49, 48, 47, 46, 45, 44, 43, 42, 41, 40, 39, 38, 37, 36, 35, 34, 33, 32, 31, 30, 29, 28, 27, 26) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.2ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (50, 49, 48, 47, 46, 45, 44, 43, 42, 41, 40, 39, 38, 37, 36, 35, 34, 33, 32, 31, 30, 29, 28, 27, 26) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (50, 49, 48, 47, 46, 45, 44, 43, 42, 41, 40, 39, 38, 37, 36, 35, 34, 33, 32, 31, 30, 29, 28, 27, 26) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
[31mUnpermitted parameter: :page. Context: { controller: BonusesController, action: index, request: #<ActionDispatch::Request:0x00007ededaf68168>, params: {"page" => "2", "controller" => "bonuses", "action" => "index"} }[0m
[31mUnpermitted parameter: :page. Context: { controller: BonusesController, action: index, request: #<ActionDispatch::Request:0x00007ededaf68168>, params: {"page" => "2", "controller" => "bonuses", "action" => "index"} }[0m
  Rendered bonuses/index.html.erb within layouts/application (Duration: 25.4ms | GC: 1.9ms)
  Rendered layout layouts/application.html.erb (Duration: 26.6ms | GC: 1.9ms)
Completed 200 OK in 40ms (Views: 25.6ms | ActiveRecord: 2.1ms (9 queries, 0 cached) | GC: 1.9ms)


Started GET "/" for ::1 at 2025-08-12 23:26:31 +0300
Processing by BonusesController#index as HTML
  [1m[36mBonus Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:50:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.8ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.2ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (1.6ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.2ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (1.2ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 115.4ms | GC: 1.3ms)
  Rendered layout layouts/application.html.erb (Duration: 120.2ms | GC: 1.3ms)
Completed 200 OK in 151ms (Views: 113.0ms | ActiveRecord: 11.7ms (9 queries, 0 cached) | GC: 1.8ms)


Started GET "/" for ::1 at 2025-08-12 23:27:33 +0300
Processing by BonusesController#index as HTML
  [1m[36mBonus Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:50:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (1.0ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.2ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.2ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 108.2ms | GC: 5.3ms)
  Rendered layout layouts/application.html.erb (Duration: 111.8ms | GC: 5.6ms)
Completed 200 OK in 146ms (Views: 107.7ms | ActiveRecord: 9.1ms (9 queries, 0 cached) | GC: 7.2ms)


Started GET "/bonuses/75" for ::1 at 2025-08-12 23:27:36 +0300
Processing by BonusesController#show as HTML
  Parameters: {"id" => "75"}
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."id" = 75 LIMIT 1 /*action='show',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:164:in 'BonusesController#set_bonus'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/show.html.erb within layouts/application
  [1m[36mCollectBonus Load (2.2ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" = 75 LIMIT 1 /*action='show',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/_type_specific_details.html.erb:127
  Rendered bonuses/_type_specific_details.html.erb (Duration: 8.7ms | GC: 0.0ms)
  Rendered bonuses/show.html.erb within layouts/application (Duration: 14.2ms | GC: 0.3ms)
  Rendered layout layouts/application.html.erb (Duration: 15.8ms | GC: 0.6ms)
Completed 200 OK in 27ms (Views: 14.1ms | ActiveRecord: 2.3ms (2 queries, 0 cached) | GC: 0.6ms)


Started GET "/bonuses/75" for ::1 at 2025-08-12 23:27:40 +0300
Processing by BonusesController#show as HTML
  Parameters: {"id" => "75"}
  [1m[36mBonus Load (0.1ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."id" = 75 LIMIT 1 /*action='show',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:164:in 'BonusesController#set_bonus'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/show.html.erb within layouts/application
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" = 75 LIMIT 1 /*action='show',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/_type_specific_details.html.erb:127
  Rendered bonuses/_type_specific_details.html.erb (Duration: 1.9ms | GC: 0.0ms)
  Rendered bonuses/show.html.erb within layouts/application (Duration: 3.0ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 3.9ms | GC: 0.0ms)
Completed 200 OK in 13ms (Views: 4.1ms | ActiveRecord: 0.2ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/heatmap" for ::1 at 2025-08-12 23:28:11 +0300
Processing by HeatmapController#index as HTML
  [1m[36mBonus Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", DATE(availability_start_date) AS "date_availability_start_date" FROM "bonuses" WHERE "bonuses"."availability_start_date" BETWEEN '2025-08-01 00:00:00' AND '2025-08-31 23:59:59.999999' GROUP BY DATE(availability_start_date) /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:43:in 'HeatmapController#generate_heatmap_data'
  [1m[36mBonus Pluck (0.1ms)[0m  [1m[34mSELECT DISTINCT "bonuses"."bonus_type" FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:16:in 'HeatmapController#index'
  Rendering layout layouts/application.html.erb
  Rendering heatmap/index.html.erb within layouts/application
  Rendered heatmap/index.html.erb within layouts/application (Duration: 2.8ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 3.9ms | GC: 0.0ms)
Completed 200 OK in 17ms (Views: 4.6ms | ActiveRecord: 0.3ms (2 queries, 0 cached) | GC: 0.2ms)


Started GET "/bonuses" for ::1 at 2025-08-12 23:28:12 +0300
Processing by BonusesController#index as HTML
  [1m[36mBonus Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:50:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.5ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.2ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.2ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 22.0ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 23.0ms | GC: 0.0ms)
Completed 200 OK in 32ms (Views: 21.9ms | ActiveRecord: 1.5ms (9 queries, 0 cached) | GC: 0.0ms)


Started GET "/heatmap" for ::1 at 2025-08-12 23:28:13 +0300
Processing by HeatmapController#index as HTML
  [1m[36mBonus Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", DATE(availability_start_date) AS "date_availability_start_date" FROM "bonuses" WHERE "bonuses"."availability_start_date" BETWEEN '2025-08-01 00:00:00' AND '2025-08-31 23:59:59.999999' GROUP BY DATE(availability_start_date) /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:43:in 'HeatmapController#generate_heatmap_data'
  [1m[36mBonus Pluck (0.5ms)[0m  [1m[34mSELECT DISTINCT "bonuses"."bonus_type" FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:16:in 'HeatmapController#index'
  Rendering layout layouts/application.html.erb
  Rendering heatmap/index.html.erb within layouts/application
  Rendered heatmap/index.html.erb within layouts/application (Duration: 2.0ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 3.7ms | GC: 0.0ms)
Completed 200 OK in 17ms (Views: 4.2ms | ActiveRecord: 0.7ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/bonuses" for ::1 at 2025-08-12 23:28:13 +0300
Processing by BonusesController#index as HTML
  [1m[36mBonus Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:50:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 19.3ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 20.5ms | GC: 0.0ms)
Completed 200 OK in 32ms (Views: 20.9ms | ActiveRecord: 1.1ms (9 queries, 0 cached) | GC: 0.0ms)


Started GET "/heatmap" for ::1 at 2025-08-12 23:28:14 +0300
Processing by HeatmapController#index as HTML
  [1m[36mBonus Count (0.6ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", DATE(availability_start_date) AS "date_availability_start_date" FROM "bonuses" WHERE "bonuses"."availability_start_date" BETWEEN '2025-08-01 00:00:00' AND '2025-08-31 23:59:59.999999' GROUP BY DATE(availability_start_date) /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:43:in 'HeatmapController#generate_heatmap_data'
  [1m[36mBonus Pluck (0.2ms)[0m  [1m[34mSELECT DISTINCT "bonuses"."bonus_type" FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:16:in 'HeatmapController#index'
  Rendering layout layouts/application.html.erb
  Rendering heatmap/index.html.erb within layouts/application
  Rendered heatmap/index.html.erb within layouts/application (Duration: 8.9ms | GC: 6.5ms)
  Rendered layout layouts/application.html.erb (Duration: 10.6ms | GC: 7.2ms)
Completed 200 OK in 25ms (Views: 11.2ms | ActiveRecord: 0.7ms (2 queries, 0 cached) | GC: 7.2ms)


Started GET "/bonuses" for ::1 at 2025-08-12 23:28:14 +0300
Processing by BonusesController#index as HTML
  [1m[36mBonus Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:50:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 21.7ms | GC: 2.5ms)
  Rendered layout layouts/application.html.erb (Duration: 22.7ms | GC: 2.5ms)
Completed 200 OK in 35ms (Views: 22.2ms | ActiveRecord: 1.2ms (9 queries, 0 cached) | GC: 2.5ms)


Started GET "/heatmap" for ::1 at 2025-08-12 23:28:14 +0300
Processing by HeatmapController#index as HTML
  [1m[36mBonus Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", DATE(availability_start_date) AS "date_availability_start_date" FROM "bonuses" WHERE "bonuses"."availability_start_date" BETWEEN '2025-08-01 00:00:00' AND '2025-08-31 23:59:59.999999' GROUP BY DATE(availability_start_date) /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:43:in 'HeatmapController#generate_heatmap_data'
  [1m[36mBonus Pluck (0.1ms)[0m  [1m[34mSELECT DISTINCT "bonuses"."bonus_type" FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:16:in 'HeatmapController#index'
  Rendering layout layouts/application.html.erb
  Rendering heatmap/index.html.erb within layouts/application
  Rendered heatmap/index.html.erb within layouts/application (Duration: 3.1ms | GC: 0.5ms)
  Rendered layout layouts/application.html.erb (Duration: 4.9ms | GC: 0.5ms)
Completed 200 OK in 20ms (Views: 5.4ms | ActiveRecord: 0.3ms (2 queries, 0 cached) | GC: 0.5ms)


Started GET "/" for ::1 at 2025-08-12 23:29:21 +0300
Processing by BonusesController#index as HTML
  [1m[36mBonus Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:50:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.5ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.6ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.2ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 35.7ms | GC: 1.5ms)
  Rendered layout layouts/application.html.erb (Duration: 40.0ms | GC: 1.5ms)
Completed 200 OK in 68ms (Views: 38.8ms | ActiveRecord: 1.9ms (9 queries, 0 cached) | GC: 3.0ms)


Started GET "/assets/app-a4c1864b.css" for ::1 at 2025-08-12 23:29:21 +0300
Started GET "/" for ::1 at 2025-08-12 23:29:26 +0300
Processing by BonusesController#index as HTML
  [1m[36mBonus Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:50:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (1.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 24.5ms | GC: 1.1ms)
  Rendered layout layouts/application.html.erb (Duration: 26.3ms | GC: 1.1ms)
Completed 200 OK in 48ms (Views: 28.1ms | ActiveRecord: 2.8ms (9 queries, 0 cached) | GC: 1.1ms)


Started GET "/assets/app-a4c1864b.css" for ::1 at 2025-08-12 23:29:26 +0300
Started GET "/heatmap" for ::1 at 2025-08-12 23:29:28 +0300
Processing by HeatmapController#index as HTML
  [1m[36mBonus Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", DATE(availability_start_date) AS "date_availability_start_date" FROM "bonuses" WHERE "bonuses"."availability_start_date" BETWEEN '2025-08-01 00:00:00' AND '2025-08-31 23:59:59.999999' GROUP BY DATE(availability_start_date) /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:43:in 'HeatmapController#generate_heatmap_data'
  [1m[36mBonus Pluck (0.1ms)[0m  [1m[34mSELECT DISTINCT "bonuses"."bonus_type" FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:16:in 'HeatmapController#index'
  Rendering layout layouts/application.html.erb
  Rendering heatmap/index.html.erb within layouts/application
  Rendered heatmap/index.html.erb within layouts/application (Duration: 4.8ms | GC: 0.1ms)
  Rendered layout layouts/application.html.erb (Duration: 6.8ms | GC: 0.1ms)
Completed 200 OK in 23ms (Views: 7.4ms | ActiveRecord: 0.2ms (2 queries, 0 cached) | GC: 0.1ms)


Started GET "/heatmap" for ::1 at 2025-08-12 23:29:28 +0300
Processing by HeatmapController#index as HTML
  [1m[36mBonus Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", DATE(availability_start_date) AS "date_availability_start_date" FROM "bonuses" WHERE "bonuses"."availability_start_date" BETWEEN '2025-08-01 00:00:00' AND '2025-08-31 23:59:59.999999' GROUP BY DATE(availability_start_date) /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:43:in 'HeatmapController#generate_heatmap_data'
  [1m[36mBonus Pluck (0.1ms)[0m  [1m[34mSELECT DISTINCT "bonuses"."bonus_type" FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:16:in 'HeatmapController#index'
  Rendering layout layouts/application.html.erb
  Rendering heatmap/index.html.erb within layouts/application
  Rendered heatmap/index.html.erb within layouts/application (Duration: 2.6ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 4.8ms | GC: 0.0ms)
Completed 200 OK in 30ms (Views: 5.3ms | ActiveRecord: 0.4ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/heatmap" for ::1 at 2025-08-12 23:29:29 +0300
Processing by HeatmapController#index as HTML
  [1m[36mBonus Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", DATE(availability_start_date) AS "date_availability_start_date" FROM "bonuses" WHERE "bonuses"."availability_start_date" BETWEEN '2025-08-01 00:00:00' AND '2025-08-31 23:59:59.999999' GROUP BY DATE(availability_start_date) /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:43:in 'HeatmapController#generate_heatmap_data'
  [1m[36mBonus Pluck (0.1ms)[0m  [1m[34mSELECT DISTINCT "bonuses"."bonus_type" FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:16:in 'HeatmapController#index'
  Rendering layout layouts/application.html.erb
  Rendering heatmap/index.html.erb within layouts/application
  Rendered heatmap/index.html.erb within layouts/application (Duration: 4.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 5.7ms | GC: 0.0ms)
Completed 200 OK in 25ms (Views: 6.3ms | ActiveRecord: 0.3ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/" for ::1 at 2025-08-12 23:29:34 +0300
Processing by BonusesController#index as HTML
  [1m[36mBonus Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:50:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.2ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.2ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.3ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.2ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 40.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 45.1ms | GC: 0.0ms)
Completed 200 OK in 66ms (Views: 44.4ms | ActiveRecord: 1.5ms (9 queries, 0 cached) | GC: 0.0ms)


Started GET "/" for ::1 at 2025-08-12 23:29:38 +0300
Processing by BonusesController#index as HTML
  [1m[36mBonus Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:50:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.4ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.2ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.2ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.2ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.2ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 44.7ms | GC: 7.3ms)
  Rendered layout layouts/application.html.erb (Duration: 47.2ms | GC: 7.3ms)
Completed 200 OK in 64ms (Views: 46.5ms | ActiveRecord: 1.5ms (9 queries, 0 cached) | GC: 7.3ms)


Started GET "/" for ::1 at 2025-08-12 23:29:39 +0300
Processing by BonusesController#index as HTML
  [1m[36mBonus Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:50:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.3ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.4ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.2ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 33.7ms | GC: 2.0ms)
  Rendered layout layouts/application.html.erb (Duration: 34.5ms | GC: 2.0ms)
Completed 200 OK in 49ms (Views: 34.1ms | ActiveRecord: 1.5ms (9 queries, 0 cached) | GC: 2.7ms)


Started GET "/bonuses" for ::1 at 2025-08-12 23:29:41 +0300
Processing by BonusesController#index as HTML
  [1m[36mBonus Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:50:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.6ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.2ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.6ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.6ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.2ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.7ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 38.8ms | GC: 1.2ms)
  Rendered layout layouts/application.html.erb (Duration: 40.5ms | GC: 1.2ms)
Completed 200 OK in 63ms (Views: 44.1ms | ActiveRecord: 2.9ms (9 queries, 0 cached) | GC: 1.2ms)


Started GET "/bonuses" for ::1 at 2025-08-12 23:29:45 +0300
Processing by BonusesController#index as HTML
  [1m[36mBonus Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:50:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.6ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.2ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.2ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.6ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 35.0ms | GC: 1.1ms)
  Rendered layout layouts/application.html.erb (Duration: 36.4ms | GC: 1.1ms)
Completed 200 OK in 58ms (Views: 35.5ms | ActiveRecord: 2.3ms (9 queries, 0 cached) | GC: 1.4ms)


Started GET "/heatmap" for ::1 at 2025-08-12 23:29:46 +0300
Processing by HeatmapController#index as HTML
  [1m[36mBonus Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", DATE(availability_start_date) AS "date_availability_start_date" FROM "bonuses" WHERE "bonuses"."availability_start_date" BETWEEN '2025-08-01 00:00:00' AND '2025-08-31 23:59:59.999999' GROUP BY DATE(availability_start_date) /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:43:in 'HeatmapController#generate_heatmap_data'
  [1m[36mBonus Pluck (0.1ms)[0m  [1m[34mSELECT DISTINCT "bonuses"."bonus_type" FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:16:in 'HeatmapController#index'
  Rendering layout layouts/application.html.erb
  Rendering heatmap/index.html.erb within layouts/application
  Rendered heatmap/index.html.erb within layouts/application (Duration: 2.2ms | GC: 0.3ms)
  Rendered layout layouts/application.html.erb (Duration: 3.1ms | GC: 0.3ms)
Completed 200 OK in 22ms (Views: 3.4ms | ActiveRecord: 0.3ms (2 queries, 0 cached) | GC: 0.3ms)


Started GET "/bonuses" for ::1 at 2025-08-12 23:29:47 +0300
Processing by BonusesController#index as HTML
  [1m[36mBonus Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:50:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.3ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (2.5ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 23.0ms | GC: 0.4ms)
  Rendered layout layouts/application.html.erb (Duration: 24.9ms | GC: 0.4ms)
Completed 200 OK in 38ms (Views: 21.9ms | ActiveRecord: 3.5ms (9 queries, 0 cached) | GC: 0.4ms)


Started GET "/heatmap" for ::1 at 2025-08-12 23:29:47 +0300
Processing by HeatmapController#index as HTML
  [1m[36mBonus Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", DATE(availability_start_date) AS "date_availability_start_date" FROM "bonuses" WHERE "bonuses"."availability_start_date" BETWEEN '2025-08-01 00:00:00' AND '2025-08-31 23:59:59.999999' GROUP BY DATE(availability_start_date) /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:43:in 'HeatmapController#generate_heatmap_data'
  [1m[36mBonus Pluck (0.1ms)[0m  [1m[34mSELECT DISTINCT "bonuses"."bonus_type" FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:16:in 'HeatmapController#index'
  Rendering layout layouts/application.html.erb
  Rendering heatmap/index.html.erb within layouts/application
  Rendered heatmap/index.html.erb within layouts/application (Duration: 3.9ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 4.8ms | GC: 0.0ms)
Completed 200 OK in 25ms (Views: 5.2ms | ActiveRecord: 0.3ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/" for ::1 at 2025-08-12 23:31:14 +0300
Processing by BonusesController#index as HTML
  [1m[36mBonus Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:50:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (1.5ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 85.2ms | GC: 7.3ms)
  Rendered layout layouts/application.html.erb (Duration: 90.3ms | GC: 7.3ms)
Completed 200 OK in 120ms (Views: 85.5ms | ActiveRecord: 7.6ms (9 queries, 0 cached) | GC: 9.9ms)


Started GET "/" for ::1 at 2025-08-12 23:31:30 +0300
Processing by BonusesController#index as HTML
  [1m[36mBonus Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:50:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.2ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.2ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.2ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 125.1ms | GC: 9.5ms)
  Rendered layout layouts/application.html.erb (Duration: 136.3ms | GC: 10.0ms)
Completed 200 OK in 164ms (Views: 132.7ms | ActiveRecord: 5.5ms (9 queries, 0 cached) | GC: 10.0ms)


Started GET "/" for ::1 at 2025-08-12 23:31:33 +0300
Processing by BonusesController#index as HTML
  [1m[36mBonus Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:50:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.2ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 23.1ms | GC: 0.6ms)
  Rendered layout layouts/application.html.erb (Duration: 24.2ms | GC: 0.6ms)
Completed 200 OK in 44ms (Views: 23.8ms | ActiveRecord: 1.1ms (9 queries, 0 cached) | GC: 1.1ms)


Started GET "/" for ::1 at 2025-08-12 23:36:13 +0300
Processing by BonusesController#index as HTML
  [1m[36mBonus Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", "bonuses"."project" AS "bonuses_project" FROM "bonuses" GROUP BY "bonuses"."project" /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:45:in 'BonusesController#index'
  [1m[36mBonus Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:53:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.5ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.2ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.2ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.3ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 118.5ms | GC: 11.8ms)
  Rendered layout layouts/application.html.erb (Duration: 130.4ms | GC: 12.2ms)
Completed 200 OK in 159ms (Views: 125.5ms | ActiveRecord: 9.6ms (10 queries, 0 cached) | GC: 12.2ms)


Started GET "/assets/controllers/projects_dropdown_controller-8d26091c.js" for ::1 at 2025-08-12 23:36:13 +0300
Started GET "/bonuses?project=VOLNA" for ::1 at 2025-08-12 23:36:22 +0300
Processing by BonusesController#index as HTML
  Parameters: {"project" => "VOLNA"}
  [1m[36mBonus Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", "bonuses"."project" AS "bonuses_project" FROM "bonuses" GROUP BY "bonuses"."project" /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:45:in 'BonusesController#index'
  [1m[36mBonus Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" WHERE "bonuses"."project" = 'VOLNA' /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:53:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."project" = 'VOLNA' LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."project" = 'VOLNA' ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 15.5ms | GC: 0.3ms)
  Rendered layout layouts/application.html.erb (Duration: 20.7ms | GC: 0.3ms)
Completed 200 OK in 40ms (Views: 20.2ms | ActiveRecord: 1.1ms (10 queries, 0 cached) | GC: 0.3ms)


Started GET "/bonuses" for ::1 at 2025-08-12 23:36:38 +0300
Processing by BonusesController#index as HTML
  [1m[36mBonus Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", "bonuses"."project" AS "bonuses_project" FROM "bonuses" GROUP BY "bonuses"."project" /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:45:in 'BonusesController#index'
  [1m[36mBonus Count (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:53:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.9ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (2.4ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.2ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.2ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.6ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.2ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.3ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 86.7ms | GC: 24.6ms)
  Rendered layout layouts/application.html.erb (Duration: 96.1ms | GC: 28.9ms)
Completed 200 OK in 131ms (Views: 93.9ms | ActiveRecord: 5.8ms (10 queries, 0 cached) | GC: 32.6ms)


Started GET "/bonuses?type=&status=&search=&project=ROX&dsl_tag=&commit=Filter" for ::1 at 2025-08-12 23:36:49 +0300
Processing by BonusesController#index as HTML
  Parameters: {"type" => "", "status" => "", "search" => "", "project" => "ROX", "dsl_tag" => "", "commit" => "Filter"}
  [1m[36mBonus Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", "bonuses"."project" AS "bonuses_project" FROM "bonuses" GROUP BY "bonuses"."project" /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:45:in 'BonusesController#index'
  [1m[36mBonus Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" WHERE "bonuses"."project" = 'ROX' /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:53:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."project" = 'ROX' LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."project" = 'ROX' ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (63, 44, 25, 2) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (63, 44, 25, 2) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.5ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (63, 44, 25, 2) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.3ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (63, 44, 25, 2) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (63, 44, 25, 2) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (63, 44, 25, 2) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 30.5ms | GC: 7.0ms)
  Rendered layout layouts/application.html.erb (Duration: 32.6ms | GC: 7.0ms)
Completed 200 OK in 49ms (Views: 30.9ms | ActiveRecord: 2.4ms (10 queries, 0 cached) | GC: 10.7ms)


Started GET "/" for ::1 at 2025-08-12 23:37:53 +0300
Processing by BonusesController#index as HTML
  [1m[36mBonus Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", "bonuses"."project" AS "bonuses_project" FROM "bonuses" GROUP BY "bonuses"."project" /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:45:in 'BonusesController#index'
  [1m[36mBonus Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:53:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.6ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.2ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (1.0ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.2ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 88.8ms | GC: 4.9ms)
  Rendered layout layouts/application.html.erb (Duration: 96.7ms | GC: 4.9ms)
Completed 200 OK in 120ms (Views: 91.2ms | ActiveRecord: 7.7ms (10 queries, 0 cached) | GC: 6.1ms)


Started GET "/assets/controllers/projects_dropdown_controller-8d26091c.js" for ::1 at 2025-08-12 23:37:53 +0300
Started GET "/bonuses?project=GIZBO" for ::1 at 2025-08-12 23:37:57 +0300
Processing by BonusesController#index as HTML
  Parameters: {"project" => "GIZBO"}
  [1m[36mBonus Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", "bonuses"."project" AS "bonuses_project" FROM "bonuses" GROUP BY "bonuses"."project" /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:45:in 'BonusesController#index'
  [1m[36mBonus Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" WHERE "bonuses"."project" = 'GIZBO' /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:53:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."project" = 'GIZBO' LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."project" = 'GIZBO' ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (74, 55, 36) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (74, 55, 36) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (74, 55, 36) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (74, 55, 36) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (74, 55, 36) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (74, 55, 36) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 11.3ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 13.6ms | GC: 0.0ms)
Completed 200 OK in 27ms (Views: 13.2ms | ActiveRecord: 1.2ms (10 queries, 0 cached) | GC: 0.0ms)


Started GET "/bonuses?project=MARTIN" for ::1 at 2025-08-12 23:37:57 +0300
Processing by BonusesController#index as HTML
  Parameters: {"project" => "MARTIN"}
  [1m[36mBonus Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", "bonuses"."project" AS "bonuses_project" FROM "bonuses" GROUP BY "bonuses"."project" /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:45:in 'BonusesController#index'
  [1m[36mBonus Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" WHERE "bonuses"."project" = 'MARTIN' /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:53:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."project" = 'MARTIN' LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."project" = 'MARTIN' ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (58, 39) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (58, 39) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (58, 39) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (58, 39) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (58, 39) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (58, 39) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 11.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 12.6ms | GC: 0.0ms)
Completed 200 OK in 25ms (Views: 12.2ms | ActiveRecord: 1.1ms (10 queries, 0 cached) | GC: 0.0ms)


Started GET "/bonuses?project=GIZBO" for ::1 at 2025-08-12 23:37:58 +0300
Processing by BonusesController#index as HTML
  Parameters: {"project" => "GIZBO"}
  [1m[36mBonus Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", "bonuses"."project" AS "bonuses_project" FROM "bonuses" GROUP BY "bonuses"."project" /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:45:in 'BonusesController#index'
  [1m[36mBonus Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" WHERE "bonuses"."project" = 'GIZBO' /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:53:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."project" = 'GIZBO' LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."project" = 'GIZBO' ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (74, 55, 36) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (74, 55, 36) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (74, 55, 36) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (74, 55, 36) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (74, 55, 36) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (74, 55, 36) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 10.0ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 11.5ms | GC: 0.0ms)
Completed 200 OK in 23ms (Views: 11.2ms | ActiveRecord: 1.1ms (10 queries, 0 cached) | GC: 0.0ms)


Started GET "/bonuses?project=LEX" for ::1 at 2025-08-12 23:37:58 +0300
Processing by BonusesController#index as HTML
  Parameters: {"project" => "LEX"}
  [1m[36mBonus Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", "bonuses"."project" AS "bonuses_project" FROM "bonuses" GROUP BY "bonuses"."project" /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:45:in 'BonusesController#index'
  [1m[36mBonus Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" WHERE "bonuses"."project" = 'LEX' /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:53:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."project" = 'LEX' LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.1ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."project" = 'LEX' ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (73, 54, 35) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (73, 54, 35) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (73, 54, 35) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (73, 54, 35) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.2ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (73, 54, 35) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (73, 54, 35) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 17.1ms | GC: 6.1ms)
  Rendered layout layouts/application.html.erb (Duration: 20.0ms | GC: 7.1ms)
Completed 200 OK in 33ms (Views: 19.6ms | ActiveRecord: 1.3ms (10 queries, 0 cached) | GC: 7.1ms)


Started GET "/bonuses?project=1GO" for ::1 at 2025-08-12 23:37:58 +0300
Processing by BonusesController#index as HTML
  Parameters: {"project" => "1GO"}
  [1m[36mBonus Count (0.7ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", "bonuses"."project" AS "bonuses_project" FROM "bonuses" GROUP BY "bonuses"."project" /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:45:in 'BonusesController#index'
  [1m[36mBonus Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" WHERE "bonuses"."project" = '1GO' /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:53:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."project" = '1GO' LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.1ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."project" = '1GO' ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (72, 53, 34) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (72, 53, 34) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.2ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (72, 53, 34) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (72, 53, 34) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (72, 53, 34) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (72, 53, 34) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 13.2ms | GC: 1.5ms)
  Rendered layout layouts/application.html.erb (Duration: 14.6ms | GC: 1.5ms)
Completed 200 OK in 28ms (Views: 14.4ms | ActiveRecord: 1.6ms (10 queries, 0 cached) | GC: 1.5ms)


Started GET "/bonuses?project=MONRO" for ::1 at 2025-08-12 23:37:58 +0300
Processing by BonusesController#index as HTML
  Parameters: {"project" => "MONRO"}
  [1m[36mBonus Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", "bonuses"."project" AS "bonuses_project" FROM "bonuses" GROUP BY "bonuses"."project" /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:45:in 'BonusesController#index'
  [1m[36mBonus Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" WHERE "bonuses"."project" = 'MONRO' /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:53:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."project" = 'MONRO' LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.3ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."project" = 'MONRO' ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.2ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (71, 52, 33) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (71, 52, 33) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (71, 52, 33) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (71, 52, 33) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (71, 52, 33) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.2ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (71, 52, 33) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 14.7ms | GC: 1.6ms)
  Rendered layout layouts/application.html.erb (Duration: 16.6ms | GC: 1.6ms)
Completed 200 OK in 30ms (Views: 15.9ms | ActiveRecord: 1.4ms (10 queries, 0 cached) | GC: 2.3ms)


Started GET "/bonuses?project=VOLNA" for ::1 at 2025-08-12 23:38:10 +0300
Processing by BonusesController#index as HTML
  Parameters: {"project" => "VOLNA"}
  [1m[36mBonus Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", "bonuses"."project" AS "bonuses_project" FROM "bonuses" GROUP BY "bonuses"."project" /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:45:in 'BonusesController#index'
  [1m[36mBonus Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" WHERE "bonuses"."project" = 'VOLNA' /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:53:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."project" = 'VOLNA' LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.8ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."project" = 'VOLNA' ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.2ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.7ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.4ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 23.9ms | GC: 0.5ms)
  Rendered layout layouts/application.html.erb (Duration: 27.5ms | GC: 0.5ms)
Completed 200 OK in 45ms (Views: 24.9ms | ActiveRecord: 3.2ms (10 queries, 0 cached) | GC: 0.5ms)


Started GET "/bonuses" for ::1 at 2025-08-12 23:38:19 +0300
Processing by BonusesController#index as HTML
  [1m[36mBonus Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", "bonuses"."project" AS "bonuses_project" FROM "bonuses" GROUP BY "bonuses"."project" /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:45:in 'BonusesController#index'
  [1m[36mBonus Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:53:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.3ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.2ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 63.9ms | GC: 2.2ms)
  Rendered layout layouts/application.html.erb (Duration: 68.1ms | GC: 2.2ms)
Completed 200 OK in 93ms (Views: 65.1ms | ActiveRecord: 5.7ms (10 queries, 0 cached) | GC: 2.7ms)


Started GET "/bonuses?project=VOLNA" for ::1 at 2025-08-12 23:38:19 +0300
Processing by BonusesController#index as HTML
  Parameters: {"project" => "VOLNA"}
  [1m[36mBonus Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", "bonuses"."project" AS "bonuses_project" FROM "bonuses" GROUP BY "bonuses"."project" /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:45:in 'BonusesController#index'
  [1m[36mBonus Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" WHERE "bonuses"."project" = 'VOLNA' /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:53:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."project" = 'VOLNA' LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.1ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."project" = 'VOLNA' ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 13.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 15.0ms | GC: 0.0ms)
Completed 200 OK in 31ms (Views: 15.3ms | ActiveRecord: 1.0ms (10 queries, 0 cached) | GC: 0.0ms)


Started GET "/bonuses" for ::1 at 2025-08-12 23:38:22 +0300
Processing by BonusesController#index as HTML
  [1m[36mBonus Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", "bonuses"."project" AS "bonuses_project" FROM "bonuses" GROUP BY "bonuses"."project" /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:45:in 'BonusesController#index'
  [1m[36mBonus Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:53:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (5.6ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.2ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.2ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.2ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 26.4ms | GC: 7.7ms)
  Rendered layout layouts/application.html.erb (Duration: 28.3ms | GC: 7.7ms)
Completed 200 OK in 42ms (Views: 22.2ms | ActiveRecord: 6.9ms (10 queries, 0 cached) | GC: 7.7ms)


Started GET "/bonuses" for ::1 at 2025-08-12 23:38:23 +0300
Processing by BonusesController#index as HTML
  [1m[36mBonus Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", "bonuses"."project" AS "bonuses_project" FROM "bonuses" GROUP BY "bonuses"."project" /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:45:in 'BonusesController#index'
  [1m[36mBonus Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:53:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.6ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.2ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 20.1ms | GC: 2.3ms)
  Rendered layout layouts/application.html.erb (Duration: 22.1ms | GC: 2.8ms)
Completed 200 OK in 34ms (Views: 21.1ms | ActiveRecord: 1.5ms (10 queries, 0 cached) | GC: 3.4ms)


Started GET "/bonuses" for ::1 at 2025-08-12 23:38:28 +0300
Processing by BonusesController#index as HTML
  [1m[36mBonus Count (1.5ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", "bonuses"."project" AS "bonuses_project" FROM "bonuses" GROUP BY "bonuses"."project" /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:45:in 'BonusesController#index'
  [1m[36mBonus Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:53:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.2ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (1.7ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 28.8ms | GC: 1.6ms)
  Rendered layout layouts/application.html.erb (Duration: 30.4ms | GC: 1.6ms)
Completed 200 OK in 49ms (Views: 29.2ms | ActiveRecord: 4.1ms (10 queries, 0 cached) | GC: 1.6ms)


Started GET "/" for ::1 at 2025-08-12 23:39:35 +0300
Processing by BonusesController#index as HTML
  [1m[36mBonus Count (0.4ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", "bonuses"."project" AS "bonuses_project" FROM "bonuses" GROUP BY "bonuses"."project" /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:45:in 'BonusesController#index'
  [1m[36mBonus Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:53:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.2ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.2ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.2ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 30.4ms | GC: 0.9ms)
  Rendered layout layouts/application.html.erb (Duration: 32.3ms | GC: 0.9ms)
Completed 200 OK in 49ms (Views: 31.2ms | ActiveRecord: 1.8ms (10 queries, 0 cached) | GC: 1.2ms)


Started GET "/bonuses?project=VOLNA" for ::1 at 2025-08-12 23:39:57 +0300
Processing by BonusesController#index as HTML
  Parameters: {"project" => "VOLNA"}
  [1m[36mBonus Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", "bonuses"."project" AS "bonuses_project" FROM "bonuses" GROUP BY "bonuses"."project" /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:45:in 'BonusesController#index'
  [1m[36mBonus Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" WHERE "bonuses"."project" = 'VOLNA' /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:53:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."project" = 'VOLNA' LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.1ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."project" = 'VOLNA' ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (1.8ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.3ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.3ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 27.0ms | GC: 1.2ms)
  Rendered layout layouts/application.html.erb (Duration: 31.1ms | GC: 1.2ms)
Completed 200 OK in 55ms (Views: 29.0ms | ActiveRecord: 3.1ms (10 queries, 0 cached) | GC: 1.2ms)


Started GET "/bonuses" for ::1 at 2025-08-12 23:40:25 +0300
Processing by BonusesController#index as HTML
  [1m[36mBonus Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", "bonuses"."project" AS "bonuses_project" FROM "bonuses" GROUP BY "bonuses"."project" /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:45:in 'BonusesController#index'
  [1m[36mBonus Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:53:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.8ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 22.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 23.7ms | GC: 0.0ms)
Completed 200 OK in 41ms (Views: 22.5ms | ActiveRecord: 2.0ms (10 queries, 0 cached) | GC: 0.0ms)


Started GET "/bonuses?project=VOLNA" for ::1 at 2025-08-12 23:40:32 +0300
Processing by BonusesController#index as HTML
  Parameters: {"project" => "VOLNA"}
  [1m[36mBonus Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", "bonuses"."project" AS "bonuses_project" FROM "bonuses" GROUP BY "bonuses"."project" /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:45:in 'BonusesController#index'
  [1m[36mBonus Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" WHERE "bonuses"."project" = 'VOLNA' /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:53:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."project" = 'VOLNA' LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."project" = 'VOLNA' ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.2ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.2ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 18.0ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 20.8ms | GC: 0.0ms)
Completed 200 OK in 35ms (Views: 20.0ms | ActiveRecord: 1.6ms (10 queries, 0 cached) | GC: 0.0ms)


Started GET "/" for ::1 at 2025-08-12 23:41:20 +0300
Processing by BonusesController#index as HTML
  [1m[36mBonus Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", "bonuses"."project" AS "bonuses_project" FROM "bonuses" GROUP BY "bonuses"."project" /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/application_controller.rb:10:in 'ApplicationController#set_project_stats'
  [1m[36mCACHE Bonus Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", "bonuses"."project" AS "bonuses_project" FROM "bonuses" GROUP BY "bonuses"."project"[0m
  ↳ app/controllers/bonuses_controller.rb:45:in 'BonusesController#index'
  [1m[36mBonus Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:53:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.7ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.2ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.2ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.3ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 95.1ms | GC: 8.0ms)
  Rendered layout layouts/application.html.erb (Duration: 98.7ms | GC: 8.2ms)
Completed 200 OK in 140ms (Views: 95.7ms | ActiveRecord: 7.6ms (11 queries, 1 cached) | GC: 15.8ms)


Started GET "/bonuses?project=VOLNA" for ::1 at 2025-08-12 23:41:30 +0300
Processing by BonusesController#index as HTML
  Parameters: {"project" => "VOLNA"}
  [1m[36mBonus Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", "bonuses"."project" AS "bonuses_project" FROM "bonuses" GROUP BY "bonuses"."project" /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/application_controller.rb:10:in 'ApplicationController#set_project_stats'
  [1m[36mCACHE Bonus Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", "bonuses"."project" AS "bonuses_project" FROM "bonuses" GROUP BY "bonuses"."project"[0m
  ↳ app/controllers/bonuses_controller.rb:45:in 'BonusesController#index'
  [1m[36mBonus Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" WHERE "bonuses"."project" = 'VOLNA' /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:53:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."project" = 'VOLNA' LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."project" = 'VOLNA' ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.2ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 18.9ms | GC: 0.8ms)
  Rendered layout layouts/application.html.erb (Duration: 22.4ms | GC: 0.8ms)
Completed 200 OK in 44ms (Views: 23.5ms | ActiveRecord: 1.2ms (11 queries, 1 cached) | GC: 0.8ms)


Started GET "/bonuses" for ::1 at 2025-08-12 23:41:30 +0300
Processing by BonusesController#index as HTML
  [1m[36mBonus Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", "bonuses"."project" AS "bonuses_project" FROM "bonuses" GROUP BY "bonuses"."project" /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/application_controller.rb:10:in 'ApplicationController#set_project_stats'
  [1m[36mCACHE Bonus Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", "bonuses"."project" AS "bonuses_project" FROM "bonuses" GROUP BY "bonuses"."project"[0m
  ↳ app/controllers/bonuses_controller.rb:45:in 'BonusesController#index'
  [1m[36mBonus Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:53:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.2ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.6ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (2.2ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 32.9ms | GC: 1.8ms)
  Rendered layout layouts/application.html.erb (Duration: 34.6ms | GC: 1.8ms)
Completed 200 OK in 56ms (Views: 31.8ms | ActiveRecord: 3.9ms (11 queries, 1 cached) | GC: 1.8ms)


Started GET "/bonuses?project=FRESH" for ::1 at 2025-08-12 23:41:31 +0300
Processing by BonusesController#index as HTML
  Parameters: {"project" => "FRESH"}
  [1m[36mBonus Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", "bonuses"."project" AS "bonuses_project" FROM "bonuses" GROUP BY "bonuses"."project" /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/application_controller.rb:10:in 'ApplicationController#set_project_stats'
  [1m[36mCACHE Bonus Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", "bonuses"."project" AS "bonuses_project" FROM "bonuses" GROUP BY "bonuses"."project"[0m
  ↳ app/controllers/bonuses_controller.rb:45:in 'BonusesController#index'
  [1m[36mBonus Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" WHERE "bonuses"."project" = 'FRESH' /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:53:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."project" = 'FRESH' LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.1ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."project" = 'FRESH' ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (64, 45, 26, 3) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (64, 45, 26, 3) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (64, 45, 26, 3) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (64, 45, 26, 3) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.2ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (64, 45, 26, 3) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.2ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (64, 45, 26, 3) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 27.9ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 30.1ms | GC: 0.0ms)
Completed 200 OK in 54ms (Views: 29.5ms | ActiveRecord: 1.2ms (11 queries, 1 cached) | GC: 0.0ms)


Started GET "/bonuses?project=ROX" for ::1 at 2025-08-12 23:41:35 +0300
Processing by BonusesController#index as HTML
  Parameters: {"project" => "ROX"}
  [1m[36mBonus Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", "bonuses"."project" AS "bonuses_project" FROM "bonuses" GROUP BY "bonuses"."project" /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/application_controller.rb:10:in 'ApplicationController#set_project_stats'
  [1m[36mCACHE Bonus Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", "bonuses"."project" AS "bonuses_project" FROM "bonuses" GROUP BY "bonuses"."project"[0m
  ↳ app/controllers/bonuses_controller.rb:45:in 'BonusesController#index'
  [1m[36mBonus Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" WHERE "bonuses"."project" = 'ROX' /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:53:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."project" = 'ROX' LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.4ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."project" = 'ROX' ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (63, 44, 25, 2) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (63, 44, 25, 2) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (63, 44, 25, 2) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (63, 44, 25, 2) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (63, 44, 25, 2) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.5ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (63, 44, 25, 2) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 9.9ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 12.8ms | GC: 0.0ms)
Completed 200 OK in 37ms (Views: 12.9ms | ActiveRecord: 1.6ms (11 queries, 1 cached) | GC: 0.0ms)


Started GET "/bonuses?project=VOLNA" for ::1 at 2025-08-12 23:41:35 +0300
Processing by BonusesController#index as HTML
  Parameters: {"project" => "VOLNA"}
  [1m[36mBonus Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", "bonuses"."project" AS "bonuses_project" FROM "bonuses" GROUP BY "bonuses"."project" /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/application_controller.rb:10:in 'ApplicationController#set_project_stats'
  [1m[36mCACHE Bonus Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", "bonuses"."project" AS "bonuses_project" FROM "bonuses" GROUP BY "bonuses"."project"[0m
  ↳ app/controllers/bonuses_controller.rb:45:in 'BonusesController#index'
  [1m[36mBonus Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" WHERE "bonuses"."project" = 'VOLNA' /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:53:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."project" = 'VOLNA' LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.1ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."project" = 'VOLNA' ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 22.6ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 25.6ms | GC: 0.0ms)
Completed 200 OK in 48ms (Views: 26.0ms | ActiveRecord: 1.1ms (11 queries, 1 cached) | GC: 0.0ms)


Started GET "/" for ::1 at 2025-08-12 23:43:01 +0300
Processing by BonusesController#index as HTML
  [1m[36mBonus Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:50:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.5ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.2ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (1.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.9ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 89.2ms | GC: 5.4ms)
  Rendered layout layouts/application.html.erb (Duration: 92.8ms | GC: 5.6ms)
Completed 200 OK in 125ms (Views: 88.5ms | ActiveRecord: 8.4ms (9 queries, 0 cached) | GC: 7.6ms)


Started GET "/bonuses?project=VOLNA" for ::1 at 2025-08-12 23:43:17 +0300
Processing by BonusesController#index as HTML
  Parameters: {"project" => "VOLNA"}
  [1m[36mBonus Count (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" WHERE "bonuses"."project" = 'VOLNA' /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:50:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."project" = 'VOLNA' LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."project" = 'VOLNA' ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.5ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.6ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.2ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.4ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 17.3ms | GC: 0.6ms)
  Rendered layout layouts/application.html.erb (Duration: 19.2ms | GC: 0.6ms)
Completed 200 OK in 35ms (Views: 17.2ms | ActiveRecord: 3.3ms (9 queries, 0 cached) | GC: 0.6ms)


Started GET "/bonuses?project=ROX" for ::1 at 2025-08-12 23:43:18 +0300
Processing by BonusesController#index as HTML
  Parameters: {"project" => "ROX"}
  [1m[36mBonus Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" WHERE "bonuses"."project" = 'ROX' /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:50:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."project" = 'ROX' LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.1ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."project" = 'ROX' ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (63, 44, 25, 2) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (63, 44, 25, 2) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (63, 44, 25, 2) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.4ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (63, 44, 25, 2) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (63, 44, 25, 2) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.2ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (63, 44, 25, 2) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 22.7ms | GC: 0.4ms)
  Rendered layout layouts/application.html.erb (Duration: 25.5ms | GC: 0.4ms)
Completed 200 OK in 41ms (Views: 24.6ms | ActiveRecord: 1.3ms (9 queries, 0 cached) | GC: 0.4ms)


Started GET "/bonuses?project=FRESH" for ::1 at 2025-08-12 23:43:19 +0300
Processing by BonusesController#index as HTML
  Parameters: {"project" => "FRESH"}
  [1m[36mBonus Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" WHERE "bonuses"."project" = 'FRESH' /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:50:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."project" = 'FRESH' LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."project" = 'FRESH' ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.2ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (64, 45, 26, 3) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.2ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (64, 45, 26, 3) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (64, 45, 26, 3) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (64, 45, 26, 3) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (64, 45, 26, 3) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (64, 45, 26, 3) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 24.3ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 28.1ms | GC: 0.0ms)
Completed 200 OK in 45ms (Views: 27.6ms | ActiveRecord: 1.3ms (9 queries, 0 cached) | GC: 0.0ms)


Started GET "/bonuses?project=SOL" for ::1 at 2025-08-12 23:43:19 +0300
Processing by BonusesController#index as HTML
  Parameters: {"project" => "SOL"}
  [1m[36mBonus Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" WHERE "bonuses"."project" = 'SOL' /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:50:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."project" = 'SOL' LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.3ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."project" = 'SOL' ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (65, 46, 27, 4) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (65, 46, 27, 4) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (65, 46, 27, 4) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (65, 46, 27, 4) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (65, 46, 27, 4) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (65, 46, 27, 4) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 14.0ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 15.5ms | GC: 0.0ms)
Completed 200 OK in 32ms (Views: 14.9ms | ActiveRecord: 1.1ms (9 queries, 0 cached) | GC: 0.0ms)


Started GET "/bonuses?project=JET" for ::1 at 2025-08-12 23:43:19 +0300
Processing by BonusesController#index as HTML
  Parameters: {"project" => "JET"}
  [1m[36mBonus Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" WHERE "bonuses"."project" = 'JET' /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:50:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."project" = 'JET' LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."project" = 'JET' ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.3ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (66, 47, 28, 5) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (66, 47, 28, 5) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.2ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (66, 47, 28, 5) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (66, 47, 28, 5) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.2ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (66, 47, 28, 5) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.3ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (66, 47, 28, 5) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 19.6ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 21.7ms | GC: 0.0ms)
Completed 200 OK in 38ms (Views: 21.1ms | ActiveRecord: 1.4ms (9 queries, 0 cached) | GC: 0.0ms)


Started GET "/bonuses?project=IZZI" for ::1 at 2025-08-12 23:43:20 +0300
Processing by BonusesController#index as HTML
  Parameters: {"project" => "IZZI"}
  [1m[36mBonus Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" WHERE "bonuses"."project" = 'IZZI' /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:50:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."project" = 'IZZI' LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."project" = 'IZZI' ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.2ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (67, 48, 29) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (67, 48, 29) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.2ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (67, 48, 29) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.2ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (67, 48, 29) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.2ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (67, 48, 29) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.3ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (67, 48, 29) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 25.9ms | GC: 5.8ms)
  Rendered layout layouts/application.html.erb (Duration: 29.1ms | GC: 6.5ms)
Completed 200 OK in 43ms (Views: 28.1ms | ActiveRecord: 1.6ms (9 queries, 0 cached) | GC: 6.5ms)


Started GET "/bonuses?project=LEGZO" for ::1 at 2025-08-12 23:43:20 +0300
Processing by BonusesController#index as HTML
  Parameters: {"project" => "LEGZO"}
  [1m[36mBonus Count (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" WHERE "bonuses"."project" = 'LEGZO' /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:50:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."project" = 'LEGZO' LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.1ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."project" = 'LEGZO' ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.6ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (68, 49, 30) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.4ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (68, 49, 30) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.2ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (68, 49, 30) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.2ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (68, 49, 30) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.4ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (68, 49, 30) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.4ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (68, 49, 30) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 29.7ms | GC: 1.7ms)
  Rendered layout layouts/application.html.erb (Duration: 33.1ms | GC: 1.7ms)
Completed 200 OK in 51ms (Views: 31.7ms | ActiveRecord: 2.9ms (9 queries, 0 cached) | GC: 1.7ms)


Started GET "/bonuses?project=STARDA" for ::1 at 2025-08-12 23:43:20 +0300
Processing by BonusesController#index as HTML
  Parameters: {"project" => "STARDA"}
  [1m[36mBonus Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" WHERE "bonuses"."project" = 'STARDA' /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:50:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."project" = 'STARDA' LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.5ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."project" = 'STARDA' ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.2ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (69, 50, 31) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (69, 50, 31) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (69, 50, 31) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.3ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (69, 50, 31) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.2ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (69, 50, 31) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.2ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (69, 50, 31) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 23.8ms | GC: 1.0ms)
  Rendered layout layouts/application.html.erb (Duration: 26.3ms | GC: 1.0ms)
Completed 200 OK in 44ms (Views: 26.0ms | ActiveRecord: 1.9ms (9 queries, 0 cached) | GC: 1.0ms)


Started GET "/bonuses?project=LEGZO" for ::1 at 2025-08-12 23:43:22 +0300
Processing by BonusesController#index as HTML
  Parameters: {"project" => "LEGZO"}
  [1m[36mBonus Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" WHERE "bonuses"."project" = 'LEGZO' /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:50:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."project" = 'LEGZO' LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.1ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."project" = 'LEGZO' ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (68, 49, 30) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (68, 49, 30) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (68, 49, 30) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (68, 49, 30) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (68, 49, 30) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (68, 49, 30) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 52.8ms | GC: 2.1ms)
  Rendered layout layouts/application.html.erb (Duration: 55.7ms | GC: 2.1ms)
Completed 200 OK in 77ms (Views: 53.0ms | ActiveRecord: 6.0ms (9 queries, 0 cached) | GC: 2.3ms)


Started GET "/bonuses?project=FRESH" for ::1 at 2025-08-12 23:43:27 +0300
Processing by BonusesController#index as HTML
  Parameters: {"project" => "FRESH"}
  [1m[36mBonus Count (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" WHERE "bonuses"."project" = 'FRESH' /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:50:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."project" = 'FRESH' LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."project" = 'FRESH' ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (64, 45, 26, 3) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (64, 45, 26, 3) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (64, 45, 26, 3) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (64, 45, 26, 3) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.4ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (64, 45, 26, 3) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.2ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (64, 45, 26, 3) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 19.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 20.9ms | GC: 0.0ms)
Completed 200 OK in 33ms (Views: 20.2ms | ActiveRecord: 1.5ms (9 queries, 0 cached) | GC: 0.0ms)


Started GET "/bonuses?project=ROX" for ::1 at 2025-08-12 23:43:28 +0300
Processing by BonusesController#index as HTML
  Parameters: {"project" => "ROX"}
  [1m[36mBonus Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" WHERE "bonuses"."project" = 'ROX' /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:50:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."project" = 'ROX' LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.1ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."project" = 'ROX' ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (63, 44, 25, 2) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (63, 44, 25, 2) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (63, 44, 25, 2) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.2ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (63, 44, 25, 2) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.2ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (63, 44, 25, 2) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (63, 44, 25, 2) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 21.5ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 23.9ms | GC: 0.0ms)
Completed 200 OK in 38ms (Views: 23.3ms | ActiveRecord: 1.2ms (9 queries, 0 cached) | GC: 0.0ms)


Started GET "/bonuses?project=FRESH" for ::1 at 2025-08-12 23:43:28 +0300
Processing by BonusesController#index as HTML
  Parameters: {"project" => "FRESH"}
  [1m[36mBonus Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" WHERE "bonuses"."project" = 'FRESH' /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:50:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."project" = 'FRESH' LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."project" = 'FRESH' ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (64, 45, 26, 3) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.4ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (64, 45, 26, 3) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.2ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (64, 45, 26, 3) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.2ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (64, 45, 26, 3) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (64, 45, 26, 3) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (64, 45, 26, 3) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 37.0ms | GC: 4.6ms)
  Rendered layout layouts/application.html.erb (Duration: 38.4ms | GC: 4.6ms)
Completed 200 OK in 58ms (Views: 37.7ms | ActiveRecord: 1.6ms (9 queries, 0 cached) | GC: 4.6ms)


Started GET "/" for ::1 at 2025-08-12 23:44:48 +0300
Processing by BonusesController#index as HTML
  [1m[36mBonus Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:50:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.2ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 91.4ms | GC: 3.9ms)
  Rendered layout layouts/application.html.erb (Duration: 98.4ms | GC: 3.9ms)
Completed 200 OK in 124ms (Views: 94.0ms | ActiveRecord: 6.5ms (9 queries, 0 cached) | GC: 4.5ms)


Started GET "/bonuses?project=GIZBO" for ::1 at 2025-08-12 23:44:51 +0300
Processing by BonusesController#index as HTML
  Parameters: {"project" => "GIZBO"}
  [1m[36mBonus Count (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" WHERE "bonuses"."project" = 'GIZBO' /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:50:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."project" = 'GIZBO' LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."project" = 'GIZBO' ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (74, 55, 36) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (74, 55, 36) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (74, 55, 36) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (74, 55, 36) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (74, 55, 36) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.2ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (74, 55, 36) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 28.6ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 30.1ms | GC: 0.0ms)
Completed 200 OK in 55ms (Views: 30.2ms | ActiveRecord: 1.6ms (9 queries, 0 cached) | GC: 0.0ms)


Started GET "/bonuses?project=VOLNA" for ::1 at 2025-08-12 23:45:02 +0300
Processing by BonusesController#index as HTML
  Parameters: {"project" => "VOLNA"}
  [1m[36mBonus Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" WHERE "bonuses"."project" = 'VOLNA' /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:50:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."project" = 'VOLNA' LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."project" = 'VOLNA' ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.2ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.8ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.2ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 18.5ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 20.2ms | GC: 0.0ms)
Completed 200 OK in 52ms (Views: 19.9ms | ActiveRecord: 1.9ms (9 queries, 0 cached) | GC: 0.0ms)


Started GET "/bonuses" for ::1 at 2025-08-12 23:45:04 +0300
Processing by BonusesController#index as HTML
  [1m[36mBonus Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:50:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.4ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.3ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.2ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.2ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.9ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 53.2ms | GC: 8.3ms)
  Rendered layout layouts/application.html.erb (Duration: 55.7ms | GC: 8.3ms)
Completed 200 OK in 74ms (Views: 54.5ms | ActiveRecord: 2.2ms (9 queries, 0 cached) | GC: 8.3ms)


Started GET "/bonuses?project=LEGZO" for ::1 at 2025-08-12 23:45:04 +0300
Processing by BonusesController#index as HTML
  Parameters: {"project" => "LEGZO"}
  [1m[36mBonus Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" WHERE "bonuses"."project" = 'LEGZO' /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:50:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."project" = 'LEGZO' LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.4ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."project" = 'LEGZO' ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.2ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (68, 49, 30) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (68, 49, 30) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.2ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (68, 49, 30) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.2ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (68, 49, 30) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.2ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (68, 49, 30) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.2ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (68, 49, 30) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 30.1ms | GC: 1.8ms)
  Rendered layout layouts/application.html.erb (Duration: 32.5ms | GC: 2.3ms)
Completed 200 OK in 48ms (Views: 31.3ms | ActiveRecord: 1.7ms (9 queries, 0 cached) | GC: 2.3ms)


Started GET "/bonuses?project=ROX" for ::1 at 2025-08-12 23:45:08 +0300
Processing by BonusesController#index as HTML
  Parameters: {"project" => "ROX"}
  [1m[36mBonus Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" WHERE "bonuses"."project" = 'ROX' /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:50:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."project" = 'ROX' LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."project" = 'ROX' ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (63, 44, 25, 2) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (63, 44, 25, 2) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (63, 44, 25, 2) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.2ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (63, 44, 25, 2) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (1.9ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (63, 44, 25, 2) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.2ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (63, 44, 25, 2) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 31.1ms | GC: 1.5ms)
  Rendered layout layouts/application.html.erb (Duration: 35.0ms | GC: 2.0ms)
Completed 200 OK in 52ms (Views: 33.9ms | ActiveRecord: 3.0ms (9 queries, 0 cached) | GC: 2.0ms)


Started GET "/" for ::1 at 2025-08-12 23:47:01 +0300
Processing by BonusesController#index as HTML
  [1m[36mBonus Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:50:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.3ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.2ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.8ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 79.8ms | GC: 7.7ms)
  Rendered layout layouts/application.html.erb (Duration: 88.2ms | GC: 8.5ms)
Completed 200 OK in 114ms (Views: 85.6ms | ActiveRecord: 5.8ms (9 queries, 0 cached) | GC: 9.4ms)


Started GET "/assets/controllers/projects_dropdown_controller-da608c6d.js" for ::1 at 2025-08-12 23:47:01 +0300
Started GET "/bonuses?project=VOLNA" for ::1 at 2025-08-12 23:47:12 +0300
Processing by BonusesController#index as HTML
  Parameters: {"project" => "VOLNA"}
  [1m[36mBonus Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" WHERE "bonuses"."project" = 'VOLNA' /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:50:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."project" = 'VOLNA' LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.1ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."project" = 'VOLNA' ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 14.7ms | GC: 1.0ms)
  Rendered layout layouts/application.html.erb (Duration: 17.1ms | GC: 1.6ms)
Completed 200 OK in 36ms (Views: 18.0ms | ActiveRecord: 0.9ms (9 queries, 0 cached) | GC: 1.6ms)


Started GET "/bonuses?type=&status=&search=&project=ROX&dsl_tag=&commit=Filter" for ::1 at 2025-08-12 23:47:40 +0300
Processing by BonusesController#index as HTML
  Parameters: {"type" => "", "status" => "", "search" => "", "project" => "ROX", "dsl_tag" => "", "commit" => "Filter"}
  [1m[36mBonus Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" WHERE "bonuses"."project" = 'ROX' /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:50:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."project" = 'ROX' LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."project" = 'ROX' ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.4ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (63, 44, 25, 2) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (63, 44, 25, 2) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.4ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (63, 44, 25, 2) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (63, 44, 25, 2) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (63, 44, 25, 2) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (63, 44, 25, 2) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 28.7ms | GC: 1.4ms)
  Rendered layout layouts/application.html.erb (Duration: 31.3ms | GC: 1.7ms)
Completed 200 OK in 48ms (Views: 31.3ms | ActiveRecord: 1.6ms (9 queries, 0 cached) | GC: 1.7ms)


Started GET "/bonuses?project=FRESH" for ::1 at 2025-08-12 23:47:54 +0300
Processing by BonusesController#index as HTML
  Parameters: {"project" => "FRESH"}
  [1m[36mBonus Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" WHERE "bonuses"."project" = 'FRESH' /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:50:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."project" = 'FRESH' LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."project" = 'FRESH' ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (64, 45, 26, 3) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (64, 45, 26, 3) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (64, 45, 26, 3) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (64, 45, 26, 3) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (64, 45, 26, 3) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (64, 45, 26, 3) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 17.5ms | GC: 0.7ms)
  Rendered layout layouts/application.html.erb (Duration: 23.3ms | GC: 0.7ms)
Completed 200 OK in 50ms (Views: 23.0ms | ActiveRecord: 1.1ms (9 queries, 0 cached) | GC: 0.7ms)


Started GET "/bonuses?project=ROX" for ::1 at 2025-08-12 23:48:03 +0300
Processing by BonusesController#index as HTML
  Parameters: {"project" => "ROX"}
  [1m[36mBonus Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" WHERE "bonuses"."project" = 'ROX' /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:50:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."project" = 'ROX' LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.3ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."project" = 'ROX' ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.2ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (63, 44, 25, 2) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (63, 44, 25, 2) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (63, 44, 25, 2) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (63, 44, 25, 2) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (63, 44, 25, 2) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (63, 44, 25, 2) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 21.3ms | GC: 0.4ms)
  Rendered layout layouts/application.html.erb (Duration: 23.8ms | GC: 0.6ms)
Completed 200 OK in 36ms (Views: 22.9ms | ActiveRecord: 1.4ms (9 queries, 0 cached) | GC: 0.6ms)


Started GET "/assets/controllers/projects_dropdown_controller-da608c6d.js" for ::1 at 2025-08-12 23:48:03 +0300
Started GET "/bonuses?project=SOL" for ::1 at 2025-08-12 23:48:04 +0300
Processing by BonusesController#index as HTML
  Parameters: {"project" => "SOL"}
  [1m[36mBonus Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" WHERE "bonuses"."project" = 'SOL' /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:50:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."project" = 'SOL' LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.3ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."project" = 'SOL' ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.6ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (65, 46, 27, 4) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (65, 46, 27, 4) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (65, 46, 27, 4) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (65, 46, 27, 4) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (65, 46, 27, 4) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (65, 46, 27, 4) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 23.0ms | GC: 0.5ms)
  Rendered layout layouts/application.html.erb (Duration: 26.0ms | GC: 0.7ms)
Completed 200 OK in 45ms (Views: 25.2ms | ActiveRecord: 1.7ms (9 queries, 0 cached) | GC: 0.7ms)


Started GET "/" for ::1 at 2025-08-12 23:50:05 +0300
Processing by BonusesController#index as HTML
  [1m[36mBonus Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:50:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.3ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.2ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.2ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 65.0ms | GC: 6.2ms)
  Rendered layout layouts/application.html.erb (Duration: 69.2ms | GC: 6.7ms)
Completed 200 OK in 109ms (Views: 66.8ms | ActiveRecord: 4.9ms (9 queries, 0 cached) | GC: 13.2ms)


Started GET "/assets/controllers/projects_dropdown_controller-5a40a5ea.js" for ::1 at 2025-08-12 23:50:05 +0300
Started GET "/bonuses?project=VOLNA" for ::1 at 2025-08-12 23:50:13 +0300
Processing by BonusesController#index as HTML
  Parameters: {"project" => "VOLNA"}
  [1m[36mBonus Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" WHERE "bonuses"."project" = 'VOLNA' /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:50:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."project" = 'VOLNA' LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."project" = 'VOLNA' ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.2ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.2ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 25.9ms | GC: 0.4ms)
  Rendered layout layouts/application.html.erb (Duration: 29.7ms | GC: 0.4ms)
Completed 200 OK in 58ms (Views: 31.5ms | ActiveRecord: 1.3ms (9 queries, 0 cached) | GC: 0.4ms)


Started GET "/" for ::1 at 2025-08-12 23:50:46 +0300
Processing by BonusesController#index as HTML
  [1m[36mBonus Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:50:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (5.2ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.3ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (1.2ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.2ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 32.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 38.1ms | GC: 0.0ms)
Completed 200 OK in 66ms (Views: 31.4ms | ActiveRecord: 7.4ms (9 queries, 0 cached) | GC: 0.0ms)


Started GET "/assets/controllers/projects_dropdown_controller-a8ce7e7e.js" for ::1 at 2025-08-12 23:50:46 +0300
Started GET "/bonuses?project=VOLNA" for ::1 at 2025-08-12 23:50:54 +0300
Processing by BonusesController#index as HTML
  Parameters: {"project" => "VOLNA"}
  [1m[36mBonus Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" WHERE "bonuses"."project" = 'VOLNA' /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:50:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."project" = 'VOLNA' LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.1ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."project" = 'VOLNA' ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.3ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.2ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 35.3ms | GC: 7.3ms)
  Rendered layout layouts/application.html.erb (Duration: 39.2ms | GC: 7.8ms)
Completed 200 OK in 68ms (Views: 38.5ms | ActiveRecord: 1.2ms (9 queries, 0 cached) | GC: 7.8ms)


Started GET "/" for ::1 at 2025-08-12 23:51:20 +0300
Processing by BonusesController#index as HTML
  [1m[36mBonus Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:50:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.3ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.2ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.2ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.2ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 19.1ms | GC: 1.4ms)
  Rendered layout layouts/application.html.erb (Duration: 20.6ms | GC: 1.4ms)
Completed 200 OK in 32ms (Views: 19.6ms | ActiveRecord: 1.5ms (9 queries, 0 cached) | GC: 2.0ms)


Started GET "/bonuses?project=SOL" for ::1 at 2025-08-12 23:51:20 +0300
Processing by BonusesController#index as HTML
  Parameters: {"project" => "SOL"}
  [1m[36mBonus Count (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" WHERE "bonuses"."project" = 'SOL' /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:50:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."project" = 'SOL' LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.3ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."project" = 'SOL' ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.2ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (65, 46, 27, 4) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.2ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (65, 46, 27, 4) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.2ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (65, 46, 27, 4) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (65, 46, 27, 4) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.2ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (65, 46, 27, 4) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (65, 46, 27, 4) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 16.8ms | GC: 0.8ms)
  Rendered layout layouts/application.html.erb (Duration: 19.2ms | GC: 0.8ms)
Completed 200 OK in 38ms (Views: 18.5ms | ActiveRecord: 1.8ms (9 queries, 0 cached) | GC: 0.8ms)


Started GET "/assets/controllers/projects_dropdown_controller-a8ce7e7e.js" for ::1 at 2025-08-12 23:51:20 +0300
Started GET "/" for ::1 at 2025-08-12 23:51:21 +0300
Processing by BonusesController#index as HTML
  [1m[36mBonus Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:50:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (1.6ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.2ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 34.7ms | GC: 1.2ms)
  Rendered layout layouts/application.html.erb (Duration: 37.6ms | GC: 1.2ms)
Completed 200 OK in 55ms (Views: 36.2ms | ActiveRecord: 2.6ms (9 queries, 0 cached) | GC: 1.2ms)


Started GET "/bonuses?project=IZZI" for ::1 at 2025-08-12 23:51:33 +0300
Processing by BonusesController#index as HTML
  Parameters: {"project" => "IZZI"}
  [1m[36mBonus Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" WHERE "bonuses"."project" = 'IZZI' /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:50:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."project" = 'IZZI' LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."project" = 'IZZI' ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (67, 48, 29) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (67, 48, 29) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (67, 48, 29) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.4ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (67, 48, 29) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (67, 48, 29) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.6ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (67, 48, 29) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 80.6ms | GC: 9.5ms)
Started GET "/bonuses?project=JET" for ::1 at 2025-08-12 23:51:33 +0300
  Rendered layout layouts/application.html.erb (Duration: 91.2ms | GC: 10.1ms)
Completed 200 OK in 124ms (Views: 87.0ms | ActiveRecord: 6.6ms (9 queries, 0 cached) | GC: 15.8ms)


Processing by BonusesController#index as HTML
  Parameters: {"project" => "JET"}
  [1m[36mBonus Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" WHERE "bonuses"."project" = 'JET' /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:50:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."project" = 'JET' LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.1ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."project" = 'JET' ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (66, 47, 28, 5) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (66, 47, 28, 5) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (66, 47, 28, 5) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (66, 47, 28, 5) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (66, 47, 28, 5) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (66, 47, 28, 5) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 65.9ms | GC: 1.9ms)
  Rendered layout layouts/application.html.erb (Duration: 71.3ms | GC: 1.9ms)
Completed 200 OK in 97ms (Views: 68.9ms | ActiveRecord: 5.3ms (9 queries, 0 cached) | GC: 2.5ms)


Started GET "/heatmap" for ::1 at 2025-08-12 23:51:37 +0300
Processing by HeatmapController#index as HTML
  [1m[36mBonus Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", DATE(availability_start_date) AS "date_availability_start_date" FROM "bonuses" WHERE "bonuses"."availability_start_date" BETWEEN '2025-08-01 00:00:00' AND '2025-08-31 23:59:59.999999' GROUP BY DATE(availability_start_date) /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:43:in 'HeatmapController#generate_heatmap_data'
  [1m[36mBonus Pluck (0.1ms)[0m  [1m[34mSELECT DISTINCT "bonuses"."bonus_type" FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='heatmap'*/[0m
  ↳ app/controllers/heatmap_controller.rb:16:in 'HeatmapController#index'
  Rendering layout layouts/application.html.erb
  Rendering heatmap/index.html.erb within layouts/application
  Rendered heatmap/index.html.erb within layouts/application (Duration: 6.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 9.7ms | GC: 0.0ms)
Completed 200 OK in 27ms (Views: 11.2ms | ActiveRecord: 0.3ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/" for ::1 at 2025-08-12 23:51:52 +0300
Processing by BonusesController#index as HTML
  [1m[36mBonus Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:50:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.9ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.2ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 46.3ms | GC: 7.6ms)
  Rendered layout layouts/application.html.erb (Duration: 48.8ms | GC: 8.4ms)
Completed 200 OK in 66ms (Views: 47.6ms | ActiveRecord: 2.0ms (9 queries, 0 cached) | GC: 8.4ms)


Started GET "/bonuses?project=VOLNA" for ::1 at 2025-08-12 23:52:03 +0300
Processing by BonusesController#index as HTML
  Parameters: {"project" => "VOLNA"}
  [1m[36mBonus Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" WHERE "bonuses"."project" = 'VOLNA' /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:50:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."project" = 'VOLNA' LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.1ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."project" = 'VOLNA' ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.4ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 29.1ms | GC: 1.3ms)
  Rendered layout layouts/application.html.erb (Duration: 32.4ms | GC: 1.9ms)
Completed 200 OK in 52ms (Views: 31.9ms | ActiveRecord: 1.4ms (9 queries, 0 cached) | GC: 1.9ms)


Started GET "/" for ::1 at 2025-08-12 23:52:14 +0300
Processing by BonusesController#index as HTML
  [1m[36mBonus Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:50:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.2ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.2ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (4.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.2ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 46.0ms | GC: 2.2ms)
  Rendered layout layouts/application.html.erb (Duration: 54.0ms | GC: 2.2ms)
Completed 200 OK in 74ms (Views: 49.4ms | ActiveRecord: 5.3ms (9 queries, 0 cached) | GC: 2.2ms)


Started GET "/bonuses?project=VOLNA" for ::1 at 2025-08-12 23:52:21 +0300
Processing by BonusesController#index as HTML
  Parameters: {"project" => "VOLNA"}
  [1m[36mBonus Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" WHERE "bonuses"."project" = 'VOLNA' /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:50:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."project" = 'VOLNA' LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.1ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."project" = 'VOLNA' ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 18.0ms | GC: 0.4ms)
  Rendered layout layouts/application.html.erb (Duration: 20.1ms | GC: 0.4ms)
Completed 200 OK in 39ms (Views: 19.7ms | ActiveRecord: 0.9ms (9 queries, 0 cached) | GC: 0.4ms)


Started GET "/" for ::1 at 2025-08-12 23:52:57 +0300
Processing by BonusesController#index as HTML
  [1m[36mBonus Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:50:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (1.6ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.7ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.2ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 30.1ms | GC: 0.9ms)
  Rendered layout layouts/application.html.erb (Duration: 35.9ms | GC: 1.1ms)
Completed 200 OK in 65ms (Views: 33.8ms | ActiveRecord: 3.2ms (9 queries, 0 cached) | GC: 1.4ms)


Started GET "/assets/controllers/projects_dropdown_controller-d494c12f.js" for ::1 at 2025-08-12 23:52:57 +0300
Started GET "/bonuses?project=VOLNA" for ::1 at 2025-08-12 23:53:07 +0300
Processing by BonusesController#index as HTML
  Parameters: {"project" => "VOLNA"}
  [1m[36mBonus Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" WHERE "bonuses"."project" = 'VOLNA' /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:50:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."project" = 'VOLNA' LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.1ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."project" = 'VOLNA' ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 17.8ms | GC: 1.1ms)
  Rendered layout layouts/application.html.erb (Duration: 21.1ms | GC: 1.1ms)
Completed 200 OK in 42ms (Views: 21.7ms | ActiveRecord: 0.9ms (9 queries, 0 cached) | GC: 1.5ms)


Started GET "/bonuses?project=ROX" for ::1 at 2025-08-12 23:53:39 +0300
Processing by BonusesController#index as HTML
  Parameters: {"project" => "ROX"}
  [1m[36mBonus Count (2.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" WHERE "bonuses"."project" = 'ROX' /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:50:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."project" = 'ROX' LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.1ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."project" = 'ROX' ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.3ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (63, 44, 25, 2) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (63, 44, 25, 2) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (63, 44, 25, 2) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (63, 44, 25, 2) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (63, 44, 25, 2) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (63, 44, 25, 2) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 14.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 15.7ms | GC: 0.0ms)
Completed 200 OK in 36ms (Views: 16.7ms | ActiveRecord: 3.6ms (9 queries, 0 cached) | GC: 0.0ms)


Started GET "/" for ::1 at 2025-08-12 23:54:05 +0300
Processing by BonusesController#index as HTML
  [1m[36mBonus Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:50:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.2ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.4ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.2ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.2ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.2ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.2ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 37.8ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 40.6ms | GC: 0.0ms)
Completed 200 OK in 58ms (Views: 39.6ms | ActiveRecord: 1.6ms (9 queries, 0 cached) | GC: 0.0ms)


Started GET "/assets/controllers/projects_dropdown_controller-67dc42dc.js" for ::1 at 2025-08-12 23:54:05 +0300
Started GET "/bonuses?project=VOLNA" for ::1 at 2025-08-12 23:54:14 +0300
Processing by BonusesController#index as HTML
  Parameters: {"project" => "VOLNA"}
  [1m[36mBonus Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" WHERE "bonuses"."project" = 'VOLNA' /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:50:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."project" = 'VOLNA' LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.1ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."project" = 'VOLNA' ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.2ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.2ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 22.0ms | GC: 4.5ms)
  Rendered layout layouts/application.html.erb (Duration: 24.7ms | GC: 4.5ms)
Completed 200 OK in 46ms (Views: 25.1ms | ActiveRecord: 1.1ms (9 queries, 0 cached) | GC: 4.5ms)


Started GET "/" for ::1 at 2025-08-12 23:54:45 +0300
Processing by BonusesController#index as HTML
  [1m[36mBonus Count (4.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:50:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.3ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.6ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (2.3ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 41.4ms | GC: 2.3ms)
  Rendered layout layouts/application.html.erb (Duration: 47.5ms | GC: 2.8ms)
Completed 200 OK in 78ms (Views: 44.7ms | ActiveRecord: 8.0ms (9 queries, 0 cached) | GC: 4.6ms)


Started GET "/assets/controllers/projects_dropdown_controller-53afbcf1.js" for ::1 at 2025-08-12 23:54:46 +0300
Started GET "/bonuses?project=VOLNA" for ::1 at 2025-08-12 23:55:00 +0300
Processing by BonusesController#index as HTML
  Parameters: {"project" => "VOLNA"}
  [1m[36mBonus Count (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" WHERE "bonuses"."project" = 'VOLNA' /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:50:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (1.8ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."project" = 'VOLNA' LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."project" = 'VOLNA' ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.2ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 23.8ms | GC: 0.6ms)
  Rendered layout layouts/application.html.erb (Duration: 26.6ms | GC: 0.6ms)
Completed 200 OK in 39ms (Views: 24.7ms | ActiveRecord: 3.2ms (9 queries, 0 cached) | GC: 0.6ms)


Started GET "/bonuses?project=JET" for ::1 at 2025-08-12 23:55:39 +0300
Processing by BonusesController#index as HTML
  Parameters: {"project" => "JET"}
  [1m[36mBonus Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" WHERE "bonuses"."project" = 'JET' /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:50:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."project" = 'JET' LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.1ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."project" = 'JET' ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (66, 47, 28, 5) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.2ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (66, 47, 28, 5) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (66, 47, 28, 5) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (66, 47, 28, 5) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (66, 47, 28, 5) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.2ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (66, 47, 28, 5) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 22.1ms | GC: 0.4ms)
  Rendered layout layouts/application.html.erb (Duration: 24.3ms | GC: 0.4ms)
Completed 200 OK in 38ms (Views: 24.2ms | ActiveRecord: 1.1ms (9 queries, 0 cached) | GC: 0.4ms)


Started GET "/assets/controllers/projects_dropdown_controller-53afbcf1.js" for ::1 at 2025-08-12 23:55:39 +0300
Started GET "/bonuses?project=JET" for ::1 at 2025-08-12 23:55:43 +0300
Processing by BonusesController#index as HTML
  Parameters: {"project" => "JET"}
  [1m[36mBonus Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" WHERE "bonuses"."project" = 'JET' /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:50:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."project" = 'JET' LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.3ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."project" = 'JET' ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (66, 47, 28, 5) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.5ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (66, 47, 28, 5) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.4ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (66, 47, 28, 5) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (66, 47, 28, 5) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (66, 47, 28, 5) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.2ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (66, 47, 28, 5) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 21.7ms | GC: 0.4ms)
  Rendered layout layouts/application.html.erb (Duration: 25.6ms | GC: 0.8ms)
Completed 200 OK in 44ms (Views: 24.6ms | ActiveRecord: 2.1ms (9 queries, 0 cached) | GC: 0.8ms)


Started GET "/bonuses" for ::1 at 2025-08-12 23:55:45 +0300
Processing by BonusesController#index as HTML
  [1m[36mBonus Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:50:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.2ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.4ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.2ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.5ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.2ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 37.6ms | GC: 2.7ms)
  Rendered layout layouts/application.html.erb (Duration: 40.9ms | GC: 2.7ms)
Completed 200 OK in 56ms (Views: 39.5ms | ActiveRecord: 2.0ms (9 queries, 0 cached) | GC: 2.7ms)


Started GET "/.well-known/appspecific/com.chrome.devtools.json" for ::1 at 2025-08-12 23:55:54 +0300
  
ActionController::RoutingError (No route matches [GET] "/.well-known/appspecific/com.chrome.devtools.json"):
  
Started GET "/bonuses" for ::1 at 2025-08-12 23:55:56 +0300
Processing by BonusesController#index as HTML
  [1m[36mBonus Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:50:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 26.8ms | GC: 0.6ms)
  Rendered layout layouts/application.html.erb (Duration: 31.2ms | GC: 0.6ms)
Completed 200 OK in 52ms (Views: 31.4ms | ActiveRecord: 1.1ms (9 queries, 0 cached) | GC: 1.1ms)


Started GET "/assets/controllers/projects_dropdown_controller-c9454ce7.js" for ::1 at 2025-08-12 23:55:56 +0300
Started GET "/.well-known/appspecific/com.chrome.devtools.json" for ::1 at 2025-08-12 23:55:56 +0300
  
ActionController::RoutingError (No route matches [GET] "/.well-known/appspecific/com.chrome.devtools.json"):
  
Started GET "/" for ::1 at 2025-08-12 23:55:57 +0300
Processing by BonusesController#index as HTML
  [1m[36mBonus Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:50:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.2ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.2ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.2ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.2ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 23.4ms | GC: 0.5ms)
  Rendered layout layouts/application.html.erb (Duration: 26.2ms | GC: 0.8ms)
Completed 200 OK in 49ms (Views: 25.9ms | ActiveRecord: 1.3ms (9 queries, 0 cached) | GC: 0.8ms)


Started GET "/assets/controllers/projects_dropdown_controller-c9454ce7.js" for ::1 at 2025-08-12 23:55:57 +0300
Started GET "/bonuses" for ::1 at 2025-08-12 23:57:37 +0300
Processing by BonusesController#index as HTML
  [1m[36mBonus Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:50:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.6ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 24.8ms | GC: 0.8ms)
  Rendered layout layouts/application.html.erb (Duration: 31.3ms | GC: 1.2ms)
Completed 200 OK in 47ms (Views: 30.3ms | ActiveRecord: 1.5ms (9 queries, 0 cached) | GC: 1.6ms)


Started GET "/" for ::1 at 2025-08-13 00:00:33 +0300
Processing by BonusesController#index as HTML
  [1m[36mBonus Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:50:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.3ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.7ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.2ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.5ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 122.7ms | GC: 14.8ms)
  Rendered layout layouts/application.html.erb (Duration: 130.9ms | GC: 15.3ms)
Completed 200 OK in 159ms (Views: 124.6ms | ActiveRecord: 11.2ms (9 queries, 0 cached) | GC: 15.3ms)


Started GET "/assets/controllers/projects_dropdown_controller-f13ffc29.js" for ::1 at 2025-08-13 00:00:33 +0300
Started GET "/bonuses?project=VOLNA" for ::1 at 2025-08-13 00:00:43 +0300
Processing by BonusesController#index as HTML
  Parameters: {"project" => "VOLNA"}
  [1m[36mBonus Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" WHERE "bonuses"."project" = 'VOLNA' /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:50:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."project" = 'VOLNA' LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."project" = 'VOLNA' ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.6ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 21.0ms | GC: 0.6ms)
  Rendered layout layouts/application.html.erb (Duration: 24.1ms | GC: 0.6ms)
Completed 200 OK in 43ms (Views: 23.4ms | ActiveRecord: 1.6ms (9 queries, 0 cached) | GC: 0.6ms)


Started GET "/bonuses?project=ROX" for ::1 at 2025-08-13 00:00:54 +0300
Processing by BonusesController#index as HTML
  Parameters: {"project" => "ROX"}
  [1m[36mBonus Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" WHERE "bonuses"."project" = 'ROX' /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:50:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."project" = 'ROX' LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."project" = 'ROX' ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.2ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (63, 44, 25, 2) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (63, 44, 25, 2) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (63, 44, 25, 2) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.2ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (63, 44, 25, 2) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.2ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (63, 44, 25, 2) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (63, 44, 25, 2) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 30.2ms | GC: 0.5ms)
  Rendered layout layouts/application.html.erb (Duration: 31.8ms | GC: 0.5ms)
Completed 200 OK in 57ms (Views: 31.0ms | ActiveRecord: 1.3ms (9 queries, 0 cached) | GC: 0.7ms)


Started GET "/bonuses?project=FRESH" for ::1 at 2025-08-13 00:01:03 +0300
Processing by BonusesController#index as HTML
  Parameters: {"project" => "FRESH"}
  [1m[36mBonus Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" WHERE "bonuses"."project" = 'FRESH' /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:50:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."project" = 'FRESH' LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.4ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."project" = 'FRESH' ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.2ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (64, 45, 26, 3) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.2ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (64, 45, 26, 3) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.2ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (64, 45, 26, 3) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (64, 45, 26, 3) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (64, 45, 26, 3) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (64, 45, 26, 3) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 22.5ms | GC: 0.3ms)
  Rendered layout layouts/application.html.erb (Duration: 24.1ms | GC: 0.5ms)
Completed 200 OK in 41ms (Views: 24.4ms | ActiveRecord: 1.5ms (9 queries, 0 cached) | GC: 0.7ms)


Started GET "/bonuses" for ::1 at 2025-08-13 00:01:06 +0300
Processing by BonusesController#index as HTML
  [1m[36mBonus Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:50:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.3ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.2ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 26.9ms | GC: 1.4ms)
  Rendered layout layouts/application.html.erb (Duration: 29.9ms | GC: 1.4ms)
Completed 200 OK in 44ms (Views: 29.0ms | ActiveRecord: 1.3ms (9 queries, 0 cached) | GC: 1.4ms)


Started GET "/assets/controllers/projects_dropdown_controller-f13ffc29.js" for ::1 at 2025-08-13 00:01:06 +0300
Started GET "/" for ::1 at 2025-08-13 00:01:07 +0300
Processing by BonusesController#index as HTML
  [1m[36mBonus Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:50:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.2ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.2ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.2ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 25.5ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 28.3ms | GC: 0.0ms)
Completed 200 OK in 45ms (Views: 27.7ms | ActiveRecord: 1.3ms (9 queries, 0 cached) | GC: 0.0ms)


Started GET "/bonuses?project=ROX" for ::1 at 2025-08-13 00:01:09 +0300
Processing by BonusesController#index as HTML
  Parameters: {"project" => "ROX"}
  [1m[36mBonus Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" WHERE "bonuses"."project" = 'ROX' /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:50:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."project" = 'ROX' LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.1ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."project" = 'ROX' ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.2ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (63, 44, 25, 2) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.2ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (63, 44, 25, 2) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (63, 44, 25, 2) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (63, 44, 25, 2) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (63, 44, 25, 2) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (63, 44, 25, 2) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 26.7ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 29.6ms | GC: 0.0ms)
Completed 200 OK in 51ms (Views: 29.2ms | ActiveRecord: 1.1ms (9 queries, 0 cached) | GC: 0.0ms)


Started GET "/bonuses" for ::1 at 2025-08-13 00:01:10 +0300
Processing by BonusesController#index as HTML
  [1m[36mBonus Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:50:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.2ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.2ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.2ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.5ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 56.6ms | GC: 5.3ms)
  Rendered layout layouts/application.html.erb (Duration: 64.4ms | GC: 6.0ms)
Completed 200 OK in 81ms (Views: 62.8ms | ActiveRecord: 2.9ms (9 queries, 0 cached) | GC: 6.0ms)


Started GET "/bonuses" for ::1 at 2025-08-13 00:01:10 +0300
Processing by BonusesController#index as HTML
  [1m[36mBonus Count (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:50:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.4ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.7ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.3ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (1.6ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.2ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 46.9ms | GC: 2.5ms)
  Rendered layout layouts/application.html.erb (Duration: 52.4ms | GC: 2.5ms)
Completed 200 OK in 80ms (Views: 51.7ms | ActiveRecord: 4.6ms (9 queries, 0 cached) | GC: 2.5ms)


Started GET "/bonuses?project=VOLNA" for ::1 at 2025-08-13 00:01:10 +0300
Processing by BonusesController#index as HTML
  Parameters: {"project" => "VOLNA"}
  [1m[36mBonus Count (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" WHERE "bonuses"."project" = 'VOLNA' /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:50:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."project" = 'VOLNA' LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (1.1ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."project" = 'VOLNA' ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.4ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.2ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.1ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.2ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.2ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.2ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (62, 43, 24, 1) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 24.6ms | GC: 0.5ms)
  Rendered layout layouts/application.html.erb (Duration: 33.7ms | GC: 1.3ms)
Completed 200 OK in 52ms (Views: 32.5ms | ActiveRecord: 2.6ms (9 queries, 0 cached) | GC: 1.8ms)


Started GET "/bonuses?project=LEGZO" for ::1 at 2025-08-13 00:01:11 +0300
Processing by BonusesController#index as HTML
  Parameters: {"project" => "LEGZO"}
  [1m[36mBonus Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" WHERE "bonuses"."project" = 'LEGZO' /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:50:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."project" = 'LEGZO' LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.2ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."project" = 'LEGZO' ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (68, 49, 30) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.3ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (68, 49, 30) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.2ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (68, 49, 30) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (68, 49, 30) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (68, 49, 30) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (68, 49, 30) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 21.5ms | GC: 1.0ms)
  Rendered layout layouts/application.html.erb (Duration: 23.9ms | GC: 1.0ms)
Completed 200 OK in 40ms (Views: 23.2ms | ActiveRecord: 1.4ms (9 queries, 0 cached) | GC: 1.0ms)


Started GET "/bonuses?project=STARDA" for ::1 at 2025-08-13 00:01:11 +0300
Processing by BonusesController#index as HTML
  Parameters: {"project" => "STARDA"}
  [1m[36mBonus Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "bonuses" WHERE "bonuses"."project" = 'STARDA' /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/controllers/bonuses_controller.rb:50:in 'BonusesController#index'
  Rendering layout layouts/application.html.erb
  Rendering bonuses/index.html.erb within layouts/application
  [1m[36mBonus Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bonuses" WHERE "bonuses"."project" = 'STARDA' LIMIT 1 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:92
  [1m[36mBonus Load (0.1ms)[0m  [1m[34mSELECT "bonuses".* FROM "bonuses" WHERE "bonuses"."project" = 'STARDA' ORDER BY "bonuses"."id" DESC LIMIT 25 OFFSET 0 /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mDepositBonus Load (0.1ms)[0m  [1m[34mSELECT "deposit_bonuses".* FROM "deposit_bonuses" WHERE "deposit_bonuses"."bonus_id" IN (69, 50, 31) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mInputCouponBonus Load (0.1ms)[0m  [1m[34mSELECT "input_coupon_bonuses".* FROM "input_coupon_bonuses" WHERE "input_coupon_bonuses"."bonus_id" IN (69, 50, 31) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mManualBonus Load (0.6ms)[0m  [1m[34mSELECT "manual_bonuses".* FROM "manual_bonuses" WHERE "manual_bonuses"."bonus_id" IN (69, 50, 31) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mCollectBonus Load (0.1ms)[0m  [1m[34mSELECT "collect_bonuses".* FROM "collect_bonuses" WHERE "collect_bonuses"."bonus_id" IN (69, 50, 31) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mGroupsUpdateBonus Load (0.1ms)[0m  [1m[34mSELECT "groups_update_bonuses".* FROM "groups_update_bonuses" WHERE "groups_update_bonuses"."bonus_id" IN (69, 50, 31) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  [1m[36mSchedulerBonus Load (0.1ms)[0m  [1m[34mSELECT "scheduler_bonuses".* FROM "scheduler_bonuses" WHERE "scheduler_bonuses"."bonus_id" IN (69, 50, 31) /*action='index',application='MbsPromoRetention',controller='bonuses'*/[0m
  ↳ app/views/bonuses/index.html.erb:111
  Rendered bonuses/index.html.erb within layouts/application (Duration: 18.8ms | GC: 0.8ms)
  Rendered layout layouts/application.html.erb (Duration: 21.4ms | GC: 0.8ms)
Completed 200 OK in 37ms (Views: 20.5ms | ActiveRecord: 1.5ms (9 queries, 0 cached) | GC: 1.1ms)


